<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚úÖ ATLAS COMPONENTS WORKING - Final Test</title>
    <style>
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }

        .test-container {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }

        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .test-button {
            background: #0078d4;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
        }

        .test-button:hover {
            background: #106ebe;
        }

        .test-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .output {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>

<body>
    <div class="test-container">
        <h1>üéØ FINAL ATLAS COMPONENTS TEST</h1>
        <p><strong>Testing your BULLETPROOF Enhanced Wireframe Endpoint</strong></p>

        <div class="status info">
            ‚ÑπÔ∏è This test will verify that your Atlas Hero and Module components are working perfectly in the wireframes!
        </div>

        <button id="testButton" class="test-button" onclick="testEnhancedEndpoint()">
            üöÄ Test Enhanced Endpoint with Atlas Components
        </button>

        <div id="output" class="output" style="display: none;"></div>
    </div>

    <script>
        async function testEnhancedEndpoint() {
            const button = document.getElementById('testButton');
            const output = document.getElementById('output');

            button.disabled = true;
            button.textContent = '‚è≥ Testing...';
            output.style.display = 'block';
            output.textContent = 'üîÑ Starting test...\n';

            try {
                output.textContent += 'üì° Calling enhanced wireframe endpoint...\n';

                const response = await fetch('http://localhost:7072/api/generateWireframeEnhanced', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        description: 'Microsoft Learn platform with Azure training modules and certification learning paths'
                    })
                });

                output.textContent += `üì° Response status: ${response.status}\n`;

                const result = await response.json();

                if (result.success) {
                    output.textContent += '‚úÖ Enhanced endpoint is WORKING!\n\n';

                    // Count Atlas components
                    const heroCount = (result.html.match(/atlas-hero-figma/g) || []).length;
                    const moduleCount = (result.html.match(/atlas-module-card-figma/g) || []).length;
                    const learningPathCount = (result.html.match(/atlas-learning-path-card-figma/g) || []).length;

                    output.textContent += 'üé® Atlas Components Found:\n';
                    output.textContent += `   Hero Components: ${heroCount}\n`;
                    output.textContent += `   Module Cards: ${moduleCount}\n`;
                    output.textContent += `   Learning Path Cards: ${learningPathCount}\n`;
                    output.textContent += `   Total Atlas Components: ${heroCount + moduleCount + learningPathCount}\n\n`;

                    // Show stats from backend
                    if (result.stats?.atlasComponents) {
                        output.textContent += 'üìä Backend reported stats:\n';
                        output.textContent += JSON.stringify(result.stats.atlasComponents, null, 2) + '\n\n';
                    }

                    if (heroCount >= 1 && moduleCount >= 6 && learningPathCount >= 2) {
                        output.textContent += 'üéâ PERFECT! All Atlas components are working correctly!\n';
                        output.textContent += 'üöÄ YOUR APP IS NOW READY with working Atlas components!\n\n';
                        output.textContent += '‚úÖ You can now generate wireframes and see:\n';
                        output.textContent += '   ‚Ä¢ Atlas Hero components in hero sections\n';
                        output.textContent += '   ‚Ä¢ Atlas Module cards for learning content\n';
                        output.textContent += '   ‚Ä¢ Atlas Learning Path cards\n\n';
                        output.textContent += 'üí° Try generating a wireframe with text like:\n';
                        output.textContent += '   "Microsoft Learn platform for Azure training"\n';
                        output.textContent += '   "Learning hub with certification courses"\n';

                        // Add success status
                        const successDiv = document.createElement('div');
                        successDiv.className = 'status success';
                        successDiv.innerHTML = 'üéâ <strong>SUCCESS!</strong> Atlas components are working perfectly in your wireframes!';
                        document.querySelector('.test-container').appendChild(successDiv);

                    } else {
                        output.textContent += '‚ö†Ô∏è Some Atlas components might be missing\n';
                        output.textContent += 'Expected: Hero ‚â• 1, Modules ‚â• 6, Learning Paths ‚â• 2\n';
                    }

                } else {
                    output.textContent += '‚ùå Enhanced endpoint failed:\n';
                    output.textContent += JSON.stringify(result, null, 2) + '\n';

                    // Add error status
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'status error';
                    errorDiv.innerHTML = '‚ùå <strong>ERROR:</strong> Enhanced endpoint failed. Check the logs above.';
                    document.querySelector('.test-container').appendChild(errorDiv);
                }

            } catch (error) {
                output.textContent += '‚ùå Test failed:\n';
                output.textContent += error.message + '\n';
                output.textContent += error.stack + '\n';

                // Add error status
                const errorDiv = document.createElement('div');
                errorDiv.className = 'status error';
                errorDiv.innerHTML = '‚ùå <strong>CONNECTION ERROR:</strong> Could not connect to backend. Make sure your backend is running on port 7072.';
                document.querySelector('.test-container').appendChild(errorDiv);
            }

            button.disabled = false;
            button.textContent = 'üîÑ Test Again';
        }
    </script>
</body>

</html>