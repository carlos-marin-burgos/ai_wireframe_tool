
Azure Functions Core Tools
Core Tools Version:       4.1.0+7ff2567e43c1ae7471cea7394452c1447661e175 (64-bit)
Function Runtime Version: 4.1040.300.25317

Warning: unable to verify all settings from local.settings.json and function.json files.
[2025-08-21T18:31:09.760Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'dca896d2-0454-4ac6-ad53-74c9fbbeb35b'
[2025-08-21T18:31:09.816Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:31:09.816Z] Host configuration file read:
[2025-08-21T18:31:09.816Z] {
[2025-08-21T18:31:09.816Z]   "version": "2.0",
[2025-08-21T18:31:09.816Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:31:09.816Z]   "logging": {
[2025-08-21T18:31:09.816Z]     "applicationInsights": {
[2025-08-21T18:31:09.816Z]       "samplingSettings": {
[2025-08-21T18:31:09.816Z]         "isEnabled": true,
[2025-08-21T18:31:09.816Z]         "excludedTypes": "Request"
[2025-08-21T18:31:09.816Z]       }
[2025-08-21T18:31:09.816Z]     },
[2025-08-21T18:31:09.816Z]     "logLevel": {
[2025-08-21T18:31:09.816Z]       "default": "Information",
[2025-08-21T18:31:09.816Z]       "Host.Results": "Information",
[2025-08-21T18:31:09.816Z]       "Function": "Information"
[2025-08-21T18:31:09.816Z]     }
[2025-08-21T18:31:09.816Z]   },
[2025-08-21T18:31:09.816Z]   "extensionBundle": {
[2025-08-21T18:31:09.816Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:31:09.816Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:31:09.816Z]   },
[2025-08-21T18:31:09.816Z]   "watchDirectories": [
[2025-08-21T18:31:09.816Z]     "Shared"
[2025-08-21T18:31:09.816Z]   ]
[2025-08-21T18:31:09.816Z] }
[2025-08-21T18:31:09.824Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:31:09.825Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:31:09.825Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:31:09.870Z] Loading functions metadata
[2025-08-21T18:31:09.870Z] Worker indexing is enabled
[2025-08-21T18:31:09.871Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:31:09.871Z] Reading functions metadata (Worker)
[2025-08-21T18:31:10.003Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf connecting on 127.0.0.1:54302
[2025-08-21T18:31:12.101Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received WorkerInitRequest
[2025-08-21T18:31:12.138Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionsMetadataRequest
[2025-08-21T18:31:12.142Z] Reading functions metadata (Host)
[2025-08-21T18:31:12.460Z] 21 functions found (Host)
[2025-08-21T18:31:12.474Z] 21 functions loaded
[2025-08-21T18:31:12.476Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:31:12.476Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:31:12.476Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:31:12.476Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T18:31:12.624Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:31:12.625Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:31:12.626Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin
[2025-08-21T18:31:12.626Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin'.
[2025-08-21T18:31:12.702Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:31:12.702Z] Host configuration file read:
[2025-08-21T18:31:12.702Z] {
[2025-08-21T18:31:12.702Z]   "version": "2.0",
[2025-08-21T18:31:12.702Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:31:12.702Z]   "logging": {
[2025-08-21T18:31:12.702Z]     "applicationInsights": {
[2025-08-21T18:31:12.702Z]       "samplingSettings": {
[2025-08-21T18:31:12.702Z]         "isEnabled": true,
[2025-08-21T18:31:12.702Z]         "excludedTypes": "Request"
[2025-08-21T18:31:12.702Z]       }
[2025-08-21T18:31:12.702Z]     },
[2025-08-21T18:31:12.702Z]     "logLevel": {
[2025-08-21T18:31:12.702Z]       "default": "Information",
[2025-08-21T18:31:12.702Z]       "Host.Results": "Information",
[2025-08-21T18:31:12.702Z]       "Function": "Information"
[2025-08-21T18:31:12.702Z]     }
[2025-08-21T18:31:12.702Z]   },
[2025-08-21T18:31:12.702Z]   "extensionBundle": {
[2025-08-21T18:31:12.702Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:31:12.702Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:31:12.702Z]   },
[2025-08-21T18:31:12.703Z]   "watchDirectories": [
[2025-08-21T18:31:12.703Z]     "Shared"
[2025-08-21T18:31:12.703Z]   ]
[2025-08-21T18:31:12.703Z] }
[2025-08-21T18:31:12.732Z] Starting host metrics provider.
[2025-08-21T18:31:12.801Z] Initializing Warmup Extension.
[2025-08-21T18:31:12.821Z] Initializing Host. OperationId: 'dca896d2-0454-4ac6-ad53-74c9fbbeb35b'.
[2025-08-21T18:31:12.824Z] Host initialization: ConsecutiveErrors=0, StartupCount=1, OperationId=dca896d2-0454-4ac6-ad53-74c9fbbeb35b
[2025-08-21T18:31:12.833Z] LoggerFilterOptions
[2025-08-21T18:31:12.833Z] {
[2025-08-21T18:31:12.833Z]   "MinLevel": "None",
[2025-08-21T18:31:12.833Z]   "Rules": [
[2025-08-21T18:31:12.833Z]     {
[2025-08-21T18:31:12.833Z]       "ProviderName": null,
[2025-08-21T18:31:12.833Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:31:12.833Z]       "LogLevel": "None",
[2025-08-21T18:31:12.833Z]       "Filter": null
[2025-08-21T18:31:12.833Z]     },
[2025-08-21T18:31:12.833Z]     {
[2025-08-21T18:31:12.833Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": "None",
[2025-08-21T18:31:12.834Z]       "Filter": null
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": null,
[2025-08-21T18:31:12.834Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": null,
[2025-08-21T18:31:12.834Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": null,
[2025-08-21T18:31:12.834Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": "Host.Results",
[2025-08-21T18:31:12.834Z]       "LogLevel": "Information",
[2025-08-21T18:31:12.834Z]       "Filter": null
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": "Function",
[2025-08-21T18:31:12.834Z]       "LogLevel": "Information",
[2025-08-21T18:31:12.834Z]       "Filter": null
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": "Information",
[2025-08-21T18:31:12.834Z]       "Filter": null
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": "None",
[2025-08-21T18:31:12.834Z]       "Filter": null
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": null,
[2025-08-21T18:31:12.834Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": null,
[2025-08-21T18:31:12.834Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:31:12.834Z]     }
[2025-08-21T18:31:12.834Z]   ]
[2025-08-21T18:31:12.834Z] }
[2025-08-21T18:31:12.834Z] LoggerFilterOptions
[2025-08-21T18:31:12.834Z] {
[2025-08-21T18:31:12.834Z]   "MinLevel": "None",
[2025-08-21T18:31:12.834Z]   "Rules": [
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:31:12.834Z]       "LogLevel": "None",
[2025-08-21T18:31:12.834Z]       "Filter": null
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": "None",
[2025-08-21T18:31:12.834Z]       "Filter": null
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": null,
[2025-08-21T18:31:12.834Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": null,
[2025-08-21T18:31:12.834Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": null,
[2025-08-21T18:31:12.834Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": "Host.Results",
[2025-08-21T18:31:12.834Z]       "LogLevel": "Information",
[2025-08-21T18:31:12.834Z]       "Filter": null
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": "Function",
[2025-08-21T18:31:12.834Z]       "LogLevel": "Information",
[2025-08-21T18:31:12.834Z]       "Filter": null
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": null,
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.834Z]       "LogLevel": "Information",
[2025-08-21T18:31:12.834Z]       "Filter": null
[2025-08-21T18:31:12.834Z]     },
[2025-08-21T18:31:12.834Z]     {
[2025-08-21T18:31:12.834Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:31:12.834Z]       "CategoryName": null,
[2025-08-21T18:31:12.835Z]       "LogLevel": "None",
[2025-08-21T18:31:12.835Z]       "Filter": null
[2025-08-21T18:31:12.835Z]     },
[2025-08-21T18:31:12.835Z]     {
[2025-08-21T18:31:12.835Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:31:12.835Z]       "CategoryName": null,
[2025-08-21T18:31:12.835Z]       "LogLevel": null,
[2025-08-21T18:31:12.835Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:31:12.835Z]     },
[2025-08-21T18:31:12.835Z]     {
[2025-08-21T18:31:12.835Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:31:12.835Z]       "CategoryName": null,
[2025-08-21T18:31:12.835Z]       "LogLevel": null,
[2025-08-21T18:31:12.835Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:31:12.835Z]     }
[2025-08-21T18:31:12.835Z]   ]
[2025-08-21T18:31:12.835Z] }
[2025-08-21T18:31:12.835Z] FunctionResultAggregatorOptions
[2025-08-21T18:31:12.835Z] {
[2025-08-21T18:31:12.835Z]   "BatchSize": 1000,
[2025-08-21T18:31:12.835Z]   "FlushTimeout": "00:00:30",
[2025-08-21T18:31:12.835Z]   "IsEnabled": true
[2025-08-21T18:31:12.835Z] }
[2025-08-21T18:31:12.835Z] ConcurrencyOptions
[2025-08-21T18:31:12.835Z] {
[2025-08-21T18:31:12.835Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T18:31:12.835Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T18:31:12.835Z]   "CPUThreshold": 0.8,
[2025-08-21T18:31:12.835Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T18:31:12.835Z] }
[2025-08-21T18:31:12.835Z] SingletonOptions
[2025-08-21T18:31:12.835Z] {
[2025-08-21T18:31:12.835Z]   "LockPeriod": "00:00:15",
[2025-08-21T18:31:12.835Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T18:31:12.835Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T18:31:12.835Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T18:31:12.835Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T18:31:12.835Z] }
[2025-08-21T18:31:12.835Z] ScaleOptions
[2025-08-21T18:31:12.835Z] {
[2025-08-21T18:31:12.835Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T18:31:12.835Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T18:31:12.835Z]   "MetricsPurgeEnabled": true,
[2025-08-21T18:31:12.835Z]   "IsTargetScalingEnabled": true,
[2025-08-21T18:31:12.835Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T18:31:12.835Z] }
[2025-08-21T18:31:12.835Z] Starting JobHost
[2025-08-21T18:31:12.836Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=3e5112ad-3708-4fa1-b942-3330745c4ed0, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T18:31:12.838Z] Loading functions metadata
[2025-08-21T18:31:12.838Z] Worker indexing is enabled
[2025-08-21T18:31:12.838Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:31:12.838Z] Reading functions metadata (Worker)
[2025-08-21T18:31:12.838Z] Reading functions metadata (Host)
[2025-08-21T18:31:13.405Z] 21 functions found (Host)
[2025-08-21T18:31:13.410Z] Reading functions metadata (Custom)
[2025-08-21T18:31:13.413Z] 0 functions found (Custom)
[2025-08-21T18:31:13.415Z] 21 functions loaded
[2025-08-21T18:31:13.446Z] Worker process started and initialized.
[2025-08-21T18:31:13.446Z] Generating 21 job function(s)
[2025-08-21T18:31:13.491Z] Found the following functions:
[2025-08-21T18:31:13.491Z] Host.Functions.aiBuilderHealth
[2025-08-21T18:31:13.491Z] Host.Functions.analytics
[2025-08-21T18:31:13.491Z] Host.Functions.analyzeUIImage
[2025-08-21T18:31:13.491Z] Host.Functions.atlasComponents
[2025-08-21T18:31:13.491Z] Host.Functions.fast-suggestions
[2025-08-21T18:31:13.491Z] Host.Functions.figmaOAuthCallback
[2025-08-21T18:31:13.491Z] Host.Functions.figmaOAuthStart
[2025-08-21T18:31:13.491Z] Host.Functions.generateSuggestions
[2025-08-21T18:31:13.491Z] Host.Functions.generateWireframe
[2025-08-21T18:31:13.491Z] Host.Functions.generateWireframeAlias
[2025-08-21T18:31:13.491Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T18:31:13.491Z] Host.Functions.generateWireframeOptionB
[2025-08-21T18:31:13.491Z] Host.Functions.get-template
[2025-08-21T18:31:13.491Z] Host.Functions.githubAuthCallback
[2025-08-21T18:31:13.491Z] Host.Functions.githubAuthStart
[2025-08-21T18:31:13.491Z] Host.Functions.health
[2025-08-21T18:31:13.491Z] Host.Functions.healthCheck
[2025-08-21T18:31:13.491Z] Host.Functions.openai-health
[2025-08-21T18:31:13.491Z] Host.Functions.performance-stats
[2025-08-21T18:31:13.491Z] Host.Functions.testFunction
[2025-08-21T18:31:13.491Z] Host.Functions.testSimple
[2025-08-21T18:31:13.491Z] 
[2025-08-21T18:31:13.495Z] HttpOptions
[2025-08-21T18:31:13.495Z] {
[2025-08-21T18:31:13.495Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T18:31:13.495Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T18:31:13.495Z]   "MaxConcurrentRequests": -1,
[2025-08-21T18:31:13.495Z]   "MaxOutstandingRequests": -1,
[2025-08-21T18:31:13.495Z]   "RoutePrefix": "api"
[2025-08-21T18:31:13.495Z] }
[2025-08-21T18:31:13.496Z] Initializing function HTTP routes
[2025-08-21T18:31:13.496Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T18:31:13.496Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T18:31:13.496Z] 
[2025-08-21T18:31:13.499Z] Host initialized (659ms)
[2025-08-21T18:31:13.501Z] Host started (663ms)
[2025-08-21T18:31:13.501Z] Job host started
[2025-08-21T18:31:13.502Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:31:13.503Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:31:13.598Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T18:31:13.599Z] ✅ OpenAI initialized for image analysis
[2025-08-21T18:31:13.599Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:31:13.599Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:31:13.727Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T18:31:13.727Z] 🔍 Current env vars:
[2025-08-21T18:31:13.727Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T18:31:13.727Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T18:31:13.727Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T18:31:13.727Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:31:13.727Z]   Deployment: gpt-4o
[2025-08-21T18:31:13.727Z]   API Version: 2024-08-01-preview
[2025-08-21T18:31:13.727Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T18:31:13.727Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T18:31:13.727Z] ✅ OpenAI client initialized successfully
[2025-08-21T18:31:13.727Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:31:13.727Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:31:13.729Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T18:31:13.734Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.734Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.734Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.734Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.735Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.735Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.735Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:31:13.735Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.735Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '119ec108-0347-4467-b2f8-d91fde860263'.
[2025-08-21T18:31:13.735Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.735Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:31:13.735Z] Result: Failure
[2025-08-21T18:31:13.735Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.735Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.735Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'fe770069-a7fc-4d9f-b013-4065c2d123b4'.
[2025-08-21T18:31:13.735Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:31:13.735Z] Result: Failure
[2025-08-21T18:31:13.735Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T18:31:13.735Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:31:13.735Z]                    ^^^^^
[2025-08-21T18:31:13.735Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:31:13.735Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T18:31:13.735Z] 
[2025-08-21T18:31:13.735Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.736Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.735Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:31:13.736Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:31:13.736Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:31:13.736Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:31:13.736Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:31:13.736Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.736Z]                    ^^^^^
[2025-08-21T18:31:13.736Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:31:13.736Z] 
[2025-08-21T18:31:13.736Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:31:13.736Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:31:13.736Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:31:13.736Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:31:13.736Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:31:13.736Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:31:13.736Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:31:13.736Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:31:13.736Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.736Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:31:13.736Z]     at Generator.next (<anonymous>).
[2025-08-21T18:31:13.736Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:31:13.736Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:31:13.736Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.736Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:31:13.736Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.736Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.736Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:31:13.736Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:31:13.736Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:31:13.736Z]     at Generator.next (<anonymous>).
[2025-08-21T18:31:13.736Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.736Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.736Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest
[2025-08-21T18:31:13.736Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionLoadRequest

Functions:

	aiBuilderHealth: [GET] http://localhost:7072/api/ai-builder/health

	analytics: [GET,OPTIONS] http://localhost:7072/api/analytics

	analyzeUIImage: [POST,OPTIONS] http://localhost:7072/api/analyzeUIImage

	atlasComponents: [GET,OPTIONS] http://localhost:7072/api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}

	fast-suggestions: [GET,POST,OPTIONS] http://localhost:7072/api/fast-suggestions

	figmaOAuthCallback: [GET,OPTIONS] http://localhost:7072/api/figmaOAuthCallback

	figmaOAuthStart: [GET,POST,OPTIONS] http://localhost:7072/api/figmaOAuthStart

	generateSuggestions: [GET,POST,OPTIONS] http://localhost:7072/api/generate-suggestions

	generateWireframe: [POST,OPTIONS] http://localhost:7072/api/generate-html-wireframe

	generateWireframeAlias: [POST,OPTIONS] http://localhost:7072/api/generate-wireframe

	generateWireframeEnhanced: [GET,POST,OPTIONS] http://localhost:7072/api/generate-wireframe-enhanced

	generateWireframeOptionB: [GET,POST,OPTIONS] http://localhost:7072/api/generateWireframeOptionB

	get-template: [POST,OPTIONS] http://localhost:7072/api/get-template

	githubAuthCallback: [GET] http://localhost:7072/api/github/auth/callback

	githubAuthStart: [GET] http://localhost:7072/api/github/auth/start

	health: [GET] http://localhost:7072/api/health

	healthCheck: [GET] http://localhost:7072/api/healthCheck

	openai-health: [GET,OPTIONS] http://localhost:7072/api/openai-health

	performance-stats: [GET] http://localhost:7072/api/performance-stats

	testFunction: [GET,POST,OPTIONS] http://localhost:7072/api/test-wireframe

	testSimple: [GET,POST] http://localhost:7072/api/test-simple

For detailed output, run func with --verbose flag.
[2025-08-21T18:31:14.691Z] Executing HTTP request: {
[2025-08-21T18:31:14.692Z]   "requestId": "da2ea89e-91a4-4f0d-859f-8fe930791e44",
[2025-08-21T18:31:14.692Z]   "method": "GET",
[2025-08-21T18:31:14.692Z]   "userAgent": "curl/8.7.1",
[2025-08-21T18:31:14.692Z]   "uri": "/api/health"
[2025-08-21T18:31:14.692Z] }
[2025-08-21T18:31:14.760Z] Executing 'Functions.health' (Reason='This function was programmatically called via the host APIs.', Id=4541a9b8-22d5-4b06-b668-f4e5a6c08f0b)
[2025-08-21T18:31:14.787Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionInvocationRequest with invocationId 4541a9b8-22d5-4b06-b668-f4e5a6c08f0b
[2025-08-21T18:31:14.809Z] Executing HTTP request: {
[2025-08-21T18:31:14.809Z]   "requestId": "b9ff8f5d-a432-49a5-a894-2879be72f2dd",
[2025-08-21T18:31:14.809Z]   "method": "POST",
[2025-08-21T18:31:14.809Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T18:31:14.809Z]   "uri": "/api/generate-suggestions"
[2025-08-21T18:31:14.809Z] }
[2025-08-21T18:31:14.811Z] Executed 'Functions.health' (Succeeded, Id=4541a9b8-22d5-4b06-b668-f4e5a6c08f0b, Duration=59ms)
[2025-08-21T18:31:14.811Z] Executing 'Functions.generateSuggestions' (Reason='This function was programmatically called via the host APIs.', Id=0940b708-8a56-4b5b-9d05-975bccba10fe)
[2025-08-21T18:31:14.816Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionInvocationRequest with invocationId 0940b708-8a56-4b5b-9d05-975bccba10fe
[2025-08-21T18:31:14.817Z] Executed 'Functions.generateSuggestions' (Succeeded, Id=0940b708-8a56-4b5b-9d05-975bccba10fe, Duration=7ms)
[2025-08-21T18:31:14.818Z] Executed HTTP request: {
[2025-08-21T18:31:14.818Z]   "requestId": "da2ea89e-91a4-4f0d-859f-8fe930791e44",
[2025-08-21T18:31:14.818Z]   "identities": "",
[2025-08-21T18:31:14.818Z]   "status": "200",
[2025-08-21T18:31:14.818Z]   "duration": "126"
[2025-08-21T18:31:14.818Z] }
[2025-08-21T18:31:14.819Z] Executed HTTP request: {
[2025-08-21T18:31:14.819Z]   "requestId": "b9ff8f5d-a432-49a5-a894-2879be72f2dd",
[2025-08-21T18:31:14.819Z]   "identities": "",
[2025-08-21T18:31:14.819Z]   "status": "200",
[2025-08-21T18:31:14.819Z]   "duration": "8"
[2025-08-21T18:31:14.819Z] }
[2025-08-21T18:31:17.842Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T18:31:22.126Z] Executing HTTP request: {
[2025-08-21T18:31:22.126Z]   "requestId": "2f7f2811-cbe5-4e33-9ee2-a4b22a42abb3",
[2025-08-21T18:31:22.126Z]   "method": "POST",
[2025-08-21T18:31:22.126Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T18:31:22.126Z]   "uri": "/api/generate-suggestions"
[2025-08-21T18:31:22.126Z] }
[2025-08-21T18:31:22.129Z] Executing 'Functions.generateSuggestions' (Reason='This function was programmatically called via the host APIs.', Id=6948ed87-c8b1-4a23-90b5-aaa722cfede3)
[2025-08-21T18:31:22.134Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionInvocationRequest with invocationId 6948ed87-c8b1-4a23-90b5-aaa722cfede3
[2025-08-21T18:31:22.134Z] Executed 'Functions.generateSuggestions' (Succeeded, Id=6948ed87-c8b1-4a23-90b5-aaa722cfede3, Duration=6ms)
[2025-08-21T18:31:22.135Z] Executed HTTP request: {
[2025-08-21T18:31:22.135Z]   "requestId": "2f7f2811-cbe5-4e33-9ee2-a4b22a42abb3",
[2025-08-21T18:31:22.135Z]   "identities": "",
[2025-08-21T18:31:22.135Z]   "status": "200",
[2025-08-21T18:31:22.135Z]   "duration": "11"
[2025-08-21T18:31:22.135Z] }
[2025-08-21T18:31:23.716Z] Executing HTTP request: {
[2025-08-21T18:31:23.716Z]   "requestId": "71f31118-2328-4f7d-9648-ee9a28dc038d",
[2025-08-21T18:31:23.716Z]   "method": "POST",
[2025-08-21T18:31:23.716Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T18:31:23.716Z]   "uri": "/api/generate-wireframe-enhanced"
[2025-08-21T18:31:23.716Z] }
[2025-08-21T18:31:23.726Z] Executing 'Functions.generateWireframeEnhanced' (Reason='This function was programmatically called via the host APIs.', Id=864acfbe-de65-4523-8727-a3ae68a46c9f)
[2025-08-21T18:31:23.771Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionInvocationRequest with invocationId 864acfbe-de65-4523-8727-a3ae68a46c9f
[2025-08-21T18:31:29.906Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T18:31:29.907Z] 🔍 Atlas component check (ENHANCED):
[2025-08-21T18:31:29.907Z]     Description: "erwe"
[2025-08-21T18:31:29.907Z]     Contains learning keywords: false
[2025-08-21T18:31:29.907Z]     Is hero section exclusion: false
[2025-08-21T18:31:29.907Z]     Final isLearningPlatform: false
[2025-08-21T18:31:29.907Z] ℹ️ Not a learning platform, skipping Atlas components
[2025-08-21T18:31:29.911Z] Executed 'Functions.generateWireframeEnhanced' (Succeeded, Id=864acfbe-de65-4523-8727-a3ae68a46c9f, Duration=6188ms)
[2025-08-21T18:31:29.912Z] Executed HTTP request: {
[2025-08-21T18:31:29.912Z]   "requestId": "71f31118-2328-4f7d-9648-ee9a28dc038d",
[2025-08-21T18:31:29.912Z]   "identities": "",
[2025-08-21T18:31:29.912Z]   "status": "200",
[2025-08-21T18:31:29.912Z]   "duration": "6196"
[2025-08-21T18:31:29.912Z] }
[2025-08-21T18:34:05.277Z] Executing HTTP request: {
[2025-08-21T18:34:05.277Z]   "requestId": "d5dc2a89-5bd9-4d3b-9e0b-3a9a9055af3a",
[2025-08-21T18:34:05.277Z]   "method": "POST",
[2025-08-21T18:34:05.277Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T18:34:05.277Z]   "uri": "/api/generate-wireframe-enhanced"
[2025-08-21T18:34:05.277Z] }
[2025-08-21T18:34:05.292Z] Executing 'Functions.generateWireframeEnhanced' (Reason='This function was programmatically called via the host APIs.', Id=54ffc027-cfcb-4080-b441-c58e71a6fbd5)
[2025-08-21T18:34:05.328Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf received FunctionInvocationRequest with invocationId 54ffc027-cfcb-4080-b441-c58e71a6fbd5
[2025-08-21T18:34:12.349Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T18:34:12.349Z] 🔍 Atlas component check (ENHANCED):
[2025-08-21T18:34:12.349Z]     Description: "Generate Microsoft Learn's assessment portal with skills validation and feedback"
[2025-08-21T18:34:12.349Z]     Contains learning keywords: true
[2025-08-21T18:34:12.349Z]     Is hero section exclusion: false
[2025-08-21T18:34:12.350Z]     Final isLearningPlatform: true
[2025-08-21T18:34:12.354Z] ✅ Added Atlas learning content section
[2025-08-21T18:34:12.354Z] 🎯 Atlas components added: Hero: 0, Modules: 4, Learning Paths: 2
[2025-08-21T18:34:12.359Z] Executed 'Functions.generateWireframeEnhanced' (Succeeded, Id=54ffc027-cfcb-4080-b441-c58e71a6fbd5, Duration=7073ms)
[2025-08-21T18:34:12.362Z] Executed HTTP request: {
[2025-08-21T18:34:12.362Z]   "requestId": "d5dc2a89-5bd9-4d3b-9e0b-3a9a9055af3a",
[2025-08-21T18:34:12.362Z]   "identities": "",
[2025-08-21T18:34:12.362Z]   "status": "200",
[2025-08-21T18:34:12.362Z]   "duration": "7085"
[2025-08-21T18:34:12.362Z] }
[2025-08-21T18:41:12.777Z] Stopping the flush logs timer.
[2025-08-21T18:41:12.778Z] We couldn’t initialize the Table Storage Client using the 'AzureWebJobsStorage' connection string. We are unable to record diagnostic events, so the diagnostic logging service is being stopped. Please check the 'AzureWebJobsStorage' connection string in Application Settings.
[2025-08-21T18:52:27.134Z] Restarting host.
[2025-08-21T18:52:27.181Z] Stopping JobHost
[2025-08-21T18:52:27.186Z] Job host stopped
[2025-08-21T18:52:27.220Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '082f722c-3492-4613-a347-e4bc44e5cf5c'
[2025-08-21T18:52:27.312Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:52:27.312Z] Host configuration file read:
[2025-08-21T18:52:27.312Z] {
[2025-08-21T18:52:27.312Z]   "version": "2.0",
[2025-08-21T18:52:27.312Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:52:27.312Z]   "logging": {
[2025-08-21T18:52:27.312Z]     "applicationInsights": {
[2025-08-21T18:52:27.312Z]       "samplingSettings": {
[2025-08-21T18:52:27.312Z]         "isEnabled": true,
[2025-08-21T18:52:27.312Z]         "excludedTypes": "Request"
[2025-08-21T18:52:27.312Z]       }
[2025-08-21T18:52:27.312Z]     },
[2025-08-21T18:52:27.312Z]     "logLevel": {
[2025-08-21T18:52:27.312Z]       "default": "Information",
[2025-08-21T18:52:27.312Z]       "Host.Results": "Information",
[2025-08-21T18:52:27.312Z]       "Function": "Information"
[2025-08-21T18:52:27.312Z]     }
[2025-08-21T18:52:27.312Z]   },
[2025-08-21T18:52:27.312Z]   "extensionBundle": {
[2025-08-21T18:52:27.312Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:52:27.312Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:52:27.312Z]   },
[2025-08-21T18:52:27.312Z]   "watchDirectories": [
[2025-08-21T18:52:27.312Z]     "Shared"
[2025-08-21T18:52:27.312Z]   ]
[2025-08-21T18:52:27.312Z] }
[2025-08-21T18:52:27.320Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:52:27.321Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:52:27.322Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:52:27.322Z] Loading functions metadata
[2025-08-21T18:52:27.322Z] Worker indexing is enabled
[2025-08-21T18:52:27.323Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:52:27.323Z] Reading functions metadata (Worker)
[2025-08-21T18:52:27.323Z] Shutting down language worker channels for runtime:node
[2025-08-21T18:52:27.383Z] Worker 78ae67db-e746-403d-8773-e03773d7cdaf exited with code 0
[2025-08-21T18:52:27.779Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 connecting on 127.0.0.1:54302
[2025-08-21T18:52:27.807Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received WorkerInitRequest
[2025-08-21T18:52:27.811Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionsMetadataRequest
[2025-08-21T18:52:27.811Z] Reading functions metadata (Host)
[2025-08-21T18:52:28.062Z] 21 functions found (Host)
[2025-08-21T18:52:28.062Z] 21 functions loaded
[2025-08-21T18:52:28.062Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:52:28.062Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:52:28.062Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:52:28.062Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T18:52:28.215Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:52:28.215Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:52:28.215Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin
[2025-08-21T18:52:28.215Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin'.
[2025-08-21T18:52:28.261Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:52:28.261Z] Host configuration file read:
[2025-08-21T18:52:28.261Z] {
[2025-08-21T18:52:28.261Z]   "version": "2.0",
[2025-08-21T18:52:28.261Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:52:28.261Z]   "logging": {
[2025-08-21T18:52:28.261Z]     "applicationInsights": {
[2025-08-21T18:52:28.261Z]       "samplingSettings": {
[2025-08-21T18:52:28.261Z]         "isEnabled": true,
[2025-08-21T18:52:28.261Z]         "excludedTypes": "Request"
[2025-08-21T18:52:28.261Z]       }
[2025-08-21T18:52:28.261Z]     },
[2025-08-21T18:52:28.261Z]     "logLevel": {
[2025-08-21T18:52:28.261Z]       "default": "Information",
[2025-08-21T18:52:28.261Z]       "Host.Results": "Information",
[2025-08-21T18:52:28.261Z]       "Function": "Information"
[2025-08-21T18:52:28.261Z]     }
[2025-08-21T18:52:28.261Z]   },
[2025-08-21T18:52:28.261Z]   "extensionBundle": {
[2025-08-21T18:52:28.261Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:52:28.261Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:52:28.261Z]   },
[2025-08-21T18:52:28.261Z]   "watchDirectories": [
[2025-08-21T18:52:28.261Z]     "Shared"
[2025-08-21T18:52:28.261Z]   ]
[2025-08-21T18:52:28.261Z] }
[2025-08-21T18:52:28.306Z] Initializing Warmup Extension.
[2025-08-21T18:52:28.310Z] Initializing Host. OperationId: '082f722c-3492-4613-a347-e4bc44e5cf5c'.
[2025-08-21T18:52:28.310Z] Host initialization: ConsecutiveErrors=0, StartupCount=2, OperationId=082f722c-3492-4613-a347-e4bc44e5cf5c
[2025-08-21T18:52:28.330Z] LoggerFilterOptions
[2025-08-21T18:52:28.330Z] {
[2025-08-21T18:52:28.330Z]   "MinLevel": "None",
[2025-08-21T18:52:28.330Z]   "Rules": [
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.330Z]       "ProviderName": null,
[2025-08-21T18:52:28.330Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:52:28.330Z]       "LogLevel": "None",
[2025-08-21T18:52:28.330Z]       "Filter": null
[2025-08-21T18:52:28.330Z]     },
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.330Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:28.330Z]       "CategoryName": null,
[2025-08-21T18:52:28.330Z]       "LogLevel": "None",
[2025-08-21T18:52:28.330Z]       "Filter": null
[2025-08-21T18:52:28.330Z]     },
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.330Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:28.330Z]       "CategoryName": null,
[2025-08-21T18:52:28.330Z]       "LogLevel": null,
[2025-08-21T18:52:28.330Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:28.330Z]     },
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.330Z]       "ProviderName": null,
[2025-08-21T18:52:28.330Z]       "CategoryName": null,
[2025-08-21T18:52:28.330Z]       "LogLevel": null,
[2025-08-21T18:52:28.330Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:28.330Z]     },
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.330Z]       "ProviderName": null,
[2025-08-21T18:52:28.330Z]       "CategoryName": null,
[2025-08-21T18:52:28.330Z]       "LogLevel": null,
[2025-08-21T18:52:28.330Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:28.330Z]     },
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.330Z]       "ProviderName": null,
[2025-08-21T18:52:28.330Z]       "CategoryName": "Host.Results",
[2025-08-21T18:52:28.330Z]       "LogLevel": "Information",
[2025-08-21T18:52:28.330Z]       "Filter": null
[2025-08-21T18:52:28.330Z]     },
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.330Z]       "ProviderName": null,
[2025-08-21T18:52:28.330Z]       "CategoryName": "Function",
[2025-08-21T18:52:28.330Z]       "LogLevel": "Information",
[2025-08-21T18:52:28.330Z]       "Filter": null
[2025-08-21T18:52:28.330Z]     },
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.330Z]       "ProviderName": null,
[2025-08-21T18:52:28.330Z]       "CategoryName": null,
[2025-08-21T18:52:28.330Z]       "LogLevel": "Information",
[2025-08-21T18:52:28.330Z]       "Filter": null
[2025-08-21T18:52:28.330Z]     },
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.330Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:52:28.330Z]       "CategoryName": null,
[2025-08-21T18:52:28.330Z]       "LogLevel": "None",
[2025-08-21T18:52:28.330Z]       "Filter": null
[2025-08-21T18:52:28.330Z]     },
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.330Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:52:28.330Z]       "CategoryName": null,
[2025-08-21T18:52:28.330Z]       "LogLevel": null,
[2025-08-21T18:52:28.330Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:28.330Z]     },
[2025-08-21T18:52:28.330Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:28.331Z]       "CategoryName": null,
[2025-08-21T18:52:28.331Z]       "LogLevel": null,
[2025-08-21T18:52:28.331Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:28.331Z]     }
[2025-08-21T18:52:28.331Z]   ]
[2025-08-21T18:52:28.331Z] }
[2025-08-21T18:52:28.331Z] LoggerFilterOptions
[2025-08-21T18:52:28.331Z] {
[2025-08-21T18:52:28.331Z]   "MinLevel": "None",
[2025-08-21T18:52:28.331Z]   "Rules": [
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": null,
[2025-08-21T18:52:28.331Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:52:28.331Z]       "LogLevel": "None",
[2025-08-21T18:52:28.331Z]       "Filter": null
[2025-08-21T18:52:28.331Z]     },
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:28.331Z]       "CategoryName": null,
[2025-08-21T18:52:28.331Z]       "LogLevel": "None",
[2025-08-21T18:52:28.331Z]       "Filter": null
[2025-08-21T18:52:28.331Z]     },
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:28.331Z]       "CategoryName": null,
[2025-08-21T18:52:28.331Z]       "LogLevel": null,
[2025-08-21T18:52:28.331Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:28.331Z]     },
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": null,
[2025-08-21T18:52:28.331Z]       "CategoryName": null,
[2025-08-21T18:52:28.331Z]       "LogLevel": null,
[2025-08-21T18:52:28.331Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:28.331Z]     },
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": null,
[2025-08-21T18:52:28.331Z]       "CategoryName": null,
[2025-08-21T18:52:28.331Z]       "LogLevel": null,
[2025-08-21T18:52:28.331Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:28.331Z]     },
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": null,
[2025-08-21T18:52:28.331Z]       "CategoryName": "Host.Results",
[2025-08-21T18:52:28.331Z]       "LogLevel": "Information",
[2025-08-21T18:52:28.331Z]       "Filter": null
[2025-08-21T18:52:28.331Z]     },
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": null,
[2025-08-21T18:52:28.331Z]       "CategoryName": "Function",
[2025-08-21T18:52:28.331Z]       "LogLevel": "Information",
[2025-08-21T18:52:28.331Z]       "Filter": null
[2025-08-21T18:52:28.331Z]     },
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": null,
[2025-08-21T18:52:28.331Z]       "CategoryName": null,
[2025-08-21T18:52:28.331Z]       "LogLevel": "Information",
[2025-08-21T18:52:28.331Z]       "Filter": null
[2025-08-21T18:52:28.331Z]     },
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:52:28.331Z]       "CategoryName": null,
[2025-08-21T18:52:28.331Z]       "LogLevel": "None",
[2025-08-21T18:52:28.331Z]       "Filter": null
[2025-08-21T18:52:28.331Z]     },
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:52:28.331Z]       "CategoryName": null,
[2025-08-21T18:52:28.331Z]       "LogLevel": null,
[2025-08-21T18:52:28.331Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:28.331Z]     },
[2025-08-21T18:52:28.331Z]     {
[2025-08-21T18:52:28.331Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:28.331Z]       "CategoryName": null,
[2025-08-21T18:52:28.331Z]       "LogLevel": null,
[2025-08-21T18:52:28.331Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:28.331Z]     }
[2025-08-21T18:52:28.331Z]   ]
[2025-08-21T18:52:28.331Z] }
[2025-08-21T18:52:28.331Z] FunctionResultAggregatorOptions
[2025-08-21T18:52:28.332Z] {
[2025-08-21T18:52:28.332Z]   "BatchSize": 1000,
[2025-08-21T18:52:28.332Z]   "FlushTimeout": "00:00:30",
[2025-08-21T18:52:28.332Z]   "IsEnabled": true
[2025-08-21T18:52:28.332Z] }
[2025-08-21T18:52:28.332Z] ConcurrencyOptions
[2025-08-21T18:52:28.332Z] {
[2025-08-21T18:52:28.332Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T18:52:28.332Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T18:52:28.332Z]   "CPUThreshold": 0.8,
[2025-08-21T18:52:28.332Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T18:52:28.332Z] }
[2025-08-21T18:52:28.332Z] SingletonOptions
[2025-08-21T18:52:28.332Z] {
[2025-08-21T18:52:28.332Z]   "LockPeriod": "00:00:15",
[2025-08-21T18:52:28.332Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T18:52:28.332Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T18:52:28.332Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T18:52:28.332Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T18:52:28.332Z] }
[2025-08-21T18:52:28.332Z] ScaleOptions
[2025-08-21T18:52:28.332Z] {
[2025-08-21T18:52:28.332Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T18:52:28.332Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T18:52:28.332Z]   "MetricsPurgeEnabled": true,
[2025-08-21T18:52:28.332Z]   "IsTargetScalingEnabled": true,
[2025-08-21T18:52:28.332Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T18:52:28.332Z] }
[2025-08-21T18:52:28.332Z] Starting JobHost
[2025-08-21T18:52:28.332Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=3b471480-0ff5-45f6-adc5-f55411302ef9, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T18:52:28.332Z] Loading functions metadata
[2025-08-21T18:52:28.332Z] Worker indexing is enabled
[2025-08-21T18:52:28.332Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:52:28.332Z] Reading functions metadata (Worker)
[2025-08-21T18:52:28.332Z] Reading functions metadata (Host)
[2025-08-21T18:52:28.501Z] 21 functions found (Host)
[2025-08-21T18:52:28.501Z] Reading functions metadata (Custom)
[2025-08-21T18:52:28.501Z] 0 functions found (Custom)
[2025-08-21T18:52:28.501Z] 21 functions loaded
[2025-08-21T18:52:28.504Z] Worker process started and initialized.
[2025-08-21T18:52:28.504Z] Generating 21 job function(s)
[2025-08-21T18:52:28.516Z] Found the following functions:
[2025-08-21T18:52:28.516Z] Host.Functions.aiBuilderHealth
[2025-08-21T18:52:28.516Z] Host.Functions.analytics
[2025-08-21T18:52:28.516Z] Host.Functions.analyzeUIImage
[2025-08-21T18:52:28.516Z] Host.Functions.atlasComponents
[2025-08-21T18:52:28.516Z] Host.Functions.fast-suggestions
[2025-08-21T18:52:28.516Z] Host.Functions.figmaOAuthCallback
[2025-08-21T18:52:28.516Z] Host.Functions.figmaOAuthStart
[2025-08-21T18:52:28.516Z] Host.Functions.generateSuggestions
[2025-08-21T18:52:28.516Z] Host.Functions.generateWireframe
[2025-08-21T18:52:28.516Z] Host.Functions.generateWireframeAlias
[2025-08-21T18:52:28.516Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T18:52:28.516Z] Host.Functions.generateWireframeOptionB
[2025-08-21T18:52:28.516Z] Host.Functions.get-template
[2025-08-21T18:52:28.516Z] Host.Functions.githubAuthCallback
[2025-08-21T18:52:28.516Z] Host.Functions.githubAuthStart
[2025-08-21T18:52:28.516Z] Host.Functions.health
[2025-08-21T18:52:28.516Z] Host.Functions.healthCheck
[2025-08-21T18:52:28.516Z] Host.Functions.openai-health
[2025-08-21T18:52:28.516Z] Host.Functions.performance-stats
[2025-08-21T18:52:28.516Z] Host.Functions.testFunction
[2025-08-21T18:52:28.516Z] Host.Functions.testSimple
[2025-08-21T18:52:28.516Z] 
[2025-08-21T18:52:28.516Z] HttpOptions
[2025-08-21T18:52:28.516Z] {
[2025-08-21T18:52:28.516Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T18:52:28.516Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T18:52:28.516Z]   "MaxConcurrentRequests": -1,
[2025-08-21T18:52:28.516Z]   "MaxOutstandingRequests": -1,
[2025-08-21T18:52:28.516Z]   "RoutePrefix": "api"
[2025-08-21T18:52:28.516Z] }
[2025-08-21T18:52:28.516Z] Initializing function HTTP routes
[2025-08-21T18:52:28.516Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T18:52:28.516Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T18:52:28.516Z] 
[2025-08-21T18:52:28.516Z] Host initialized (184ms)
[2025-08-21T18:52:28.516Z] Host started (184ms)
[2025-08-21T18:52:28.516Z] Job host started
[2025-08-21T18:52:28.516Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:52:28.516Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:52:28.563Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T18:52:28.564Z] ✅ OpenAI initialized for image analysis
[2025-08-21T18:52:28.564Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:52:28.564Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:52:28.613Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T18:52:28.613Z] 🔍 Current env vars:
[2025-08-21T18:52:28.613Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T18:52:28.613Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T18:52:28.613Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T18:52:28.613Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:52:28.613Z]   Deployment: gpt-4o
[2025-08-21T18:52:28.613Z]   API Version: 2024-08-01-preview
[2025-08-21T18:52:28.613Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T18:52:28.613Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T18:52:28.613Z] ✅ OpenAI client initialized successfully
[2025-08-21T18:52:28.613Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:52:28.613Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:52:28.615Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T18:52:28.621Z] Host restarted.
[2025-08-21T18:52:28.622Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.622Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.622Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.622Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.622Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:52:28.623Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '36e9a309-83f5-45ea-a6f0-09c0f37cc916'.
[2025-08-21T18:52:28.623Z] Result: Failure
[2025-08-21T18:52:28.623Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:52:28.623Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T18:52:28.623Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:52:28.623Z]                    ^^^^^
[2025-08-21T18:52:28.623Z] 
[2025-08-21T18:52:28.623Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:52:28.623Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:52:28.623Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:52:28.623Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:52:28.623Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:52:28.623Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:52:28.623Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:52:28.623Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:52:28.623Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '530e7fbd-42db-413e-bea9-87accf69d722'.
[2025-08-21T18:52:28.623Z] Result: Failure
[2025-08-21T18:52:28.623Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:52:28.623Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2

[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z]     at Generator.next (<anonymous>).
[2025-08-21T18:52:28.623Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:52:28.623Z]                    ^^^^^
[2025-08-21T18:52:28.623Z] 
[2025-08-21T18:52:28.623Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:52:28.623Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:52:28.623Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:52:28.623Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:52:28.623Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:52:28.623Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:52:28.623Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:52:28.623Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:52:28.623Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:52:28.623Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:52:28.623Z]     at Generator.next (<anonymous>).
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.623Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.624Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.624Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:28.624Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 received FunctionLoadRequest
[2025-08-21T18:52:33.331Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T18:52:39.608Z] Restarting host.
[2025-08-21T18:52:39.612Z] Stopping JobHost
[2025-08-21T18:52:39.612Z] Job host stopped
[2025-08-21T18:52:39.614Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '6a05767d-63b9-4770-a8a6-b5f46ea7ef78'
[2025-08-21T18:52:39.684Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:52:39.684Z] Host configuration file read:
[2025-08-21T18:52:39.684Z] {
[2025-08-21T18:52:39.684Z]   "version": "2.0",
[2025-08-21T18:52:39.684Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:52:39.684Z]   "logging": {
[2025-08-21T18:52:39.684Z]     "applicationInsights": {
[2025-08-21T18:52:39.684Z]       "samplingSettings": {
[2025-08-21T18:52:39.684Z]         "isEnabled": true,
[2025-08-21T18:52:39.684Z]         "excludedTypes": "Request"
[2025-08-21T18:52:39.684Z]       }
[2025-08-21T18:52:39.684Z]     },
[2025-08-21T18:52:39.684Z]     "logLevel": {
[2025-08-21T18:52:39.684Z]       "default": "Information",
[2025-08-21T18:52:39.684Z]       "Host.Results": "Information",
[2025-08-21T18:52:39.684Z]       "Function": "Information"
[2025-08-21T18:52:39.684Z]     }
[2025-08-21T18:52:39.684Z]   },
[2025-08-21T18:52:39.684Z]   "extensionBundle": {
[2025-08-21T18:52:39.684Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:52:39.684Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:52:39.684Z]   },
[2025-08-21T18:52:39.684Z]   "watchDirectories": [
[2025-08-21T18:52:39.684Z]     "Shared"
[2025-08-21T18:52:39.684Z]   ]
[2025-08-21T18:52:39.684Z] }
[2025-08-21T18:52:39.688Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:52:39.688Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:52:39.688Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:52:39.688Z] Loading functions metadata
[2025-08-21T18:52:39.689Z] Worker indexing is enabled
[2025-08-21T18:52:39.689Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:52:39.689Z] Reading functions metadata (Worker)
[2025-08-21T18:52:39.689Z] Shutting down language worker channels for runtime:node
[2025-08-21T18:52:39.694Z] Worker 3df5e022-0567-4dde-bf14-d8aa41b425d2 exited with code 0
[2025-08-21T18:52:39.814Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 connecting on 127.0.0.1:54302
[2025-08-21T18:52:39.838Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received WorkerInitRequest
[2025-08-21T18:52:39.841Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionsMetadataRequest
[2025-08-21T18:52:39.841Z] Reading functions metadata (Host)
[2025-08-21T18:52:40.039Z] 21 functions found (Host)
[2025-08-21T18:52:40.040Z] 21 functions loaded
[2025-08-21T18:52:40.040Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:52:40.040Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:52:40.040Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:52:40.041Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T18:52:40.176Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:52:40.176Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:52:40.176Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin
[2025-08-21T18:52:40.176Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin'.
[2025-08-21T18:52:40.222Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:52:40.222Z] Host configuration file read:
[2025-08-21T18:52:40.222Z] {
[2025-08-21T18:52:40.222Z]   "version": "2.0",
[2025-08-21T18:52:40.222Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:52:40.222Z]   "logging": {
[2025-08-21T18:52:40.222Z]     "applicationInsights": {
[2025-08-21T18:52:40.222Z]       "samplingSettings": {
[2025-08-21T18:52:40.222Z]         "isEnabled": true,
[2025-08-21T18:52:40.222Z]         "excludedTypes": "Request"
[2025-08-21T18:52:40.222Z]       }
[2025-08-21T18:52:40.222Z]     },
[2025-08-21T18:52:40.222Z]     "logLevel": {
[2025-08-21T18:52:40.222Z]       "default": "Information",
[2025-08-21T18:52:40.222Z]       "Host.Results": "Information",
[2025-08-21T18:52:40.222Z]       "Function": "Information"
[2025-08-21T18:52:40.222Z]     }
[2025-08-21T18:52:40.222Z]   },
[2025-08-21T18:52:40.222Z]   "extensionBundle": {
[2025-08-21T18:52:40.222Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:52:40.222Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:52:40.222Z]   },
[2025-08-21T18:52:40.222Z]   "watchDirectories": [
[2025-08-21T18:52:40.222Z]     "Shared"
[2025-08-21T18:52:40.222Z]   ]
[2025-08-21T18:52:40.222Z] }
[2025-08-21T18:52:40.259Z] Initializing Warmup Extension.
[2025-08-21T18:52:40.260Z] Initializing Host. OperationId: '6a05767d-63b9-4770-a8a6-b5f46ea7ef78'.
[2025-08-21T18:52:40.260Z] Host initialization: ConsecutiveErrors=0, StartupCount=3, OperationId=6a05767d-63b9-4770-a8a6-b5f46ea7ef78
[2025-08-21T18:52:40.261Z] LoggerFilterOptions
[2025-08-21T18:52:40.261Z] {
[2025-08-21T18:52:40.261Z]   "MinLevel": "None",
[2025-08-21T18:52:40.261Z]   "Rules": [
[2025-08-21T18:52:40.261Z]     {
[2025-08-21T18:52:40.261Z]       "ProviderName": null,
[2025-08-21T18:52:40.261Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:52:40.261Z]       "LogLevel": "None",
[2025-08-21T18:52:40.261Z]       "Filter": null
[2025-08-21T18:52:40.261Z]     },
[2025-08-21T18:52:40.261Z]     {
[2025-08-21T18:52:40.261Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:40.261Z]       "CategoryName": null,
[2025-08-21T18:52:40.261Z]       "LogLevel": "None",
[2025-08-21T18:52:40.261Z]       "Filter": null
[2025-08-21T18:52:40.261Z]     },
[2025-08-21T18:52:40.261Z]     {
[2025-08-21T18:52:40.261Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:40.261Z]       "CategoryName": null,
[2025-08-21T18:52:40.261Z]       "LogLevel": null,
[2025-08-21T18:52:40.261Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:40.261Z]     },
[2025-08-21T18:52:40.261Z]     {
[2025-08-21T18:52:40.261Z]       "ProviderName": null,
[2025-08-21T18:52:40.261Z]       "CategoryName": null,
[2025-08-21T18:52:40.261Z]       "LogLevel": null,
[2025-08-21T18:52:40.261Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:40.261Z]     },
[2025-08-21T18:52:40.261Z]     {
[2025-08-21T18:52:40.261Z]       "ProviderName": null,
[2025-08-21T18:52:40.261Z]       "CategoryName": null,
[2025-08-21T18:52:40.261Z]       "LogLevel": null,
[2025-08-21T18:52:40.261Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:40.261Z]     },
[2025-08-21T18:52:40.261Z]     {
[2025-08-21T18:52:40.261Z]       "ProviderName": null,
[2025-08-21T18:52:40.261Z]       "CategoryName": "Host.Results",
[2025-08-21T18:52:40.261Z]       "LogLevel": "Information",
[2025-08-21T18:52:40.261Z]       "Filter": null
[2025-08-21T18:52:40.261Z]     },
[2025-08-21T18:52:40.261Z]     {
[2025-08-21T18:52:40.261Z]       "ProviderName": null,
[2025-08-21T18:52:40.261Z]       "CategoryName": "Function",
[2025-08-21T18:52:40.261Z]       "LogLevel": "Information",
[2025-08-21T18:52:40.261Z]       "Filter": null
[2025-08-21T18:52:40.261Z]     },
[2025-08-21T18:52:40.261Z]     {
[2025-08-21T18:52:40.261Z]       "ProviderName": null,
[2025-08-21T18:52:40.261Z]       "CategoryName": null,
[2025-08-21T18:52:40.261Z]       "LogLevel": "Information",
[2025-08-21T18:52:40.261Z]       "Filter": null
[2025-08-21T18:52:40.261Z]     },
[2025-08-21T18:52:40.261Z]     {
[2025-08-21T18:52:40.261Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:52:40.261Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": "None",
[2025-08-21T18:52:40.262Z]       "Filter": null
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:52:40.262Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": null,
[2025-08-21T18:52:40.262Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:40.262Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": null,
[2025-08-21T18:52:40.262Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:40.262Z]     }
[2025-08-21T18:52:40.262Z]   ]
[2025-08-21T18:52:40.262Z] }
[2025-08-21T18:52:40.262Z] LoggerFilterOptions
[2025-08-21T18:52:40.262Z] {
[2025-08-21T18:52:40.262Z]   "MinLevel": "None",
[2025-08-21T18:52:40.262Z]   "Rules": [
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": null,
[2025-08-21T18:52:40.262Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:52:40.262Z]       "LogLevel": "None",
[2025-08-21T18:52:40.262Z]       "Filter": null
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:40.262Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": "None",
[2025-08-21T18:52:40.262Z]       "Filter": null
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:40.262Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": null,
[2025-08-21T18:52:40.262Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": null,
[2025-08-21T18:52:40.262Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": null,
[2025-08-21T18:52:40.262Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": null,
[2025-08-21T18:52:40.262Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": null,
[2025-08-21T18:52:40.262Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": null,
[2025-08-21T18:52:40.262Z]       "CategoryName": "Host.Results",
[2025-08-21T18:52:40.262Z]       "LogLevel": "Information",
[2025-08-21T18:52:40.262Z]       "Filter": null
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": null,
[2025-08-21T18:52:40.262Z]       "CategoryName": "Function",
[2025-08-21T18:52:40.262Z]       "LogLevel": "Information",
[2025-08-21T18:52:40.262Z]       "Filter": null
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": null,
[2025-08-21T18:52:40.262Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": "Information",
[2025-08-21T18:52:40.262Z]       "Filter": null
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:52:40.262Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": "None",
[2025-08-21T18:52:40.262Z]       "Filter": null
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:52:40.262Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": null,
[2025-08-21T18:52:40.262Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:40.262Z]     },
[2025-08-21T18:52:40.262Z]     {
[2025-08-21T18:52:40.262Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:52:40.262Z]       "CategoryName": null,
[2025-08-21T18:52:40.262Z]       "LogLevel": null,
[2025-08-21T18:52:40.262Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:52:40.262Z]     }
[2025-08-21T18:52:40.262Z]   ]
[2025-08-21T18:52:40.262Z] }
[2025-08-21T18:52:40.262Z] FunctionResultAggregatorOptions
[2025-08-21T18:52:40.262Z] {
[2025-08-21T18:52:40.262Z]   "BatchSize": 1000,
[2025-08-21T18:52:40.262Z]   "FlushTimeout": "00:00:30",
[2025-08-21T18:52:40.262Z]   "IsEnabled": true
[2025-08-21T18:52:40.262Z] }
[2025-08-21T18:52:40.262Z] ConcurrencyOptions
[2025-08-21T18:52:40.262Z] {
[2025-08-21T18:52:40.262Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T18:52:40.262Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T18:52:40.262Z]   "CPUThreshold": 0.8,
[2025-08-21T18:52:40.262Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T18:52:40.262Z] }
[2025-08-21T18:52:40.262Z] SingletonOptions
[2025-08-21T18:52:40.262Z] {
[2025-08-21T18:52:40.262Z]   "LockPeriod": "00:00:15",
[2025-08-21T18:52:40.262Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T18:52:40.262Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T18:52:40.262Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T18:52:40.262Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T18:52:40.262Z] }
[2025-08-21T18:52:40.263Z] ScaleOptions
[2025-08-21T18:52:40.263Z] {
[2025-08-21T18:52:40.263Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T18:52:40.263Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T18:52:40.263Z]   "MetricsPurgeEnabled": true,
[2025-08-21T18:52:40.263Z]   "IsTargetScalingEnabled": true,
[2025-08-21T18:52:40.263Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T18:52:40.263Z] }
[2025-08-21T18:52:40.263Z] Starting JobHost
[2025-08-21T18:52:40.263Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=2a4c71f8-fcc5-49f2-ad4a-86cf45e31d8f, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T18:52:40.263Z] Loading functions metadata
[2025-08-21T18:52:40.263Z] Worker indexing is enabled
[2025-08-21T18:52:40.263Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:52:40.263Z] Reading functions metadata (Worker)
[2025-08-21T18:52:40.263Z] Reading functions metadata (Host)
[2025-08-21T18:52:40.415Z] 21 functions found (Host)
[2025-08-21T18:52:40.415Z] Reading functions metadata (Custom)
[2025-08-21T18:52:40.415Z] 0 functions found (Custom)
[2025-08-21T18:52:40.415Z] 21 functions loaded
[2025-08-21T18:52:40.418Z] Generating 21 job function(s)
[2025-08-21T18:52:40.418Z] Worker process started and initialized.
[2025-08-21T18:52:40.435Z] Found the following functions:
[2025-08-21T18:52:40.435Z] Host.Functions.aiBuilderHealth
[2025-08-21T18:52:40.435Z] Host.Functions.analytics
[2025-08-21T18:52:40.435Z] Host.Functions.analyzeUIImage
[2025-08-21T18:52:40.435Z] Host.Functions.atlasComponents
[2025-08-21T18:52:40.435Z] Host.Functions.fast-suggestions
[2025-08-21T18:52:40.435Z] Host.Functions.figmaOAuthCallback
[2025-08-21T18:52:40.435Z] Host.Functions.figmaOAuthStart
[2025-08-21T18:52:40.435Z] Host.Functions.generateSuggestions
[2025-08-21T18:52:40.435Z] Host.Functions.generateWireframe
[2025-08-21T18:52:40.435Z] Host.Functions.generateWireframeAlias
[2025-08-21T18:52:40.435Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T18:52:40.435Z] Host.Functions.generateWireframeOptionB
[2025-08-21T18:52:40.435Z] Host.Functions.get-template
[2025-08-21T18:52:40.435Z] Host.Functions.githubAuthCallback
[2025-08-21T18:52:40.435Z] Host.Functions.githubAuthStart
[2025-08-21T18:52:40.435Z] Host.Functions.health
[2025-08-21T18:52:40.435Z] Host.Functions.healthCheck
[2025-08-21T18:52:40.435Z] Host.Functions.openai-health
[2025-08-21T18:52:40.435Z] Host.Functions.performance-stats
[2025-08-21T18:52:40.435Z] Host.Functions.testFunction
[2025-08-21T18:52:40.435Z] Host.Functions.testSimple
[2025-08-21T18:52:40.435Z] 
[2025-08-21T18:52:40.435Z] HttpOptions
[2025-08-21T18:52:40.435Z] {
[2025-08-21T18:52:40.435Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T18:52:40.435Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T18:52:40.435Z]   "MaxConcurrentRequests": -1,
[2025-08-21T18:52:40.435Z]   "MaxOutstandingRequests": -1,
[2025-08-21T18:52:40.435Z]   "RoutePrefix": "api"
[2025-08-21T18:52:40.435Z] }
[2025-08-21T18:52:40.435Z] Initializing function HTTP routes
[2025-08-21T18:52:40.435Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T18:52:40.435Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T18:52:40.435Z] 
[2025-08-21T18:52:40.435Z] Host initialized (172ms)
[2025-08-21T18:52:40.435Z] Host started (172ms)
[2025-08-21T18:52:40.435Z] Job host started
[2025-08-21T18:52:40.435Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:52:40.435Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:52:40.460Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T18:52:40.460Z] ✅ OpenAI initialized for image analysis
[2025-08-21T18:52:40.460Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:52:40.460Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:52:40.497Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T18:52:40.498Z] 🔍 Current env vars:
[2025-08-21T18:52:40.498Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T18:52:40.498Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T18:52:40.498Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T18:52:40.498Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:52:40.498Z]   Deployment: gpt-4o
[2025-08-21T18:52:40.498Z]   API Version: 2024-08-01-preview
[2025-08-21T18:52:40.498Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T18:52:40.498Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T18:52:40.498Z] ✅ OpenAI client initialized successfully
[2025-08-21T18:52:40.498Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:52:40.498Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:52:40.499Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T18:52:40.500Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.500Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.504Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.504Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:52:40.505Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'b5ce8891-4e05-4068-889b-e009501948e9'.
[2025-08-21T18:52:40.505Z] Result: Failure
[2025-08-21T18:52:40.505Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:52:40.505Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T18:52:40.505Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:52:40.505Z]                    ^^^^^
[2025-08-21T18:52:40.505Z] 
[2025-08-21T18:52:40.505Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:52:40.505Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:52:40.505Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:52:40.505Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:52:40.505Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:52:40.505Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:52:40.505Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:52:40.505Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:52:40.505Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:52:40.505Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:52:40.505Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '05a0abd4-321e-4169-93a3-8bcefdf55082'.
[2025-08-21T18:52:40.505Z] Result: Failure
[2025-08-21T18:52:40.505Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:52:40.505Z]     at Generator.next (<anonymous>).
[2025-08-21T18:52:40.505Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:52:40.505Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T18:52:40.505Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:52:40.505Z]                    ^^^^^
[2025-08-21T18:52:40.505Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z] 
[2025-08-21T18:52:40.505Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:52:40.505Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:52:40.505Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:52:40.505Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:52:40.505Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:52:40.505Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:52:40.505Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:52:40.505Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:52:40.505Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.505Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:52:40.505Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:52:40.505Z]     at Generator.next (<anonymous>).
[2025-08-21T18:52:40.506Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.506Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.506Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.506Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.506Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.506Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.506Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 received FunctionLoadRequest
[2025-08-21T18:52:40.528Z] Host restarted.
[2025-08-21T18:52:45.266Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T18:53:03.345Z] Restarting host.
[2025-08-21T18:53:03.354Z] Stopping JobHost
[2025-08-21T18:53:03.354Z] Job host stopped
[2025-08-21T18:53:03.358Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '38ec4088-5c37-48d6-a7b8-6020f2311ae0'
[2025-08-21T18:53:03.465Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:53:03.465Z] Host configuration file read:
[2025-08-21T18:53:03.465Z] {
[2025-08-21T18:53:03.465Z]   "version": "2.0",
[2025-08-21T18:53:03.465Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:53:03.465Z]   "logging": {
[2025-08-21T18:53:03.465Z]     "applicationInsights": {
[2025-08-21T18:53:03.465Z]       "samplingSettings": {
[2025-08-21T18:53:03.465Z]         "isEnabled": true,
[2025-08-21T18:53:03.465Z]         "excludedTypes": "Request"
[2025-08-21T18:53:03.465Z]       }
[2025-08-21T18:53:03.465Z]     },
[2025-08-21T18:53:03.465Z]     "logLevel": {
[2025-08-21T18:53:03.465Z]       "default": "Information",
[2025-08-21T18:53:03.465Z]       "Host.Results": "Information",
[2025-08-21T18:53:03.465Z]       "Function": "Information"
[2025-08-21T18:53:03.465Z]     }
[2025-08-21T18:53:03.465Z]   },
[2025-08-21T18:53:03.465Z]   "extensionBundle": {
[2025-08-21T18:53:03.465Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:53:03.465Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:53:03.465Z]   },
[2025-08-21T18:53:03.465Z]   "watchDirectories": [
[2025-08-21T18:53:03.465Z]     "Shared"
[2025-08-21T18:53:03.465Z]   ]
[2025-08-21T18:53:03.465Z] }
[2025-08-21T18:53:03.475Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:53:03.480Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:53:03.480Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:53:03.480Z] Loading functions metadata
[2025-08-21T18:53:03.480Z] Worker indexing is enabled
[2025-08-21T18:53:03.480Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:53:03.480Z] Reading functions metadata (Worker)
[2025-08-21T18:53:03.480Z] Shutting down language worker channels for runtime:node
[2025-08-21T18:53:03.487Z] Worker 666b64ad-dfd9-41a6-99eb-8d950d05f114 exited with code 0
[2025-08-21T18:53:03.627Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 connecting on 127.0.0.1:54302
[2025-08-21T18:53:03.651Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received WorkerInitRequest
[2025-08-21T18:53:03.654Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionsMetadataRequest
[2025-08-21T18:53:03.654Z] Reading functions metadata (Host)
[2025-08-21T18:53:03.868Z] 21 functions found (Host)
[2025-08-21T18:53:03.869Z] 21 functions loaded
[2025-08-21T18:53:03.869Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:53:03.869Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:53:03.869Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:53:03.869Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T18:53:04.002Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:53:04.002Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:53:04.003Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin
[2025-08-21T18:53:04.003Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin'.
[2025-08-21T18:53:04.042Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:53:04.042Z] Host configuration file read:
[2025-08-21T18:53:04.042Z] {
[2025-08-21T18:53:04.042Z]   "version": "2.0",
[2025-08-21T18:53:04.042Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:53:04.042Z]   "logging": {
[2025-08-21T18:53:04.042Z]     "applicationInsights": {
[2025-08-21T18:53:04.042Z]       "samplingSettings": {
[2025-08-21T18:53:04.042Z]         "isEnabled": true,
[2025-08-21T18:53:04.042Z]         "excludedTypes": "Request"
[2025-08-21T18:53:04.042Z]       }
[2025-08-21T18:53:04.042Z]     },
[2025-08-21T18:53:04.042Z]     "logLevel": {
[2025-08-21T18:53:04.042Z]       "default": "Information",
[2025-08-21T18:53:04.042Z]       "Host.Results": "Information",
[2025-08-21T18:53:04.042Z]       "Function": "Information"
[2025-08-21T18:53:04.042Z]     }
[2025-08-21T18:53:04.042Z]   },
[2025-08-21T18:53:04.042Z]   "extensionBundle": {
[2025-08-21T18:53:04.042Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:53:04.042Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:53:04.042Z]   },
[2025-08-21T18:53:04.042Z]   "watchDirectories": [
[2025-08-21T18:53:04.042Z]     "Shared"
[2025-08-21T18:53:04.042Z]   ]
[2025-08-21T18:53:04.042Z] }
[2025-08-21T18:53:04.069Z] Initializing Warmup Extension.
[2025-08-21T18:53:04.069Z] Initializing Host. OperationId: '38ec4088-5c37-48d6-a7b8-6020f2311ae0'.
[2025-08-21T18:53:04.069Z] Host initialization: ConsecutiveErrors=0, StartupCount=4, OperationId=38ec4088-5c37-48d6-a7b8-6020f2311ae0
[2025-08-21T18:53:04.071Z] LoggerFilterOptions
[2025-08-21T18:53:04.071Z] {
[2025-08-21T18:53:04.071Z]   "MinLevel": "None",
[2025-08-21T18:53:04.071Z]   "Rules": [
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": null,
[2025-08-21T18:53:04.071Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:53:04.071Z]       "LogLevel": "None",
[2025-08-21T18:53:04.071Z]       "Filter": null
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": "None",
[2025-08-21T18:53:04.071Z]       "Filter": null
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": null,
[2025-08-21T18:53:04.071Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": null,
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": null,
[2025-08-21T18:53:04.071Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": null,
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": null,
[2025-08-21T18:53:04.071Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": null,
[2025-08-21T18:53:04.071Z]       "CategoryName": "Host.Results",
[2025-08-21T18:53:04.071Z]       "LogLevel": "Information",
[2025-08-21T18:53:04.071Z]       "Filter": null
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": null,
[2025-08-21T18:53:04.071Z]       "CategoryName": "Function",
[2025-08-21T18:53:04.071Z]       "LogLevel": "Information",
[2025-08-21T18:53:04.071Z]       "Filter": null
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": null,
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": "Information",
[2025-08-21T18:53:04.071Z]       "Filter": null
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": "None",
[2025-08-21T18:53:04.071Z]       "Filter": null
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": null,
[2025-08-21T18:53:04.071Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": null,
[2025-08-21T18:53:04.071Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:04.071Z]     }
[2025-08-21T18:53:04.071Z]   ]
[2025-08-21T18:53:04.071Z] }
[2025-08-21T18:53:04.071Z] LoggerFilterOptions
[2025-08-21T18:53:04.071Z] {
[2025-08-21T18:53:04.071Z]   "MinLevel": "None",
[2025-08-21T18:53:04.071Z]   "Rules": [
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": null,
[2025-08-21T18:53:04.071Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:53:04.071Z]       "LogLevel": "None",
[2025-08-21T18:53:04.071Z]       "Filter": null
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": "None",
[2025-08-21T18:53:04.071Z]       "Filter": null
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": null,
[2025-08-21T18:53:04.071Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:04.071Z]     },
[2025-08-21T18:53:04.071Z]     {
[2025-08-21T18:53:04.071Z]       "ProviderName": null,
[2025-08-21T18:53:04.071Z]       "CategoryName": null,
[2025-08-21T18:53:04.071Z]       "LogLevel": null,
[2025-08-21T18:53:04.071Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:04.072Z]     },
[2025-08-21T18:53:04.072Z]     {
[2025-08-21T18:53:04.072Z]       "ProviderName": null,
[2025-08-21T18:53:04.072Z]       "CategoryName": null,
[2025-08-21T18:53:04.072Z]       "LogLevel": null,
[2025-08-21T18:53:04.072Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:04.072Z]     },
[2025-08-21T18:53:04.072Z]     {
[2025-08-21T18:53:04.072Z]       "ProviderName": null,
[2025-08-21T18:53:04.072Z]       "CategoryName": "Host.Results",
[2025-08-21T18:53:04.072Z]       "LogLevel": "Information",
[2025-08-21T18:53:04.072Z]       "Filter": null
[2025-08-21T18:53:04.072Z]     },
[2025-08-21T18:53:04.072Z]     {
[2025-08-21T18:53:04.072Z]       "ProviderName": null,
[2025-08-21T18:53:04.072Z]       "CategoryName": "Function",
[2025-08-21T18:53:04.072Z]       "LogLevel": "Information",
[2025-08-21T18:53:04.072Z]       "Filter": null
[2025-08-21T18:53:04.072Z]     },
[2025-08-21T18:53:04.072Z]     {
[2025-08-21T18:53:04.072Z]       "ProviderName": null,
[2025-08-21T18:53:04.072Z]       "CategoryName": null,
[2025-08-21T18:53:04.072Z]       "LogLevel": "Information",
[2025-08-21T18:53:04.072Z]       "Filter": null
[2025-08-21T18:53:04.072Z]     },
[2025-08-21T18:53:04.072Z]     {
[2025-08-21T18:53:04.072Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:04.072Z]       "CategoryName": null,
[2025-08-21T18:53:04.072Z]       "LogLevel": "None",
[2025-08-21T18:53:04.072Z]       "Filter": null
[2025-08-21T18:53:04.072Z]     },
[2025-08-21T18:53:04.072Z]     {
[2025-08-21T18:53:04.072Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:04.072Z]       "CategoryName": null,
[2025-08-21T18:53:04.072Z]       "LogLevel": null,
[2025-08-21T18:53:04.072Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:04.072Z]     },
[2025-08-21T18:53:04.072Z]     {
[2025-08-21T18:53:04.072Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:04.072Z]       "CategoryName": null,
[2025-08-21T18:53:04.072Z]       "LogLevel": null,
[2025-08-21T18:53:04.072Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:04.072Z]     }
[2025-08-21T18:53:04.072Z]   ]
[2025-08-21T18:53:04.072Z] }
[2025-08-21T18:53:04.072Z] FunctionResultAggregatorOptions
[2025-08-21T18:53:04.072Z] {
[2025-08-21T18:53:04.072Z]   "BatchSize": 1000,
[2025-08-21T18:53:04.072Z]   "FlushTimeout": "00:00:30",
[2025-08-21T18:53:04.072Z]   "IsEnabled": true
[2025-08-21T18:53:04.072Z] }
[2025-08-21T18:53:04.072Z] ConcurrencyOptions
[2025-08-21T18:53:04.072Z] {
[2025-08-21T18:53:04.072Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T18:53:04.072Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T18:53:04.072Z]   "CPUThreshold": 0.8,
[2025-08-21T18:53:04.072Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T18:53:04.072Z] }
[2025-08-21T18:53:04.072Z] SingletonOptions
[2025-08-21T18:53:04.072Z] {
[2025-08-21T18:53:04.072Z]   "LockPeriod": "00:00:15",
[2025-08-21T18:53:04.072Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T18:53:04.072Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T18:53:04.072Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T18:53:04.072Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T18:53:04.072Z] }
[2025-08-21T18:53:04.072Z] ScaleOptions
[2025-08-21T18:53:04.072Z] {
[2025-08-21T18:53:04.072Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T18:53:04.072Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T18:53:04.072Z]   "MetricsPurgeEnabled": true,
[2025-08-21T18:53:04.072Z]   "IsTargetScalingEnabled": true,
[2025-08-21T18:53:04.072Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T18:53:04.072Z] }
[2025-08-21T18:53:04.072Z] Starting JobHost
[2025-08-21T18:53:04.072Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=9352a1ed-f537-4536-903b-18493dc163c3, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T18:53:04.072Z] Loading functions metadata
[2025-08-21T18:53:04.072Z] Worker indexing is enabled
[2025-08-21T18:53:04.072Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:53:04.072Z] Reading functions metadata (Worker)
[2025-08-21T18:53:04.072Z] Reading functions metadata (Host)
[2025-08-21T18:53:04.237Z] 21 functions found (Host)
[2025-08-21T18:53:04.237Z] Reading functions metadata (Custom)
[2025-08-21T18:53:04.237Z] 0 functions found (Custom)
[2025-08-21T18:53:04.237Z] 21 functions loaded
[2025-08-21T18:53:04.239Z] Generating 21 job function(s)
[2025-08-21T18:53:04.239Z] Worker process started and initialized.
[2025-08-21T18:53:04.249Z] Found the following functions:
[2025-08-21T18:53:04.249Z] Host.Functions.aiBuilderHealth
[2025-08-21T18:53:04.249Z] Host.Functions.analytics
[2025-08-21T18:53:04.249Z] Host.Functions.analyzeUIImage
[2025-08-21T18:53:04.249Z] Host.Functions.atlasComponents
[2025-08-21T18:53:04.249Z] Host.Functions.fast-suggestions
[2025-08-21T18:53:04.249Z] Host.Functions.figmaOAuthCallback
[2025-08-21T18:53:04.249Z] Host.Functions.figmaOAuthStart
[2025-08-21T18:53:04.249Z] Host.Functions.generateSuggestions
[2025-08-21T18:53:04.249Z] Host.Functions.generateWireframe
[2025-08-21T18:53:04.249Z] Host.Functions.generateWireframeAlias
[2025-08-21T18:53:04.249Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T18:53:04.249Z] Host.Functions.generateWireframeOptionB
[2025-08-21T18:53:04.249Z] Host.Functions.get-template
[2025-08-21T18:53:04.249Z] Host.Functions.githubAuthCallback
[2025-08-21T18:53:04.249Z] Host.Functions.githubAuthStart
[2025-08-21T18:53:04.249Z] Host.Functions.health
[2025-08-21T18:53:04.249Z] Host.Functions.healthCheck
[2025-08-21T18:53:04.249Z] Host.Functions.openai-health
[2025-08-21T18:53:04.249Z] Host.Functions.performance-stats
[2025-08-21T18:53:04.249Z] Host.Functions.testFunction
[2025-08-21T18:53:04.249Z] Host.Functions.testSimple
[2025-08-21T18:53:04.249Z] 
[2025-08-21T18:53:04.250Z] HttpOptions
[2025-08-21T18:53:04.250Z] {
[2025-08-21T18:53:04.250Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T18:53:04.250Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T18:53:04.250Z]   "MaxConcurrentRequests": -1,
[2025-08-21T18:53:04.250Z]   "MaxOutstandingRequests": -1,
[2025-08-21T18:53:04.250Z]   "RoutePrefix": "api"
[2025-08-21T18:53:04.250Z] }
[2025-08-21T18:53:04.250Z] Initializing function HTTP routes
[2025-08-21T18:53:04.250Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T18:53:04.250Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T18:53:04.250Z] 
[2025-08-21T18:53:04.250Z] Host initialized (177ms)
[2025-08-21T18:53:04.250Z] Host started (177ms)
[2025-08-21T18:53:04.250Z] Job host started
[2025-08-21T18:53:04.250Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:53:04.250Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:53:04.288Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T18:53:04.288Z] ✅ OpenAI initialized for image analysis
[2025-08-21T18:53:04.288Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:53:04.288Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:53:04.326Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T18:53:04.326Z] 🔍 Current env vars:
[2025-08-21T18:53:04.326Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T18:53:04.326Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T18:53:04.326Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T18:53:04.326Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:53:04.326Z]   Deployment: gpt-4o
[2025-08-21T18:53:04.326Z]   API Version: 2024-08-01-preview
[2025-08-21T18:53:04.326Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T18:53:04.326Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T18:53:04.326Z] ✅ OpenAI client initialized successfully
[2025-08-21T18:53:04.326Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:53:04.326Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:53:04.327Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T18:53:04.330Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.330Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.333Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.333Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.333Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.333Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.333Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:04.333Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.333Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:04.333Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'a09d95b3-2d88-4213-a342-ce24cd3dbb02'.
[2025-08-21T18:53:04.333Z] Result: Failure
[2025-08-21T18:53:04.333Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '6e476b65-c7ee-47cd-ac65-1c1672d90c6e'.
[2025-08-21T18:53:04.333Z] Result: Failure
[2025-08-21T18:53:04.333Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.333Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:04.333Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T18:53:04.333Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:04.333Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:53:04.333Z]                    ^^^^^
[2025-08-21T18:53:04.333Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T18:53:04.333Z] 
[2025-08-21T18:53:04.333Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:53:04.333Z]                    ^^^^^
[2025-08-21T18:53:04.333Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:53:04.333Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:53:04.333Z] 
[2025-08-21T18:53:04.334Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:53:04.333Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:53:04.334Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:53:04.334Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:53:04.334Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:53:04.334Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:53:04.334Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:53:04.334Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:53:04.334Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:53:04.334Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:53:04.334Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:53:04.334Z]     at Generator.next (<anonymous>).
[2025-08-21T18:53:04.334Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:53:04.334Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:53:04.334Z]     at Generator.next (<anonymous>).
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.334Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 received FunctionLoadRequest
[2025-08-21T18:53:04.342Z] Host restarted.
[2025-08-21T18:53:09.073Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T18:53:32.168Z] Restarting host.
[2025-08-21T18:53:32.174Z] Stopping JobHost
[2025-08-21T18:53:32.174Z] Job host stopped
[2025-08-21T18:53:32.180Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '7bb626ef-ad26-44fe-80b3-f6f87d4b6080'
[2025-08-21T18:53:32.284Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:53:32.284Z] Host configuration file read:
[2025-08-21T18:53:32.284Z] {
[2025-08-21T18:53:32.284Z]   "version": "2.0",
[2025-08-21T18:53:32.284Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:53:32.284Z]   "logging": {
[2025-08-21T18:53:32.284Z]     "applicationInsights": {
[2025-08-21T18:53:32.284Z]       "samplingSettings": {
[2025-08-21T18:53:32.284Z]         "isEnabled": true,
[2025-08-21T18:53:32.284Z]         "excludedTypes": "Request"
[2025-08-21T18:53:32.284Z]       }
[2025-08-21T18:53:32.284Z]     },
[2025-08-21T18:53:32.284Z]     "logLevel": {
[2025-08-21T18:53:32.284Z]       "default": "Information",
[2025-08-21T18:53:32.284Z]       "Host.Results": "Information",
[2025-08-21T18:53:32.284Z]       "Function": "Information"
[2025-08-21T18:53:32.284Z]     }
[2025-08-21T18:53:32.284Z]   },
[2025-08-21T18:53:32.284Z]   "extensionBundle": {
[2025-08-21T18:53:32.284Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:53:32.284Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:53:32.284Z]   },
[2025-08-21T18:53:32.284Z]   "watchDirectories": [
[2025-08-21T18:53:32.284Z]     "Shared"
[2025-08-21T18:53:32.284Z]   ]
[2025-08-21T18:53:32.284Z] }
[2025-08-21T18:53:32.286Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:53:32.295Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:53:32.295Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:53:32.296Z] Loading functions metadata
[2025-08-21T18:53:32.296Z] Worker indexing is enabled
[2025-08-21T18:53:32.296Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:53:32.296Z] Reading functions metadata (Worker)
[2025-08-21T18:53:32.296Z] Shutting down language worker channels for runtime:node
[2025-08-21T18:53:32.322Z] Worker 91833b90-c1d5-4c62-8167-314c64ca15a7 exited with code 0
[2025-08-21T18:53:32.445Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d connecting on 127.0.0.1:54302
[2025-08-21T18:53:32.468Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received WorkerInitRequest
[2025-08-21T18:53:32.471Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionsMetadataRequest
[2025-08-21T18:53:32.471Z] Reading functions metadata (Host)
[2025-08-21T18:53:32.691Z] 21 functions found (Host)
[2025-08-21T18:53:32.691Z] 21 functions loaded
[2025-08-21T18:53:32.691Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:53:32.691Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:53:32.691Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:53:32.691Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T18:53:32.839Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:53:32.839Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:53:32.839Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin
[2025-08-21T18:53:32.839Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin'.
[2025-08-21T18:53:32.923Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:53:32.923Z] Host configuration file read:
[2025-08-21T18:53:32.923Z] {
[2025-08-21T18:53:32.923Z]   "version": "2.0",
[2025-08-21T18:53:32.923Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:53:32.923Z]   "logging": {
[2025-08-21T18:53:32.923Z]     "applicationInsights": {
[2025-08-21T18:53:32.923Z]       "samplingSettings": {
[2025-08-21T18:53:32.923Z]         "isEnabled": true,
[2025-08-21T18:53:32.923Z]         "excludedTypes": "Request"
[2025-08-21T18:53:32.923Z]       }
[2025-08-21T18:53:32.923Z]     },
[2025-08-21T18:53:32.923Z]     "logLevel": {
[2025-08-21T18:53:32.923Z]       "default": "Information",
[2025-08-21T18:53:32.923Z]       "Host.Results": "Information",
[2025-08-21T18:53:32.923Z]       "Function": "Information"
[2025-08-21T18:53:32.923Z]     }
[2025-08-21T18:53:32.923Z]   },
[2025-08-21T18:53:32.923Z]   "extensionBundle": {
[2025-08-21T18:53:32.923Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:53:32.923Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:53:32.923Z]   },
[2025-08-21T18:53:32.923Z]   "watchDirectories": [
[2025-08-21T18:53:32.923Z]     "Shared"
[2025-08-21T18:53:32.923Z]   ]
[2025-08-21T18:53:32.923Z] }
[2025-08-21T18:53:32.988Z] Initializing Warmup Extension.
[2025-08-21T18:53:32.988Z] Initializing Host. OperationId: '7bb626ef-ad26-44fe-80b3-f6f87d4b6080'.
[2025-08-21T18:53:32.988Z] Host initialization: ConsecutiveErrors=0, StartupCount=5, OperationId=7bb626ef-ad26-44fe-80b3-f6f87d4b6080
[2025-08-21T18:53:32.990Z] LoggerFilterOptions
[2025-08-21T18:53:32.990Z] {
[2025-08-21T18:53:32.990Z]   "MinLevel": "None",
[2025-08-21T18:53:32.990Z]   "Rules": [
[2025-08-21T18:53:32.990Z]     {
[2025-08-21T18:53:32.990Z]       "ProviderName": null,
[2025-08-21T18:53:32.990Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:53:32.990Z]       "LogLevel": "None",
[2025-08-21T18:53:32.990Z]       "Filter": null
[2025-08-21T18:53:32.990Z]     },
[2025-08-21T18:53:32.990Z]     {
[2025-08-21T18:53:32.990Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:32.990Z]       "CategoryName": null,
[2025-08-21T18:53:32.990Z]       "LogLevel": "None",
[2025-08-21T18:53:32.990Z]       "Filter": null
[2025-08-21T18:53:32.990Z]     },
[2025-08-21T18:53:32.990Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": null,
[2025-08-21T18:53:32.991Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": null,
[2025-08-21T18:53:32.991Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": null,
[2025-08-21T18:53:32.991Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": "Host.Results",
[2025-08-21T18:53:32.991Z]       "LogLevel": "Information",
[2025-08-21T18:53:32.991Z]       "Filter": null
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": "Function",
[2025-08-21T18:53:32.991Z]       "LogLevel": "Information",
[2025-08-21T18:53:32.991Z]       "Filter": null
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": "Information",
[2025-08-21T18:53:32.991Z]       "Filter": null
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": "None",
[2025-08-21T18:53:32.991Z]       "Filter": null
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": null,
[2025-08-21T18:53:32.991Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": null,
[2025-08-21T18:53:32.991Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:32.991Z]     }
[2025-08-21T18:53:32.991Z]   ]
[2025-08-21T18:53:32.991Z] }
[2025-08-21T18:53:32.991Z] LoggerFilterOptions
[2025-08-21T18:53:32.991Z] {
[2025-08-21T18:53:32.991Z]   "MinLevel": "None",
[2025-08-21T18:53:32.991Z]   "Rules": [
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:53:32.991Z]       "LogLevel": "None",
[2025-08-21T18:53:32.991Z]       "Filter": null
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": "None",
[2025-08-21T18:53:32.991Z]       "Filter": null
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": null,
[2025-08-21T18:53:32.991Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": null,
[2025-08-21T18:53:32.991Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": null,
[2025-08-21T18:53:32.991Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": "Host.Results",
[2025-08-21T18:53:32.991Z]       "LogLevel": "Information",
[2025-08-21T18:53:32.991Z]       "Filter": null
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": "Function",
[2025-08-21T18:53:32.991Z]       "LogLevel": "Information",
[2025-08-21T18:53:32.991Z]       "Filter": null
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": null,
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": "Information",
[2025-08-21T18:53:32.991Z]       "Filter": null
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": "None",
[2025-08-21T18:53:32.991Z]       "Filter": null
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": null,
[2025-08-21T18:53:32.991Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:32.991Z]     },
[2025-08-21T18:53:32.991Z]     {
[2025-08-21T18:53:32.991Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:32.991Z]       "CategoryName": null,
[2025-08-21T18:53:32.991Z]       "LogLevel": null,
[2025-08-21T18:53:32.991Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:32.991Z]     }
[2025-08-21T18:53:32.991Z]   ]
[2025-08-21T18:53:32.991Z] }
[2025-08-21T18:53:32.991Z] FunctionResultAggregatorOptions
[2025-08-21T18:53:32.991Z] {
[2025-08-21T18:53:32.991Z]   "BatchSize": 1000,
[2025-08-21T18:53:32.991Z]   "FlushTimeout": "00:00:30",
[2025-08-21T18:53:32.991Z]   "IsEnabled": true
[2025-08-21T18:53:32.991Z] }
[2025-08-21T18:53:32.991Z] ConcurrencyOptions
[2025-08-21T18:53:32.991Z] {
[2025-08-21T18:53:32.991Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T18:53:32.991Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T18:53:32.991Z]   "CPUThreshold": 0.8,
[2025-08-21T18:53:32.991Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T18:53:32.991Z] }
[2025-08-21T18:53:32.991Z] SingletonOptions
[2025-08-21T18:53:32.991Z] {
[2025-08-21T18:53:32.991Z]   "LockPeriod": "00:00:15",
[2025-08-21T18:53:32.991Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T18:53:32.991Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T18:53:32.991Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T18:53:32.991Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T18:53:32.991Z] }
[2025-08-21T18:53:32.991Z] ScaleOptions
[2025-08-21T18:53:32.991Z] {
[2025-08-21T18:53:32.991Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T18:53:32.991Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T18:53:32.991Z]   "MetricsPurgeEnabled": true,
[2025-08-21T18:53:32.991Z]   "IsTargetScalingEnabled": true,
[2025-08-21T18:53:32.991Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T18:53:32.992Z] }
[2025-08-21T18:53:32.992Z] Starting JobHost
[2025-08-21T18:53:32.992Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=193e61ae-ef51-4eb7-9fc5-01264a996171, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T18:53:32.992Z] Loading functions metadata
[2025-08-21T18:53:32.992Z] Worker indexing is enabled
[2025-08-21T18:53:32.992Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:53:32.992Z] Reading functions metadata (Worker)
[2025-08-21T18:53:32.992Z] Reading functions metadata (Host)
[2025-08-21T18:53:33.167Z] 21 functions found (Host)
[2025-08-21T18:53:33.168Z] Reading functions metadata (Custom)
[2025-08-21T18:53:33.168Z] 0 functions found (Custom)
[2025-08-21T18:53:33.168Z] 21 functions loaded
[2025-08-21T18:53:33.169Z] Generating 21 job function(s)
[2025-08-21T18:53:33.169Z] Worker process started and initialized.
[2025-08-21T18:53:33.177Z] Found the following functions:
[2025-08-21T18:53:33.177Z] Host.Functions.aiBuilderHealth
[2025-08-21T18:53:33.177Z] Host.Functions.analytics
[2025-08-21T18:53:33.177Z] Host.Functions.analyzeUIImage
[2025-08-21T18:53:33.177Z] Host.Functions.atlasComponents
[2025-08-21T18:53:33.177Z] Host.Functions.fast-suggestions
[2025-08-21T18:53:33.177Z] Host.Functions.figmaOAuthCallback
[2025-08-21T18:53:33.177Z] Host.Functions.figmaOAuthStart
[2025-08-21T18:53:33.177Z] Host.Functions.generateSuggestions
[2025-08-21T18:53:33.177Z] Host.Functions.generateWireframe
[2025-08-21T18:53:33.177Z] Host.Functions.generateWireframeAlias
[2025-08-21T18:53:33.177Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T18:53:33.177Z] Host.Functions.generateWireframeOptionB
[2025-08-21T18:53:33.177Z] Host.Functions.get-template
[2025-08-21T18:53:33.177Z] Host.Functions.githubAuthCallback
[2025-08-21T18:53:33.177Z] Host.Functions.githubAuthStart
[2025-08-21T18:53:33.177Z] Host.Functions.health
[2025-08-21T18:53:33.177Z] Host.Functions.healthCheck
[2025-08-21T18:53:33.177Z] Host.Functions.openai-health
[2025-08-21T18:53:33.177Z] Host.Functions.performance-stats
[2025-08-21T18:53:33.177Z] Host.Functions.testFunction
[2025-08-21T18:53:33.177Z] Host.Functions.testSimple
[2025-08-21T18:53:33.177Z] 
[2025-08-21T18:53:33.178Z] HttpOptions
[2025-08-21T18:53:33.178Z] {
[2025-08-21T18:53:33.178Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T18:53:33.178Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T18:53:33.178Z]   "MaxConcurrentRequests": -1,
[2025-08-21T18:53:33.178Z]   "MaxOutstandingRequests": -1,
[2025-08-21T18:53:33.178Z]   "RoutePrefix": "api"
[2025-08-21T18:53:33.178Z] }
[2025-08-21T18:53:33.178Z] Initializing function HTTP routes
[2025-08-21T18:53:33.178Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T18:53:33.178Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T18:53:33.178Z] 
[2025-08-21T18:53:33.178Z] Host initialized (186ms)
[2025-08-21T18:53:33.178Z] Host started (186ms)
[2025-08-21T18:53:33.178Z] Job host started
[2025-08-21T18:53:33.178Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:53:33.178Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:53:33.208Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T18:53:33.209Z] ✅ OpenAI initialized for image analysis
[2025-08-21T18:53:33.209Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:53:33.209Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:53:33.246Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T18:53:33.246Z] 🔍 Current env vars:
[2025-08-21T18:53:33.246Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T18:53:33.246Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T18:53:33.246Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T18:53:33.246Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:53:33.246Z]   Deployment: gpt-4o
[2025-08-21T18:53:33.246Z]   API Version: 2024-08-01-preview
[2025-08-21T18:53:33.246Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T18:53:33.246Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T18:53:33.246Z] ✅ OpenAI client initialized successfully
[2025-08-21T18:53:33.246Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:53:33.246Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:53:33.248Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T18:53:33.253Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.253Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.253Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.254Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.254Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.254Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.254Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:33.254Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.254Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '3e04b42a-6db4-4466-9089-1973d2e9585f'.
[2025-08-21T18:53:33.254Z] Result: Failure
[2025-08-21T18:53:33.254Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:33.254Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T18:53:33.254Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:53:33.254Z]                    ^^^^^
[2025-08-21T18:53:33.254Z] 
[2025-08-21T18:53:33.254Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:33.254Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:53:33.254Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'e48cd117-0991-4592-836f-e75cac1e55a4'.
[2025-08-21T18:53:33.254Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.254Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:53:33.254Z] Result: Failure
[2025-08-21T18:53:33.254Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:33.254Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T18:53:33.254Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:53:33.254Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:53:33.254Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:53:33.254Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:53:33.254Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.254Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:53:33.254Z]                    ^^^^^
[2025-08-21T18:53:33.254Z] 
[2025-08-21T18:53:33.254Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.254Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:53:33.255Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:53:33.255Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:53:33.254Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:53:33.255Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:53:33.255Z]     at Generator.next (<anonymous>).
[2025-08-21T18:53:33.255Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:53:33.255Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:53:33.255Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:53:33.255Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:53:33.255Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:53:33.255Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:53:33.255Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:53:33.255Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:53:33.255Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:53:33.255Z]     at Generator.next (<anonymous>).
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.255Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d received FunctionLoadRequest
[2025-08-21T18:53:33.266Z] Host restarted.
[2025-08-21T18:53:37.995Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T18:53:49.618Z] Restarting host.
[2025-08-21T18:53:49.625Z] Stopping JobHost
[2025-08-21T18:53:49.626Z] Job host stopped
[2025-08-21T18:53:49.638Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '4b16071c-cc97-44d5-bb9f-877e247b71e9'
[2025-08-21T18:53:49.714Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:53:49.714Z] Host configuration file read:
[2025-08-21T18:53:49.714Z] {
[2025-08-21T18:53:49.714Z]   "version": "2.0",
[2025-08-21T18:53:49.714Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:53:49.714Z]   "logging": {
[2025-08-21T18:53:49.714Z]     "applicationInsights": {
[2025-08-21T18:53:49.714Z]       "samplingSettings": {
[2025-08-21T18:53:49.714Z]         "isEnabled": true,
[2025-08-21T18:53:49.714Z]         "excludedTypes": "Request"
[2025-08-21T18:53:49.714Z]       }
[2025-08-21T18:53:49.714Z]     },
[2025-08-21T18:53:49.714Z]     "logLevel": {
[2025-08-21T18:53:49.714Z]       "default": "Information",
[2025-08-21T18:53:49.714Z]       "Host.Results": "Information",
[2025-08-21T18:53:49.714Z]       "Function": "Information"
[2025-08-21T18:53:49.714Z]     }
[2025-08-21T18:53:49.714Z]   },
[2025-08-21T18:53:49.714Z]   "extensionBundle": {
[2025-08-21T18:53:49.714Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:53:49.714Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:53:49.714Z]   },
[2025-08-21T18:53:49.714Z]   "watchDirectories": [
[2025-08-21T18:53:49.714Z]     "Shared"
[2025-08-21T18:53:49.714Z]   ]
[2025-08-21T18:53:49.714Z] }
[2025-08-21T18:53:49.715Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:53:49.716Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:53:49.716Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:53:49.716Z] Loading functions metadata
[2025-08-21T18:53:49.716Z] Worker indexing is enabled
[2025-08-21T18:53:49.716Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:53:49.716Z] Reading functions metadata (Worker)
[2025-08-21T18:53:49.716Z] Shutting down language worker channels for runtime:node
[2025-08-21T18:53:49.734Z] Worker 7448571f-f420-464f-82d8-e9c6d3ab437d exited with code 0
[2025-08-21T18:53:49.917Z] Worker 0a556412-04d2-4492-b77e-5752398025bc connecting on 127.0.0.1:54302
[2025-08-21T18:53:49.945Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received WorkerInitRequest
[2025-08-21T18:53:49.950Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionsMetadataRequest
[2025-08-21T18:53:49.950Z] Reading functions metadata (Host)
[2025-08-21T18:53:50.258Z] 21 functions found (Host)
[2025-08-21T18:53:50.259Z] 21 functions loaded
[2025-08-21T18:53:50.259Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T18:53:50.259Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:53:50.259Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:53:50.259Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T18:53:50.406Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T18:53:50.406Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T18:53:50.406Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin
[2025-08-21T18:53:50.406Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin'.
[2025-08-21T18:53:50.460Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T18:53:50.460Z] Host configuration file read:
[2025-08-21T18:53:50.460Z] {
[2025-08-21T18:53:50.460Z]   "version": "2.0",
[2025-08-21T18:53:50.460Z]   "functionTimeout": "00:05:00",
[2025-08-21T18:53:50.460Z]   "logging": {
[2025-08-21T18:53:50.460Z]     "applicationInsights": {
[2025-08-21T18:53:50.460Z]       "samplingSettings": {
[2025-08-21T18:53:50.460Z]         "isEnabled": true,
[2025-08-21T18:53:50.460Z]         "excludedTypes": "Request"
[2025-08-21T18:53:50.460Z]       }
[2025-08-21T18:53:50.460Z]     },
[2025-08-21T18:53:50.460Z]     "logLevel": {
[2025-08-21T18:53:50.460Z]       "default": "Information",
[2025-08-21T18:53:50.460Z]       "Host.Results": "Information",
[2025-08-21T18:53:50.460Z]       "Function": "Information"
[2025-08-21T18:53:50.460Z]     }
[2025-08-21T18:53:50.460Z]   },
[2025-08-21T18:53:50.460Z]   "extensionBundle": {
[2025-08-21T18:53:50.460Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T18:53:50.460Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T18:53:50.460Z]   },
[2025-08-21T18:53:50.460Z]   "watchDirectories": [
[2025-08-21T18:53:50.460Z]     "Shared"
[2025-08-21T18:53:50.460Z]   ]
[2025-08-21T18:53:50.460Z] }
[2025-08-21T18:53:50.505Z] Initializing Warmup Extension.
[2025-08-21T18:53:50.507Z] Initializing Host. OperationId: '4b16071c-cc97-44d5-bb9f-877e247b71e9'.
[2025-08-21T18:53:50.507Z] Host initialization: ConsecutiveErrors=0, StartupCount=6, OperationId=4b16071c-cc97-44d5-bb9f-877e247b71e9
[2025-08-21T18:53:50.509Z] LoggerFilterOptions
[2025-08-21T18:53:50.509Z] {
[2025-08-21T18:53:50.509Z]   "MinLevel": "None",
[2025-08-21T18:53:50.509Z]   "Rules": [
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": null,
[2025-08-21T18:53:50.509Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:53:50.509Z]       "LogLevel": "None",
[2025-08-21T18:53:50.509Z]       "Filter": null
[2025-08-21T18:53:50.509Z]     },
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:50.509Z]       "CategoryName": null,
[2025-08-21T18:53:50.509Z]       "LogLevel": "None",
[2025-08-21T18:53:50.509Z]       "Filter": null
[2025-08-21T18:53:50.509Z]     },
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:50.509Z]       "CategoryName": null,
[2025-08-21T18:53:50.509Z]       "LogLevel": null,
[2025-08-21T18:53:50.509Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:50.509Z]     },
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": null,
[2025-08-21T18:53:50.509Z]       "CategoryName": null,
[2025-08-21T18:53:50.509Z]       "LogLevel": null,
[2025-08-21T18:53:50.509Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:50.509Z]     },
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": null,
[2025-08-21T18:53:50.509Z]       "CategoryName": null,
[2025-08-21T18:53:50.509Z]       "LogLevel": null,
[2025-08-21T18:53:50.509Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:50.509Z]     },
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": null,
[2025-08-21T18:53:50.509Z]       "CategoryName": "Host.Results",
[2025-08-21T18:53:50.509Z]       "LogLevel": "Information",
[2025-08-21T18:53:50.509Z]       "Filter": null
[2025-08-21T18:53:50.509Z]     },
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": null,
[2025-08-21T18:53:50.509Z]       "CategoryName": "Function",
[2025-08-21T18:53:50.509Z]       "LogLevel": "Information",
[2025-08-21T18:53:50.509Z]       "Filter": null
[2025-08-21T18:53:50.509Z]     },
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": null,
[2025-08-21T18:53:50.509Z]       "CategoryName": null,
[2025-08-21T18:53:50.509Z]       "LogLevel": "Information",
[2025-08-21T18:53:50.509Z]       "Filter": null
[2025-08-21T18:53:50.509Z]     },
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:50.509Z]       "CategoryName": null,
[2025-08-21T18:53:50.509Z]       "LogLevel": "None",
[2025-08-21T18:53:50.509Z]       "Filter": null
[2025-08-21T18:53:50.509Z]     },
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:50.509Z]       "CategoryName": null,
[2025-08-21T18:53:50.509Z]       "LogLevel": null,
[2025-08-21T18:53:50.509Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:50.509Z]     },
[2025-08-21T18:53:50.509Z]     {
[2025-08-21T18:53:50.509Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:50.509Z]       "CategoryName": null,
[2025-08-21T18:53:50.509Z]       "LogLevel": null,
[2025-08-21T18:53:50.509Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:50.509Z]     }
[2025-08-21T18:53:50.509Z]   ]
[2025-08-21T18:53:50.509Z] }
[2025-08-21T18:53:50.510Z] LoggerFilterOptions
[2025-08-21T18:53:50.510Z] {
[2025-08-21T18:53:50.510Z]   "MinLevel": "None",
[2025-08-21T18:53:50.510Z]   "Rules": [
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": null,
[2025-08-21T18:53:50.510Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T18:53:50.510Z]       "LogLevel": "None",
[2025-08-21T18:53:50.510Z]       "Filter": null
[2025-08-21T18:53:50.510Z]     },
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:50.510Z]       "CategoryName": null,
[2025-08-21T18:53:50.510Z]       "LogLevel": "None",
[2025-08-21T18:53:50.510Z]       "Filter": null
[2025-08-21T18:53:50.510Z]     },
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:50.510Z]       "CategoryName": null,
[2025-08-21T18:53:50.510Z]       "LogLevel": null,
[2025-08-21T18:53:50.510Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:50.510Z]     },
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": null,
[2025-08-21T18:53:50.510Z]       "CategoryName": null,
[2025-08-21T18:53:50.510Z]       "LogLevel": null,
[2025-08-21T18:53:50.510Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:50.510Z]     },
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": null,
[2025-08-21T18:53:50.510Z]       "CategoryName": null,
[2025-08-21T18:53:50.510Z]       "LogLevel": null,
[2025-08-21T18:53:50.510Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:50.510Z]     },
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": null,
[2025-08-21T18:53:50.510Z]       "CategoryName": "Host.Results",
[2025-08-21T18:53:50.510Z]       "LogLevel": "Information",
[2025-08-21T18:53:50.510Z]       "Filter": null
[2025-08-21T18:53:50.510Z]     },
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": null,
[2025-08-21T18:53:50.510Z]       "CategoryName": "Function",
[2025-08-21T18:53:50.510Z]       "LogLevel": "Information",
[2025-08-21T18:53:50.510Z]       "Filter": null
[2025-08-21T18:53:50.510Z]     },
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": null,
[2025-08-21T18:53:50.510Z]       "CategoryName": null,
[2025-08-21T18:53:50.510Z]       "LogLevel": "Information",
[2025-08-21T18:53:50.510Z]       "Filter": null
[2025-08-21T18:53:50.510Z]     },
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:50.510Z]       "CategoryName": null,
[2025-08-21T18:53:50.510Z]       "LogLevel": "None",
[2025-08-21T18:53:50.510Z]       "Filter": null
[2025-08-21T18:53:50.510Z]     },
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T18:53:50.510Z]       "CategoryName": null,
[2025-08-21T18:53:50.510Z]       "LogLevel": null,
[2025-08-21T18:53:50.510Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:50.510Z]     },
[2025-08-21T18:53:50.510Z]     {
[2025-08-21T18:53:50.510Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T18:53:50.510Z]       "CategoryName": null,
[2025-08-21T18:53:50.510Z]       "LogLevel": null,
[2025-08-21T18:53:50.510Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T18:53:50.510Z]     }
[2025-08-21T18:53:50.510Z]   ]
[2025-08-21T18:53:50.510Z] }
[2025-08-21T18:53:50.510Z] FunctionResultAggregatorOptions
[2025-08-21T18:53:50.510Z] {
[2025-08-21T18:53:50.510Z]   "BatchSize": 1000,
[2025-08-21T18:53:50.510Z]   "FlushTimeout": "00:00:30",
[2025-08-21T18:53:50.510Z]   "IsEnabled": true
[2025-08-21T18:53:50.510Z] }
[2025-08-21T18:53:50.510Z] ConcurrencyOptions
[2025-08-21T18:53:50.510Z] {
[2025-08-21T18:53:50.510Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T18:53:50.510Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T18:53:50.510Z]   "CPUThreshold": 0.8,
[2025-08-21T18:53:50.510Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T18:53:50.510Z] }
[2025-08-21T18:53:50.510Z] SingletonOptions
[2025-08-21T18:53:50.510Z] {
[2025-08-21T18:53:50.510Z]   "LockPeriod": "00:00:15",
[2025-08-21T18:53:50.510Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T18:53:50.510Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T18:53:50.510Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T18:53:50.510Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T18:53:50.510Z] }
[2025-08-21T18:53:50.510Z] ScaleOptions
[2025-08-21T18:53:50.510Z] {
[2025-08-21T18:53:50.510Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T18:53:50.510Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T18:53:50.510Z]   "MetricsPurgeEnabled": true,
[2025-08-21T18:53:50.510Z]   "IsTargetScalingEnabled": true,
[2025-08-21T18:53:50.510Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T18:53:50.510Z] }
[2025-08-21T18:53:50.510Z] Starting JobHost
[2025-08-21T18:53:50.510Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=9ffd1f63-262b-4b6b-b536-1686da0ae949, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T18:53:50.510Z] Loading functions metadata
[2025-08-21T18:53:50.510Z] Worker indexing is enabled
[2025-08-21T18:53:50.510Z] Fetching metadata for workerRuntime: node
[2025-08-21T18:53:50.510Z] Reading functions metadata (Worker)
[2025-08-21T18:53:50.510Z] Reading functions metadata (Host)
[2025-08-21T18:53:50.672Z] 21 functions found (Host)
[2025-08-21T18:53:50.672Z] Reading functions metadata (Custom)
[2025-08-21T18:53:50.673Z] 0 functions found (Custom)
[2025-08-21T18:53:50.673Z] 21 functions loaded
[2025-08-21T18:53:50.675Z] Generating 21 job function(s)
[2025-08-21T18:53:50.675Z] Worker process started and initialized.
[2025-08-21T18:53:50.684Z] Found the following functions:
[2025-08-21T18:53:50.684Z] Host.Functions.aiBuilderHealth
[2025-08-21T18:53:50.684Z] Host.Functions.analytics
[2025-08-21T18:53:50.684Z] Host.Functions.analyzeUIImage
[2025-08-21T18:53:50.684Z] Host.Functions.atlasComponents
[2025-08-21T18:53:50.684Z] Host.Functions.fast-suggestions
[2025-08-21T18:53:50.684Z] Host.Functions.figmaOAuthCallback
[2025-08-21T18:53:50.684Z] Host.Functions.figmaOAuthStart
[2025-08-21T18:53:50.684Z] Host.Functions.generateSuggestions
[2025-08-21T18:53:50.684Z] Host.Functions.generateWireframe
[2025-08-21T18:53:50.684Z] Host.Functions.generateWireframeAlias
[2025-08-21T18:53:50.684Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T18:53:50.684Z] Host.Functions.generateWireframeOptionB
[2025-08-21T18:53:50.684Z] Host.Functions.get-template
[2025-08-21T18:53:50.684Z] Host.Functions.githubAuthCallback
[2025-08-21T18:53:50.684Z] Host.Functions.githubAuthStart
[2025-08-21T18:53:50.684Z] Host.Functions.health
[2025-08-21T18:53:50.685Z] Host.Functions.healthCheck
[2025-08-21T18:53:50.685Z] Host.Functions.openai-health
[2025-08-21T18:53:50.685Z] Host.Functions.performance-stats
[2025-08-21T18:53:50.685Z] Host.Functions.testFunction
[2025-08-21T18:53:50.685Z] Host.Functions.testSimple
[2025-08-21T18:53:50.685Z] 
[2025-08-21T18:53:50.685Z] HttpOptions
[2025-08-21T18:53:50.685Z] {
[2025-08-21T18:53:50.685Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T18:53:50.685Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T18:53:50.685Z]   "MaxConcurrentRequests": -1,
[2025-08-21T18:53:50.685Z] Initializing function HTTP routes
[2025-08-21T18:53:50.685Z]   "MaxOutstandingRequests": -1,
[2025-08-21T18:53:50.685Z]   "RoutePrefix": "api"
[2025-08-21T18:53:50.685Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T18:53:50.685Z] }
[2025-08-21T18:53:50.685Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T18:53:50.685Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T18:53:50.685Z] 
[2025-08-21T18:53:50.685Z] Host initialized (174ms)
[2025-08-21T18:53:50.685Z] Host started (174ms)
[2025-08-21T18:53:50.685Z] Job host started
[2025-08-21T18:53:50.685Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:53:50.685Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T18:53:50.715Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T18:53:50.715Z] ✅ OpenAI initialized for image analysis
[2025-08-21T18:53:50.715Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:53:50.715Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:53:50.756Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T18:53:50.756Z] 🔍 Current env vars:
[2025-08-21T18:53:50.756Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T18:53:50.756Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T18:53:50.756Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T18:53:50.756Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:53:50.756Z]   Deployment: gpt-4o
[2025-08-21T18:53:50.756Z]   API Version: 2024-08-01-preview
[2025-08-21T18:53:50.756Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T18:53:50.756Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T18:53:50.756Z] ✅ OpenAI client initialized successfully
[2025-08-21T18:53:50.756Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T18:53:50.756Z] 🎯 Using deployment: gpt-4o
[2025-08-21T18:53:50.757Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T18:53:50.763Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.763Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.763Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.763Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.763Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.763Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.763Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:50.764Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '13b8d5d4-58cf-4228-b005-d2ce5ae7ba36'.
[2025-08-21T18:53:50.764Z] Result: Failure
[2025-08-21T18:53:50.764Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:50.764Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.764Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T18:53:50.764Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:50.764Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:53:50.764Z]                    ^^^^^
[2025-08-21T18:53:50.764Z] 
[2025-08-21T18:53:50.764Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:53:50.764Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:53:50.764Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:53:50.764Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:53:50.764Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:53:50.764Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.764Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '70843a2e-e6d4-42b2-8e3b-dbee2b613915'.
[2025-08-21T18:53:50.764Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:53:50.764Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.764Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest[2025-08-21T18:53:50.764Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.764Z] Result: Failure
[2025-08-21T18:53:50.764Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:53:50.764Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)

[2025-08-21T18:53:50.764Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T18:53:50.764Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T18:53:50.764Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:53:50.764Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T18:53:50.764Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.764Z]                    ^^^^^
[2025-08-21T18:53:50.764Z] 
[2025-08-21T18:53:50.764Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.764Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T18:53:50.764Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:53:50.764Z]     at Generator.next (<anonymous>).
[2025-08-21T18:53:50.764Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T18:53:50.764Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T18:53:50.764Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T18:53:50.764Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T18:53:50.764Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T18:53:50.764Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T18:53:50.764Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T18:53:50.764Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.764Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T18:53:50.764Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.764Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T18:53:50.764Z]     at Generator.next (<anonymous>).
[2025-08-21T18:53:50.764Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.765Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.765Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.765Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.765Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.765Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionLoadRequest
[2025-08-21T18:53:50.777Z] Host restarted.
[2025-08-21T18:53:55.510Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:05:04.168Z] Executing HTTP request: {
[2025-08-21T19:05:04.168Z]   "requestId": "f80b6aea-efb5-421f-843d-2b0702c56bd8",
[2025-08-21T19:05:04.168Z]   "method": "POST",
[2025-08-21T19:05:04.168Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:05:04.168Z]   "uri": "/api/generate-suggestions"
[2025-08-21T19:05:04.168Z] }
[2025-08-21T19:05:04.202Z] Executing 'Functions.generateSuggestions' (Reason='This function was programmatically called via the host APIs.', Id=08d8bb64-336e-4191-92b5-1b1630cc0602)
[2025-08-21T19:05:04.265Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionInvocationRequest with invocationId 08d8bb64-336e-4191-92b5-1b1630cc0602
[2025-08-21T19:05:04.268Z] Executed 'Functions.generateSuggestions' (Succeeded, Id=08d8bb64-336e-4191-92b5-1b1630cc0602, Duration=76ms)
[2025-08-21T19:05:04.270Z] Executed HTTP request: {
[2025-08-21T19:05:04.270Z]   "requestId": "f80b6aea-efb5-421f-843d-2b0702c56bd8",
[2025-08-21T19:05:04.270Z]   "identities": "",
[2025-08-21T19:05:04.270Z]   "status": "200",
[2025-08-21T19:05:04.270Z]   "duration": "103"
[2025-08-21T19:05:04.270Z] }
[2025-08-21T19:05:06.379Z] Executing HTTP request: {
[2025-08-21T19:05:06.379Z]   "requestId": "564b28b8-5bd9-4bf7-9640-aea087029fa0",
[2025-08-21T19:05:06.379Z]   "method": "POST",
[2025-08-21T19:05:06.379Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:05:06.379Z]   "uri": "/api/generate-wireframe-enhanced"
[2025-08-21T19:05:06.379Z] }
[2025-08-21T19:05:06.382Z] Executing 'Functions.generateWireframeEnhanced' (Reason='This function was programmatically called via the host APIs.', Id=851acae3-b191-404d-b0d8-cdb43a242d49)
[2025-08-21T19:05:06.448Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionInvocationRequest with invocationId 851acae3-b191-404d-b0d8-cdb43a242d49
[2025-08-21T19:05:14.921Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:05:14.921Z] 🔍 Atlas component check (ENHANCED):
[2025-08-21T19:05:14.921Z]     Description: "Design Microsoft Learn's documentation page with table of contents and code examples"
[2025-08-21T19:05:14.921Z]     Contains learning keywords: false
[2025-08-21T19:05:14.921Z]     Is hero section exclusion: false
[2025-08-21T19:05:14.921Z]     Final isLearningPlatform: false
[2025-08-21T19:05:14.921Z] ℹ️ Not a learning platform, skipping Atlas components
[2025-08-21T19:05:14.927Z] Executed 'Functions.generateWireframeEnhanced' (Succeeded, Id=851acae3-b191-404d-b0d8-cdb43a242d49, Duration=8546ms)
[2025-08-21T19:05:14.929Z] Executed HTTP request: {
[2025-08-21T19:05:14.929Z]   "requestId": "564b28b8-5bd9-4bf7-9640-aea087029fa0",
[2025-08-21T19:05:14.929Z]   "identities": "",
[2025-08-21T19:05:14.929Z]   "status": "200",
[2025-08-21T19:05:14.929Z]   "duration": "8550"
[2025-08-21T19:05:14.929Z] }
[2025-08-21T19:08:20.004Z] Executing HTTP request: {
[2025-08-21T19:08:20.004Z]   "requestId": "b6d219e3-5527-4240-82eb-b7ae9c86eb98",
[2025-08-21T19:08:20.004Z]   "method": "POST",
[2025-08-21T19:08:20.004Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:08:20.004Z]   "uri": "/api/generate-wireframe-enhanced"
[2025-08-21T19:08:20.005Z] }
[2025-08-21T19:08:20.025Z] Executing 'Functions.generateWireframeEnhanced' (Reason='This function was programmatically called via the host APIs.', Id=4bc5881b-3ded-49ca-9f63-2ef05bc02510)
[2025-08-21T19:08:20.068Z] Worker 0a556412-04d2-4492-b77e-5752398025bc received FunctionInvocationRequest with invocationId 4bc5881b-3ded-49ca-9f63-2ef05bc02510
[2025-08-21T19:08:28.570Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:08:28.571Z] 🔍 Atlas component check (ENHANCED):
[2025-08-21T19:08:28.571Z]     Description: "Design Microsoft Learn's documentation page with table of contents and code examples"
[2025-08-21T19:08:28.571Z]     Contains learning keywords: false
[2025-08-21T19:08:28.571Z]     Is hero section exclusion: false
[2025-08-21T19:08:28.571Z]     Final isLearningPlatform: false
[2025-08-21T19:08:28.571Z] ℹ️ Not a learning platform, skipping Atlas components
[2025-08-21T19:08:28.576Z] Executed 'Functions.generateWireframeEnhanced' (Succeeded, Id=4bc5881b-3ded-49ca-9f63-2ef05bc02510, Duration=8556ms)
[2025-08-21T19:08:28.579Z] Executed HTTP request: {
[2025-08-21T19:08:28.579Z]   "requestId": "b6d219e3-5527-4240-82eb-b7ae9c86eb98",
[2025-08-21T19:08:28.579Z]   "identities": "",
[2025-08-21T19:08:28.579Z]   "status": "200",
[2025-08-21T19:08:28.579Z]   "duration": "8576"
[2025-08-21T19:08:28.579Z] }
[2025-08-21T19:23:13.337Z] Watched directory change of type 'Changed' detected for '/Users/carlosmarinburgos/designetica/backend/node_modules/.package-lock.json'
[2025-08-21T19:23:13.338Z] Host configuration has changed. Signaling restart
[2025-08-21T19:23:13.851Z] Restarting host.
[2025-08-21T19:23:13.869Z] Stopping JobHost
[2025-08-21T19:23:13.870Z] Job host stopped
[2025-08-21T19:23:13.888Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '77d0cb08-8c3a-42e2-a778-a8c9713bce9f'
[2025-08-21T19:23:14.059Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:23:14.059Z] Host configuration file read:
[2025-08-21T19:23:14.059Z] {
[2025-08-21T19:23:14.059Z]   "version": "2.0",
[2025-08-21T19:23:14.059Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:23:14.059Z]   "logging": {
[2025-08-21T19:23:14.059Z]     "applicationInsights": {
[2025-08-21T19:23:14.059Z]       "samplingSettings": {
[2025-08-21T19:23:14.059Z]         "isEnabled": true,
[2025-08-21T19:23:14.059Z]         "excludedTypes": "Request"
[2025-08-21T19:23:14.059Z]       }
[2025-08-21T19:23:14.059Z]     },
[2025-08-21T19:23:14.059Z]     "logLevel": {
[2025-08-21T19:23:14.059Z]       "default": "Information",
[2025-08-21T19:23:14.059Z]       "Host.Results": "Information",
[2025-08-21T19:23:14.059Z]       "Function": "Information"
[2025-08-21T19:23:14.059Z]     }
[2025-08-21T19:23:14.059Z]   },
[2025-08-21T19:23:14.059Z]   "extensionBundle": {
[2025-08-21T19:23:14.059Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:23:14.059Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:23:14.059Z]   },
[2025-08-21T19:23:14.059Z]   "watchDirectories": [
[2025-08-21T19:23:14.059Z]     "Shared"
[2025-08-21T19:23:14.059Z]   ]
[2025-08-21T19:23:14.059Z] }
[2025-08-21T19:23:14.068Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:23:14.070Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T19:23:14.070Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T19:23:14.071Z] Loading functions metadata
[2025-08-21T19:23:14.073Z] Worker indexing is enabled
[2025-08-21T19:23:14.073Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:23:14.073Z] Reading functions metadata (Worker)
[2025-08-21T19:23:14.073Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:23:14.123Z] Worker 0a556412-04d2-4492-b77e-5752398025bc exited with code 0
[2025-08-21T19:23:14.802Z] Worker e41078d4-4354-4464-83cc-388b63a588ca connecting on 127.0.0.1:54302
[2025-08-21T19:23:14.827Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received WorkerInitRequest
[2025-08-21T19:23:14.831Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionsMetadataRequest
[2025-08-21T19:23:14.831Z] Reading functions metadata (Host)
[2025-08-21T19:23:15.090Z] 21 functions found (Host)
[2025-08-21T19:23:15.090Z] 21 functions loaded
[2025-08-21T19:23:15.090Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:23:15.090Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T19:23:15.090Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T19:23:15.090Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:23:15.270Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T19:23:15.270Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T19:23:15.270Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin
[2025-08-21T19:23:15.270Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin'.
[2025-08-21T19:23:15.318Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:23:15.318Z] Host configuration file read:
[2025-08-21T19:23:15.318Z] {
[2025-08-21T19:23:15.318Z]   "version": "2.0",
[2025-08-21T19:23:15.318Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:23:15.318Z]   "logging": {
[2025-08-21T19:23:15.318Z]     "applicationInsights": {
[2025-08-21T19:23:15.318Z]       "samplingSettings": {
[2025-08-21T19:23:15.318Z]         "isEnabled": true,
[2025-08-21T19:23:15.318Z]         "excludedTypes": "Request"
[2025-08-21T19:23:15.318Z]       }
[2025-08-21T19:23:15.318Z]     },
[2025-08-21T19:23:15.318Z]     "logLevel": {
[2025-08-21T19:23:15.318Z]       "default": "Information",
[2025-08-21T19:23:15.318Z]       "Host.Results": "Information",
[2025-08-21T19:23:15.318Z]       "Function": "Information"
[2025-08-21T19:23:15.318Z]     }
[2025-08-21T19:23:15.318Z]   },
[2025-08-21T19:23:15.318Z]   "extensionBundle": {
[2025-08-21T19:23:15.318Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:23:15.318Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:23:15.318Z]   },
[2025-08-21T19:23:15.318Z]   "watchDirectories": [
[2025-08-21T19:23:15.318Z]     "Shared"
[2025-08-21T19:23:15.318Z]   ]
[2025-08-21T19:23:15.318Z] }
[2025-08-21T19:23:15.364Z] Initializing Warmup Extension.
[2025-08-21T19:23:15.367Z] Initializing Host. OperationId: '77d0cb08-8c3a-42e2-a778-a8c9713bce9f'.
[2025-08-21T19:23:15.367Z] Host initialization: ConsecutiveErrors=0, StartupCount=7, OperationId=77d0cb08-8c3a-42e2-a778-a8c9713bce9f
[2025-08-21T19:23:15.370Z] LoggerFilterOptions
[2025-08-21T19:23:15.370Z] {
[2025-08-21T19:23:15.370Z]   "MinLevel": "None",
[2025-08-21T19:23:15.370Z]   "Rules": [
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": null,
[2025-08-21T19:23:15.370Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:23:15.370Z]       "LogLevel": "None",
[2025-08-21T19:23:15.370Z]       "Filter": null
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.370Z]       "LogLevel": "None",
[2025-08-21T19:23:15.370Z]       "Filter": null
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.370Z]       "LogLevel": null,
[2025-08-21T19:23:15.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": null,
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.370Z]       "LogLevel": null,
[2025-08-21T19:23:15.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": null,
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.370Z]       "LogLevel": null,
[2025-08-21T19:23:15.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": null,
[2025-08-21T19:23:15.370Z]       "CategoryName": "Host.Results",
[2025-08-21T19:23:15.370Z]       "LogLevel": "Information",
[2025-08-21T19:23:15.370Z]       "Filter": null
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": null,
[2025-08-21T19:23:15.370Z]       "CategoryName": "Function",
[2025-08-21T19:23:15.370Z]       "LogLevel": "Information",
[2025-08-21T19:23:15.370Z]       "Filter": null
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": null,
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.370Z]       "LogLevel": "Information",
[2025-08-21T19:23:15.370Z]       "Filter": null
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.370Z]       "LogLevel": "None",
[2025-08-21T19:23:15.370Z]       "Filter": null
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.370Z]       "LogLevel": null,
[2025-08-21T19:23:15.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.370Z]       "LogLevel": null,
[2025-08-21T19:23:15.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:23:15.370Z]     }
[2025-08-21T19:23:15.370Z]   ]
[2025-08-21T19:23:15.370Z] }
[2025-08-21T19:23:15.370Z] LoggerFilterOptions
[2025-08-21T19:23:15.370Z] {
[2025-08-21T19:23:15.370Z]   "MinLevel": "None",
[2025-08-21T19:23:15.370Z]   "Rules": [
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": null,
[2025-08-21T19:23:15.370Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:23:15.370Z]       "LogLevel": "None",
[2025-08-21T19:23:15.370Z]       "Filter": null
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.370Z]       "LogLevel": "None",
[2025-08-21T19:23:15.370Z]       "Filter": null
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.370Z]       "LogLevel": null,
[2025-08-21T19:23:15.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:23:15.370Z]     },
[2025-08-21T19:23:15.370Z]     {
[2025-08-21T19:23:15.370Z]       "ProviderName": null,
[2025-08-21T19:23:15.370Z]       "CategoryName": null,
[2025-08-21T19:23:15.371Z]       "LogLevel": null,
[2025-08-21T19:23:15.371Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:23:15.371Z]     },
[2025-08-21T19:23:15.371Z]     {
[2025-08-21T19:23:15.371Z]       "ProviderName": null,
[2025-08-21T19:23:15.371Z]       "CategoryName": null,
[2025-08-21T19:23:15.371Z]       "LogLevel": null,
[2025-08-21T19:23:15.371Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:23:15.371Z]     },
[2025-08-21T19:23:15.371Z]     {
[2025-08-21T19:23:15.371Z]       "ProviderName": null,
[2025-08-21T19:23:15.371Z]       "CategoryName": "Host.Results",
[2025-08-21T19:23:15.371Z]       "LogLevel": "Information",
[2025-08-21T19:23:15.371Z]       "Filter": null
[2025-08-21T19:23:15.371Z]     },
[2025-08-21T19:23:15.371Z]     {
[2025-08-21T19:23:15.371Z]       "ProviderName": null,
[2025-08-21T19:23:15.371Z]       "CategoryName": "Function",
[2025-08-21T19:23:15.371Z]       "LogLevel": "Information",
[2025-08-21T19:23:15.371Z]       "Filter": null
[2025-08-21T19:23:15.371Z]     },
[2025-08-21T19:23:15.371Z]     {
[2025-08-21T19:23:15.371Z]       "ProviderName": null,
[2025-08-21T19:23:15.371Z]       "CategoryName": null,
[2025-08-21T19:23:15.371Z]       "LogLevel": "Information",
[2025-08-21T19:23:15.371Z]       "Filter": null
[2025-08-21T19:23:15.371Z]     },
[2025-08-21T19:23:15.371Z]     {
[2025-08-21T19:23:15.371Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:23:15.371Z]       "CategoryName": null,
[2025-08-21T19:23:15.371Z]       "LogLevel": "None",
[2025-08-21T19:23:15.371Z]       "Filter": null
[2025-08-21T19:23:15.371Z]     },
[2025-08-21T19:23:15.371Z]     {
[2025-08-21T19:23:15.371Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:23:15.371Z]       "CategoryName": null,
[2025-08-21T19:23:15.371Z]       "LogLevel": null,
[2025-08-21T19:23:15.371Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:23:15.371Z]     },
[2025-08-21T19:23:15.371Z]     {
[2025-08-21T19:23:15.371Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:23:15.371Z]       "CategoryName": null,
[2025-08-21T19:23:15.371Z]       "LogLevel": null,
[2025-08-21T19:23:15.371Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:23:15.371Z]     }
[2025-08-21T19:23:15.371Z]   ]
[2025-08-21T19:23:15.371Z] }
[2025-08-21T19:23:15.371Z] FunctionResultAggregatorOptions
[2025-08-21T19:23:15.371Z] {
[2025-08-21T19:23:15.371Z]   "BatchSize": 1000,
[2025-08-21T19:23:15.371Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:23:15.371Z]   "IsEnabled": true
[2025-08-21T19:23:15.371Z] }
[2025-08-21T19:23:15.371Z] ConcurrencyOptions
[2025-08-21T19:23:15.371Z] {
[2025-08-21T19:23:15.371Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:23:15.371Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:23:15.371Z]   "CPUThreshold": 0.8,
[2025-08-21T19:23:15.371Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:23:15.371Z] }
[2025-08-21T19:23:15.371Z] SingletonOptions
[2025-08-21T19:23:15.371Z] {
[2025-08-21T19:23:15.371Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:23:15.371Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:23:15.371Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:23:15.371Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:23:15.371Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:23:15.371Z] }
[2025-08-21T19:23:15.371Z] ScaleOptions
[2025-08-21T19:23:15.371Z] {
[2025-08-21T19:23:15.371Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:23:15.371Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:23:15.371Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:23:15.371Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:23:15.371Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:23:15.371Z] }
[2025-08-21T19:23:15.371Z] Starting JobHost
[2025-08-21T19:23:15.371Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=a2fe39fa-e51a-4bd3-9de6-36d0c2644bcc, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:23:15.372Z] Loading functions metadata
[2025-08-21T19:23:15.372Z] Worker indexing is enabled
[2025-08-21T19:23:15.372Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:23:15.372Z] Reading functions metadata (Worker)
[2025-08-21T19:23:15.372Z] Reading functions metadata (Host)
[2025-08-21T19:23:15.544Z] 21 functions found (Host)
[2025-08-21T19:23:15.544Z] Reading functions metadata (Custom)
[2025-08-21T19:23:15.544Z] 0 functions found (Custom)
[2025-08-21T19:23:15.544Z] 21 functions loaded
[2025-08-21T19:23:15.547Z] Generating 21 job function(s)
[2025-08-21T19:23:15.547Z] Worker process started and initialized.
[2025-08-21T19:23:15.560Z] Found the following functions:
[2025-08-21T19:23:15.560Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:23:15.560Z] Host.Functions.analytics
[2025-08-21T19:23:15.560Z] Host.Functions.analyzeUIImage
[2025-08-21T19:23:15.560Z] Host.Functions.atlasComponents
[2025-08-21T19:23:15.560Z] Host.Functions.fast-suggestions
[2025-08-21T19:23:15.560Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:23:15.560Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:23:15.560Z] Host.Functions.generateSuggestions
[2025-08-21T19:23:15.560Z] Host.Functions.generateWireframe
[2025-08-21T19:23:15.560Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:23:15.560Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:23:15.560Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:23:15.560Z] Host.Functions.get-template
[2025-08-21T19:23:15.560Z] Host.Functions.githubAuthCallback
[2025-08-21T19:23:15.560Z] Host.Functions.githubAuthStart
[2025-08-21T19:23:15.560Z] Host.Functions.health
[2025-08-21T19:23:15.560Z] Host.Functions.healthCheck
[2025-08-21T19:23:15.560Z] Host.Functions.openai-health
[2025-08-21T19:23:15.560Z] Host.Functions.performance-stats
[2025-08-21T19:23:15.560Z] Host.Functions.testFunction
[2025-08-21T19:23:15.560Z] Host.Functions.testSimple
[2025-08-21T19:23:15.560Z] 
[2025-08-21T19:23:15.561Z] HttpOptions
[2025-08-21T19:23:15.561Z] {
[2025-08-21T19:23:15.561Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:23:15.561Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:23:15.561Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:23:15.561Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:23:15.561Z]   "RoutePrefix": "api"
[2025-08-21T19:23:15.561Z] Initializing function HTTP routes
[2025-08-21T19:23:15.561Z] }
[2025-08-21T19:23:15.561Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:23:15.561Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:23:15.561Z] 
[2025-08-21T19:23:15.561Z] Host initialized (189ms)
[2025-08-21T19:23:15.561Z] Host started (189ms)
[2025-08-21T19:23:15.561Z] Job host started
[2025-08-21T19:23:15.561Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:23:15.561Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:23:15.596Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:23:15.597Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:23:15.597Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:23:15.597Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:23:15.642Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.642Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.645Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:23:15.645Z] 🔍 Current env vars:
[2025-08-21T19:23:15.645Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:23:15.646Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:23:15.646Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:23:15.646Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:23:15.646Z]   Deployment: gpt-4o
[2025-08-21T19:23:15.646Z]   API Version: 2024-08-01-preview
[2025-08-21T19:23:15.646Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:23:15.646Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:23:15.646Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:23:15.646Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:23:15.646Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:23:15.647Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:23:15.652Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.652Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.652Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.652Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.652Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:23:15.652Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.652Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '06969d90-6a2a-47f2-90dd-7aeda90c31ad'.
[2025-08-21T19:23:15.652Z] Result: Failure
[2025-08-21T19:23:15.652Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:23:15.652Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:23:15.652Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:23:15.652Z]                    ^^^^^
[2025-08-21T19:23:15.652Z] 
[2025-08-21T19:23:15.652Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:23:15.652Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:23:15.652Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:23:15.652Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:23:15.652Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:23:15.652Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:23:15.652Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'[2025-08-21T19:23:15.652Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest

[2025-08-21T19:23:15.652Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:23:15.652Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '770cc902-c385-44dc-b1cb-70c6fbc59be3'.
[2025-08-21T19:23:15.652Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:23:15.652Z] Result: Failure
[2025-08-21T19:23:15.653Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:23:15.653Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:23:15.653Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:23:15.653Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:23:15.653Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:23:15.653Z]     at Generator.next (<anonymous>).
[2025-08-21T19:23:15.653Z]                    ^^^^^
[2025-08-21T19:23:15.653Z] 
[2025-08-21T19:23:15.653Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:23:15.653Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:23:15.653Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:23:15.653Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:23:15.653Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:23:15.653Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:23:15.653Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:23:15.653Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:23:15.653Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:23:15.653Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.653Z]     at Generator.next (<anonymous>).
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.653Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.654Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.654Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionLoadRequest
[2025-08-21T19:23:15.671Z] Host restarted.
[2025-08-21T19:23:20.371Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:23:25.173Z] Executing HTTP request: {
[2025-08-21T19:23:25.173Z]   "requestId": "f1b83008-3787-4b9d-8c75-1d8285a7de17",
[2025-08-21T19:23:25.173Z]   "method": "POST",
[2025-08-21T19:23:25.173Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:23:25.173Z]   "uri": "/api/generate-suggestions"
[2025-08-21T19:23:25.173Z] }
[2025-08-21T19:23:25.178Z] Executing 'Functions.generateSuggestions' (Reason='This function was programmatically called via the host APIs.', Id=588c4eaa-6be0-4dbd-9509-a3fcae7111be)
[2025-08-21T19:23:25.198Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionInvocationRequest with invocationId 588c4eaa-6be0-4dbd-9509-a3fcae7111be
[2025-08-21T19:23:25.198Z] Executed 'Functions.generateSuggestions' (Succeeded, Id=588c4eaa-6be0-4dbd-9509-a3fcae7111be, Duration=23ms)
[2025-08-21T19:23:25.199Z] Executed HTTP request: {
[2025-08-21T19:23:25.199Z]   "requestId": "f1b83008-3787-4b9d-8c75-1d8285a7de17",
[2025-08-21T19:23:25.199Z]   "identities": "",
[2025-08-21T19:23:25.199Z]   "status": "200",
[2025-08-21T19:23:25.199Z]   "duration": "26"
[2025-08-21T19:23:25.199Z] }
[2025-08-21T19:23:49.225Z] Executing HTTP request: {
[2025-08-21T19:23:49.225Z]   "requestId": "3fc3a805-fafe-4b15-84d7-6e1c4fdcc3cb",
[2025-08-21T19:23:49.225Z]   "method": "POST",
[2025-08-21T19:23:49.225Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:23:49.225Z]   "uri": "/api/generate-wireframe-enhanced"
[2025-08-21T19:23:49.225Z] }
[2025-08-21T19:23:49.232Z] Executing 'Functions.generateWireframeEnhanced' (Reason='This function was programmatically called via the host APIs.', Id=e95db374-f00e-4367-9cd5-6cdb76b332a6)
[2025-08-21T19:23:49.273Z] Worker e41078d4-4354-4464-83cc-388b63a588ca received FunctionInvocationRequest with invocationId e95db374-f00e-4367-9cd5-6cdb76b332a6
[2025-08-21T19:23:56.561Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:23:56.562Z] 🔍 Atlas component check (ENHANCED):
[2025-08-21T19:23:56.562Z]     Description: "a page with a hero secction two buttons and a foter that says "carlos""
[2025-08-21T19:23:56.562Z]     Contains learning keywords: false
[2025-08-21T19:23:56.562Z]     Is hero section exclusion: false
[2025-08-21T19:23:56.562Z]     Final isLearningPlatform: false
[2025-08-21T19:23:56.562Z] ℹ️ Not a learning platform, skipping Atlas components
[2025-08-21T19:23:56.568Z] Executed 'Functions.generateWireframeEnhanced' (Succeeded, Id=e95db374-f00e-4367-9cd5-6cdb76b332a6, Duration=7337ms)
[2025-08-21T19:23:56.569Z] Executed HTTP request: {
[2025-08-21T19:23:56.570Z]   "requestId": "3fc3a805-fafe-4b15-84d7-6e1c4fdcc3cb",
[2025-08-21T19:23:56.570Z]   "identities": "",
[2025-08-21T19:23:56.570Z]   "status": "200",
[2025-08-21T19:23:56.570Z]   "duration": "7345"
[2025-08-21T19:23:56.570Z] }
[2025-08-21T19:25:38.012Z] Restarting host.
[2025-08-21T19:25:38.021Z] Stopping JobHost
[2025-08-21T19:25:38.023Z] Job host stopped
[2025-08-21T19:25:38.032Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '1ed54132-c429-42a3-825c-4b41385d933b'
[2025-08-21T19:25:38.116Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:25:38.116Z] Host configuration file read:
[2025-08-21T19:25:38.116Z] {
[2025-08-21T19:25:38.116Z]   "version": "2.0",
[2025-08-21T19:25:38.116Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:25:38.116Z]   "logging": {
[2025-08-21T19:25:38.116Z]     "applicationInsights": {
[2025-08-21T19:25:38.116Z]       "samplingSettings": {
[2025-08-21T19:25:38.116Z]         "isEnabled": true,
[2025-08-21T19:25:38.116Z]         "excludedTypes": "Request"
[2025-08-21T19:25:38.116Z]       }
[2025-08-21T19:25:38.116Z]     },
[2025-08-21T19:25:38.116Z]     "logLevel": {
[2025-08-21T19:25:38.116Z]       "default": "Information",
[2025-08-21T19:25:38.116Z]       "Host.Results": "Information",
[2025-08-21T19:25:38.116Z]       "Function": "Information"
[2025-08-21T19:25:38.116Z]     }
[2025-08-21T19:25:38.116Z]   },
[2025-08-21T19:25:38.116Z]   "extensionBundle": {
[2025-08-21T19:25:38.116Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:25:38.116Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:25:38.116Z]   },
[2025-08-21T19:25:38.116Z]   "watchDirectories": [
[2025-08-21T19:25:38.116Z]     "Shared"
[2025-08-21T19:25:38.116Z]   ]
[2025-08-21T19:25:38.116Z] }
[2025-08-21T19:25:38.119Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:25:38.120Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T19:25:38.120Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T19:25:38.121Z] Loading functions metadata
[2025-08-21T19:25:38.121Z] Worker indexing is enabled
[2025-08-21T19:25:38.121Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:25:38.121Z] Reading functions metadata (Worker)
[2025-08-21T19:25:38.121Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:25:38.140Z] Worker e41078d4-4354-4464-83cc-388b63a588ca exited with code 0
[2025-08-21T19:25:38.355Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 connecting on 127.0.0.1:54302
[2025-08-21T19:25:38.385Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received WorkerInitRequest
[2025-08-21T19:25:38.389Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionsMetadataRequest
[2025-08-21T19:25:38.389Z] Reading functions metadata (Host)
[2025-08-21T19:25:38.631Z] 21 functions found (Host)
[2025-08-21T19:25:38.632Z] 21 functions loaded
[2025-08-21T19:25:38.632Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:25:38.632Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T19:25:38.632Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T19:25:38.632Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:25:38.806Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:25:38.809Z] Downloading extension bundle from https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/Microsoft.Azure.Functions.ExtensionBundle.4.25.1_any-any.zip to /var/folders/z3/tn_lkf312ws83dsbf7_lvl4w0000gn/T/b4ceaf97-f2e3-477e-9b08-3fe0fe8b081b/Microsoft.Azure.Functions.ExtensionBundle.4.25.1.zip
[2025-08-21T19:25:47.164Z] Completed downloading extension bundle from https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/Microsoft.Azure.Functions.ExtensionBundle.4.25.1_any-any.zip to /var/folders/z3/tn_lkf312ws83dsbf7_lvl4w0000gn/T/b4ceaf97-f2e3-477e-9b08-3fe0fe8b081b/Microsoft.Azure.Functions.ExtensionBundle.4.25.1.zip
[2025-08-21T19:25:47.166Z] Extracting extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:25:47.395Z] Zip extraction complete
[2025-08-21T19:25:47.397Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:25:47.397Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:25:47.464Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:25:47.464Z] Host configuration file read:
[2025-08-21T19:25:47.464Z] {
[2025-08-21T19:25:47.464Z]   "version": "2.0",
[2025-08-21T19:25:47.464Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:25:47.464Z]   "logging": {
[2025-08-21T19:25:47.464Z]     "applicationInsights": {
[2025-08-21T19:25:47.464Z]       "samplingSettings": {
[2025-08-21T19:25:47.464Z]         "isEnabled": true,
[2025-08-21T19:25:47.464Z]         "excludedTypes": "Request"
[2025-08-21T19:25:47.464Z]       }
[2025-08-21T19:25:47.464Z]     },
[2025-08-21T19:25:47.464Z]     "logLevel": {
[2025-08-21T19:25:47.464Z]       "default": "Information",
[2025-08-21T19:25:47.464Z]       "Host.Results": "Information",
[2025-08-21T19:25:47.464Z]       "Function": "Information"
[2025-08-21T19:25:47.464Z]     }
[2025-08-21T19:25:47.464Z]   },
[2025-08-21T19:25:47.464Z]   "extensionBundle": {
[2025-08-21T19:25:47.464Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:25:47.464Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:25:47.464Z]   },
[2025-08-21T19:25:47.464Z]   "watchDirectories": [
[2025-08-21T19:25:47.464Z]     "Shared"
[2025-08-21T19:25:47.464Z]   ]
[2025-08-21T19:25:47.464Z] }
[2025-08-21T19:25:47.513Z] Initializing Warmup Extension.
[2025-08-21T19:25:47.515Z] Initializing Host. OperationId: '1ed54132-c429-42a3-825c-4b41385d933b'.
[2025-08-21T19:25:47.515Z] Host initialization: ConsecutiveErrors=0, StartupCount=8, OperationId=1ed54132-c429-42a3-825c-4b41385d933b
[2025-08-21T19:25:47.518Z] LoggerFilterOptions
[2025-08-21T19:25:47.518Z] {
[2025-08-21T19:25:47.518Z]   "MinLevel": "None",
[2025-08-21T19:25:47.518Z]   "Rules": [
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": null,
[2025-08-21T19:25:47.518Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:25:47.518Z]       "LogLevel": "None",
[2025-08-21T19:25:47.518Z]       "Filter": null
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": "None",
[2025-08-21T19:25:47.518Z]       "Filter": null
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": null,
[2025-08-21T19:25:47.518Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": null,
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": null,
[2025-08-21T19:25:47.518Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": null,
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": null,
[2025-08-21T19:25:47.518Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": null,
[2025-08-21T19:25:47.518Z]       "CategoryName": "Host.Results",
[2025-08-21T19:25:47.518Z]       "LogLevel": "Information",
[2025-08-21T19:25:47.518Z]       "Filter": null
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": null,
[2025-08-21T19:25:47.518Z]       "CategoryName": "Function",
[2025-08-21T19:25:47.518Z]       "LogLevel": "Information",
[2025-08-21T19:25:47.518Z]       "Filter": null
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": null,
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": "Information",
[2025-08-21T19:25:47.518Z]       "Filter": null
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": "None",
[2025-08-21T19:25:47.518Z]       "Filter": null
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": null,
[2025-08-21T19:25:47.518Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": null,
[2025-08-21T19:25:47.518Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:47.518Z]     }
[2025-08-21T19:25:47.518Z]   ]
[2025-08-21T19:25:47.518Z] }
[2025-08-21T19:25:47.518Z] LoggerFilterOptions
[2025-08-21T19:25:47.518Z] {
[2025-08-21T19:25:47.518Z]   "MinLevel": "None",
[2025-08-21T19:25:47.518Z]   "Rules": [
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": null,
[2025-08-21T19:25:47.518Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:25:47.518Z]       "LogLevel": "None",
[2025-08-21T19:25:47.518Z]       "Filter": null
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": "None",
[2025-08-21T19:25:47.518Z]       "Filter": null
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": null,
[2025-08-21T19:25:47.518Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:47.518Z]     },
[2025-08-21T19:25:47.518Z]     {
[2025-08-21T19:25:47.518Z]       "ProviderName": null,
[2025-08-21T19:25:47.518Z]       "CategoryName": null,
[2025-08-21T19:25:47.518Z]       "LogLevel": null,
[2025-08-21T19:25:47.519Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:47.519Z]     },
[2025-08-21T19:25:47.519Z]     {
[2025-08-21T19:25:47.519Z]       "ProviderName": null,
[2025-08-21T19:25:47.519Z]       "CategoryName": null,
[2025-08-21T19:25:47.519Z]       "LogLevel": null,
[2025-08-21T19:25:47.519Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:47.519Z]     },
[2025-08-21T19:25:47.519Z]     {
[2025-08-21T19:25:47.519Z]       "ProviderName": null,
[2025-08-21T19:25:47.519Z]       "CategoryName": "Host.Results",
[2025-08-21T19:25:47.519Z]       "LogLevel": "Information",
[2025-08-21T19:25:47.519Z]       "Filter": null
[2025-08-21T19:25:47.519Z]     },
[2025-08-21T19:25:47.519Z]     {
[2025-08-21T19:25:47.519Z]       "ProviderName": null,
[2025-08-21T19:25:47.519Z]       "CategoryName": "Function",
[2025-08-21T19:25:47.519Z]       "LogLevel": "Information",
[2025-08-21T19:25:47.519Z]       "Filter": null
[2025-08-21T19:25:47.519Z]     },
[2025-08-21T19:25:47.519Z]     {
[2025-08-21T19:25:47.519Z]       "ProviderName": null,
[2025-08-21T19:25:47.519Z]       "CategoryName": null,
[2025-08-21T19:25:47.519Z]       "LogLevel": "Information",
[2025-08-21T19:25:47.519Z]       "Filter": null
[2025-08-21T19:25:47.519Z]     },
[2025-08-21T19:25:47.519Z]     {
[2025-08-21T19:25:47.519Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:25:47.519Z]       "CategoryName": null,
[2025-08-21T19:25:47.519Z]       "LogLevel": "None",
[2025-08-21T19:25:47.519Z]       "Filter": null
[2025-08-21T19:25:47.519Z]     },
[2025-08-21T19:25:47.519Z]     {
[2025-08-21T19:25:47.519Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:25:47.519Z]       "CategoryName": null,
[2025-08-21T19:25:47.519Z]       "LogLevel": null,
[2025-08-21T19:25:47.519Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:47.519Z]     },
[2025-08-21T19:25:47.519Z]     {
[2025-08-21T19:25:47.519Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:47.519Z]       "CategoryName": null,
[2025-08-21T19:25:47.519Z]       "LogLevel": null,
[2025-08-21T19:25:47.519Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:47.519Z]     }
[2025-08-21T19:25:47.519Z]   ]
[2025-08-21T19:25:47.519Z] }
[2025-08-21T19:25:47.519Z] FunctionResultAggregatorOptions
[2025-08-21T19:25:47.519Z] {
[2025-08-21T19:25:47.519Z]   "BatchSize": 1000,
[2025-08-21T19:25:47.519Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:25:47.519Z]   "IsEnabled": true
[2025-08-21T19:25:47.519Z] }
[2025-08-21T19:25:47.519Z] ConcurrencyOptions
[2025-08-21T19:25:47.519Z] {
[2025-08-21T19:25:47.519Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:25:47.519Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:25:47.519Z]   "CPUThreshold": 0.8,
[2025-08-21T19:25:47.519Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:25:47.519Z] }
[2025-08-21T19:25:47.519Z] SingletonOptions
[2025-08-21T19:25:47.519Z] {
[2025-08-21T19:25:47.519Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:25:47.519Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:25:47.519Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:25:47.519Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:25:47.519Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:25:47.519Z] }
[2025-08-21T19:25:47.519Z] ScaleOptions
[2025-08-21T19:25:47.519Z] {
[2025-08-21T19:25:47.519Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:25:47.519Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:25:47.519Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:25:47.519Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:25:47.519Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:25:47.519Z] }
[2025-08-21T19:25:47.519Z] Starting JobHost
[2025-08-21T19:25:47.519Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=9ab867c7-d722-4fb2-afd5-d43b76f33127, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:25:47.519Z] Loading functions metadata
[2025-08-21T19:25:47.519Z] Worker indexing is enabled
[2025-08-21T19:25:47.519Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:25:47.519Z] Reading functions metadata (Worker)
[2025-08-21T19:25:47.519Z] Reading functions metadata (Host)
[2025-08-21T19:25:47.728Z] 21 functions found (Host)
[2025-08-21T19:25:47.728Z] Reading functions metadata (Custom)
[2025-08-21T19:25:47.728Z] 0 functions found (Custom)
[2025-08-21T19:25:47.728Z] 21 functions loaded
[2025-08-21T19:25:47.730Z] Worker process started and initialized.
[2025-08-21T19:25:47.730Z] Generating 21 job function(s)
[2025-08-21T19:25:47.741Z] Found the following functions:
[2025-08-21T19:25:47.741Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:25:47.741Z] Host.Functions.analytics
[2025-08-21T19:25:47.741Z] Host.Functions.analyzeUIImage
[2025-08-21T19:25:47.741Z] Host.Functions.atlasComponents
[2025-08-21T19:25:47.741Z] Host.Functions.fast-suggestions
[2025-08-21T19:25:47.741Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:25:47.741Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:25:47.741Z] Host.Functions.generateSuggestions
[2025-08-21T19:25:47.741Z] Host.Functions.generateWireframe
[2025-08-21T19:25:47.741Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:25:47.741Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:25:47.741Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:25:47.741Z] Host.Functions.get-template
[2025-08-21T19:25:47.741Z] Host.Functions.githubAuthCallback
[2025-08-21T19:25:47.741Z] Host.Functions.githubAuthStart
[2025-08-21T19:25:47.741Z] Host.Functions.health
[2025-08-21T19:25:47.741Z] Host.Functions.healthCheck
[2025-08-21T19:25:47.741Z] Host.Functions.openai-health
[2025-08-21T19:25:47.741Z] Host.Functions.performance-stats
[2025-08-21T19:25:47.741Z] Host.Functions.testFunction
[2025-08-21T19:25:47.741Z] Host.Functions.testSimple
[2025-08-21T19:25:47.741Z] 
[2025-08-21T19:25:47.741Z] HttpOptions
[2025-08-21T19:25:47.741Z] {
[2025-08-21T19:25:47.741Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:25:47.741Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:25:47.741Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:25:47.741Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:25:47.741Z]   "RoutePrefix": "api"
[2025-08-21T19:25:47.741Z] }
[2025-08-21T19:25:47.742Z] Initializing function HTTP routes
[2025-08-21T19:25:47.742Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:25:47.742Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:25:47.742Z] 
[2025-08-21T19:25:47.742Z] Host initialized (222ms)
[2025-08-21T19:25:47.742Z] Host started (223ms)
[2025-08-21T19:25:47.742Z] Job host started
[2025-08-21T19:25:47.742Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:25:47.742Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:25:47.785Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:25:47.785Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:25:47.785Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:25:47.785Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:25:47.836Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:25:47.836Z] 🔍 Current env vars:
[2025-08-21T19:25:47.836Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:25:47.836Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:25:47.836Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:25:47.836Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:25:47.836Z]   Deployment: gpt-4o
[2025-08-21T19:25:47.836Z]   API Version: 2024-08-01-preview
[2025-08-21T19:25:47.836Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:25:47.836Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:25:47.836Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:25:47.837Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:25:47.837Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:25:47.838Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:25:47.840Z] Host restarted.
[2025-08-21T19:25:47.843Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.843Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.844Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.844Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.844Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.844Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.844Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:25:47.844Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.844Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '07f69672-75c3-49c0-bb3f-988a94839855'.
[2025-08-21T19:25:47.844Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:25:47.844Z] Result: Failure
[2025-08-21T19:25:47.844Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:25:47.844Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:25:47.844Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.844Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:25:47.844Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'e21b9564-5ad2-4188-b498-708c39f884ea'.
[2025-08-21T19:25:47.844Z]                    ^^^^^
[2025-08-21T19:25:47.844Z] Result: Failure
[2025-08-21T19:25:47.844Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:25:47.844Z] 
[2025-08-21T19:25:47.844Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:25:47.844Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:25:47.844Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:25:47.844Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.844Z]                    ^^^^^
[2025-08-21T19:25:47.844Z] 
[2025-08-21T19:25:47.844Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:25:47.844Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:25:47.844Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:25:47.844Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:25:47.844Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:25:47.844Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:25:47.844Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:25:47.844Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:25:47.844Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:25:47.844Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.844Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:25:47.844Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:25:47.844Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:25:47.844Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:25:47.844Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:25:47.844Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:25:47.844Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:25:47.844Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:25:47.844Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:25:47.844Z]     at Generator.next (<anonymous>).
[2025-08-21T19:25:47.844Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:25:47.844Z]     at Generator.next (<anonymous>).
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:47.845Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 received FunctionLoadRequest
[2025-08-21T19:25:50.942Z] Restarting host.
[2025-08-21T19:25:50.947Z] Stopping JobHost
[2025-08-21T19:25:50.948Z] Job host stopped
[2025-08-21T19:25:50.950Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'a54354bf-5261-4150-b620-586372b73f40'
[2025-08-21T19:25:51.036Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:25:51.036Z] Host configuration file read:
[2025-08-21T19:25:51.036Z] {
[2025-08-21T19:25:51.036Z]   "version": "2.0",
[2025-08-21T19:25:51.036Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:25:51.036Z]   "logging": {
[2025-08-21T19:25:51.036Z]     "applicationInsights": {
[2025-08-21T19:25:51.036Z]       "samplingSettings": {
[2025-08-21T19:25:51.036Z]         "isEnabled": true,
[2025-08-21T19:25:51.036Z]         "excludedTypes": "Request"
[2025-08-21T19:25:51.036Z]       }
[2025-08-21T19:25:51.036Z]     },
[2025-08-21T19:25:51.036Z]     "logLevel": {
[2025-08-21T19:25:51.036Z]       "default": "Information",
[2025-08-21T19:25:51.036Z]       "Host.Results": "Information",
[2025-08-21T19:25:51.036Z]       "Function": "Information"
[2025-08-21T19:25:51.036Z]     }
[2025-08-21T19:25:51.036Z]   },
[2025-08-21T19:25:51.036Z]   "extensionBundle": {
[2025-08-21T19:25:51.036Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:25:51.036Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:25:51.036Z]   },
[2025-08-21T19:25:51.036Z]   "watchDirectories": [
[2025-08-21T19:25:51.036Z]     "Shared"
[2025-08-21T19:25:51.036Z]   ]
[2025-08-21T19:25:51.036Z] }
[2025-08-21T19:25:51.037Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:25:51.038Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:25:51.038Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:25:51.038Z] Loading functions metadata
[2025-08-21T19:25:51.038Z] Worker indexing is enabled
[2025-08-21T19:25:51.038Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:25:51.038Z] Reading functions metadata (Worker)
[2025-08-21T19:25:51.038Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:25:51.042Z] Worker 8b410b24-c9a4-4fd7-8ee7-f7d1b0a596b4 exited with code 0
[2025-08-21T19:25:51.165Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e connecting on 127.0.0.1:54302
[2025-08-21T19:25:51.187Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received WorkerInitRequest
[2025-08-21T19:25:51.190Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionsMetadataRequest
[2025-08-21T19:25:51.190Z] Reading functions metadata (Host)
[2025-08-21T19:25:51.390Z] 21 functions found (Host)
[2025-08-21T19:25:51.391Z] 21 functions loaded
[2025-08-21T19:25:51.391Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:25:51.391Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:25:51.391Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:25:51.391Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:25:51.556Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:25:51.557Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:25:51.557Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:25:51.557Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:25:51.619Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:25:51.619Z] Host configuration file read:
[2025-08-21T19:25:51.619Z] {
[2025-08-21T19:25:51.619Z]   "version": "2.0",
[2025-08-21T19:25:51.619Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:25:51.619Z]   "logging": {
[2025-08-21T19:25:51.619Z]     "applicationInsights": {
[2025-08-21T19:25:51.619Z]       "samplingSettings": {
[2025-08-21T19:25:51.619Z]         "isEnabled": true,
[2025-08-21T19:25:51.619Z]         "excludedTypes": "Request"
[2025-08-21T19:25:51.619Z]       }
[2025-08-21T19:25:51.619Z]     },
[2025-08-21T19:25:51.619Z]     "logLevel": {
[2025-08-21T19:25:51.619Z]       "default": "Information",
[2025-08-21T19:25:51.619Z]       "Host.Results": "Information",
[2025-08-21T19:25:51.619Z]       "Function": "Information"
[2025-08-21T19:25:51.619Z]     }
[2025-08-21T19:25:51.619Z]   },
[2025-08-21T19:25:51.619Z]   "extensionBundle": {
[2025-08-21T19:25:51.619Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:25:51.619Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:25:51.619Z]   },
[2025-08-21T19:25:51.619Z]   "watchDirectories": [
[2025-08-21T19:25:51.619Z]     "Shared"
[2025-08-21T19:25:51.619Z]   ]
[2025-08-21T19:25:51.619Z] }
[2025-08-21T19:25:51.654Z] Initializing Warmup Extension.
[2025-08-21T19:25:51.655Z] Initializing Host. OperationId: 'a54354bf-5261-4150-b620-586372b73f40'.
[2025-08-21T19:25:51.655Z] Host initialization: ConsecutiveErrors=0, StartupCount=9, OperationId=a54354bf-5261-4150-b620-586372b73f40
[2025-08-21T19:25:51.657Z] LoggerFilterOptions
[2025-08-21T19:25:51.657Z] {
[2025-08-21T19:25:51.657Z]   "MinLevel": "None",
[2025-08-21T19:25:51.657Z]   "Rules": [
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:25:51.657Z]       "LogLevel": "None",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": "None",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": null,
[2025-08-21T19:25:51.657Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": null,
[2025-08-21T19:25:51.657Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": null,
[2025-08-21T19:25:51.657Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": "Host.Results",
[2025-08-21T19:25:51.657Z]       "LogLevel": "Information",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": "Function",
[2025-08-21T19:25:51.657Z]       "LogLevel": "Information",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": "Information",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": "None",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": null,
[2025-08-21T19:25:51.657Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": null,
[2025-08-21T19:25:51.657Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:51.657Z]     }
[2025-08-21T19:25:51.657Z]   ]
[2025-08-21T19:25:51.657Z] }
[2025-08-21T19:25:51.657Z] LoggerFilterOptions
[2025-08-21T19:25:51.657Z] {
[2025-08-21T19:25:51.657Z]   "MinLevel": "None",
[2025-08-21T19:25:51.657Z]   "Rules": [
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:25:51.657Z]       "LogLevel": "None",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": "None",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": null,
[2025-08-21T19:25:51.657Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": null,
[2025-08-21T19:25:51.657Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": null,
[2025-08-21T19:25:51.657Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": "Host.Results",
[2025-08-21T19:25:51.657Z]       "LogLevel": "Information",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": "Function",
[2025-08-21T19:25:51.657Z]       "LogLevel": "Information",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": null,
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": "Information",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": "None",
[2025-08-21T19:25:51.657Z]       "Filter": null
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.657Z]     {
[2025-08-21T19:25:51.657Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:25:51.657Z]       "CategoryName": null,
[2025-08-21T19:25:51.657Z]       "LogLevel": null,
[2025-08-21T19:25:51.657Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:51.657Z]     },
[2025-08-21T19:25:51.658Z]     {
[2025-08-21T19:25:51.658Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:25:51.658Z]       "CategoryName": null,
[2025-08-21T19:25:51.658Z]       "LogLevel": null,
[2025-08-21T19:25:51.658Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:25:51.658Z]     }
[2025-08-21T19:25:51.658Z]   ]
[2025-08-21T19:25:51.658Z] }
[2025-08-21T19:25:51.658Z] FunctionResultAggregatorOptions
[2025-08-21T19:25:51.658Z] {
[2025-08-21T19:25:51.658Z]   "BatchSize": 1000,
[2025-08-21T19:25:51.658Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:25:51.658Z]   "IsEnabled": true
[2025-08-21T19:25:51.658Z] }
[2025-08-21T19:25:51.658Z] ConcurrencyOptions
[2025-08-21T19:25:51.658Z] {
[2025-08-21T19:25:51.658Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:25:51.658Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:25:51.658Z]   "CPUThreshold": 0.8,
[2025-08-21T19:25:51.658Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:25:51.658Z] }
[2025-08-21T19:25:51.658Z] SingletonOptions
[2025-08-21T19:25:51.658Z] {
[2025-08-21T19:25:51.658Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:25:51.658Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:25:51.658Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:25:51.658Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:25:51.658Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:25:51.658Z] }
[2025-08-21T19:25:51.658Z] ScaleOptions
[2025-08-21T19:25:51.658Z] {
[2025-08-21T19:25:51.658Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:25:51.658Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:25:51.658Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:25:51.658Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:25:51.658Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:25:51.658Z] }
[2025-08-21T19:25:51.658Z] Starting JobHost
[2025-08-21T19:25:51.658Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=ffee9ff2-09ea-4a68-8b52-ecbcfd4dd71b, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:25:51.658Z] Loading functions metadata
[2025-08-21T19:25:51.658Z] Worker indexing is enabled
[2025-08-21T19:25:51.658Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:25:51.658Z] Reading functions metadata (Worker)
[2025-08-21T19:25:51.658Z] Reading functions metadata (Host)
[2025-08-21T19:25:51.846Z] 21 functions found (Host)
[2025-08-21T19:25:51.847Z] Reading functions metadata (Custom)
[2025-08-21T19:25:51.847Z] 0 functions found (Custom)
[2025-08-21T19:25:51.847Z] 21 functions loaded
[2025-08-21T19:25:51.848Z] Generating 21 job function(s)
[2025-08-21T19:25:51.848Z] Worker process started and initialized.
[2025-08-21T19:25:51.856Z] Found the following functions:
[2025-08-21T19:25:51.856Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:25:51.856Z] Host.Functions.analytics
[2025-08-21T19:25:51.856Z] Host.Functions.analyzeUIImage
[2025-08-21T19:25:51.856Z] Host.Functions.atlasComponents
[2025-08-21T19:25:51.856Z] Host.Functions.fast-suggestions
[2025-08-21T19:25:51.856Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:25:51.856Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:25:51.856Z] Host.Functions.generateSuggestions
[2025-08-21T19:25:51.856Z] Host.Functions.generateWireframe
[2025-08-21T19:25:51.856Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:25:51.856Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:25:51.856Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:25:51.856Z] Host.Functions.get-template
[2025-08-21T19:25:51.856Z] Host.Functions.githubAuthCallback
[2025-08-21T19:25:51.856Z] Host.Functions.githubAuthStart
[2025-08-21T19:25:51.856Z] Host.Functions.health
[2025-08-21T19:25:51.856Z] Host.Functions.healthCheck
[2025-08-21T19:25:51.856Z] Host.Functions.openai-health
[2025-08-21T19:25:51.856Z] Host.Functions.performance-stats
[2025-08-21T19:25:51.856Z] Host.Functions.testFunction
[2025-08-21T19:25:51.856Z] Host.Functions.testSimple
[2025-08-21T19:25:51.856Z] 
[2025-08-21T19:25:51.857Z] HttpOptions
[2025-08-21T19:25:51.857Z] {
[2025-08-21T19:25:51.857Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:25:51.857Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:25:51.857Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:25:51.857Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:25:51.857Z]   "RoutePrefix": "api"
[2025-08-21T19:25:51.857Z] }
[2025-08-21T19:25:51.857Z] Initializing function HTTP routes
[2025-08-21T19:25:51.857Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:25:51.857Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:25:51.857Z] 
[2025-08-21T19:25:51.857Z] Host initialized (199ms)
[2025-08-21T19:25:51.857Z] Host started (199ms)
[2025-08-21T19:25:51.857Z] Job host started
[2025-08-21T19:25:51.857Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:25:51.857Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:25:51.877Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:25:51.877Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:25:51.877Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:25:51.877Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:25:51.907Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:25:51.907Z] 🔍 Current env vars:
[2025-08-21T19:25:51.907Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:25:51.907Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:25:51.907Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:25:51.907Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:25:51.907Z]   Deployment: gpt-4o
[2025-08-21T19:25:51.907Z]   API Version: 2024-08-01-preview
[2025-08-21T19:25:51.907Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:25:51.907Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:25:51.907Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:25:51.907Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:25:51.907Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:25:51.908Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.908Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.909Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:25:51.912Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.912Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.912Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.912Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.912Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:25:51.913Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.913Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'[2025-08-21T19:25:51.913Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'aeb8f534-3c6c-4347-bad7-da756d121dbb'.

[2025-08-21T19:25:51.913Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'f7fee955-dea4-4dc6-b20b-fe40a84ae814'.
[2025-08-21T19:25:51.913Z] Result: Failure
[2025-08-21T19:25:51.913Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:25:51.913Z] Result: Failure[2025-08-21T19:25:51.913Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.913Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:25:51.913Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:25:51.913Z]                    ^^^^^

[2025-08-21T19:25:51.913Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.913Z] 
[2025-08-21T19:25:51.913Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:25:51.913Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:25:51.913Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:25:51.913Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:25:51.913Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.913Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:25:51.913Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.913Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:25:51.913Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:25:51.913Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:25:51.913Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:25:51.913Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:25:51.913Z]                    ^^^^^
[2025-08-21T19:25:51.913Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:25:51.913Z] 
[2025-08-21T19:25:51.913Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:25:51.913Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:25:51.913Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:25:51.913Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:25:51.913Z]     at Generator.next (<anonymous>).
[2025-08-21T19:25:51.913Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:25:51.913Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:25:51.913Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.913Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:25:51.913Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:25:51.913Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:25:51.913Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:25:51.913Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:25:51.913Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:25:51.913Z]     at Generator.next (<anonymous>).
[2025-08-21T19:25:51.913Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.913Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.913Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.913Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.914Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.914Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.914Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.914Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.914Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e received FunctionLoadRequest
[2025-08-21T19:25:51.949Z] Host restarted.
[2025-08-21T19:25:56.659Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:26:02.311Z] Restarting host.
[2025-08-21T19:26:02.317Z] Stopping JobHost
[2025-08-21T19:26:02.318Z] Job host stopped
[2025-08-21T19:26:02.322Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'd89b12cb-f9fe-46b7-abbe-8cc2098f613b'
[2025-08-21T19:26:02.418Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:26:02.418Z] Host configuration file read:
[2025-08-21T19:26:02.418Z] {
[2025-08-21T19:26:02.418Z]   "version": "2.0",
[2025-08-21T19:26:02.418Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:26:02.418Z]   "logging": {
[2025-08-21T19:26:02.418Z]     "applicationInsights": {
[2025-08-21T19:26:02.418Z]       "samplingSettings": {
[2025-08-21T19:26:02.418Z]         "isEnabled": true,
[2025-08-21T19:26:02.418Z]         "excludedTypes": "Request"
[2025-08-21T19:26:02.418Z]       }
[2025-08-21T19:26:02.418Z]     },
[2025-08-21T19:26:02.418Z]     "logLevel": {
[2025-08-21T19:26:02.418Z]       "default": "Information",
[2025-08-21T19:26:02.418Z]       "Host.Results": "Information",
[2025-08-21T19:26:02.418Z]       "Function": "Information"
[2025-08-21T19:26:02.418Z]     }
[2025-08-21T19:26:02.418Z]   },
[2025-08-21T19:26:02.418Z]   "extensionBundle": {
[2025-08-21T19:26:02.418Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:26:02.418Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:26:02.418Z]   },
[2025-08-21T19:26:02.418Z]   "watchDirectories": [
[2025-08-21T19:26:02.418Z]     "Shared"
[2025-08-21T19:26:02.418Z]   ]
[2025-08-21T19:26:02.418Z] }
[2025-08-21T19:26:02.420Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:26:02.420Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:26:02.420Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:26:02.421Z] Loading functions metadata
[2025-08-21T19:26:02.421Z] Worker indexing is enabled
[2025-08-21T19:26:02.421Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:26:02.421Z] Reading functions metadata (Worker)
[2025-08-21T19:26:02.421Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:26:02.425Z] Worker 0c61ad60-f769-4a5b-a3d6-34196ee4328e exited with code 0
[2025-08-21T19:26:02.553Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 connecting on 127.0.0.1:54302
[2025-08-21T19:26:02.577Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received WorkerInitRequest
[2025-08-21T19:26:02.580Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionsMetadataRequest
[2025-08-21T19:26:02.580Z] Reading functions metadata (Host)
[2025-08-21T19:26:02.821Z] 21 functions found (Host)
[2025-08-21T19:26:02.821Z] 21 functions loaded
[2025-08-21T19:26:02.822Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:26:02.822Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:26:02.822Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:26:02.823Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:26:02.980Z] Applying platform release channel configuration LATEST. Bundle version 4.24.2 will be used
[2025-08-21T19:26:02.980Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2
[2025-08-21T19:26:02.980Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin
[2025-08-21T19:26:02.981Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.24.2/bin'.
[2025-08-21T19:26:03.031Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:26:03.031Z] Host configuration file read:
[2025-08-21T19:26:03.031Z] {
[2025-08-21T19:26:03.031Z]   "version": "2.0",
[2025-08-21T19:26:03.031Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:26:03.031Z]   "logging": {
[2025-08-21T19:26:03.031Z]     "applicationInsights": {
[2025-08-21T19:26:03.031Z]       "samplingSettings": {
[2025-08-21T19:26:03.031Z]         "isEnabled": true,
[2025-08-21T19:26:03.031Z]         "excludedTypes": "Request"
[2025-08-21T19:26:03.031Z]       }
[2025-08-21T19:26:03.031Z]     },
[2025-08-21T19:26:03.031Z]     "logLevel": {
[2025-08-21T19:26:03.031Z]       "default": "Information",
[2025-08-21T19:26:03.031Z]       "Host.Results": "Information",
[2025-08-21T19:26:03.031Z]       "Function": "Information"
[2025-08-21T19:26:03.031Z]     }
[2025-08-21T19:26:03.031Z]   },
[2025-08-21T19:26:03.031Z]   "extensionBundle": {
[2025-08-21T19:26:03.031Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:26:03.031Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:26:03.031Z]   },
[2025-08-21T19:26:03.031Z]   "watchDirectories": [
[2025-08-21T19:26:03.031Z]     "Shared"
[2025-08-21T19:26:03.031Z]   ]
[2025-08-21T19:26:03.031Z] }
[2025-08-21T19:26:03.066Z] Initializing Warmup Extension.
[2025-08-21T19:26:03.083Z] Initializing Host. OperationId: 'd89b12cb-f9fe-46b7-abbe-8cc2098f613b'.
[2025-08-21T19:26:03.083Z] Host initialization: ConsecutiveErrors=0, StartupCount=10, OperationId=d89b12cb-f9fe-46b7-abbe-8cc2098f613b
[2025-08-21T19:26:03.085Z] LoggerFilterOptions
[2025-08-21T19:26:03.085Z] {
[2025-08-21T19:26:03.085Z]   "MinLevel": "None",
[2025-08-21T19:26:03.085Z]   "Rules": [
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": null,
[2025-08-21T19:26:03.085Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:26:03.085Z]       "LogLevel": "None",
[2025-08-21T19:26:03.085Z]       "Filter": null
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:03.085Z]       "CategoryName": null,
[2025-08-21T19:26:03.085Z]       "LogLevel": "None",
[2025-08-21T19:26:03.085Z]       "Filter": null
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:03.085Z]       "CategoryName": null,
[2025-08-21T19:26:03.085Z]       "LogLevel": null,
[2025-08-21T19:26:03.085Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": null,
[2025-08-21T19:26:03.085Z]       "CategoryName": null,
[2025-08-21T19:26:03.085Z]       "LogLevel": null,
[2025-08-21T19:26:03.085Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": null,
[2025-08-21T19:26:03.085Z]       "CategoryName": null,
[2025-08-21T19:26:03.085Z]       "LogLevel": null,
[2025-08-21T19:26:03.085Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": null,
[2025-08-21T19:26:03.085Z]       "CategoryName": "Host.Results",
[2025-08-21T19:26:03.085Z]       "LogLevel": "Information",
[2025-08-21T19:26:03.085Z]       "Filter": null
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": null,
[2025-08-21T19:26:03.085Z]       "CategoryName": "Function",
[2025-08-21T19:26:03.085Z]       "LogLevel": "Information",
[2025-08-21T19:26:03.085Z]       "Filter": null
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": null,
[2025-08-21T19:26:03.085Z]       "CategoryName": null,
[2025-08-21T19:26:03.085Z]       "LogLevel": "Information",
[2025-08-21T19:26:03.085Z]       "Filter": null
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:26:03.085Z]       "CategoryName": null,
[2025-08-21T19:26:03.085Z]       "LogLevel": "None",
[2025-08-21T19:26:03.085Z]       "Filter": null
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:26:03.085Z]       "CategoryName": null,
[2025-08-21T19:26:03.085Z]       "LogLevel": null,
[2025-08-21T19:26:03.085Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:03.085Z]       "CategoryName": null,
[2025-08-21T19:26:03.085Z]       "LogLevel": null,
[2025-08-21T19:26:03.085Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:03.085Z]     }
[2025-08-21T19:26:03.085Z]   ]
[2025-08-21T19:26:03.085Z] }
[2025-08-21T19:26:03.085Z] LoggerFilterOptions
[2025-08-21T19:26:03.085Z] {
[2025-08-21T19:26:03.085Z]   "MinLevel": "None",
[2025-08-21T19:26:03.085Z]   "Rules": [
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": null,
[2025-08-21T19:26:03.085Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:26:03.085Z]       "LogLevel": "None",
[2025-08-21T19:26:03.085Z]       "Filter": null
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.085Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:03.085Z]       "CategoryName": null,
[2025-08-21T19:26:03.085Z]       "LogLevel": "None",
[2025-08-21T19:26:03.085Z]       "Filter": null
[2025-08-21T19:26:03.085Z]     },
[2025-08-21T19:26:03.085Z]     {
[2025-08-21T19:26:03.086Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:03.086Z]       "CategoryName": null,
[2025-08-21T19:26:03.086Z]       "LogLevel": null,
[2025-08-21T19:26:03.086Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:03.086Z]     },
[2025-08-21T19:26:03.086Z]     {
[2025-08-21T19:26:03.086Z]       "ProviderName": null,
[2025-08-21T19:26:03.086Z]       "CategoryName": null,
[2025-08-21T19:26:03.086Z]       "LogLevel": null,
[2025-08-21T19:26:03.086Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:03.086Z]     },
[2025-08-21T19:26:03.086Z]     {
[2025-08-21T19:26:03.086Z]       "ProviderName": null,
[2025-08-21T19:26:03.086Z]       "CategoryName": null,
[2025-08-21T19:26:03.086Z]       "LogLevel": null,
[2025-08-21T19:26:03.086Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:03.086Z]     },
[2025-08-21T19:26:03.086Z]     {
[2025-08-21T19:26:03.086Z]       "ProviderName": null,
[2025-08-21T19:26:03.086Z]       "CategoryName": "Host.Results",
[2025-08-21T19:26:03.086Z]       "LogLevel": "Information",
[2025-08-21T19:26:03.086Z]       "Filter": null
[2025-08-21T19:26:03.086Z]     },
[2025-08-21T19:26:03.086Z]     {
[2025-08-21T19:26:03.086Z]       "ProviderName": null,
[2025-08-21T19:26:03.086Z]       "CategoryName": "Function",
[2025-08-21T19:26:03.086Z]       "LogLevel": "Information",
[2025-08-21T19:26:03.086Z]       "Filter": null
[2025-08-21T19:26:03.086Z]     },
[2025-08-21T19:26:03.086Z]     {
[2025-08-21T19:26:03.086Z]       "ProviderName": null,
[2025-08-21T19:26:03.086Z]       "CategoryName": null,
[2025-08-21T19:26:03.086Z]       "LogLevel": "Information",
[2025-08-21T19:26:03.086Z]       "Filter": null
[2025-08-21T19:26:03.086Z]     },
[2025-08-21T19:26:03.086Z]     {
[2025-08-21T19:26:03.086Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:26:03.086Z]       "CategoryName": null,
[2025-08-21T19:26:03.086Z]       "LogLevel": "None",
[2025-08-21T19:26:03.086Z]       "Filter": null
[2025-08-21T19:26:03.086Z]     },
[2025-08-21T19:26:03.086Z]     {
[2025-08-21T19:26:03.086Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:26:03.086Z]       "CategoryName": null,
[2025-08-21T19:26:03.086Z]       "LogLevel": null,
[2025-08-21T19:26:03.086Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:03.086Z]     },
[2025-08-21T19:26:03.086Z]     {
[2025-08-21T19:26:03.086Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:03.086Z]       "CategoryName": null,
[2025-08-21T19:26:03.086Z]       "LogLevel": null,
[2025-08-21T19:26:03.086Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:03.086Z]     }
[2025-08-21T19:26:03.086Z]   ]
[2025-08-21T19:26:03.086Z] }
[2025-08-21T19:26:03.086Z] FunctionResultAggregatorOptions
[2025-08-21T19:26:03.086Z] {
[2025-08-21T19:26:03.086Z]   "BatchSize": 1000,
[2025-08-21T19:26:03.086Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:26:03.086Z]   "IsEnabled": true
[2025-08-21T19:26:03.086Z] }
[2025-08-21T19:26:03.086Z] ConcurrencyOptions
[2025-08-21T19:26:03.086Z] {
[2025-08-21T19:26:03.086Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:26:03.086Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:26:03.086Z]   "CPUThreshold": 0.8,
[2025-08-21T19:26:03.086Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:26:03.086Z] }
[2025-08-21T19:26:03.086Z] SingletonOptions
[2025-08-21T19:26:03.086Z] {
[2025-08-21T19:26:03.086Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:26:03.086Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:26:03.086Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:26:03.086Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:26:03.086Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:26:03.086Z] }
[2025-08-21T19:26:03.086Z] ScaleOptions
[2025-08-21T19:26:03.086Z] {
[2025-08-21T19:26:03.086Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:26:03.086Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:26:03.086Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:26:03.086Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:26:03.086Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:26:03.086Z] }
[2025-08-21T19:26:03.086Z] Starting JobHost
[2025-08-21T19:26:03.086Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=c5d4c330-ede4-4e17-9aec-553a739b63c4, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:26:03.086Z] Loading functions metadata
[2025-08-21T19:26:03.086Z] Worker indexing is enabled
[2025-08-21T19:26:03.086Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:26:03.086Z] Reading functions metadata (Worker)
[2025-08-21T19:26:03.086Z] Reading functions metadata (Host)
[2025-08-21T19:26:03.257Z] 21 functions found (Host)
[2025-08-21T19:26:03.257Z] Reading functions metadata (Custom)
[2025-08-21T19:26:03.257Z] 0 functions found (Custom)
[2025-08-21T19:26:03.257Z] 21 functions loaded
[2025-08-21T19:26:03.261Z] Generating 21 job function(s)
[2025-08-21T19:26:03.261Z] Worker process started and initialized.
[2025-08-21T19:26:03.276Z] Found the following functions:
[2025-08-21T19:26:03.276Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:26:03.276Z] Host.Functions.analytics
[2025-08-21T19:26:03.276Z] Host.Functions.analyzeUIImage
[2025-08-21T19:26:03.276Z] Host.Functions.atlasComponents
[2025-08-21T19:26:03.276Z] Host.Functions.fast-suggestions
[2025-08-21T19:26:03.276Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:26:03.276Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:26:03.276Z] Host.Functions.generateSuggestions
[2025-08-21T19:26:03.276Z] Host.Functions.generateWireframe
[2025-08-21T19:26:03.276Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:26:03.276Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:26:03.276Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:26:03.276Z] Host.Functions.get-template
[2025-08-21T19:26:03.276Z] Host.Functions.githubAuthCallback
[2025-08-21T19:26:03.276Z] Host.Functions.githubAuthStart
[2025-08-21T19:26:03.276Z] Host.Functions.health
[2025-08-21T19:26:03.276Z] Host.Functions.healthCheck
[2025-08-21T19:26:03.276Z] Host.Functions.openai-health
[2025-08-21T19:26:03.276Z] Host.Functions.performance-stats
[2025-08-21T19:26:03.276Z] Host.Functions.testFunction
[2025-08-21T19:26:03.276Z] Host.Functions.testSimple
[2025-08-21T19:26:03.276Z] 
[2025-08-21T19:26:03.277Z] HttpOptions
[2025-08-21T19:26:03.277Z] {
[2025-08-21T19:26:03.277Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:26:03.277Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:26:03.277Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:26:03.277Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:26:03.277Z]   "RoutePrefix": "api"
[2025-08-21T19:26:03.277Z] Initializing function HTTP routes
[2025-08-21T19:26:03.277Z] }
[2025-08-21T19:26:03.277Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:26:03.277Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:26:03.277Z] 
[2025-08-21T19:26:03.277Z] Host initialized (190ms)
[2025-08-21T19:26:03.277Z] Host started (191ms)
[2025-08-21T19:26:03.277Z] Job host started
[2025-08-21T19:26:03.277Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:26:03.277Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:26:03.309Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:26:03.312Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:26:03.312Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:26:03.312Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:26:03.348Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:26:03.348Z] 🔍 Current env vars:
[2025-08-21T19:26:03.348Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:26:03.348Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:26:03.348Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:26:03.348Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:26:03.348Z]   Deployment: gpt-4o
[2025-08-21T19:26:03.348Z]   API Version: 2024-08-01-preview
[2025-08-21T19:26:03.348Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:26:03.348Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:26:03.348Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:26:03.348Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:26:03.348Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:26:03.350Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:26:03.356Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.356Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.357Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.357Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.357Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.357Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.357Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:26:03.357Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.357Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:26:03.357Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '5b6aad40-b892-46dc-a559-b7c93fe66ba1'.
[2025-08-21T19:26:03.357Z] Result: Failure
[2025-08-21T19:26:03.357Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:26:03.357Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:26:03.357Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:26:03.357Z]                    ^^^^^
[2025-08-21T19:26:03.357Z] 
[2025-08-21T19:26:03.357Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:26:03.357Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:26:03.357Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:26:03.357Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:26:03.357Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:26:03.357Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:26:03.357Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.357Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'fa778f05-85f7-4dac-985d-113c9d64e10a'.
[2025-08-21T19:26:03.357Z] Result: Failure
[2025-08-21T19:26:03.357Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:26:03.358Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.357Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:26:03.358Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:26:03.358Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:26:03.358Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.358Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:26:03.358Z]                    ^^^^^
[2025-08-21T19:26:03.358Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:26:03.358Z] 
[2025-08-21T19:26:03.358Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:26:03.358Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:26:03.358Z]     at Generator.next (<anonymous>).
[2025-08-21T19:26:03.358Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:26:03.358Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.358Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:26:03.358Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:26:03.358Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:26:03.358Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:26:03.358Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:26:03.358Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:26:03.358Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:26:03.358Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:26:03.358Z]     at Generator.next (<anonymous>).
[2025-08-21T19:26:03.358Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.358Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.358Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.358Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.358Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.359Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.359Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.359Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.359Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.359Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 received FunctionLoadRequest
[2025-08-21T19:26:03.388Z] Host restarted.
[2025-08-21T19:26:08.087Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:26:15.690Z] Restarting host.
[2025-08-21T19:26:15.696Z] Stopping JobHost
[2025-08-21T19:26:15.696Z] Job host stopped
[2025-08-21T19:26:15.711Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'c4e41489-9c07-4c97-ac18-332175b89baa'
[2025-08-21T19:26:15.801Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:26:15.801Z] Host configuration file read:
[2025-08-21T19:26:15.801Z] {
[2025-08-21T19:26:15.801Z]   "version": "2.0",
[2025-08-21T19:26:15.801Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:26:15.801Z]   "logging": {
[2025-08-21T19:26:15.801Z]     "applicationInsights": {
[2025-08-21T19:26:15.801Z]       "samplingSettings": {
[2025-08-21T19:26:15.801Z]         "isEnabled": true,
[2025-08-21T19:26:15.801Z]         "excludedTypes": "Request"
[2025-08-21T19:26:15.801Z]       }
[2025-08-21T19:26:15.801Z]     },
[2025-08-21T19:26:15.801Z]     "logLevel": {
[2025-08-21T19:26:15.801Z]       "default": "Information",
[2025-08-21T19:26:15.801Z]       "Host.Results": "Information",
[2025-08-21T19:26:15.801Z]       "Function": "Information"
[2025-08-21T19:26:15.801Z]     }
[2025-08-21T19:26:15.801Z]   },
[2025-08-21T19:26:15.801Z]   "extensionBundle": {
[2025-08-21T19:26:15.801Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:26:15.801Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:26:15.801Z]   },
[2025-08-21T19:26:15.801Z]   "watchDirectories": [
[2025-08-21T19:26:15.801Z]     "Shared"
[2025-08-21T19:26:15.801Z]   ]
[2025-08-21T19:26:15.801Z] }
[2025-08-21T19:26:15.802Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:26:15.803Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:26:15.803Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:26:15.803Z] Loading functions metadata
[2025-08-21T19:26:15.803Z] Worker indexing is enabled
[2025-08-21T19:26:15.803Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:26:15.803Z] Reading functions metadata (Worker)
[2025-08-21T19:26:15.803Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:26:15.809Z] Worker 4b1c35f0-fdb1-4960-88ee-9e667cd35ec6 exited with code 0
[2025-08-21T19:26:15.934Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 connecting on 127.0.0.1:54302
[2025-08-21T19:26:15.956Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received WorkerInitRequest
[2025-08-21T19:26:15.959Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionsMetadataRequest
[2025-08-21T19:26:15.959Z] Reading functions metadata (Host)
[2025-08-21T19:26:16.202Z] 21 functions found (Host)
[2025-08-21T19:26:16.202Z] 21 functions loaded
[2025-08-21T19:26:16.202Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:26:16.203Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:26:16.203Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:26:16.203Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:26:16.340Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:26:16.340Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:26:16.340Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:26:16.340Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:26:16.373Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:26:16.373Z] Host configuration file read:
[2025-08-21T19:26:16.373Z] {
[2025-08-21T19:26:16.373Z]   "version": "2.0",
[2025-08-21T19:26:16.373Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:26:16.373Z]   "logging": {
[2025-08-21T19:26:16.373Z]     "applicationInsights": {
[2025-08-21T19:26:16.373Z]       "samplingSettings": {
[2025-08-21T19:26:16.373Z]         "isEnabled": true,
[2025-08-21T19:26:16.373Z]         "excludedTypes": "Request"
[2025-08-21T19:26:16.373Z]       }
[2025-08-21T19:26:16.373Z]     },
[2025-08-21T19:26:16.373Z]     "logLevel": {
[2025-08-21T19:26:16.373Z]       "default": "Information",
[2025-08-21T19:26:16.373Z]       "Host.Results": "Information",
[2025-08-21T19:26:16.373Z]       "Function": "Information"
[2025-08-21T19:26:16.373Z]     }
[2025-08-21T19:26:16.373Z]   },
[2025-08-21T19:26:16.373Z]   "extensionBundle": {
[2025-08-21T19:26:16.373Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:26:16.373Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:26:16.373Z]   },
[2025-08-21T19:26:16.373Z]   "watchDirectories": [
[2025-08-21T19:26:16.373Z]     "Shared"
[2025-08-21T19:26:16.373Z]   ]
[2025-08-21T19:26:16.373Z] }
[2025-08-21T19:26:16.408Z] Initializing Warmup Extension.
[2025-08-21T19:26:16.408Z] Initializing Host. OperationId: 'c4e41489-9c07-4c97-ac18-332175b89baa'.
[2025-08-21T19:26:16.408Z] Host initialization: ConsecutiveErrors=0, StartupCount=11, OperationId=c4e41489-9c07-4c97-ac18-332175b89baa
[2025-08-21T19:26:16.409Z] LoggerFilterOptions
[2025-08-21T19:26:16.409Z] {
[2025-08-21T19:26:16.409Z]   "MinLevel": "None",
[2025-08-21T19:26:16.409Z]   "Rules": [
[2025-08-21T19:26:16.409Z]     {
[2025-08-21T19:26:16.409Z]       "ProviderName": null,
[2025-08-21T19:26:16.409Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:26:16.409Z]       "LogLevel": "None",
[2025-08-21T19:26:16.409Z]       "Filter": null
[2025-08-21T19:26:16.409Z]     },
[2025-08-21T19:26:16.409Z]     {
[2025-08-21T19:26:16.409Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:16.409Z]       "CategoryName": null,
[2025-08-21T19:26:16.409Z]       "LogLevel": "None",
[2025-08-21T19:26:16.409Z]       "Filter": null
[2025-08-21T19:26:16.409Z]     },
[2025-08-21T19:26:16.409Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": null,
[2025-08-21T19:26:16.410Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": null,
[2025-08-21T19:26:16.410Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": null,
[2025-08-21T19:26:16.410Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": "Host.Results",
[2025-08-21T19:26:16.410Z]       "LogLevel": "Information",
[2025-08-21T19:26:16.410Z]       "Filter": null
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": "Function",
[2025-08-21T19:26:16.410Z]       "LogLevel": "Information",
[2025-08-21T19:26:16.410Z]       "Filter": null
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": "Information",
[2025-08-21T19:26:16.410Z]       "Filter": null
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": "None",
[2025-08-21T19:26:16.410Z]       "Filter": null
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": null,
[2025-08-21T19:26:16.410Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": null,
[2025-08-21T19:26:16.410Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:16.410Z]     }
[2025-08-21T19:26:16.410Z]   ]
[2025-08-21T19:26:16.410Z] }
[2025-08-21T19:26:16.410Z] LoggerFilterOptions
[2025-08-21T19:26:16.410Z] {
[2025-08-21T19:26:16.410Z]   "MinLevel": "None",
[2025-08-21T19:26:16.410Z]   "Rules": [
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:26:16.410Z]       "LogLevel": "None",
[2025-08-21T19:26:16.410Z]       "Filter": null
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": "None",
[2025-08-21T19:26:16.410Z]       "Filter": null
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": null,
[2025-08-21T19:26:16.410Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": null,
[2025-08-21T19:26:16.410Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": null,
[2025-08-21T19:26:16.410Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": "Host.Results",
[2025-08-21T19:26:16.410Z]       "LogLevel": "Information",
[2025-08-21T19:26:16.410Z]       "Filter": null
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": "Function",
[2025-08-21T19:26:16.410Z]       "LogLevel": "Information",
[2025-08-21T19:26:16.410Z]       "Filter": null
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": null,
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": "Information",
[2025-08-21T19:26:16.410Z]       "Filter": null
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": "None",
[2025-08-21T19:26:16.410Z]       "Filter": null
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": null,
[2025-08-21T19:26:16.410Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:16.410Z]     },
[2025-08-21T19:26:16.410Z]     {
[2025-08-21T19:26:16.410Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:26:16.410Z]       "CategoryName": null,
[2025-08-21T19:26:16.410Z]       "LogLevel": null,
[2025-08-21T19:26:16.410Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:26:16.410Z]     }
[2025-08-21T19:26:16.410Z]   ]
[2025-08-21T19:26:16.410Z] }
[2025-08-21T19:26:16.410Z] FunctionResultAggregatorOptions
[2025-08-21T19:26:16.410Z] {
[2025-08-21T19:26:16.410Z]   "BatchSize": 1000,
[2025-08-21T19:26:16.410Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:26:16.410Z]   "IsEnabled": true
[2025-08-21T19:26:16.410Z] }
[2025-08-21T19:26:16.410Z] ConcurrencyOptions
[2025-08-21T19:26:16.410Z] {
[2025-08-21T19:26:16.410Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:26:16.411Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:26:16.411Z]   "CPUThreshold": 0.8,
[2025-08-21T19:26:16.411Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:26:16.411Z] }
[2025-08-21T19:26:16.411Z] SingletonOptions
[2025-08-21T19:26:16.411Z] {
[2025-08-21T19:26:16.411Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:26:16.411Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:26:16.411Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:26:16.411Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:26:16.411Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:26:16.411Z] }
[2025-08-21T19:26:16.411Z] ScaleOptions
[2025-08-21T19:26:16.411Z] {
[2025-08-21T19:26:16.411Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:26:16.411Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:26:16.411Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:26:16.411Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:26:16.411Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:26:16.411Z] }
[2025-08-21T19:26:16.411Z] Starting JobHost
[2025-08-21T19:26:16.411Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=33664b92-270c-4099-b208-ec436915fff6, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:26:16.411Z] Loading functions metadata
[2025-08-21T19:26:16.411Z] Worker indexing is enabled
[2025-08-21T19:26:16.411Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:26:16.411Z] Reading functions metadata (Worker)
[2025-08-21T19:26:16.411Z] Reading functions metadata (Host)
[2025-08-21T19:26:16.586Z] 21 functions found (Host)
[2025-08-21T19:26:16.587Z] Reading functions metadata (Custom)
[2025-08-21T19:26:16.587Z] 0 functions found (Custom)
[2025-08-21T19:26:16.587Z] 21 functions loaded
[2025-08-21T19:26:16.589Z] Generating 21 job function(s)
[2025-08-21T19:26:16.589Z] Worker process started and initialized.
[2025-08-21T19:26:16.608Z] Found the following functions:
[2025-08-21T19:26:16.608Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:26:16.608Z] Host.Functions.analytics
[2025-08-21T19:26:16.608Z] Host.Functions.analyzeUIImage
[2025-08-21T19:26:16.608Z] Host.Functions.atlasComponents
[2025-08-21T19:26:16.608Z] Host.Functions.fast-suggestions
[2025-08-21T19:26:16.608Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:26:16.608Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:26:16.608Z] Host.Functions.generateSuggestions
[2025-08-21T19:26:16.608Z] Host.Functions.generateWireframe
[2025-08-21T19:26:16.608Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:26:16.608Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:26:16.608Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:26:16.608Z] Host.Functions.get-template
[2025-08-21T19:26:16.608Z] Host.Functions.githubAuthCallback
[2025-08-21T19:26:16.608Z] Host.Functions.githubAuthStart
[2025-08-21T19:26:16.608Z] Host.Functions.health
[2025-08-21T19:26:16.608Z] Host.Functions.healthCheck
[2025-08-21T19:26:16.608Z] Host.Functions.openai-health
[2025-08-21T19:26:16.608Z] Host.Functions.performance-stats
[2025-08-21T19:26:16.608Z] Host.Functions.testFunction
[2025-08-21T19:26:16.608Z] Host.Functions.testSimple
[2025-08-21T19:26:16.608Z] 
[2025-08-21T19:26:16.608Z] HttpOptions
[2025-08-21T19:26:16.608Z] {
[2025-08-21T19:26:16.608Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:26:16.608Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:26:16.608Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:26:16.608Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:26:16.608Z] Initializing function HTTP routes
[2025-08-21T19:26:16.608Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:26:16.608Z]   "RoutePrefix": "api"
[2025-08-21T19:26:16.608Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:26:16.608Z] }
[2025-08-21T19:26:16.608Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:26:16.608Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:26:16.608Z] 
[2025-08-21T19:26:16.608Z] Host initialized (197ms)
[2025-08-21T19:26:16.608Z] Host started (197ms)
[2025-08-21T19:26:16.608Z] Job host started
[2025-08-21T19:26:16.609Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:26:16.609Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:26:16.634Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:26:16.635Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:26:16.635Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:26:16.635Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:26:16.673Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:26:16.673Z] 🔍 Current env vars:
[2025-08-21T19:26:16.673Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:26:16.673Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:26:16.673Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:26:16.673Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:26:16.673Z]   Deployment: gpt-4o
[2025-08-21T19:26:16.673Z]   API Version: 2024-08-01-preview
[2025-08-21T19:26:16.673Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:26:16.673Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:26:16.673Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:26:16.673Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:26:16.673Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:26:16.675Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:26:16.680Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.680Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.680Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.680Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.680Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:26:16.681Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '46fae437-92b1-4313-a5cf-e1d07651ee92'.
[2025-08-21T19:26:16.681Z] Result: Failure
[2025-08-21T19:26:16.681Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:26:16.681Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:26:16.681Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:26:16.681Z]                    ^^^^^
[2025-08-21T19:26:16.681Z] 
[2025-08-21T19:26:16.681Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:26:16.681Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:26:16.681Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:26:16.681Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'e50d6a14-72bb-48ab-9ee3-170b810c6e79'.
[2025-08-21T19:26:16.681Z] Result: Failure
[2025-08-21T19:26:16.681Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:26:16.681Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:26:16.681Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:26:16.681Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:26:16.681Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:26:16.681Z]                    ^^^^^
[2025-08-21T19:26:16.681Z] 
[2025-08-21T19:26:16.681Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:26:16.681Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:26:16.681Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:26:16.681Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:26:16.681Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:26:16.681Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:26:16.681Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:26:16.681Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:26:16.681Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:26:16.681Z]     at Generator.next (<anonymous>).
[2025-08-21T19:26:16.681Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:26:16.681Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:26:16.681Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:26:16.681Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:26:16.681Z]     at Generator.next (<anonymous>).
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.681Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.682Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.682Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.682Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 received FunctionLoadRequest
[2025-08-21T19:26:16.704Z] Host restarted.
[2025-08-21T19:26:21.411Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:27:23.446Z] Restarting host.
[2025-08-21T19:27:23.453Z] Stopping JobHost
[2025-08-21T19:27:23.453Z] Job host stopped
[2025-08-21T19:27:23.456Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'c6b8f612-1848-414f-b858-025e87542594'
[2025-08-21T19:27:23.549Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:27:23.549Z] Host configuration file read:
[2025-08-21T19:27:23.549Z] {
[2025-08-21T19:27:23.549Z]   "version": "2.0",
[2025-08-21T19:27:23.549Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:27:23.549Z]   "logging": {
[2025-08-21T19:27:23.549Z]     "applicationInsights": {
[2025-08-21T19:27:23.549Z]       "samplingSettings": {
[2025-08-21T19:27:23.549Z]         "isEnabled": true,
[2025-08-21T19:27:23.549Z]         "excludedTypes": "Request"
[2025-08-21T19:27:23.549Z]       }
[2025-08-21T19:27:23.549Z]     },
[2025-08-21T19:27:23.549Z]     "logLevel": {
[2025-08-21T19:27:23.549Z]       "default": "Information",
[2025-08-21T19:27:23.549Z]       "Host.Results": "Information",
[2025-08-21T19:27:23.549Z]       "Function": "Information"
[2025-08-21T19:27:23.549Z]     }
[2025-08-21T19:27:23.549Z]   },
[2025-08-21T19:27:23.549Z]   "extensionBundle": {
[2025-08-21T19:27:23.549Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:27:23.549Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:27:23.549Z]   },
[2025-08-21T19:27:23.549Z]   "watchDirectories": [
[2025-08-21T19:27:23.549Z]     "Shared"
[2025-08-21T19:27:23.549Z]   ]
[2025-08-21T19:27:23.549Z] }
[2025-08-21T19:27:23.550Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:27:23.551Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:27:23.551Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:27:23.551Z] Loading functions metadata
[2025-08-21T19:27:23.551Z] Worker indexing is enabled
[2025-08-21T19:27:23.551Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:27:23.551Z] Reading functions metadata (Worker)
[2025-08-21T19:27:23.551Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:27:23.556Z] Worker 67d8aa3b-4c14-41dc-b3fc-8ff9e0e19a63 exited with code 0
[2025-08-21T19:27:23.687Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 connecting on 127.0.0.1:54302
[2025-08-21T19:27:23.709Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received WorkerInitRequest
[2025-08-21T19:27:23.712Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionsMetadataRequest
[2025-08-21T19:27:23.712Z] Reading functions metadata (Host)
[2025-08-21T19:27:23.945Z] 21 functions found (Host)
[2025-08-21T19:27:23.946Z] 21 functions loaded
[2025-08-21T19:27:23.946Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:27:23.946Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:27:23.946Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:27:23.946Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:27:24.091Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:27:24.091Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:27:24.091Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:27:24.091Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:27:24.114Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:27:24.114Z] Host configuration file read:
[2025-08-21T19:27:24.114Z] {
[2025-08-21T19:27:24.114Z]   "version": "2.0",
[2025-08-21T19:27:24.114Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:27:24.114Z]   "logging": {
[2025-08-21T19:27:24.114Z]     "applicationInsights": {
[2025-08-21T19:27:24.114Z]       "samplingSettings": {
[2025-08-21T19:27:24.114Z]         "isEnabled": true,
[2025-08-21T19:27:24.114Z]         "excludedTypes": "Request"
[2025-08-21T19:27:24.114Z]       }
[2025-08-21T19:27:24.114Z]     },
[2025-08-21T19:27:24.114Z]     "logLevel": {
[2025-08-21T19:27:24.114Z]       "default": "Information",
[2025-08-21T19:27:24.114Z]       "Host.Results": "Information",
[2025-08-21T19:27:24.114Z]       "Function": "Information"
[2025-08-21T19:27:24.114Z]     }
[2025-08-21T19:27:24.114Z]   },
[2025-08-21T19:27:24.114Z]   "extensionBundle": {
[2025-08-21T19:27:24.114Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:27:24.114Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:27:24.114Z]   },
[2025-08-21T19:27:24.114Z]   "watchDirectories": [
[2025-08-21T19:27:24.114Z]     "Shared"
[2025-08-21T19:27:24.114Z]   ]
[2025-08-21T19:27:24.114Z] }
[2025-08-21T19:27:24.145Z] Initializing Warmup Extension.
[2025-08-21T19:27:24.146Z] Initializing Host. OperationId: 'c6b8f612-1848-414f-b858-025e87542594'.
[2025-08-21T19:27:24.146Z] Host initialization: ConsecutiveErrors=0, StartupCount=12, OperationId=c6b8f612-1848-414f-b858-025e87542594
[2025-08-21T19:27:24.147Z] LoggerFilterOptions
[2025-08-21T19:27:24.147Z] {
[2025-08-21T19:27:24.147Z]   "MinLevel": "None",
[2025-08-21T19:27:24.147Z]   "Rules": [
[2025-08-21T19:27:24.147Z]     {
[2025-08-21T19:27:24.147Z]       "ProviderName": null,
[2025-08-21T19:27:24.147Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:27:24.147Z]       "LogLevel": "None",
[2025-08-21T19:27:24.147Z]       "Filter": null
[2025-08-21T19:27:24.147Z]     },
[2025-08-21T19:27:24.147Z]     {
[2025-08-21T19:27:24.147Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:27:24.147Z]       "CategoryName": null,
[2025-08-21T19:27:24.147Z]       "LogLevel": "None",
[2025-08-21T19:27:24.147Z]       "Filter": null
[2025-08-21T19:27:24.147Z]     },
[2025-08-21T19:27:24.147Z]     {
[2025-08-21T19:27:24.147Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:27:24.147Z]       "CategoryName": null,
[2025-08-21T19:27:24.147Z]       "LogLevel": null,
[2025-08-21T19:27:24.147Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:27:24.147Z]     },
[2025-08-21T19:27:24.147Z]     {
[2025-08-21T19:27:24.147Z]       "ProviderName": null,
[2025-08-21T19:27:24.147Z]       "CategoryName": null,
[2025-08-21T19:27:24.147Z]       "LogLevel": null,
[2025-08-21T19:27:24.147Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:27:24.147Z]     },
[2025-08-21T19:27:24.147Z]     {
[2025-08-21T19:27:24.147Z]       "ProviderName": null,
[2025-08-21T19:27:24.147Z]       "CategoryName": null,
[2025-08-21T19:27:24.147Z]       "LogLevel": null,
[2025-08-21T19:27:24.147Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:27:24.147Z]     },
[2025-08-21T19:27:24.147Z]     {
[2025-08-21T19:27:24.147Z]       "ProviderName": null,
[2025-08-21T19:27:24.147Z]       "CategoryName": "Host.Results",
[2025-08-21T19:27:24.147Z]       "LogLevel": "Information",
[2025-08-21T19:27:24.147Z]       "Filter": null
[2025-08-21T19:27:24.147Z]     },
[2025-08-21T19:27:24.147Z]     {
[2025-08-21T19:27:24.147Z]       "ProviderName": null,
[2025-08-21T19:27:24.147Z]       "CategoryName": "Function",
[2025-08-21T19:27:24.147Z]       "LogLevel": "Information",
[2025-08-21T19:27:24.147Z]       "Filter": null
[2025-08-21T19:27:24.147Z]     },
[2025-08-21T19:27:24.147Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": null,
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": "Information",
[2025-08-21T19:27:24.148Z]       "Filter": null
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": "None",
[2025-08-21T19:27:24.148Z]       "Filter": null
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": null,
[2025-08-21T19:27:24.148Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": null,
[2025-08-21T19:27:24.148Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:27:24.148Z]     }
[2025-08-21T19:27:24.148Z]   ]
[2025-08-21T19:27:24.148Z] }
[2025-08-21T19:27:24.148Z] LoggerFilterOptions
[2025-08-21T19:27:24.148Z] {
[2025-08-21T19:27:24.148Z]   "MinLevel": "None",
[2025-08-21T19:27:24.148Z]   "Rules": [
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": null,
[2025-08-21T19:27:24.148Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:27:24.148Z]       "LogLevel": "None",
[2025-08-21T19:27:24.148Z]       "Filter": null
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": "None",
[2025-08-21T19:27:24.148Z]       "Filter": null
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": null,
[2025-08-21T19:27:24.148Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": null,
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": null,
[2025-08-21T19:27:24.148Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": null,
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": null,
[2025-08-21T19:27:24.148Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": null,
[2025-08-21T19:27:24.148Z]       "CategoryName": "Host.Results",
[2025-08-21T19:27:24.148Z]       "LogLevel": "Information",
[2025-08-21T19:27:24.148Z]       "Filter": null
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": null,
[2025-08-21T19:27:24.148Z]       "CategoryName": "Function",
[2025-08-21T19:27:24.148Z]       "LogLevel": "Information",
[2025-08-21T19:27:24.148Z]       "Filter": null
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": null,
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": "Information",
[2025-08-21T19:27:24.148Z]       "Filter": null
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": "None",
[2025-08-21T19:27:24.148Z]       "Filter": null
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": null,
[2025-08-21T19:27:24.148Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:27:24.148Z]     },
[2025-08-21T19:27:24.148Z]     {
[2025-08-21T19:27:24.148Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:27:24.148Z]       "CategoryName": null,
[2025-08-21T19:27:24.148Z]       "LogLevel": null,
[2025-08-21T19:27:24.148Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:27:24.148Z]     }
[2025-08-21T19:27:24.148Z]   ]
[2025-08-21T19:27:24.148Z] }
[2025-08-21T19:27:24.148Z] FunctionResultAggregatorOptions
[2025-08-21T19:27:24.148Z] {
[2025-08-21T19:27:24.148Z]   "BatchSize": 1000,
[2025-08-21T19:27:24.148Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:27:24.148Z]   "IsEnabled": true
[2025-08-21T19:27:24.148Z] }
[2025-08-21T19:27:24.148Z] ConcurrencyOptions
[2025-08-21T19:27:24.148Z] {
[2025-08-21T19:27:24.148Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:27:24.148Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:27:24.148Z]   "CPUThreshold": 0.8,
[2025-08-21T19:27:24.148Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:27:24.148Z] }
[2025-08-21T19:27:24.148Z] SingletonOptions
[2025-08-21T19:27:24.148Z] {
[2025-08-21T19:27:24.148Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:27:24.148Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:27:24.148Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:27:24.148Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:27:24.148Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:27:24.148Z] }
[2025-08-21T19:27:24.148Z] ScaleOptions
[2025-08-21T19:27:24.148Z] {
[2025-08-21T19:27:24.148Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:27:24.148Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:27:24.148Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:27:24.148Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:27:24.148Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:27:24.148Z] }
[2025-08-21T19:27:24.148Z] Starting JobHost
[2025-08-21T19:27:24.148Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=18d03b34-82e3-4c8e-b835-1e8071eface3, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:27:24.148Z] Loading functions metadata
[2025-08-21T19:27:24.148Z] Worker indexing is enabled
[2025-08-21T19:27:24.148Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:27:24.148Z] Reading functions metadata (Worker)
[2025-08-21T19:27:24.148Z] Reading functions metadata (Host)
[2025-08-21T19:27:24.342Z] 21 functions found (Host)
[2025-08-21T19:27:24.342Z] Reading functions metadata (Custom)
[2025-08-21T19:27:24.342Z] 0 functions found (Custom)
[2025-08-21T19:27:24.342Z] 21 functions loaded
[2025-08-21T19:27:24.343Z] Generating 21 job function(s)
[2025-08-21T19:27:24.343Z] Worker process started and initialized.
[2025-08-21T19:27:24.350Z] Found the following functions:
[2025-08-21T19:27:24.350Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:27:24.350Z] Host.Functions.analytics
[2025-08-21T19:27:24.350Z] Host.Functions.analyzeUIImage
[2025-08-21T19:27:24.350Z] Host.Functions.atlasComponents
[2025-08-21T19:27:24.350Z] Host.Functions.fast-suggestions
[2025-08-21T19:27:24.350Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:27:24.350Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:27:24.350Z] Host.Functions.generateSuggestions
[2025-08-21T19:27:24.350Z] Host.Functions.generateWireframe
[2025-08-21T19:27:24.350Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:27:24.350Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:27:24.350Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:27:24.350Z] Host.Functions.get-template
[2025-08-21T19:27:24.350Z] Host.Functions.githubAuthCallback
[2025-08-21T19:27:24.350Z] Host.Functions.githubAuthStart
[2025-08-21T19:27:24.350Z] Host.Functions.health
[2025-08-21T19:27:24.350Z] Host.Functions.healthCheck
[2025-08-21T19:27:24.350Z] Host.Functions.openai-health
[2025-08-21T19:27:24.350Z] Host.Functions.performance-stats
[2025-08-21T19:27:24.350Z] Host.Functions.testFunction
[2025-08-21T19:27:24.350Z] Host.Functions.testSimple
[2025-08-21T19:27:24.350Z] 
[2025-08-21T19:27:24.350Z] HttpOptions
[2025-08-21T19:27:24.350Z] {
[2025-08-21T19:27:24.350Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:27:24.350Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:27:24.350Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:27:24.350Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:27:24.350Z]   "RoutePrefix": "api"
[2025-08-21T19:27:24.350Z] }
[2025-08-21T19:27:24.350Z] Initializing function HTTP routes
[2025-08-21T19:27:24.350Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:27:24.351Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:27:24.351Z] 
[2025-08-21T19:27:24.351Z] Host initialized (202ms)
[2025-08-21T19:27:24.351Z] Host started (202ms)
[2025-08-21T19:27:24.351Z] Job host started
[2025-08-21T19:27:24.351Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:27:24.351Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:27:24.390Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:27:24.391Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:27:24.391Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:27:24.391Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:27:24.432Z] Host restarted.
[2025-08-21T19:27:24.435Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:27:24.435Z] 🔍 Current env vars:
[2025-08-21T19:27:24.435Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:27:24.435Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:27:24.435Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:27:24.435Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:27:24.435Z]   Deployment: gpt-4o
[2025-08-21T19:27:24.435Z]   API Version: 2024-08-01-preview
[2025-08-21T19:27:24.435Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:27:24.435Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:27:24.435Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:27:24.435Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:27:24.435Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:27:24.437Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:27:24.442Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.442Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.442Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.442Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.442Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.442Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.442Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:27:24.442Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'b005459c-2e5d-4ae9-affd-280e5f435b2a'.
[2025-08-21T19:27:24.442Z] Result: Failure
[2025-08-21T19:27:24.442Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.442Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:27:24.442Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:27:24.443Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:27:24.443Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:27:24.443Z]                    ^^^^^
[2025-08-21T19:27:24.443Z] 
[2025-08-21T19:27:24.443Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:27:24.443Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:27:24.443Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:27:24.443Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:27:24.443Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '2d517e5d-13b0-41fd-b8e7-84a82da2524f'.
[2025-08-21T19:27:24.443Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:27:24.443Z] Result: Failure
[2025-08-21T19:27:24.443Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:27:24.443Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:27:24.443Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:27:24.443Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:27:24.443Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:27:24.443Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:27:24.443Z]                    ^^^^^
[2025-08-21T19:27:24.443Z] 
[2025-08-21T19:27:24.443Z]     at Generator.next (<anonymous>).
[2025-08-21T19:27:24.443Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:27:24.443Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:27:24.443Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:27:24.443Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:27:24.443Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:27:24.443Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:27:24.443Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:27:24.443Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:27:24.443Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:27:24.443Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:27:24.443Z]     at Generator.next (<anonymous>).
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:24.443Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionLoadRequest
[2025-08-21T19:27:29.154Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:37:52.347Z] Executing HTTP request: {
[2025-08-21T19:37:52.347Z]   "requestId": "052e30d8-bc5e-461a-9624-4e1a330484bc",
[2025-08-21T19:37:52.347Z]   "method": "POST",
[2025-08-21T19:37:52.347Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:37:52.347Z]   "uri": "/api/generate-suggestions"
[2025-08-21T19:37:52.347Z] }
[2025-08-21T19:37:52.379Z] Executing 'Functions.generateSuggestions' (Reason='This function was programmatically called via the host APIs.', Id=30d67b44-562d-4735-a355-1f18100a1b91)
[2025-08-21T19:37:52.385Z] Executing HTTP request: {
[2025-08-21T19:37:52.385Z]   "requestId": "5470830b-def8-4c58-a188-d4d8f6b2a7f9",
[2025-08-21T19:37:52.385Z]   "method": "POST",
[2025-08-21T19:37:52.385Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:37:52.385Z]   "uri": "/api/generate-suggestions"
[2025-08-21T19:37:52.385Z] }
[2025-08-21T19:37:52.386Z] Executing 'Functions.generateSuggestions' (Reason='This function was programmatically called via the host APIs.', Id=7a8557e3-cb26-41fe-b854-bc69e704bcde)
[2025-08-21T19:37:52.423Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionInvocationRequest with invocationId 30d67b44-562d-4735-a355-1f18100a1b91
[2025-08-21T19:37:52.424Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionInvocationRequest with invocationId 7a8557e3-cb26-41fe-b854-bc69e704bcde
[2025-08-21T19:37:52.425Z] Executed 'Functions.generateSuggestions' (Succeeded, Id=30d67b44-562d-4735-a355-1f18100a1b91, Duration=59ms)
[2025-08-21T19:37:52.426Z] Executed 'Functions.generateSuggestions' (Succeeded, Id=7a8557e3-cb26-41fe-b854-bc69e704bcde, Duration=39ms)
[2025-08-21T19:37:52.429Z] Executed HTTP request: {
[2025-08-21T19:37:52.429Z]   "requestId": "5470830b-def8-4c58-a188-d4d8f6b2a7f9",
[2025-08-21T19:37:52.429Z] Executed HTTP request: {
[2025-08-21T19:37:52.429Z]   "identities": "",
[2025-08-21T19:37:52.429Z]   "requestId": "052e30d8-bc5e-461a-9624-4e1a330484bc",
[2025-08-21T19:37:52.429Z]   "status": "200",
[2025-08-21T19:37:52.429Z]   "identities": "",
[2025-08-21T19:37:52.429Z]   "duration": "43"
[2025-08-21T19:37:52.429Z]   "status": "200",
[2025-08-21T19:37:52.429Z] }
[2025-08-21T19:37:52.429Z]   "duration": "84"
[2025-08-21T19:37:52.429Z] }
[2025-08-21T19:37:55.210Z] Executing HTTP request: {
[2025-08-21T19:37:55.211Z]   "requestId": "d26a6a5d-677d-4690-b4ff-54479ac16354",
[2025-08-21T19:37:55.211Z]   "method": "POST",
[2025-08-21T19:37:55.211Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:37:55.211Z]   "uri": "/api/generate-wireframe-enhanced"
[2025-08-21T19:37:55.211Z] }
[2025-08-21T19:37:55.215Z] Executing 'Functions.generateWireframeEnhanced' (Reason='This function was programmatically called via the host APIs.', Id=4b7759fd-7519-455e-832a-7833dcd744c7)
[2025-08-21T19:37:55.276Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 received FunctionInvocationRequest with invocationId 4b7759fd-7519-455e-832a-7833dcd744c7
[2025-08-21T19:38:03.938Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:38:03.938Z] 🔍 Atlas component check (ENHANCED):
[2025-08-21T19:38:03.938Z]     Description: "Generate Microsoft Learn's assessment portal with skills validation and feedback"
[2025-08-21T19:38:03.938Z]     Contains learning keywords: true
[2025-08-21T19:38:03.938Z]     Is hero section exclusion: false
[2025-08-21T19:38:03.939Z]     Final isLearningPlatform: true
[2025-08-21T19:38:03.939Z] ✅ Added Atlas learning content section
[2025-08-21T19:38:03.939Z] 🎯 Atlas components added: Hero: 0, Modules: 4, Learning Paths: 2
[2025-08-21T19:38:03.944Z] Executed 'Functions.generateWireframeEnhanced' (Succeeded, Id=4b7759fd-7519-455e-832a-7833dcd744c7, Duration=8730ms)
[2025-08-21T19:38:03.945Z] Executed HTTP request: {
[2025-08-21T19:38:03.945Z]   "requestId": "d26a6a5d-677d-4690-b4ff-54479ac16354",
[2025-08-21T19:38:03.945Z]   "identities": "",
[2025-08-21T19:38:03.945Z]   "status": "200",
[2025-08-21T19:38:03.945Z]   "duration": "8735"
[2025-08-21T19:38:03.946Z] }
[2025-08-21T19:39:01.286Z] Restarting host.
[2025-08-21T19:39:01.306Z] Stopping JobHost
[2025-08-21T19:39:01.306Z] Job host stopped
[2025-08-21T19:39:01.310Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'df979e54-86fb-4d37-a315-25f00d2b115c'
[2025-08-21T19:39:01.387Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:39:01.387Z] Host configuration file read:
[2025-08-21T19:39:01.387Z] {
[2025-08-21T19:39:01.387Z]   "version": "2.0",
[2025-08-21T19:39:01.387Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:39:01.387Z]   "logging": {
[2025-08-21T19:39:01.387Z]     "applicationInsights": {
[2025-08-21T19:39:01.388Z]       "samplingSettings": {
[2025-08-21T19:39:01.388Z]         "isEnabled": true,
[2025-08-21T19:39:01.388Z]         "excludedTypes": "Request"
[2025-08-21T19:39:01.388Z]       }
[2025-08-21T19:39:01.388Z]     },
[2025-08-21T19:39:01.388Z]     "logLevel": {
[2025-08-21T19:39:01.388Z]       "default": "Information",
[2025-08-21T19:39:01.388Z]       "Host.Results": "Information",
[2025-08-21T19:39:01.388Z]       "Function": "Information"
[2025-08-21T19:39:01.388Z]     }
[2025-08-21T19:39:01.388Z]   },
[2025-08-21T19:39:01.388Z]   "extensionBundle": {
[2025-08-21T19:39:01.388Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:39:01.388Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:39:01.388Z]   },
[2025-08-21T19:39:01.388Z]   "watchDirectories": [
[2025-08-21T19:39:01.388Z]     "Shared"
[2025-08-21T19:39:01.388Z]   ]
[2025-08-21T19:39:01.388Z] }
[2025-08-21T19:39:01.390Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:39:01.391Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:39:01.391Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:39:01.391Z] Loading functions metadata
[2025-08-21T19:39:01.391Z] Worker indexing is enabled
[2025-08-21T19:39:01.391Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:39:01.391Z] Reading functions metadata (Worker)
[2025-08-21T19:39:01.391Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:39:01.409Z] Worker e5e56d3f-a0fd-43f2-878d-88b009e6e222 exited with code 0
[2025-08-21T19:39:01.626Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 connecting on 127.0.0.1:54302
[2025-08-21T19:39:01.651Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received WorkerInitRequest
[2025-08-21T19:39:01.655Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionsMetadataRequest
[2025-08-21T19:39:01.655Z] Reading functions metadata (Host)
[2025-08-21T19:39:01.884Z] 21 functions found (Host)
[2025-08-21T19:39:01.884Z] 21 functions loaded
[2025-08-21T19:39:01.884Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:39:01.884Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:39:01.884Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:39:01.884Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:39:02.028Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:39:02.028Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:39:02.028Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:39:02.028Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:39:02.068Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:39:02.068Z] Host configuration file read:
[2025-08-21T19:39:02.068Z] {
[2025-08-21T19:39:02.068Z]   "version": "2.0",
[2025-08-21T19:39:02.068Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:39:02.068Z]   "logging": {
[2025-08-21T19:39:02.068Z]     "applicationInsights": {
[2025-08-21T19:39:02.068Z]       "samplingSettings": {
[2025-08-21T19:39:02.068Z]         "isEnabled": true,
[2025-08-21T19:39:02.068Z]         "excludedTypes": "Request"
[2025-08-21T19:39:02.069Z]       }
[2025-08-21T19:39:02.069Z]     },
[2025-08-21T19:39:02.069Z]     "logLevel": {
[2025-08-21T19:39:02.069Z]       "default": "Information",
[2025-08-21T19:39:02.069Z]       "Host.Results": "Information",
[2025-08-21T19:39:02.069Z]       "Function": "Information"
[2025-08-21T19:39:02.069Z]     }
[2025-08-21T19:39:02.069Z]   },
[2025-08-21T19:39:02.069Z]   "extensionBundle": {
[2025-08-21T19:39:02.069Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:39:02.069Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:39:02.069Z]   },
[2025-08-21T19:39:02.069Z]   "watchDirectories": [
[2025-08-21T19:39:02.069Z]     "Shared"
[2025-08-21T19:39:02.069Z]   ]
[2025-08-21T19:39:02.069Z] }
[2025-08-21T19:39:02.118Z] Initializing Warmup Extension.
[2025-08-21T19:39:02.122Z] Initializing Host. OperationId: 'df979e54-86fb-4d37-a315-25f00d2b115c'.
[2025-08-21T19:39:02.122Z] Host initialization: ConsecutiveErrors=0, StartupCount=13, OperationId=df979e54-86fb-4d37-a315-25f00d2b115c
[2025-08-21T19:39:02.125Z] LoggerFilterOptions
[2025-08-21T19:39:02.125Z] {
[2025-08-21T19:39:02.125Z]   "MinLevel": "None",
[2025-08-21T19:39:02.125Z]   "Rules": [
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": null,
[2025-08-21T19:39:02.125Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:39:02.125Z]       "LogLevel": "None",
[2025-08-21T19:39:02.125Z]       "Filter": null
[2025-08-21T19:39:02.125Z]     },
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:02.125Z]       "CategoryName": null,
[2025-08-21T19:39:02.125Z]       "LogLevel": "None",
[2025-08-21T19:39:02.125Z]       "Filter": null
[2025-08-21T19:39:02.125Z]     },
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:02.125Z]       "CategoryName": null,
[2025-08-21T19:39:02.125Z]       "LogLevel": null,
[2025-08-21T19:39:02.125Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:02.125Z]     },
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": null,
[2025-08-21T19:39:02.125Z]       "CategoryName": null,
[2025-08-21T19:39:02.125Z]       "LogLevel": null,
[2025-08-21T19:39:02.125Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:02.125Z]     },
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": null,
[2025-08-21T19:39:02.125Z]       "CategoryName": null,
[2025-08-21T19:39:02.125Z]       "LogLevel": null,
[2025-08-21T19:39:02.125Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:02.125Z]     },
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": null,
[2025-08-21T19:39:02.125Z]       "CategoryName": "Host.Results",
[2025-08-21T19:39:02.125Z]       "LogLevel": "Information",
[2025-08-21T19:39:02.125Z]       "Filter": null
[2025-08-21T19:39:02.125Z]     },
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": null,
[2025-08-21T19:39:02.125Z]       "CategoryName": "Function",
[2025-08-21T19:39:02.125Z]       "LogLevel": "Information",
[2025-08-21T19:39:02.125Z]       "Filter": null
[2025-08-21T19:39:02.125Z]     },
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": null,
[2025-08-21T19:39:02.125Z]       "CategoryName": null,
[2025-08-21T19:39:02.125Z]       "LogLevel": "Information",
[2025-08-21T19:39:02.125Z]       "Filter": null
[2025-08-21T19:39:02.125Z]     },
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:39:02.125Z]       "CategoryName": null,
[2025-08-21T19:39:02.125Z]       "LogLevel": "None",
[2025-08-21T19:39:02.125Z]       "Filter": null
[2025-08-21T19:39:02.125Z]     },
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:39:02.125Z]       "CategoryName": null,
[2025-08-21T19:39:02.125Z]       "LogLevel": null,
[2025-08-21T19:39:02.125Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:02.125Z]     },
[2025-08-21T19:39:02.125Z]     {
[2025-08-21T19:39:02.125Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:02.125Z]       "CategoryName": null,
[2025-08-21T19:39:02.125Z]       "LogLevel": null,
[2025-08-21T19:39:02.126Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:02.126Z]     }
[2025-08-21T19:39:02.126Z]   ]
[2025-08-21T19:39:02.126Z] }
[2025-08-21T19:39:02.126Z] LoggerFilterOptions
[2025-08-21T19:39:02.126Z] {
[2025-08-21T19:39:02.126Z]   "MinLevel": "None",
[2025-08-21T19:39:02.126Z]   "Rules": [
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": null,
[2025-08-21T19:39:02.126Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:39:02.126Z]       "LogLevel": "None",
[2025-08-21T19:39:02.126Z]       "Filter": null
[2025-08-21T19:39:02.126Z]     },
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:02.126Z]       "CategoryName": null,
[2025-08-21T19:39:02.126Z]       "LogLevel": "None",
[2025-08-21T19:39:02.126Z]       "Filter": null
[2025-08-21T19:39:02.126Z]     },
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:02.126Z]       "CategoryName": null,
[2025-08-21T19:39:02.126Z]       "LogLevel": null,
[2025-08-21T19:39:02.126Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:02.126Z]     },
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": null,
[2025-08-21T19:39:02.126Z]       "CategoryName": null,
[2025-08-21T19:39:02.126Z]       "LogLevel": null,
[2025-08-21T19:39:02.126Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:02.126Z]     },
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": null,
[2025-08-21T19:39:02.126Z]       "CategoryName": null,
[2025-08-21T19:39:02.126Z]       "LogLevel": null,
[2025-08-21T19:39:02.126Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:02.126Z]     },
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": null,
[2025-08-21T19:39:02.126Z]       "CategoryName": "Host.Results",
[2025-08-21T19:39:02.126Z]       "LogLevel": "Information",
[2025-08-21T19:39:02.126Z]       "Filter": null
[2025-08-21T19:39:02.126Z]     },
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": null,
[2025-08-21T19:39:02.126Z]       "CategoryName": "Function",
[2025-08-21T19:39:02.126Z]       "LogLevel": "Information",
[2025-08-21T19:39:02.126Z]       "Filter": null
[2025-08-21T19:39:02.126Z]     },
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": null,
[2025-08-21T19:39:02.126Z]       "CategoryName": null,
[2025-08-21T19:39:02.126Z]       "LogLevel": "Information",
[2025-08-21T19:39:02.126Z]       "Filter": null
[2025-08-21T19:39:02.126Z]     },
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:39:02.126Z]       "CategoryName": null,
[2025-08-21T19:39:02.126Z]       "LogLevel": "None",
[2025-08-21T19:39:02.126Z]       "Filter": null
[2025-08-21T19:39:02.126Z]     },
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:39:02.126Z]       "CategoryName": null,
[2025-08-21T19:39:02.126Z]       "LogLevel": null,
[2025-08-21T19:39:02.126Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:02.126Z]     },
[2025-08-21T19:39:02.126Z]     {
[2025-08-21T19:39:02.126Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:02.126Z]       "CategoryName": null,
[2025-08-21T19:39:02.126Z]       "LogLevel": null,
[2025-08-21T19:39:02.126Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:02.126Z]     }
[2025-08-21T19:39:02.126Z]   ]
[2025-08-21T19:39:02.126Z] }
[2025-08-21T19:39:02.126Z] FunctionResultAggregatorOptions
[2025-08-21T19:39:02.126Z] {
[2025-08-21T19:39:02.126Z]   "BatchSize": 1000,
[2025-08-21T19:39:02.126Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:39:02.126Z]   "IsEnabled": true
[2025-08-21T19:39:02.126Z] }
[2025-08-21T19:39:02.126Z] ConcurrencyOptions
[2025-08-21T19:39:02.126Z] {
[2025-08-21T19:39:02.126Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:39:02.126Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:39:02.126Z]   "CPUThreshold": 0.8,
[2025-08-21T19:39:02.126Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:39:02.126Z] }
[2025-08-21T19:39:02.126Z] SingletonOptions
[2025-08-21T19:39:02.126Z] {
[2025-08-21T19:39:02.126Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:39:02.126Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:39:02.126Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:39:02.126Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:39:02.126Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:39:02.126Z] }
[2025-08-21T19:39:02.127Z] ScaleOptions
[2025-08-21T19:39:02.127Z] {
[2025-08-21T19:39:02.127Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:39:02.127Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:39:02.127Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:39:02.127Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:39:02.127Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:39:02.127Z] }
[2025-08-21T19:39:02.127Z] Starting JobHost
[2025-08-21T19:39:02.127Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=e80e9228-76db-4e5d-beba-ebf4abd1d61e, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:39:02.127Z] Loading functions metadata
[2025-08-21T19:39:02.127Z] Worker indexing is enabled
[2025-08-21T19:39:02.127Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:39:02.127Z] Reading functions metadata (Worker)
[2025-08-21T19:39:02.127Z] Reading functions metadata (Host)
[2025-08-21T19:39:02.311Z] 21 functions found (Host)
[2025-08-21T19:39:02.311Z] Reading functions metadata (Custom)
[2025-08-21T19:39:02.312Z] 0 functions found (Custom)
[2025-08-21T19:39:02.312Z] 21 functions loaded
[2025-08-21T19:39:02.317Z] Generating 21 job function(s)
[2025-08-21T19:39:02.317Z] Worker process started and initialized.
[2025-08-21T19:39:02.340Z] Found the following functions:
[2025-08-21T19:39:02.340Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:39:02.340Z] Host.Functions.analytics
[2025-08-21T19:39:02.340Z] Host.Functions.analyzeUIImage
[2025-08-21T19:39:02.340Z] Host.Functions.atlasComponents
[2025-08-21T19:39:02.340Z] Host.Functions.fast-suggestions
[2025-08-21T19:39:02.340Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:39:02.340Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:39:02.340Z] Host.Functions.generateSuggestions
[2025-08-21T19:39:02.340Z] Host.Functions.generateWireframe
[2025-08-21T19:39:02.340Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:39:02.340Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:39:02.340Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:39:02.340Z] Host.Functions.get-template
[2025-08-21T19:39:02.340Z] Host.Functions.githubAuthCallback
[2025-08-21T19:39:02.340Z] Host.Functions.githubAuthStart
[2025-08-21T19:39:02.340Z] Host.Functions.health
[2025-08-21T19:39:02.340Z] Host.Functions.healthCheck
[2025-08-21T19:39:02.340Z] Host.Functions.openai-health
[2025-08-21T19:39:02.340Z] Host.Functions.performance-stats
[2025-08-21T19:39:02.340Z] Host.Functions.testFunction
[2025-08-21T19:39:02.340Z] Host.Functions.testSimple
[2025-08-21T19:39:02.340Z] 
[2025-08-21T19:39:02.341Z] HttpOptions
[2025-08-21T19:39:02.341Z] {
[2025-08-21T19:39:02.341Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:39:02.341Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:39:02.341Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:39:02.341Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:39:02.341Z]   "RoutePrefix": "api"
[2025-08-21T19:39:02.341Z] }
[2025-08-21T19:39:02.341Z] Initializing function HTTP routes
[2025-08-21T19:39:02.341Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:39:02.341Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:39:02.341Z] 
[2025-08-21T19:39:02.341Z] Host initialized (214ms)
[2025-08-21T19:39:02.341Z] Host started (214ms)
[2025-08-21T19:39:02.341Z] Job host started
[2025-08-21T19:39:02.341Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:39:02.341Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:39:02.385Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:39:02.385Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:39:02.385Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:39:02.385Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:39:02.434Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:39:02.434Z] 🔍 Current env vars:
[2025-08-21T19:39:02.434Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:39:02.434Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:39:02.434Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:39:02.434Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:39:02.434Z]   Deployment: gpt-4o
[2025-08-21T19:39:02.434Z]   API Version: 2024-08-01-preview
[2025-08-21T19:39:02.434Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:39:02.434Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:39:02.434Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:39:02.434Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:39:02.435Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:39:02.436Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:39:02.441Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.442Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.442Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.442Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.442Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.442Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.442Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:39:02.442Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.442Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:39:02.442Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '870363ad-6a85-4486-861c-9bab8be12776'.
[2025-08-21T19:39:02.442Z] Result: Failure
[2025-08-21T19:39:02.442Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:39:02.443Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:39:02.443Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:39:02.443Z]                    ^^^^^
[2025-08-21T19:39:02.443Z] 
[2025-08-21T19:39:02.443Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:39:02.443Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '632c6248-69a2-4b3b-afd7-43243c61de77'.
[2025-08-21T19:39:02.443Z] Result: Failure
[2025-08-21T19:39:02.443Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:39:02.443Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:39:02.443Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 received FunctionLoadRequest
[2025-08-21T19:39:02.443Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:39:02.443Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:39:02.443Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:39:02.443Z]                    ^^^^^
[2025-08-21T19:39:02.443Z] 
[2025-08-21T19:39:02.443Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:39:02.444Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:39:02.444Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:39:02.444Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:39:02.443Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:39:02.444Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:39:02.444Z]     at Generator.next (<anonymous>).
[2025-08-21T19:39:02.444Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:39:02.444Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:39:02.444Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:39:02.444Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:39:02.444Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:39:02.444Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:39:02.444Z]     at Generator.next (<anonymous>).
[2025-08-21T19:39:02.446Z] Host restarted.
[2025-08-21T19:39:07.128Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:39:22.089Z] Restarting host.
[2025-08-21T19:39:22.098Z] Stopping JobHost
[2025-08-21T19:39:22.098Z] Job host stopped
[2025-08-21T19:39:22.102Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'bb2f947a-cb2b-489f-98f6-915aedd7d4ba'
[2025-08-21T19:39:22.291Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:39:22.292Z] Host configuration file read:
[2025-08-21T19:39:22.292Z] {
[2025-08-21T19:39:22.292Z]   "version": "2.0",
[2025-08-21T19:39:22.292Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:39:22.292Z]   "logging": {
[2025-08-21T19:39:22.292Z]     "applicationInsights": {
[2025-08-21T19:39:22.292Z]       "samplingSettings": {
[2025-08-21T19:39:22.292Z]         "isEnabled": true,
[2025-08-21T19:39:22.292Z]         "excludedTypes": "Request"
[2025-08-21T19:39:22.292Z]       }
[2025-08-21T19:39:22.292Z]     },
[2025-08-21T19:39:22.292Z]     "logLevel": {
[2025-08-21T19:39:22.292Z]       "default": "Information",
[2025-08-21T19:39:22.292Z]       "Host.Results": "Information",
[2025-08-21T19:39:22.292Z]       "Function": "Information"
[2025-08-21T19:39:22.292Z]     }
[2025-08-21T19:39:22.292Z]   },
[2025-08-21T19:39:22.292Z]   "extensionBundle": {
[2025-08-21T19:39:22.292Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:39:22.292Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:39:22.292Z]   },
[2025-08-21T19:39:22.292Z]   "watchDirectories": [
[2025-08-21T19:39:22.292Z]     "Shared"
[2025-08-21T19:39:22.292Z]   ]
[2025-08-21T19:39:22.292Z] }
[2025-08-21T19:39:22.309Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:39:22.309Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:39:22.309Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:39:22.310Z] Loading functions metadata
[2025-08-21T19:39:22.311Z] Worker indexing is enabled
[2025-08-21T19:39:22.311Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:39:22.311Z] Reading functions metadata (Worker)
[2025-08-21T19:39:22.311Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:39:22.318Z] Worker 08f5aeed-33d7-4ed4-8228-0466572b4b15 exited with code 0
[2025-08-21T19:39:22.442Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 connecting on 127.0.0.1:54302
[2025-08-21T19:39:22.469Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received WorkerInitRequest
[2025-08-21T19:39:22.473Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionsMetadataRequest
[2025-08-21T19:39:22.473Z] Reading functions metadata (Host)
[2025-08-21T19:39:22.941Z] 21 functions found (Host)
[2025-08-21T19:39:22.941Z] 21 functions loaded
[2025-08-21T19:39:22.942Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:39:22.942Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:39:22.942Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:39:22.942Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:39:23.092Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:39:23.092Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:39:23.093Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:39:23.093Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:39:23.151Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:39:23.151Z] Host configuration file read:
[2025-08-21T19:39:23.151Z] {
[2025-08-21T19:39:23.151Z]   "version": "2.0",
[2025-08-21T19:39:23.151Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:39:23.151Z]   "logging": {
[2025-08-21T19:39:23.151Z]     "applicationInsights": {
[2025-08-21T19:39:23.151Z]       "samplingSettings": {
[2025-08-21T19:39:23.151Z]         "isEnabled": true,
[2025-08-21T19:39:23.151Z]         "excludedTypes": "Request"
[2025-08-21T19:39:23.151Z]       }
[2025-08-21T19:39:23.151Z]     },
[2025-08-21T19:39:23.151Z]     "logLevel": {
[2025-08-21T19:39:23.151Z]       "default": "Information",
[2025-08-21T19:39:23.151Z]       "Host.Results": "Information",
[2025-08-21T19:39:23.151Z]       "Function": "Information"
[2025-08-21T19:39:23.151Z]     }
[2025-08-21T19:39:23.151Z]   },
[2025-08-21T19:39:23.151Z]   "extensionBundle": {
[2025-08-21T19:39:23.151Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:39:23.151Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:39:23.151Z]   },
[2025-08-21T19:39:23.151Z]   "watchDirectories": [
[2025-08-21T19:39:23.151Z]     "Shared"
[2025-08-21T19:39:23.151Z]   ]
[2025-08-21T19:39:23.151Z] }
[2025-08-21T19:39:23.187Z] Initializing Warmup Extension.
[2025-08-21T19:39:23.189Z] Initializing Host. OperationId: 'bb2f947a-cb2b-489f-98f6-915aedd7d4ba'.
[2025-08-21T19:39:23.189Z] Host initialization: ConsecutiveErrors=0, StartupCount=14, OperationId=bb2f947a-cb2b-489f-98f6-915aedd7d4ba
[2025-08-21T19:39:23.191Z] LoggerFilterOptions
[2025-08-21T19:39:23.191Z] {
[2025-08-21T19:39:23.191Z]   "MinLevel": "None",
[2025-08-21T19:39:23.191Z]   "Rules": [
[2025-08-21T19:39:23.191Z]     {
[2025-08-21T19:39:23.191Z]       "ProviderName": null,
[2025-08-21T19:39:23.191Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:39:23.191Z]       "LogLevel": "None",
[2025-08-21T19:39:23.191Z]       "Filter": null
[2025-08-21T19:39:23.191Z]     },
[2025-08-21T19:39:23.191Z]     {
[2025-08-21T19:39:23.191Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:23.191Z]       "CategoryName": null,
[2025-08-21T19:39:23.191Z]       "LogLevel": "None",
[2025-08-21T19:39:23.191Z]       "Filter": null
[2025-08-21T19:39:23.191Z]     },
[2025-08-21T19:39:23.191Z]     {
[2025-08-21T19:39:23.191Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:23.191Z]       "CategoryName": null,
[2025-08-21T19:39:23.191Z]       "LogLevel": null,
[2025-08-21T19:39:23.191Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:23.191Z]     },
[2025-08-21T19:39:23.191Z]     {
[2025-08-21T19:39:23.191Z]       "ProviderName": null,
[2025-08-21T19:39:23.191Z]       "CategoryName": null,
[2025-08-21T19:39:23.191Z]       "LogLevel": null,
[2025-08-21T19:39:23.191Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:23.191Z]     },
[2025-08-21T19:39:23.191Z]     {
[2025-08-21T19:39:23.191Z]       "ProviderName": null,
[2025-08-21T19:39:23.191Z]       "CategoryName": null,
[2025-08-21T19:39:23.191Z]       "LogLevel": null,
[2025-08-21T19:39:23.191Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:23.191Z]     },
[2025-08-21T19:39:23.191Z]     {
[2025-08-21T19:39:23.191Z]       "ProviderName": null,
[2025-08-21T19:39:23.191Z]       "CategoryName": "Host.Results",
[2025-08-21T19:39:23.191Z]       "LogLevel": "Information",
[2025-08-21T19:39:23.191Z]       "Filter": null
[2025-08-21T19:39:23.191Z]     },
[2025-08-21T19:39:23.191Z]     {
[2025-08-21T19:39:23.191Z]       "ProviderName": null,
[2025-08-21T19:39:23.191Z]       "CategoryName": "Function",
[2025-08-21T19:39:23.191Z]       "LogLevel": "Information",
[2025-08-21T19:39:23.191Z]       "Filter": null
[2025-08-21T19:39:23.191Z]     },
[2025-08-21T19:39:23.191Z]     {
[2025-08-21T19:39:23.191Z]       "ProviderName": null,
[2025-08-21T19:39:23.191Z]       "CategoryName": null,
[2025-08-21T19:39:23.191Z]       "LogLevel": "Information",
[2025-08-21T19:39:23.191Z]       "Filter": null
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": "None",
[2025-08-21T19:39:23.192Z]       "Filter": null
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": null,
[2025-08-21T19:39:23.192Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": null,
[2025-08-21T19:39:23.192Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:23.192Z]     }
[2025-08-21T19:39:23.192Z]   ]
[2025-08-21T19:39:23.192Z] }
[2025-08-21T19:39:23.192Z] LoggerFilterOptions
[2025-08-21T19:39:23.192Z] {
[2025-08-21T19:39:23.192Z]   "MinLevel": "None",
[2025-08-21T19:39:23.192Z]   "Rules": [
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": null,
[2025-08-21T19:39:23.192Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:39:23.192Z]       "LogLevel": "None",
[2025-08-21T19:39:23.192Z]       "Filter": null
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": "None",
[2025-08-21T19:39:23.192Z]       "Filter": null
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": null,
[2025-08-21T19:39:23.192Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": null,
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": null,
[2025-08-21T19:39:23.192Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": null,
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": null,
[2025-08-21T19:39:23.192Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": null,
[2025-08-21T19:39:23.192Z]       "CategoryName": "Host.Results",
[2025-08-21T19:39:23.192Z]       "LogLevel": "Information",
[2025-08-21T19:39:23.192Z]       "Filter": null
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": null,
[2025-08-21T19:39:23.192Z]       "CategoryName": "Function",
[2025-08-21T19:39:23.192Z]       "LogLevel": "Information",
[2025-08-21T19:39:23.192Z]       "Filter": null
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": null,
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": "Information",
[2025-08-21T19:39:23.192Z]       "Filter": null
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": "None",
[2025-08-21T19:39:23.192Z]       "Filter": null
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": null,
[2025-08-21T19:39:23.192Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:23.192Z]     },
[2025-08-21T19:39:23.192Z]     {
[2025-08-21T19:39:23.192Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:39:23.192Z]       "CategoryName": null,
[2025-08-21T19:39:23.192Z]       "LogLevel": null,
[2025-08-21T19:39:23.192Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:39:23.192Z]     }
[2025-08-21T19:39:23.192Z]   ]
[2025-08-21T19:39:23.192Z] }
[2025-08-21T19:39:23.192Z] FunctionResultAggregatorOptions
[2025-08-21T19:39:23.192Z] {
[2025-08-21T19:39:23.192Z]   "BatchSize": 1000,
[2025-08-21T19:39:23.192Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:39:23.192Z]   "IsEnabled": true
[2025-08-21T19:39:23.192Z] }
[2025-08-21T19:39:23.192Z] ConcurrencyOptions
[2025-08-21T19:39:23.192Z] {
[2025-08-21T19:39:23.192Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:39:23.192Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:39:23.192Z]   "CPUThreshold": 0.8,
[2025-08-21T19:39:23.192Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:39:23.192Z] }
[2025-08-21T19:39:23.192Z] SingletonOptions
[2025-08-21T19:39:23.192Z] {
[2025-08-21T19:39:23.192Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:39:23.192Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:39:23.192Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:39:23.192Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:39:23.192Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:39:23.192Z] }
[2025-08-21T19:39:23.192Z] ScaleOptions
[2025-08-21T19:39:23.192Z] {
[2025-08-21T19:39:23.192Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:39:23.192Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:39:23.192Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:39:23.192Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:39:23.192Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:39:23.192Z] }
[2025-08-21T19:39:23.192Z] Starting JobHost
[2025-08-21T19:39:23.192Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=bd337349-6a89-4e0a-9227-90bbf601fffe, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:39:23.192Z] Loading functions metadata
[2025-08-21T19:39:23.192Z] Worker indexing is enabled
[2025-08-21T19:39:23.192Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:39:23.192Z] Reading functions metadata (Worker)
[2025-08-21T19:39:23.193Z] Reading functions metadata (Host)
[2025-08-21T19:39:23.505Z] 21 functions found (Host)
[2025-08-21T19:39:23.505Z] Reading functions metadata (Custom)
[2025-08-21T19:39:23.506Z] 0 functions found (Custom)
[2025-08-21T19:39:23.506Z] 21 functions loaded
[2025-08-21T19:39:23.507Z] Worker process started and initialized.
[2025-08-21T19:39:23.507Z] Generating 21 job function(s)
[2025-08-21T19:39:23.523Z] Found the following functions:
[2025-08-21T19:39:23.523Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:39:23.523Z] Host.Functions.analytics
[2025-08-21T19:39:23.523Z] Host.Functions.analyzeUIImage
[2025-08-21T19:39:23.523Z] Host.Functions.atlasComponents
[2025-08-21T19:39:23.523Z] Host.Functions.fast-suggestions
[2025-08-21T19:39:23.523Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:39:23.523Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:39:23.523Z] Host.Functions.generateSuggestions
[2025-08-21T19:39:23.523Z] Host.Functions.generateWireframe
[2025-08-21T19:39:23.523Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:39:23.523Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:39:23.523Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:39:23.523Z] Host.Functions.get-template
[2025-08-21T19:39:23.523Z] Host.Functions.githubAuthCallback
[2025-08-21T19:39:23.523Z] Host.Functions.githubAuthStart
[2025-08-21T19:39:23.523Z] Host.Functions.health
[2025-08-21T19:39:23.523Z] Host.Functions.healthCheck
[2025-08-21T19:39:23.524Z] Host.Functions.openai-health
[2025-08-21T19:39:23.524Z] Host.Functions.performance-stats
[2025-08-21T19:39:23.524Z] Host.Functions.testFunction
[2025-08-21T19:39:23.524Z] Host.Functions.testSimple
[2025-08-21T19:39:23.524Z] 
[2025-08-21T19:39:23.524Z] HttpOptions
[2025-08-21T19:39:23.524Z] {
[2025-08-21T19:39:23.524Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:39:23.524Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:39:23.524Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:39:23.524Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:39:23.524Z]   "RoutePrefix": "api"
[2025-08-21T19:39:23.524Z] }
[2025-08-21T19:39:23.524Z] Initializing function HTTP routes
[2025-08-21T19:39:23.524Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:39:23.524Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:39:23.524Z] 
[2025-08-21T19:39:23.524Z] Host initialized (331ms)
[2025-08-21T19:39:23.524Z] Host started (331ms)
[2025-08-21T19:39:23.524Z] Job host started
[2025-08-21T19:39:23.524Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:39:23.524Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:39:23.558Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:39:23.559Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:39:23.559Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:39:23.559Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:39:23.603Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:39:23.603Z] 🔍 Current env vars:
[2025-08-21T19:39:23.603Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:39:23.603Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:39:23.603Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:39:23.603Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:39:23.603Z]   Deployment: gpt-4o
[2025-08-21T19:39:23.603Z]   API Version: 2024-08-01-preview
[2025-08-21T19:39:23.603Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:39:23.603Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:39:23.603Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:39:23.603Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:39:23.603Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:39:23.604Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:39:23.611Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.611Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.611Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.611Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.611Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.612Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.612Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:39:23.612Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'ea2b6166-02f3-4eed-9196-83dbec6e4594'.
[2025-08-21T19:39:23.612Z] Result: Failure
[2025-08-21T19:39:23.612Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:39:23.612Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:39:23.612Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:39:23.612Z]                    ^^^^^
[2025-08-21T19:39:23.612Z] 
[2025-08-21T19:39:23.612Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:39:23.612Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.612Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:39:23.612Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:39:23.612Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:39:23.612Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:39:23.612Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:39:23.612Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.612Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:39:23.612Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'dac4b007-63ec-4697-9cea-576ba6c9459c'.
[2025-08-21T19:39:23.612Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:39:23.612Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.612Z] Result: Failure
[2025-08-21T19:39:23.612Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:39:23.612Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:39:23.612Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:39:23.612Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:39:23.612Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:39:23.612Z]                    ^^^^^
[2025-08-21T19:39:23.612Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:39:23.612Z]     at Generator.next (<anonymous>).
[2025-08-21T19:39:23.612Z] 
[2025-08-21T19:39:23.612Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:39:23.612Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:39:23.612Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:39:23.612Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:39:23.612Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.612Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:39:23.612Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:39:23.612Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:39:23.612Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:39:23.612Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:39:23.612Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.612Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:39:23.612Z]     at Generator.next (<anonymous>).
[2025-08-21T19:39:23.612Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.612Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.612Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.612Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.613Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.613Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.613Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.613Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.613Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.613Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 received FunctionLoadRequest
[2025-08-21T19:39:23.613Z] Host restarted.
[2025-08-21T19:39:28.194Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:40:04.596Z] Restarting host.
[2025-08-21T19:40:04.609Z] Stopping JobHost
[2025-08-21T19:40:04.609Z] Job host stopped
[2025-08-21T19:40:04.613Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '260ee441-605c-4d4c-be1b-af4267354bf1'
[2025-08-21T19:40:04.722Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:40:04.722Z] Host configuration file read:
[2025-08-21T19:40:04.722Z] {
[2025-08-21T19:40:04.722Z]   "version": "2.0",
[2025-08-21T19:40:04.722Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:40:04.722Z]   "logging": {
[2025-08-21T19:40:04.722Z]     "applicationInsights": {
[2025-08-21T19:40:04.722Z]       "samplingSettings": {
[2025-08-21T19:40:04.722Z]         "isEnabled": true,
[2025-08-21T19:40:04.722Z]         "excludedTypes": "Request"
[2025-08-21T19:40:04.722Z]       }
[2025-08-21T19:40:04.722Z]     },
[2025-08-21T19:40:04.722Z]     "logLevel": {
[2025-08-21T19:40:04.722Z]       "default": "Information",
[2025-08-21T19:40:04.722Z]       "Host.Results": "Information",
[2025-08-21T19:40:04.722Z]       "Function": "Information"
[2025-08-21T19:40:04.722Z]     }
[2025-08-21T19:40:04.722Z]   },
[2025-08-21T19:40:04.722Z]   "extensionBundle": {
[2025-08-21T19:40:04.722Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:40:04.722Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:40:04.722Z]   },
[2025-08-21T19:40:04.722Z]   "watchDirectories": [
[2025-08-21T19:40:04.722Z]     "Shared"
[2025-08-21T19:40:04.722Z]   ]
[2025-08-21T19:40:04.722Z] }
[2025-08-21T19:40:04.724Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:40:04.725Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:40:04.725Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:40:04.725Z] Loading functions metadata
[2025-08-21T19:40:04.725Z] Worker indexing is enabled
[2025-08-21T19:40:04.725Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:40:04.725Z] Reading functions metadata (Worker)
[2025-08-21T19:40:04.725Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:40:04.749Z] Worker 5d40ec38-a423-4802-b1a5-9c3cc1918488 exited with code 0
[2025-08-21T19:40:04.948Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 connecting on 127.0.0.1:54302
[2025-08-21T19:40:04.974Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received WorkerInitRequest
[2025-08-21T19:40:04.977Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionsMetadataRequest
[2025-08-21T19:40:04.977Z] Reading functions metadata (Host)
[2025-08-21T19:40:05.486Z] 21 functions found (Host)
[2025-08-21T19:40:05.487Z] 21 functions loaded
[2025-08-21T19:40:05.487Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:40:05.488Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:40:05.488Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:40:05.488Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:40:05.704Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:40:05.704Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:40:05.705Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:40:05.705Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:40:05.757Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:40:05.757Z] Host configuration file read:
[2025-08-21T19:40:05.757Z] {
[2025-08-21T19:40:05.757Z]   "version": "2.0",
[2025-08-21T19:40:05.757Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:40:05.757Z]   "logging": {
[2025-08-21T19:40:05.757Z]     "applicationInsights": {
[2025-08-21T19:40:05.757Z]       "samplingSettings": {
[2025-08-21T19:40:05.757Z]         "isEnabled": true,
[2025-08-21T19:40:05.757Z]         "excludedTypes": "Request"
[2025-08-21T19:40:05.757Z]       }
[2025-08-21T19:40:05.757Z]     },
[2025-08-21T19:40:05.757Z]     "logLevel": {
[2025-08-21T19:40:05.757Z]       "default": "Information",
[2025-08-21T19:40:05.757Z]       "Host.Results": "Information",
[2025-08-21T19:40:05.757Z]       "Function": "Information"
[2025-08-21T19:40:05.757Z]     }
[2025-08-21T19:40:05.757Z]   },
[2025-08-21T19:40:05.757Z]   "extensionBundle": {
[2025-08-21T19:40:05.757Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:40:05.757Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:40:05.757Z]   },
[2025-08-21T19:40:05.757Z]   "watchDirectories": [
[2025-08-21T19:40:05.757Z]     "Shared"
[2025-08-21T19:40:05.757Z]   ]
[2025-08-21T19:40:05.757Z] }
[2025-08-21T19:40:05.877Z] Initializing Warmup Extension.
[2025-08-21T19:40:05.879Z] Initializing Host. OperationId: '260ee441-605c-4d4c-be1b-af4267354bf1'.
[2025-08-21T19:40:05.880Z] Host initialization: ConsecutiveErrors=0, StartupCount=15, OperationId=260ee441-605c-4d4c-be1b-af4267354bf1
[2025-08-21T19:40:05.886Z] LoggerFilterOptions
[2025-08-21T19:40:05.886Z] {
[2025-08-21T19:40:05.886Z]   "MinLevel": "None",
[2025-08-21T19:40:05.886Z]   "Rules": [
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": null,
[2025-08-21T19:40:05.886Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:40:05.886Z]       "LogLevel": "None",
[2025-08-21T19:40:05.886Z]       "Filter": null
[2025-08-21T19:40:05.886Z]     },
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:05.886Z]       "CategoryName": null,
[2025-08-21T19:40:05.886Z]       "LogLevel": "None",
[2025-08-21T19:40:05.886Z]       "Filter": null
[2025-08-21T19:40:05.886Z]     },
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:05.886Z]       "CategoryName": null,
[2025-08-21T19:40:05.886Z]       "LogLevel": null,
[2025-08-21T19:40:05.886Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:05.886Z]     },
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": null,
[2025-08-21T19:40:05.886Z]       "CategoryName": null,
[2025-08-21T19:40:05.886Z]       "LogLevel": null,
[2025-08-21T19:40:05.886Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:05.886Z]     },
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": null,
[2025-08-21T19:40:05.886Z]       "CategoryName": null,
[2025-08-21T19:40:05.886Z]       "LogLevel": null,
[2025-08-21T19:40:05.886Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:05.886Z]     },
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": null,
[2025-08-21T19:40:05.886Z]       "CategoryName": "Host.Results",
[2025-08-21T19:40:05.886Z]       "LogLevel": "Information",
[2025-08-21T19:40:05.886Z]       "Filter": null
[2025-08-21T19:40:05.886Z]     },
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": null,
[2025-08-21T19:40:05.886Z]       "CategoryName": "Function",
[2025-08-21T19:40:05.886Z]       "LogLevel": "Information",
[2025-08-21T19:40:05.886Z]       "Filter": null
[2025-08-21T19:40:05.886Z]     },
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": null,
[2025-08-21T19:40:05.886Z]       "CategoryName": null,
[2025-08-21T19:40:05.886Z]       "LogLevel": "Information",
[2025-08-21T19:40:05.886Z]       "Filter": null
[2025-08-21T19:40:05.886Z]     },
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:05.886Z]       "CategoryName": null,
[2025-08-21T19:40:05.886Z]       "LogLevel": "None",
[2025-08-21T19:40:05.886Z]       "Filter": null
[2025-08-21T19:40:05.886Z]     },
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:05.886Z]       "CategoryName": null,
[2025-08-21T19:40:05.886Z]       "LogLevel": null,
[2025-08-21T19:40:05.886Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:05.886Z]     },
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:05.886Z]       "CategoryName": null,
[2025-08-21T19:40:05.886Z]       "LogLevel": null,
[2025-08-21T19:40:05.886Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:05.886Z]     }
[2025-08-21T19:40:05.886Z]   ]
[2025-08-21T19:40:05.886Z] }
[2025-08-21T19:40:05.886Z] LoggerFilterOptions
[2025-08-21T19:40:05.886Z] {
[2025-08-21T19:40:05.886Z]   "MinLevel": "None",
[2025-08-21T19:40:05.886Z]   "Rules": [
[2025-08-21T19:40:05.886Z]     {
[2025-08-21T19:40:05.886Z]       "ProviderName": null,
[2025-08-21T19:40:05.887Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:40:05.887Z]       "LogLevel": "None",
[2025-08-21T19:40:05.887Z]       "Filter": null
[2025-08-21T19:40:05.887Z]     },
[2025-08-21T19:40:05.887Z]     {
[2025-08-21T19:40:05.887Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:05.887Z]       "CategoryName": null,
[2025-08-21T19:40:05.887Z]       "LogLevel": "None",
[2025-08-21T19:40:05.887Z]       "Filter": null
[2025-08-21T19:40:05.887Z]     },
[2025-08-21T19:40:05.887Z]     {
[2025-08-21T19:40:05.887Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:05.887Z]       "CategoryName": null,
[2025-08-21T19:40:05.887Z]       "LogLevel": null,
[2025-08-21T19:40:05.887Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:05.887Z]     },
[2025-08-21T19:40:05.887Z]     {
[2025-08-21T19:40:05.887Z]       "ProviderName": null,
[2025-08-21T19:40:05.887Z]       "CategoryName": null,
[2025-08-21T19:40:05.887Z]       "LogLevel": null,
[2025-08-21T19:40:05.887Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:05.887Z]     },
[2025-08-21T19:40:05.887Z]     {
[2025-08-21T19:40:05.887Z]       "ProviderName": null,
[2025-08-21T19:40:05.887Z]       "CategoryName": null,
[2025-08-21T19:40:05.887Z]       "LogLevel": null,
[2025-08-21T19:40:05.887Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:05.887Z]     },
[2025-08-21T19:40:05.887Z]     {
[2025-08-21T19:40:05.887Z]       "ProviderName": null,
[2025-08-21T19:40:05.887Z]       "CategoryName": "Host.Results",
[2025-08-21T19:40:05.887Z]       "LogLevel": "Information",
[2025-08-21T19:40:05.887Z]       "Filter": null
[2025-08-21T19:40:05.887Z]     },
[2025-08-21T19:40:05.887Z]     {
[2025-08-21T19:40:05.887Z]       "ProviderName": null,
[2025-08-21T19:40:05.887Z]       "CategoryName": "Function",
[2025-08-21T19:40:05.887Z]       "LogLevel": "Information",
[2025-08-21T19:40:05.887Z]       "Filter": null
[2025-08-21T19:40:05.887Z]     },
[2025-08-21T19:40:05.887Z]     {
[2025-08-21T19:40:05.887Z]       "ProviderName": null,
[2025-08-21T19:40:05.887Z]       "CategoryName": null,
[2025-08-21T19:40:05.887Z]       "LogLevel": "Information",
[2025-08-21T19:40:05.887Z]       "Filter": null
[2025-08-21T19:40:05.887Z]     },
[2025-08-21T19:40:05.887Z]     {
[2025-08-21T19:40:05.887Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:05.887Z]       "CategoryName": null,
[2025-08-21T19:40:05.887Z]       "LogLevel": "None",
[2025-08-21T19:40:05.887Z]       "Filter": null
[2025-08-21T19:40:05.887Z]     },
[2025-08-21T19:40:05.887Z]     {
[2025-08-21T19:40:05.887Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:05.887Z]       "CategoryName": null,
[2025-08-21T19:40:05.887Z]       "LogLevel": null,
[2025-08-21T19:40:05.887Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:05.887Z]     },
[2025-08-21T19:40:05.887Z]     {
[2025-08-21T19:40:05.887Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:05.887Z]       "CategoryName": null,
[2025-08-21T19:40:05.887Z]       "LogLevel": null,
[2025-08-21T19:40:05.887Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:05.887Z]     }
[2025-08-21T19:40:05.887Z]   ]
[2025-08-21T19:40:05.887Z] }
[2025-08-21T19:40:05.887Z] FunctionResultAggregatorOptions
[2025-08-21T19:40:05.887Z] {
[2025-08-21T19:40:05.887Z]   "BatchSize": 1000,
[2025-08-21T19:40:05.887Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:40:05.887Z]   "IsEnabled": true
[2025-08-21T19:40:05.887Z] }
[2025-08-21T19:40:05.887Z] ConcurrencyOptions
[2025-08-21T19:40:05.887Z] {
[2025-08-21T19:40:05.887Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:40:05.887Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:40:05.887Z]   "CPUThreshold": 0.8,
[2025-08-21T19:40:05.887Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:40:05.887Z] }
[2025-08-21T19:40:05.887Z] SingletonOptions
[2025-08-21T19:40:05.887Z] {
[2025-08-21T19:40:05.887Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:40:05.887Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:40:05.887Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:40:05.887Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:40:05.887Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:40:05.887Z] }
[2025-08-21T19:40:05.887Z] ScaleOptions
[2025-08-21T19:40:05.887Z] {
[2025-08-21T19:40:05.887Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:40:05.887Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:40:05.887Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:40:05.887Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:40:05.887Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:40:05.887Z] }
[2025-08-21T19:40:05.887Z] Starting JobHost
[2025-08-21T19:40:05.887Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=807f3326-94c3-4f4c-9c7d-8afac8e29324, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:40:05.888Z] Loading functions metadata
[2025-08-21T19:40:05.888Z] Worker indexing is enabled
[2025-08-21T19:40:05.888Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:40:05.888Z] Reading functions metadata (Worker)
[2025-08-21T19:40:05.888Z] Reading functions metadata (Host)
[2025-08-21T19:40:06.148Z] 21 functions found (Host)
[2025-08-21T19:40:06.149Z] Reading functions metadata (Custom)
[2025-08-21T19:40:06.150Z] 0 functions found (Custom)
[2025-08-21T19:40:06.150Z] 21 functions loaded
[2025-08-21T19:40:06.154Z] Generating 21 job function(s)
[2025-08-21T19:40:06.155Z] Worker process started and initialized.
[2025-08-21T19:40:06.208Z] Found the following functions:
[2025-08-21T19:40:06.208Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:40:06.208Z] Host.Functions.analytics
[2025-08-21T19:40:06.208Z] Host.Functions.analyzeUIImage
[2025-08-21T19:40:06.208Z] Host.Functions.atlasComponents
[2025-08-21T19:40:06.208Z] Host.Functions.fast-suggestions
[2025-08-21T19:40:06.208Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:40:06.208Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:40:06.208Z] Host.Functions.generateSuggestions
[2025-08-21T19:40:06.209Z] Host.Functions.generateWireframe
[2025-08-21T19:40:06.209Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:40:06.209Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:40:06.209Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:40:06.209Z] Host.Functions.get-template
[2025-08-21T19:40:06.209Z] Host.Functions.githubAuthCallback
[2025-08-21T19:40:06.209Z] Host.Functions.githubAuthStart
[2025-08-21T19:40:06.209Z] Host.Functions.health
[2025-08-21T19:40:06.209Z] Host.Functions.healthCheck
[2025-08-21T19:40:06.209Z] Host.Functions.openai-health
[2025-08-21T19:40:06.209Z] Host.Functions.performance-stats
[2025-08-21T19:40:06.209Z] Host.Functions.testFunction
[2025-08-21T19:40:06.209Z] Host.Functions.testSimple
[2025-08-21T19:40:06.209Z] 
[2025-08-21T19:40:06.209Z] HttpOptions
[2025-08-21T19:40:06.209Z] {
[2025-08-21T19:40:06.209Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:40:06.209Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:40:06.209Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:40:06.209Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:40:06.209Z]   "RoutePrefix": "api"
[2025-08-21T19:40:06.209Z] }
[2025-08-21T19:40:06.210Z] Initializing function HTTP routes
[2025-08-21T19:40:06.210Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:40:06.210Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:40:06.210Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:40:06.210Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:40:06.210Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:40:06.210Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:40:06.211Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:40:06.211Z] 
[2025-08-21T19:40:06.211Z] Host initialized (323ms)
[2025-08-21T19:40:06.211Z] Host started (323ms)
[2025-08-21T19:40:06.211Z] Job host started
[2025-08-21T19:40:06.211Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:40:06.211Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:40:06.352Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:40:06.353Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:40:06.353Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:40:06.353Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:40:06.579Z] Host restarted.
[2025-08-21T19:40:06.772Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:40:06.774Z] 🔍 Current env vars:
[2025-08-21T19:40:06.775Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:40:06.775Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:40:06.775Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:40:06.775Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:40:06.775Z]   Deployment: gpt-4o
[2025-08-21T19:40:06.775Z]   API Version: 2024-08-01-preview
[2025-08-21T19:40:06.775Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:40:06.775Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:40:06.775Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:40:06.775Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:40:06.775Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:40:06.781Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:40:06.809Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.809Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.809Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.809Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.809Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.810Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.810Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:06.810Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.810Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:06.810Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.810Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.811Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '93977a00-1d8e-4305-bc31-5dceb5294100'.
[2025-08-21T19:40:06.811Z] Result: Failure
[2025-08-21T19:40:06.811Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:06.811Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:40:06.811Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:40:06.811Z]                    ^^^^^
[2025-08-21T19:40:06.811Z] 
[2025-08-21T19:40:06.811Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:40:06.811Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:40:06.811Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:40:06.811Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:40:06.811Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:40:06.811Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:40:06.811Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:40:06.811Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:40:06.811Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:40:06.811Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:40:06.811Z]     at Generator.next (<anonymous>).
[2025-08-21T19:40:06.811Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '44665a20-d03d-4f70-97ee-7d76a3ab7eb0'.
[2025-08-21T19:40:06.811Z] Result: Failure
[2025-08-21T19:40:06.811Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:06.811Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:40:06.811Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:40:06.811Z]                    ^^^^^
[2025-08-21T19:40:06.811Z] 
[2025-08-21T19:40:06.811Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:40:06.811Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:40:06.811Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.811Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:40:06.811Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:40:06.811Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:40:06.811Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:40:06.811Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:40:06.811Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:40:06.811Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:40:06.811Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:40:06.811Z]     at Generator.next (<anonymous>).
[2025-08-21T19:40:06.812Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.812Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.812Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.812Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.812Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.812Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.812Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.812Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.812Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.813Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:06.813Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 received FunctionLoadRequest
[2025-08-21T19:40:10.888Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:40:47.330Z] Restarting host.
[2025-08-21T19:40:47.337Z] Stopping JobHost
[2025-08-21T19:40:47.337Z] Job host stopped
[2025-08-21T19:40:47.351Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'b8f09257-36b2-4b99-98c2-2cca4bce9f36'
[2025-08-21T19:40:47.435Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:40:47.435Z] Host configuration file read:
[2025-08-21T19:40:47.435Z] {
[2025-08-21T19:40:47.435Z]   "version": "2.0",
[2025-08-21T19:40:47.435Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:40:47.435Z]   "logging": {
[2025-08-21T19:40:47.435Z]     "applicationInsights": {
[2025-08-21T19:40:47.435Z]       "samplingSettings": {
[2025-08-21T19:40:47.435Z]         "isEnabled": true,
[2025-08-21T19:40:47.435Z]         "excludedTypes": "Request"
[2025-08-21T19:40:47.436Z]       }
[2025-08-21T19:40:47.436Z]     },
[2025-08-21T19:40:47.436Z]     "logLevel": {
[2025-08-21T19:40:47.436Z]       "default": "Information",
[2025-08-21T19:40:47.436Z]       "Host.Results": "Information",
[2025-08-21T19:40:47.436Z]       "Function": "Information"
[2025-08-21T19:40:47.436Z]     }
[2025-08-21T19:40:47.436Z]   },
[2025-08-21T19:40:47.436Z]   "extensionBundle": {
[2025-08-21T19:40:47.436Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:40:47.436Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:40:47.436Z]   },
[2025-08-21T19:40:47.436Z]   "watchDirectories": [
[2025-08-21T19:40:47.436Z]     "Shared"
[2025-08-21T19:40:47.436Z]   ]
[2025-08-21T19:40:47.436Z] }
[2025-08-21T19:40:47.436Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:40:47.437Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:40:47.437Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:40:47.437Z] Loading functions metadata
[2025-08-21T19:40:47.437Z] Worker indexing is enabled
[2025-08-21T19:40:47.437Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:40:47.437Z] Reading functions metadata (Worker)
[2025-08-21T19:40:47.437Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:40:47.442Z] Worker 34629fb2-5740-4696-929a-4816949a08e4 exited with code 0
[2025-08-21T19:40:47.635Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed connecting on 127.0.0.1:54302
[2025-08-21T19:40:47.661Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received WorkerInitRequest
[2025-08-21T19:40:47.664Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionsMetadataRequest
[2025-08-21T19:40:47.664Z] Reading functions metadata (Host)
[2025-08-21T19:40:47.881Z] 21 functions found (Host)
[2025-08-21T19:40:47.881Z] 21 functions loaded
[2025-08-21T19:40:47.881Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:40:47.881Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:40:47.881Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:40:47.881Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:40:48.014Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:40:48.014Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:40:48.015Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:40:48.015Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:40:48.043Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:40:48.043Z] Host configuration file read:
[2025-08-21T19:40:48.043Z] {
[2025-08-21T19:40:48.043Z]   "version": "2.0",
[2025-08-21T19:40:48.043Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:40:48.043Z]   "logging": {
[2025-08-21T19:40:48.043Z]     "applicationInsights": {
[2025-08-21T19:40:48.043Z]       "samplingSettings": {
[2025-08-21T19:40:48.043Z]         "isEnabled": true,
[2025-08-21T19:40:48.043Z]         "excludedTypes": "Request"
[2025-08-21T19:40:48.043Z]       }
[2025-08-21T19:40:48.043Z]     },
[2025-08-21T19:40:48.043Z]     "logLevel": {
[2025-08-21T19:40:48.043Z]       "default": "Information",
[2025-08-21T19:40:48.043Z]       "Host.Results": "Information",
[2025-08-21T19:40:48.043Z]       "Function": "Information"
[2025-08-21T19:40:48.043Z]     }
[2025-08-21T19:40:48.043Z]   },
[2025-08-21T19:40:48.043Z]   "extensionBundle": {
[2025-08-21T19:40:48.043Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:40:48.043Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:40:48.043Z]   },
[2025-08-21T19:40:48.043Z]   "watchDirectories": [
[2025-08-21T19:40:48.043Z]     "Shared"
[2025-08-21T19:40:48.043Z]   ]
[2025-08-21T19:40:48.043Z] }
[2025-08-21T19:40:48.074Z] Initializing Warmup Extension.
[2025-08-21T19:40:48.076Z] Initializing Host. OperationId: 'b8f09257-36b2-4b99-98c2-2cca4bce9f36'.
[2025-08-21T19:40:48.076Z] Host initialization: ConsecutiveErrors=0, StartupCount=16, OperationId=b8f09257-36b2-4b99-98c2-2cca4bce9f36
[2025-08-21T19:40:48.077Z] LoggerFilterOptions
[2025-08-21T19:40:48.077Z] {
[2025-08-21T19:40:48.077Z]   "MinLevel": "None",
[2025-08-21T19:40:48.077Z]   "Rules": [
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": null,
[2025-08-21T19:40:48.077Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:40:48.077Z]       "LogLevel": "None",
[2025-08-21T19:40:48.077Z]       "Filter": null
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": "None",
[2025-08-21T19:40:48.077Z]       "Filter": null
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": null,
[2025-08-21T19:40:48.077Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": null,
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": null,
[2025-08-21T19:40:48.077Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": null,
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": null,
[2025-08-21T19:40:48.077Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": null,
[2025-08-21T19:40:48.077Z]       "CategoryName": "Host.Results",
[2025-08-21T19:40:48.077Z]       "LogLevel": "Information",
[2025-08-21T19:40:48.077Z]       "Filter": null
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": null,
[2025-08-21T19:40:48.077Z]       "CategoryName": "Function",
[2025-08-21T19:40:48.077Z]       "LogLevel": "Information",
[2025-08-21T19:40:48.077Z]       "Filter": null
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": null,
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": "Information",
[2025-08-21T19:40:48.077Z]       "Filter": null
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": "None",
[2025-08-21T19:40:48.077Z]       "Filter": null
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": null,
[2025-08-21T19:40:48.077Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": null,
[2025-08-21T19:40:48.077Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:48.077Z]     }
[2025-08-21T19:40:48.077Z]   ]
[2025-08-21T19:40:48.077Z] }
[2025-08-21T19:40:48.077Z] LoggerFilterOptions
[2025-08-21T19:40:48.077Z] {
[2025-08-21T19:40:48.077Z]   "MinLevel": "None",
[2025-08-21T19:40:48.077Z]   "Rules": [
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": null,
[2025-08-21T19:40:48.077Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:40:48.077Z]       "LogLevel": "None",
[2025-08-21T19:40:48.077Z]       "Filter": null
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": "None",
[2025-08-21T19:40:48.077Z]       "Filter": null
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": null,
[2025-08-21T19:40:48.077Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.077Z]       "ProviderName": null,
[2025-08-21T19:40:48.077Z]       "CategoryName": null,
[2025-08-21T19:40:48.077Z]       "LogLevel": null,
[2025-08-21T19:40:48.077Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:48.077Z]     },
[2025-08-21T19:40:48.077Z]     {
[2025-08-21T19:40:48.078Z]       "ProviderName": null,
[2025-08-21T19:40:48.078Z]       "CategoryName": null,
[2025-08-21T19:40:48.078Z]       "LogLevel": null,
[2025-08-21T19:40:48.078Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:48.078Z]     },
[2025-08-21T19:40:48.078Z]     {
[2025-08-21T19:40:48.078Z]       "ProviderName": null,
[2025-08-21T19:40:48.078Z]       "CategoryName": "Host.Results",
[2025-08-21T19:40:48.078Z]       "LogLevel": "Information",
[2025-08-21T19:40:48.078Z]       "Filter": null
[2025-08-21T19:40:48.078Z]     },
[2025-08-21T19:40:48.078Z]     {
[2025-08-21T19:40:48.078Z]       "ProviderName": null,
[2025-08-21T19:40:48.078Z]       "CategoryName": "Function",
[2025-08-21T19:40:48.078Z]       "LogLevel": "Information",
[2025-08-21T19:40:48.078Z]       "Filter": null
[2025-08-21T19:40:48.078Z]     },
[2025-08-21T19:40:48.078Z]     {
[2025-08-21T19:40:48.078Z]       "ProviderName": null,
[2025-08-21T19:40:48.078Z]       "CategoryName": null,
[2025-08-21T19:40:48.078Z]       "LogLevel": "Information",
[2025-08-21T19:40:48.078Z]       "Filter": null
[2025-08-21T19:40:48.078Z]     },
[2025-08-21T19:40:48.078Z]     {
[2025-08-21T19:40:48.078Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:48.078Z]       "CategoryName": null,
[2025-08-21T19:40:48.078Z]       "LogLevel": "None",
[2025-08-21T19:40:48.078Z]       "Filter": null
[2025-08-21T19:40:48.078Z]     },
[2025-08-21T19:40:48.078Z]     {
[2025-08-21T19:40:48.078Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:48.078Z]       "CategoryName": null,
[2025-08-21T19:40:48.078Z]       "LogLevel": null,
[2025-08-21T19:40:48.078Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:48.078Z]     },
[2025-08-21T19:40:48.078Z]     {
[2025-08-21T19:40:48.078Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:48.078Z]       "CategoryName": null,
[2025-08-21T19:40:48.078Z]       "LogLevel": null,
[2025-08-21T19:40:48.078Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:48.078Z]     }
[2025-08-21T19:40:48.078Z]   ]
[2025-08-21T19:40:48.078Z] }
[2025-08-21T19:40:48.078Z] FunctionResultAggregatorOptions
[2025-08-21T19:40:48.078Z] {
[2025-08-21T19:40:48.078Z]   "BatchSize": 1000,
[2025-08-21T19:40:48.078Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:40:48.078Z]   "IsEnabled": true
[2025-08-21T19:40:48.078Z] }
[2025-08-21T19:40:48.078Z] ConcurrencyOptions
[2025-08-21T19:40:48.078Z] {
[2025-08-21T19:40:48.078Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:40:48.078Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:40:48.078Z]   "CPUThreshold": 0.8,
[2025-08-21T19:40:48.078Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:40:48.078Z] }
[2025-08-21T19:40:48.078Z] SingletonOptions
[2025-08-21T19:40:48.078Z] {
[2025-08-21T19:40:48.078Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:40:48.078Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:40:48.078Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:40:48.078Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:40:48.078Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:40:48.078Z] }
[2025-08-21T19:40:48.078Z] ScaleOptions
[2025-08-21T19:40:48.078Z] {
[2025-08-21T19:40:48.078Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:40:48.078Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:40:48.078Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:40:48.078Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:40:48.078Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:40:48.078Z] }
[2025-08-21T19:40:48.078Z] Starting JobHost
[2025-08-21T19:40:48.078Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=a4ce5712-aa15-42e5-9182-d07393b5ff91, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:40:48.078Z] Loading functions metadata
[2025-08-21T19:40:48.078Z] Worker indexing is enabled
[2025-08-21T19:40:48.078Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:40:48.078Z] Reading functions metadata (Worker)
[2025-08-21T19:40:48.078Z] Reading functions metadata (Host)
[2025-08-21T19:40:48.287Z] 21 functions found (Host)
[2025-08-21T19:40:48.287Z] Reading functions metadata (Custom)
[2025-08-21T19:40:48.287Z] 0 functions found (Custom)
[2025-08-21T19:40:48.287Z] 21 functions loaded
[2025-08-21T19:40:48.289Z] Generating 21 job function(s)
[2025-08-21T19:40:48.289Z] Worker process started and initialized.
[2025-08-21T19:40:48.297Z] Found the following functions:
[2025-08-21T19:40:48.297Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:40:48.297Z] Host.Functions.analytics
[2025-08-21T19:40:48.297Z] Host.Functions.analyzeUIImage
[2025-08-21T19:40:48.297Z] Host.Functions.atlasComponents
[2025-08-21T19:40:48.297Z] Host.Functions.fast-suggestions
[2025-08-21T19:40:48.297Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:40:48.297Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:40:48.297Z] Host.Functions.generateSuggestions
[2025-08-21T19:40:48.297Z] Host.Functions.generateWireframe
[2025-08-21T19:40:48.297Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:40:48.297Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:40:48.297Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:40:48.297Z] Host.Functions.get-template
[2025-08-21T19:40:48.297Z] Host.Functions.githubAuthCallback
[2025-08-21T19:40:48.297Z] Host.Functions.githubAuthStart
[2025-08-21T19:40:48.297Z] Host.Functions.health
[2025-08-21T19:40:48.297Z] Host.Functions.healthCheck
[2025-08-21T19:40:48.297Z] Host.Functions.openai-health
[2025-08-21T19:40:48.297Z] Host.Functions.performance-stats
[2025-08-21T19:40:48.297Z] Host.Functions.testFunction
[2025-08-21T19:40:48.297Z] Host.Functions.testSimple
[2025-08-21T19:40:48.297Z] 
[2025-08-21T19:40:48.297Z] HttpOptions
[2025-08-21T19:40:48.297Z] {
[2025-08-21T19:40:48.297Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:40:48.297Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:40:48.297Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:40:48.297Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:40:48.297Z]   "RoutePrefix": "api"
[2025-08-21T19:40:48.297Z] }
[2025-08-21T19:40:48.297Z] Initializing function HTTP routes
[2025-08-21T19:40:48.297Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:40:48.297Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:40:48.297Z] 
[2025-08-21T19:40:48.297Z] Host initialized (219ms)
[2025-08-21T19:40:48.297Z] Host started (219ms)
[2025-08-21T19:40:48.297Z] Job host started
[2025-08-21T19:40:48.297Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:40:48.297Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:40:48.339Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:40:48.340Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:40:48.340Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:40:48.340Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:40:48.384Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:40:48.384Z] 🔍 Current env vars:
[2025-08-21T19:40:48.384Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:40:48.384Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:40:48.384Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:40:48.384Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:40:48.384Z]   Deployment: gpt-4o
[2025-08-21T19:40:48.384Z]   API Version: 2024-08-01-preview
[2025-08-21T19:40:48.384Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:40:48.384Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:40:48.384Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:40:48.384Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:40:48.384Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:40:48.385Z] Host restarted.
[2025-08-21T19:40:48.386Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:40:48.391Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.391Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.391Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.391Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.391Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.392Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.392Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:48.392Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.392Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'ea425386-0283-4ac4-bd5c-02c3488dcc9f'.
[2025-08-21T19:40:48.392Z] Result: Failure
[2025-08-21T19:40:48.392Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:48.392Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:40:48.392Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:40:48.392Z]                    ^^^^^
[2025-08-21T19:40:48.392Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:48.392Z] 
[2025-08-21T19:40:48.392Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.392Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'f6f6d3db-77a8-47b9-9493-96a1aafeb875'.
[2025-08-21T19:40:48.392Z] Result: Failure
[2025-08-21T19:40:48.392Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:40:48.392Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:40:48.392Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:48.392Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:40:48.392Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:40:48.392Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:40:48.392Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:40:48.392Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:40:48.392Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:40:48.392Z]                    ^^^^^
[2025-08-21T19:40:48.392Z] 
[2025-08-21T19:40:48.392Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:40:48.392Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:40:48.392Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:40:48.392Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.392Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:40:48.392Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:40:48.392Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951[2025-08-21T19:40:48.392Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest

[2025-08-21T19:40:48.392Z]     at Generator.next (<anonymous>).
[2025-08-21T19:40:48.392Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:40:48.392Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:40:48.392Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:40:48.392Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:40:48.392Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:40:48.392Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:40:48.392Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:40:48.392Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:40:48.392Z]     at Generator.next (<anonymous>).
[2025-08-21T19:40:48.392Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.392Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.392Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.392Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.392Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.393Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.393Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.393Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.393Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.393Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:48.393Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed received FunctionLoadRequest
[2025-08-21T19:40:53.079Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:40:54.669Z] Restarting host.
[2025-08-21T19:40:54.676Z] Stopping JobHost
[2025-08-21T19:40:54.677Z] Job host stopped
[2025-08-21T19:40:54.680Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'b4f72036-f58a-42cf-9de1-7948051f58a7'
[2025-08-21T19:40:54.762Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:40:54.762Z] Host configuration file read:
[2025-08-21T19:40:54.762Z] {
[2025-08-21T19:40:54.762Z]   "version": "2.0",
[2025-08-21T19:40:54.762Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:40:54.762Z]   "logging": {
[2025-08-21T19:40:54.762Z]     "applicationInsights": {
[2025-08-21T19:40:54.762Z]       "samplingSettings": {
[2025-08-21T19:40:54.762Z]         "isEnabled": true,
[2025-08-21T19:40:54.762Z]         "excludedTypes": "Request"
[2025-08-21T19:40:54.762Z]       }
[2025-08-21T19:40:54.762Z]     },
[2025-08-21T19:40:54.762Z]     "logLevel": {
[2025-08-21T19:40:54.762Z]       "default": "Information",
[2025-08-21T19:40:54.762Z]       "Host.Results": "Information",
[2025-08-21T19:40:54.762Z]       "Function": "Information"
[2025-08-21T19:40:54.762Z]     }
[2025-08-21T19:40:54.762Z]   },
[2025-08-21T19:40:54.762Z]   "extensionBundle": {
[2025-08-21T19:40:54.762Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:40:54.762Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:40:54.762Z]   },
[2025-08-21T19:40:54.762Z]   "watchDirectories": [
[2025-08-21T19:40:54.762Z]     "Shared"
[2025-08-21T19:40:54.762Z]   ]
[2025-08-21T19:40:54.762Z] }
[2025-08-21T19:40:54.764Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:40:54.764Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:40:54.764Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:40:54.765Z] Loading functions metadata
[2025-08-21T19:40:54.765Z] Worker indexing is enabled
[2025-08-21T19:40:54.765Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:40:54.765Z] Reading functions metadata (Worker)
[2025-08-21T19:40:54.765Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:40:54.771Z] Worker b3a8fc79-0ca2-47be-bf69-6c0d4f1a1aed exited with code 0
[2025-08-21T19:40:54.905Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 connecting on 127.0.0.1:54302
[2025-08-21T19:40:54.928Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received WorkerInitRequest
[2025-08-21T19:40:54.931Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionsMetadataRequest
[2025-08-21T19:40:54.931Z] Reading functions metadata (Host)
[2025-08-21T19:40:55.195Z] 21 functions found (Host)
[2025-08-21T19:40:55.195Z] 21 functions loaded
[2025-08-21T19:40:55.195Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:40:55.195Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:40:55.195Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:40:55.195Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:40:55.395Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:40:55.395Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:40:55.395Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:40:55.395Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:40:55.447Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:40:55.447Z] Host configuration file read:
[2025-08-21T19:40:55.447Z] {
[2025-08-21T19:40:55.447Z]   "version": "2.0",
[2025-08-21T19:40:55.447Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:40:55.447Z]   "logging": {
[2025-08-21T19:40:55.447Z]     "applicationInsights": {
[2025-08-21T19:40:55.447Z]       "samplingSettings": {
[2025-08-21T19:40:55.447Z]         "isEnabled": true,
[2025-08-21T19:40:55.447Z]         "excludedTypes": "Request"
[2025-08-21T19:40:55.447Z]       }
[2025-08-21T19:40:55.447Z]     },
[2025-08-21T19:40:55.447Z]     "logLevel": {
[2025-08-21T19:40:55.447Z]       "default": "Information",
[2025-08-21T19:40:55.447Z]       "Host.Results": "Information",
[2025-08-21T19:40:55.447Z]       "Function": "Information"
[2025-08-21T19:40:55.447Z]     }
[2025-08-21T19:40:55.447Z]   },
[2025-08-21T19:40:55.447Z]   "extensionBundle": {
[2025-08-21T19:40:55.447Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:40:55.447Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:40:55.447Z]   },
[2025-08-21T19:40:55.447Z]   "watchDirectories": [
[2025-08-21T19:40:55.447Z]     "Shared"
[2025-08-21T19:40:55.447Z]   ]
[2025-08-21T19:40:55.447Z] }
[2025-08-21T19:40:55.487Z] Initializing Warmup Extension.
[2025-08-21T19:40:55.488Z] Initializing Host. OperationId: 'b4f72036-f58a-42cf-9de1-7948051f58a7'.
[2025-08-21T19:40:55.488Z] Host initialization: ConsecutiveErrors=0, StartupCount=17, OperationId=b4f72036-f58a-42cf-9de1-7948051f58a7
[2025-08-21T19:40:55.491Z] LoggerFilterOptions
[2025-08-21T19:40:55.491Z] {
[2025-08-21T19:40:55.491Z]   "MinLevel": "None",
[2025-08-21T19:40:55.491Z]   "Rules": [
[2025-08-21T19:40:55.491Z]     {
[2025-08-21T19:40:55.491Z]       "ProviderName": null,
[2025-08-21T19:40:55.491Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:40:55.491Z]       "LogLevel": "None",
[2025-08-21T19:40:55.491Z]       "Filter": null
[2025-08-21T19:40:55.491Z]     },
[2025-08-21T19:40:55.491Z]     {
[2025-08-21T19:40:55.491Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:55.491Z]       "CategoryName": null,
[2025-08-21T19:40:55.491Z]       "LogLevel": "None",
[2025-08-21T19:40:55.491Z]       "Filter": null
[2025-08-21T19:40:55.491Z]     },
[2025-08-21T19:40:55.491Z]     {
[2025-08-21T19:40:55.491Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:55.491Z]       "CategoryName": null,
[2025-08-21T19:40:55.491Z]       "LogLevel": null,
[2025-08-21T19:40:55.491Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": null,
[2025-08-21T19:40:55.492Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": null,
[2025-08-21T19:40:55.492Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": "Host.Results",
[2025-08-21T19:40:55.492Z]       "LogLevel": "Information",
[2025-08-21T19:40:55.492Z]       "Filter": null
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": "Function",
[2025-08-21T19:40:55.492Z]       "LogLevel": "Information",
[2025-08-21T19:40:55.492Z]       "Filter": null
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": "Information",
[2025-08-21T19:40:55.492Z]       "Filter": null
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": "None",
[2025-08-21T19:40:55.492Z]       "Filter": null
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": null,
[2025-08-21T19:40:55.492Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": null,
[2025-08-21T19:40:55.492Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:55.492Z]     }
[2025-08-21T19:40:55.492Z]   ]
[2025-08-21T19:40:55.492Z] }
[2025-08-21T19:40:55.492Z] LoggerFilterOptions
[2025-08-21T19:40:55.492Z] {
[2025-08-21T19:40:55.492Z]   "MinLevel": "None",
[2025-08-21T19:40:55.492Z]   "Rules": [
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:40:55.492Z]       "LogLevel": "None",
[2025-08-21T19:40:55.492Z]       "Filter": null
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": "None",
[2025-08-21T19:40:55.492Z]       "Filter": null
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": null,
[2025-08-21T19:40:55.492Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": null,
[2025-08-21T19:40:55.492Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": null,
[2025-08-21T19:40:55.492Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": "Host.Results",
[2025-08-21T19:40:55.492Z]       "LogLevel": "Information",
[2025-08-21T19:40:55.492Z]       "Filter": null
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": "Function",
[2025-08-21T19:40:55.492Z]       "LogLevel": "Information",
[2025-08-21T19:40:55.492Z]       "Filter": null
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": null,
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": "Information",
[2025-08-21T19:40:55.492Z]       "Filter": null
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": "None",
[2025-08-21T19:40:55.492Z]       "Filter": null
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": null,
[2025-08-21T19:40:55.492Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:55.492Z]     },
[2025-08-21T19:40:55.492Z]     {
[2025-08-21T19:40:55.492Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:40:55.492Z]       "CategoryName": null,
[2025-08-21T19:40:55.492Z]       "LogLevel": null,
[2025-08-21T19:40:55.492Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:40:55.492Z]     }
[2025-08-21T19:40:55.492Z]   ]
[2025-08-21T19:40:55.492Z] }
[2025-08-21T19:40:55.492Z] FunctionResultAggregatorOptions
[2025-08-21T19:40:55.492Z] {
[2025-08-21T19:40:55.492Z]   "BatchSize": 1000,
[2025-08-21T19:40:55.492Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:40:55.492Z]   "IsEnabled": true
[2025-08-21T19:40:55.492Z] }
[2025-08-21T19:40:55.492Z] ConcurrencyOptions
[2025-08-21T19:40:55.492Z] {
[2025-08-21T19:40:55.492Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:40:55.492Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:40:55.492Z]   "CPUThreshold": 0.8,
[2025-08-21T19:40:55.492Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:40:55.492Z] }
[2025-08-21T19:40:55.492Z] SingletonOptions
[2025-08-21T19:40:55.493Z] {
[2025-08-21T19:40:55.493Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:40:55.493Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:40:55.493Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:40:55.493Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:40:55.493Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:40:55.493Z] }
[2025-08-21T19:40:55.493Z] ScaleOptions
[2025-08-21T19:40:55.493Z] {
[2025-08-21T19:40:55.493Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:40:55.493Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:40:55.493Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:40:55.493Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:40:55.493Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:40:55.493Z] }
[2025-08-21T19:40:55.493Z] Starting JobHost
[2025-08-21T19:40:55.493Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=8f735a0e-3264-4173-9def-70e98428f1d7, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:40:55.493Z] Loading functions metadata
[2025-08-21T19:40:55.493Z] Worker indexing is enabled
[2025-08-21T19:40:55.493Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:40:55.493Z] Reading functions metadata (Worker)
[2025-08-21T19:40:55.493Z] Reading functions metadata (Host)
[2025-08-21T19:40:55.708Z] 21 functions found (Host)
[2025-08-21T19:40:55.709Z] Reading functions metadata (Custom)
[2025-08-21T19:40:55.709Z] 0 functions found (Custom)
[2025-08-21T19:40:55.709Z] 21 functions loaded
[2025-08-21T19:40:55.710Z] Generating 21 job function(s)
[2025-08-21T19:40:55.710Z] Worker process started and initialized.
[2025-08-21T19:40:55.728Z] Found the following functions:
[2025-08-21T19:40:55.728Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:40:55.728Z] Host.Functions.analytics
[2025-08-21T19:40:55.728Z] Host.Functions.analyzeUIImage
[2025-08-21T19:40:55.728Z] Host.Functions.atlasComponents
[2025-08-21T19:40:55.728Z] Host.Functions.fast-suggestions
[2025-08-21T19:40:55.728Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:40:55.728Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:40:55.728Z] Host.Functions.generateSuggestions
[2025-08-21T19:40:55.728Z] Host.Functions.generateWireframe
[2025-08-21T19:40:55.728Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:40:55.728Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:40:55.728Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:40:55.728Z] Host.Functions.get-template
[2025-08-21T19:40:55.728Z] Host.Functions.githubAuthCallback
[2025-08-21T19:40:55.728Z] Host.Functions.githubAuthStart
[2025-08-21T19:40:55.728Z] Host.Functions.health
[2025-08-21T19:40:55.728Z] Host.Functions.healthCheck
[2025-08-21T19:40:55.728Z] Host.Functions.openai-health
[2025-08-21T19:40:55.728Z] Host.Functions.performance-stats
[2025-08-21T19:40:55.728Z] Host.Functions.testFunction
[2025-08-21T19:40:55.728Z] Host.Functions.testSimple
[2025-08-21T19:40:55.728Z] 
[2025-08-21T19:40:55.728Z] HttpOptions
[2025-08-21T19:40:55.728Z] {
[2025-08-21T19:40:55.728Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:40:55.728Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:40:55.728Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:40:55.728Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:40:55.728Z]   "RoutePrefix": "api"
[2025-08-21T19:40:55.728Z] Initializing function HTTP routes
[2025-08-21T19:40:55.728Z] }
[2025-08-21T19:40:55.728Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:40:55.728Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:40:55.728Z] 
[2025-08-21T19:40:55.728Z] Host initialized (235ms)
[2025-08-21T19:40:55.728Z] Host started (235ms)
[2025-08-21T19:40:55.728Z] Job host started
[2025-08-21T19:40:55.728Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:40:55.728Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:40:55.752Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:40:55.752Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:40:55.752Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:40:55.752Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:40:55.787Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:40:55.787Z] 🔍 Current env vars:
[2025-08-21T19:40:55.787Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:40:55.787Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:40:55.787Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:40:55.787Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:40:55.787Z]   Deployment: gpt-4o
[2025-08-21T19:40:55.787Z]   API Version: 2024-08-01-preview
[2025-08-21T19:40:55.787Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:40:55.787Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:40:55.787Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:40:55.788Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:40:55.788Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:40:55.789Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:40:55.794Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.794Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.794Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.794Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.795Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.795Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.795Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:55.795Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.795Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:55.795Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '503499eb-fe49-4859-81ea-0c904c76c5db'.
[2025-08-21T19:40:55.795Z] Result: Failure
[2025-08-21T19:40:55.795Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:55.795Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:40:55.795Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:40:55.795Z]                    ^^^^^
[2025-08-21T19:40:55.795Z] 
[2025-08-21T19:40:55.795Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:40:55.795Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:40:55.795Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:40:55.795Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:40:55.795Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:40:55.795Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:40:55.795Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.795Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:40:55.795Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '6d5d52ad-296d-4283-afc5-e17eb4c536ad'.
[2025-08-21T19:40:55.795Z] Result: Failure
[2025-08-21T19:40:55.795Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:40:55.795Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:40:55.795Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:40:55.795Z]                    ^^^^^
[2025-08-21T19:40:55.795Z] 
[2025-08-21T19:40:55.795Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:40:55.795Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:40:55.795Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:40:55.795Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:40:55.795Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:40:55.795Z]     at Generator.next (<anonymous>).
[2025-08-21T19:40:55.795Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.795Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:40:55.795Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:40:55.795Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:40:55.795Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:40:55.795Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:40:55.795Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:40:55.795Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:40:55.795Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:40:55.795Z]     at Generator.next (<anonymous>).
[2025-08-21T19:40:55.795Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.796Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 received FunctionLoadRequest
[2025-08-21T19:40:55.816Z] Host restarted.
[2025-08-21T19:41:00.493Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:41:04.287Z] Restarting host.
[2025-08-21T19:41:04.290Z] Stopping JobHost
[2025-08-21T19:41:04.290Z] Job host stopped
[2025-08-21T19:41:04.291Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '252cc5b1-13f2-451c-9c1f-7d40479ec84c'
[2025-08-21T19:41:04.356Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:41:04.356Z] Host configuration file read:
[2025-08-21T19:41:04.356Z] {
[2025-08-21T19:41:04.356Z]   "version": "2.0",
[2025-08-21T19:41:04.356Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:41:04.356Z]   "logging": {
[2025-08-21T19:41:04.356Z]     "applicationInsights": {
[2025-08-21T19:41:04.356Z]       "samplingSettings": {
[2025-08-21T19:41:04.356Z]         "isEnabled": true,
[2025-08-21T19:41:04.356Z]         "excludedTypes": "Request"
[2025-08-21T19:41:04.356Z]       }
[2025-08-21T19:41:04.356Z]     },
[2025-08-21T19:41:04.356Z]     "logLevel": {
[2025-08-21T19:41:04.356Z]       "default": "Information",
[2025-08-21T19:41:04.356Z]       "Host.Results": "Information",
[2025-08-21T19:41:04.356Z]       "Function": "Information"
[2025-08-21T19:41:04.356Z]     }
[2025-08-21T19:41:04.356Z]   },
[2025-08-21T19:41:04.356Z]   "extensionBundle": {
[2025-08-21T19:41:04.356Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:41:04.356Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:41:04.356Z]   },
[2025-08-21T19:41:04.356Z]   "watchDirectories": [
[2025-08-21T19:41:04.356Z]     "Shared"
[2025-08-21T19:41:04.356Z]   ]
[2025-08-21T19:41:04.356Z] }
[2025-08-21T19:41:04.357Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:41:04.358Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:04.358Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:04.358Z] Loading functions metadata
[2025-08-21T19:41:04.358Z] Worker indexing is enabled
[2025-08-21T19:41:04.358Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:41:04.358Z] Reading functions metadata (Worker)
[2025-08-21T19:41:04.358Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:41:04.367Z] Worker cf109561-40fd-4d39-bde6-a4cccdc3e073 exited with code 0
[2025-08-21T19:41:04.481Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 connecting on 127.0.0.1:54302
[2025-08-21T19:41:04.503Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received WorkerInitRequest
[2025-08-21T19:41:04.506Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionsMetadataRequest
[2025-08-21T19:41:04.506Z] Reading functions metadata (Host)
[2025-08-21T19:41:04.727Z] 21 functions found (Host)
[2025-08-21T19:41:04.727Z] 21 functions loaded
[2025-08-21T19:41:04.728Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:41:04.728Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:04.728Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:04.728Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:41:04.885Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:04.885Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:04.886Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:41:04.886Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:41:04.933Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:41:04.933Z] Host configuration file read:
[2025-08-21T19:41:04.933Z] {
[2025-08-21T19:41:04.933Z]   "version": "2.0",
[2025-08-21T19:41:04.933Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:41:04.933Z]   "logging": {
[2025-08-21T19:41:04.933Z]     "applicationInsights": {
[2025-08-21T19:41:04.933Z]       "samplingSettings": {
[2025-08-21T19:41:04.933Z]         "isEnabled": true,
[2025-08-21T19:41:04.933Z]         "excludedTypes": "Request"
[2025-08-21T19:41:04.933Z]       }
[2025-08-21T19:41:04.933Z]     },
[2025-08-21T19:41:04.933Z]     "logLevel": {
[2025-08-21T19:41:04.933Z]       "default": "Information",
[2025-08-21T19:41:04.933Z]       "Host.Results": "Information",
[2025-08-21T19:41:04.933Z]       "Function": "Information"
[2025-08-21T19:41:04.933Z]     }
[2025-08-21T19:41:04.933Z]   },
[2025-08-21T19:41:04.933Z]   "extensionBundle": {
[2025-08-21T19:41:04.933Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:41:04.933Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:41:04.933Z]   },
[2025-08-21T19:41:04.933Z]   "watchDirectories": [
[2025-08-21T19:41:04.933Z]     "Shared"
[2025-08-21T19:41:04.933Z]   ]
[2025-08-21T19:41:04.933Z] }
[2025-08-21T19:41:04.977Z] Initializing Warmup Extension.
[2025-08-21T19:41:04.977Z] Initializing Host. OperationId: '252cc5b1-13f2-451c-9c1f-7d40479ec84c'.
[2025-08-21T19:41:04.977Z] Host initialization: ConsecutiveErrors=0, StartupCount=18, OperationId=252cc5b1-13f2-451c-9c1f-7d40479ec84c
[2025-08-21T19:41:04.979Z] LoggerFilterOptions
[2025-08-21T19:41:04.979Z] {
[2025-08-21T19:41:04.979Z]   "MinLevel": "None",
[2025-08-21T19:41:04.979Z]   "Rules": [
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": null,
[2025-08-21T19:41:04.979Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:41:04.979Z]       "LogLevel": "None",
[2025-08-21T19:41:04.979Z]       "Filter": null
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:04.979Z]       "CategoryName": null,
[2025-08-21T19:41:04.979Z]       "LogLevel": "None",
[2025-08-21T19:41:04.979Z]       "Filter": null
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:04.979Z]       "CategoryName": null,
[2025-08-21T19:41:04.979Z]       "LogLevel": null,
[2025-08-21T19:41:04.979Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": null,
[2025-08-21T19:41:04.979Z]       "CategoryName": null,
[2025-08-21T19:41:04.979Z]       "LogLevel": null,
[2025-08-21T19:41:04.979Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": null,
[2025-08-21T19:41:04.979Z]       "CategoryName": null,
[2025-08-21T19:41:04.979Z]       "LogLevel": null,
[2025-08-21T19:41:04.979Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": null,
[2025-08-21T19:41:04.979Z]       "CategoryName": "Host.Results",
[2025-08-21T19:41:04.979Z]       "LogLevel": "Information",
[2025-08-21T19:41:04.979Z]       "Filter": null
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": null,
[2025-08-21T19:41:04.979Z]       "CategoryName": "Function",
[2025-08-21T19:41:04.979Z]       "LogLevel": "Information",
[2025-08-21T19:41:04.979Z]       "Filter": null
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": null,
[2025-08-21T19:41:04.979Z]       "CategoryName": null,
[2025-08-21T19:41:04.979Z]       "LogLevel": "Information",
[2025-08-21T19:41:04.979Z]       "Filter": null
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:04.979Z]       "CategoryName": null,
[2025-08-21T19:41:04.979Z]       "LogLevel": "None",
[2025-08-21T19:41:04.979Z]       "Filter": null
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:04.979Z]       "CategoryName": null,
[2025-08-21T19:41:04.979Z]       "LogLevel": null,
[2025-08-21T19:41:04.979Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:04.979Z]       "CategoryName": null,
[2025-08-21T19:41:04.979Z]       "LogLevel": null,
[2025-08-21T19:41:04.979Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:04.979Z]     }
[2025-08-21T19:41:04.979Z]   ]
[2025-08-21T19:41:04.979Z] }
[2025-08-21T19:41:04.979Z] LoggerFilterOptions
[2025-08-21T19:41:04.979Z] {
[2025-08-21T19:41:04.979Z]   "MinLevel": "None",
[2025-08-21T19:41:04.979Z]   "Rules": [
[2025-08-21T19:41:04.979Z]     {
[2025-08-21T19:41:04.979Z]       "ProviderName": null,
[2025-08-21T19:41:04.979Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:41:04.979Z]       "LogLevel": "None",
[2025-08-21T19:41:04.979Z]       "Filter": null
[2025-08-21T19:41:04.979Z]     },
[2025-08-21T19:41:04.980Z]     {
[2025-08-21T19:41:04.980Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:04.980Z]       "CategoryName": null,
[2025-08-21T19:41:04.980Z]       "LogLevel": "None",
[2025-08-21T19:41:04.980Z]       "Filter": null
[2025-08-21T19:41:04.980Z]     },
[2025-08-21T19:41:04.980Z]     {
[2025-08-21T19:41:04.980Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:04.980Z]       "CategoryName": null,
[2025-08-21T19:41:04.980Z]       "LogLevel": null,
[2025-08-21T19:41:04.980Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:04.980Z]     },
[2025-08-21T19:41:04.980Z]     {
[2025-08-21T19:41:04.980Z]       "ProviderName": null,
[2025-08-21T19:41:04.980Z]       "CategoryName": null,
[2025-08-21T19:41:04.980Z]       "LogLevel": null,
[2025-08-21T19:41:04.980Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:04.980Z]     },
[2025-08-21T19:41:04.980Z]     {
[2025-08-21T19:41:04.980Z]       "ProviderName": null,
[2025-08-21T19:41:04.980Z]       "CategoryName": null,
[2025-08-21T19:41:04.980Z]       "LogLevel": null,
[2025-08-21T19:41:04.980Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:04.980Z]     },
[2025-08-21T19:41:04.980Z]     {
[2025-08-21T19:41:04.980Z]       "ProviderName": null,
[2025-08-21T19:41:04.980Z]       "CategoryName": "Host.Results",
[2025-08-21T19:41:04.980Z]       "LogLevel": "Information",
[2025-08-21T19:41:04.980Z]       "Filter": null
[2025-08-21T19:41:04.980Z]     },
[2025-08-21T19:41:04.980Z]     {
[2025-08-21T19:41:04.980Z]       "ProviderName": null,
[2025-08-21T19:41:04.980Z]       "CategoryName": "Function",
[2025-08-21T19:41:04.980Z]       "LogLevel": "Information",
[2025-08-21T19:41:04.980Z]       "Filter": null
[2025-08-21T19:41:04.980Z]     },
[2025-08-21T19:41:04.980Z]     {
[2025-08-21T19:41:04.980Z]       "ProviderName": null,
[2025-08-21T19:41:04.980Z]       "CategoryName": null,
[2025-08-21T19:41:04.980Z]       "LogLevel": "Information",
[2025-08-21T19:41:04.980Z]       "Filter": null
[2025-08-21T19:41:04.980Z]     },
[2025-08-21T19:41:04.980Z]     {
[2025-08-21T19:41:04.980Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:04.980Z]       "CategoryName": null,
[2025-08-21T19:41:04.980Z]       "LogLevel": "None",
[2025-08-21T19:41:04.980Z]       "Filter": null
[2025-08-21T19:41:04.980Z]     },
[2025-08-21T19:41:04.980Z]     {
[2025-08-21T19:41:04.980Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:04.980Z]       "CategoryName": null,
[2025-08-21T19:41:04.980Z]       "LogLevel": null,
[2025-08-21T19:41:04.980Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:04.980Z]     },
[2025-08-21T19:41:04.980Z]     {
[2025-08-21T19:41:04.980Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:04.980Z]       "CategoryName": null,
[2025-08-21T19:41:04.980Z]       "LogLevel": null,
[2025-08-21T19:41:04.980Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:04.980Z]     }
[2025-08-21T19:41:04.980Z]   ]
[2025-08-21T19:41:04.980Z] }
[2025-08-21T19:41:04.980Z] FunctionResultAggregatorOptions
[2025-08-21T19:41:04.980Z] {
[2025-08-21T19:41:04.980Z]   "BatchSize": 1000,
[2025-08-21T19:41:04.980Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:41:04.980Z]   "IsEnabled": true
[2025-08-21T19:41:04.980Z] }
[2025-08-21T19:41:04.980Z] ConcurrencyOptions
[2025-08-21T19:41:04.980Z] {
[2025-08-21T19:41:04.980Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:41:04.980Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:41:04.980Z]   "CPUThreshold": 0.8,
[2025-08-21T19:41:04.980Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:41:04.980Z] }
[2025-08-21T19:41:04.980Z] SingletonOptions
[2025-08-21T19:41:04.980Z] {
[2025-08-21T19:41:04.980Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:41:04.980Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:41:04.980Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:41:04.980Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:41:04.980Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:41:04.980Z] }
[2025-08-21T19:41:04.980Z] ScaleOptions
[2025-08-21T19:41:04.980Z] {
[2025-08-21T19:41:04.980Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:41:04.980Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:41:04.980Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:41:04.980Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:41:04.980Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:41:04.980Z] }
[2025-08-21T19:41:04.980Z] Starting JobHost
[2025-08-21T19:41:04.980Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=58a8e97e-d086-4e7c-8407-fada0d9113af, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:41:04.980Z] Loading functions metadata
[2025-08-21T19:41:04.980Z] Worker indexing is enabled
[2025-08-21T19:41:04.980Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:41:04.980Z] Reading functions metadata (Worker)
[2025-08-21T19:41:04.980Z] Reading functions metadata (Host)
[2025-08-21T19:41:05.177Z] 21 functions found (Host)
[2025-08-21T19:41:05.177Z] Reading functions metadata (Custom)
[2025-08-21T19:41:05.177Z] 0 functions found (Custom)
[2025-08-21T19:41:05.177Z] 21 functions loaded
[2025-08-21T19:41:05.178Z] Generating 21 job function(s)
[2025-08-21T19:41:05.178Z] Worker process started and initialized.
[2025-08-21T19:41:05.183Z] Found the following functions:
[2025-08-21T19:41:05.183Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:41:05.183Z] Host.Functions.analytics
[2025-08-21T19:41:05.183Z] Host.Functions.analyzeUIImage
[2025-08-21T19:41:05.184Z] Host.Functions.atlasComponents
[2025-08-21T19:41:05.184Z] Host.Functions.fast-suggestions
[2025-08-21T19:41:05.184Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:41:05.184Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:41:05.184Z] Host.Functions.generateSuggestions
[2025-08-21T19:41:05.184Z] Host.Functions.generateWireframe
[2025-08-21T19:41:05.184Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:41:05.184Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:41:05.184Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:41:05.184Z] Host.Functions.get-template
[2025-08-21T19:41:05.184Z] Host.Functions.githubAuthCallback
[2025-08-21T19:41:05.184Z] Host.Functions.githubAuthStart
[2025-08-21T19:41:05.184Z] Host.Functions.health
[2025-08-21T19:41:05.184Z] Host.Functions.healthCheck
[2025-08-21T19:41:05.184Z] Host.Functions.openai-health
[2025-08-21T19:41:05.184Z] Host.Functions.performance-stats
[2025-08-21T19:41:05.184Z] Host.Functions.testFunction
[2025-08-21T19:41:05.184Z] Host.Functions.testSimple
[2025-08-21T19:41:05.184Z] 
[2025-08-21T19:41:05.184Z] HttpOptions
[2025-08-21T19:41:05.184Z] {
[2025-08-21T19:41:05.184Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:41:05.184Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:41:05.184Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:41:05.184Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:41:05.184Z]   "RoutePrefix": "api"
[2025-08-21T19:41:05.184Z] }
[2025-08-21T19:41:05.184Z] Initializing function HTTP routes
[2025-08-21T19:41:05.184Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:41:05.184Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:41:05.184Z] 
[2025-08-21T19:41:05.184Z] Host initialized (203ms)
[2025-08-21T19:41:05.184Z] Host started (203ms)
[2025-08-21T19:41:05.184Z] Job host started
[2025-08-21T19:41:05.184Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:41:05.184Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:41:05.213Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:41:05.213Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:41:05.213Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:05.213Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:41:05.258Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:41:05.258Z] 🔍 Current env vars:
[2025-08-21T19:41:05.258Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:41:05.258Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:41:05.258Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:41:05.258Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:05.258Z]   Deployment: gpt-4o
[2025-08-21T19:41:05.258Z]   API Version: 2024-08-01-preview
[2025-08-21T19:41:05.258Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:41:05.258Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:41:05.258Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:41:05.258Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:05.258Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:41:05.261Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:41:05.266Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.266Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.267Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.267Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.267Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.267Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.267Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:05.267Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '301914a6-cb77-4c65-aea2-cfe9d720b567'.
[2025-08-21T19:41:05.267Z] Result: Failure
[2025-08-21T19:41:05.267Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:05.267Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:41:05.267Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.267Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:41:05.267Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:05.267Z]                    ^^^^^
[2025-08-21T19:41:05.267Z] 
[2025-08-21T19:41:05.267Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:41:05.267Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:41:05.267Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:41:05.267Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:41:05.267Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:41:05.267Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:41:05.267Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '697e8b3d-ad94-4718-8579-8b121dfe0ddd'.
[2025-08-21T19:41:05.267Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:41:05.267Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:41:05.267Z] Result: Failure
[2025-08-21T19:41:05.267Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:05.267Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:41:05.267Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:41:05.267Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.267Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:41:05.267Z]                    ^^^^^
[2025-08-21T19:41:05.267Z] 
[2025-08-21T19:41:05.267Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:41:05.267Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:41:05.267Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:41:05.267Z]     at Generator.next (<anonymous>).
[2025-08-21T19:41:05.267Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:41:05.268Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:41:05.267Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:41:05.268Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:41:05.268Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:41:05.268Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:41:05.268Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:41:05.268Z]     at Generator.next (<anonymous>).
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.268Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:05.269Z] Host restarted.
[2025-08-21T19:41:05.269Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 received FunctionLoadRequest
[2025-08-21T19:41:09.986Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:41:26.453Z] Restarting host.
[2025-08-21T19:41:26.460Z] Stopping JobHost
[2025-08-21T19:41:26.460Z] Job host stopped
[2025-08-21T19:41:26.463Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'ff4ef6c1-2f7e-4581-8e57-27f50ad38774'
[2025-08-21T19:41:26.544Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:41:26.544Z] Host configuration file read:
[2025-08-21T19:41:26.544Z] {
[2025-08-21T19:41:26.544Z]   "version": "2.0",
[2025-08-21T19:41:26.544Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:41:26.544Z]   "logging": {
[2025-08-21T19:41:26.544Z]     "applicationInsights": {
[2025-08-21T19:41:26.544Z]       "samplingSettings": {
[2025-08-21T19:41:26.544Z]         "isEnabled": true,
[2025-08-21T19:41:26.544Z]         "excludedTypes": "Request"
[2025-08-21T19:41:26.544Z]       }
[2025-08-21T19:41:26.544Z]     },
[2025-08-21T19:41:26.544Z]     "logLevel": {
[2025-08-21T19:41:26.544Z]       "default": "Information",
[2025-08-21T19:41:26.544Z]       "Host.Results": "Information",
[2025-08-21T19:41:26.544Z]       "Function": "Information"
[2025-08-21T19:41:26.544Z]     }
[2025-08-21T19:41:26.544Z]   },
[2025-08-21T19:41:26.544Z]   "extensionBundle": {
[2025-08-21T19:41:26.544Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:41:26.544Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:41:26.544Z]   },
[2025-08-21T19:41:26.544Z]   "watchDirectories": [
[2025-08-21T19:41:26.544Z]     "Shared"
[2025-08-21T19:41:26.544Z]   ]
[2025-08-21T19:41:26.544Z] }
[2025-08-21T19:41:26.545Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:41:26.545Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:26.545Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:26.546Z] Loading functions metadata
[2025-08-21T19:41:26.546Z] Worker indexing is enabled
[2025-08-21T19:41:26.546Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:41:26.546Z] Reading functions metadata (Worker)
[2025-08-21T19:41:26.546Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:41:26.554Z] Worker 479098af-c74a-4605-bf84-092418bbddd2 exited with code 0
[2025-08-21T19:41:26.693Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 connecting on 127.0.0.1:54302
[2025-08-21T19:41:26.716Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received WorkerInitRequest
[2025-08-21T19:41:26.719Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionsMetadataRequest
[2025-08-21T19:41:26.719Z] Reading functions metadata (Host)
[2025-08-21T19:41:26.954Z] 21 functions found (Host)
[2025-08-21T19:41:26.954Z] 21 functions loaded
[2025-08-21T19:41:26.954Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:41:26.954Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:26.954Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:26.954Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:41:27.112Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:27.112Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:27.113Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:41:27.113Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:41:27.150Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:41:27.150Z] Host configuration file read:
[2025-08-21T19:41:27.150Z] {
[2025-08-21T19:41:27.150Z]   "version": "2.0",
[2025-08-21T19:41:27.150Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:41:27.150Z]   "logging": {
[2025-08-21T19:41:27.150Z]     "applicationInsights": {
[2025-08-21T19:41:27.150Z]       "samplingSettings": {
[2025-08-21T19:41:27.150Z]         "isEnabled": true,
[2025-08-21T19:41:27.150Z]         "excludedTypes": "Request"
[2025-08-21T19:41:27.150Z]       }
[2025-08-21T19:41:27.150Z]     },
[2025-08-21T19:41:27.150Z]     "logLevel": {
[2025-08-21T19:41:27.150Z]       "default": "Information",
[2025-08-21T19:41:27.150Z]       "Host.Results": "Information",
[2025-08-21T19:41:27.150Z]       "Function": "Information"
[2025-08-21T19:41:27.150Z]     }
[2025-08-21T19:41:27.150Z]   },
[2025-08-21T19:41:27.150Z]   "extensionBundle": {
[2025-08-21T19:41:27.150Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:41:27.150Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:41:27.150Z]   },
[2025-08-21T19:41:27.150Z]   "watchDirectories": [
[2025-08-21T19:41:27.150Z]     "Shared"
[2025-08-21T19:41:27.150Z]   ]
[2025-08-21T19:41:27.150Z] }
[2025-08-21T19:41:27.185Z] Initializing Warmup Extension.
[2025-08-21T19:41:27.186Z] Initializing Host. OperationId: 'ff4ef6c1-2f7e-4581-8e57-27f50ad38774'.
[2025-08-21T19:41:27.186Z] Host initialization: ConsecutiveErrors=0, StartupCount=19, OperationId=ff4ef6c1-2f7e-4581-8e57-27f50ad38774
[2025-08-21T19:41:27.187Z] LoggerFilterOptions
[2025-08-21T19:41:27.187Z] {
[2025-08-21T19:41:27.187Z]   "MinLevel": "None",
[2025-08-21T19:41:27.187Z]   "Rules": [
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": null,
[2025-08-21T19:41:27.187Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:41:27.187Z]       "LogLevel": "None",
[2025-08-21T19:41:27.187Z]       "Filter": null
[2025-08-21T19:41:27.187Z]     },
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:27.187Z]       "CategoryName": null,
[2025-08-21T19:41:27.187Z]       "LogLevel": "None",
[2025-08-21T19:41:27.187Z]       "Filter": null
[2025-08-21T19:41:27.187Z]     },
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:27.187Z]       "CategoryName": null,
[2025-08-21T19:41:27.187Z]       "LogLevel": null,
[2025-08-21T19:41:27.187Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:27.187Z]     },
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": null,
[2025-08-21T19:41:27.187Z]       "CategoryName": null,
[2025-08-21T19:41:27.187Z]       "LogLevel": null,
[2025-08-21T19:41:27.187Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:27.187Z]     },
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": null,
[2025-08-21T19:41:27.187Z]       "CategoryName": null,
[2025-08-21T19:41:27.187Z]       "LogLevel": null,
[2025-08-21T19:41:27.187Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:27.187Z]     },
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": null,
[2025-08-21T19:41:27.187Z]       "CategoryName": "Host.Results",
[2025-08-21T19:41:27.187Z]       "LogLevel": "Information",
[2025-08-21T19:41:27.187Z]       "Filter": null
[2025-08-21T19:41:27.187Z]     },
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": null,
[2025-08-21T19:41:27.187Z]       "CategoryName": "Function",
[2025-08-21T19:41:27.187Z]       "LogLevel": "Information",
[2025-08-21T19:41:27.187Z]       "Filter": null
[2025-08-21T19:41:27.187Z]     },
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": null,
[2025-08-21T19:41:27.187Z]       "CategoryName": null,
[2025-08-21T19:41:27.187Z]       "LogLevel": "Information",
[2025-08-21T19:41:27.187Z]       "Filter": null
[2025-08-21T19:41:27.187Z]     },
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:27.187Z]       "CategoryName": null,
[2025-08-21T19:41:27.187Z]       "LogLevel": "None",
[2025-08-21T19:41:27.187Z]       "Filter": null
[2025-08-21T19:41:27.187Z]     },
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:27.187Z]       "CategoryName": null,
[2025-08-21T19:41:27.187Z]       "LogLevel": null,
[2025-08-21T19:41:27.187Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:27.187Z]     },
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:27.187Z]       "CategoryName": null,
[2025-08-21T19:41:27.187Z]       "LogLevel": null,
[2025-08-21T19:41:27.187Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:27.187Z]     }
[2025-08-21T19:41:27.187Z]   ]
[2025-08-21T19:41:27.187Z] }
[2025-08-21T19:41:27.187Z] LoggerFilterOptions
[2025-08-21T19:41:27.187Z] {
[2025-08-21T19:41:27.187Z]   "MinLevel": "None",
[2025-08-21T19:41:27.187Z]   "Rules": [
[2025-08-21T19:41:27.187Z]     {
[2025-08-21T19:41:27.187Z]       "ProviderName": null,
[2025-08-21T19:41:27.187Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:41:27.188Z]       "LogLevel": "None",
[2025-08-21T19:41:27.188Z]       "Filter": null
[2025-08-21T19:41:27.188Z]     },
[2025-08-21T19:41:27.188Z]     {
[2025-08-21T19:41:27.188Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:27.188Z]       "CategoryName": null,
[2025-08-21T19:41:27.188Z]       "LogLevel": "None",
[2025-08-21T19:41:27.188Z]       "Filter": null
[2025-08-21T19:41:27.188Z]     },
[2025-08-21T19:41:27.188Z]     {
[2025-08-21T19:41:27.188Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:27.188Z]       "CategoryName": null,
[2025-08-21T19:41:27.188Z]       "LogLevel": null,
[2025-08-21T19:41:27.188Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:27.188Z]     },
[2025-08-21T19:41:27.188Z]     {
[2025-08-21T19:41:27.188Z]       "ProviderName": null,
[2025-08-21T19:41:27.188Z]       "CategoryName": null,
[2025-08-21T19:41:27.188Z]       "LogLevel": null,
[2025-08-21T19:41:27.188Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:27.188Z]     },
[2025-08-21T19:41:27.188Z]     {
[2025-08-21T19:41:27.188Z]       "ProviderName": null,
[2025-08-21T19:41:27.188Z]       "CategoryName": null,
[2025-08-21T19:41:27.188Z]       "LogLevel": null,
[2025-08-21T19:41:27.188Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:27.188Z]     },
[2025-08-21T19:41:27.188Z]     {
[2025-08-21T19:41:27.188Z]       "ProviderName": null,
[2025-08-21T19:41:27.188Z]       "CategoryName": "Host.Results",
[2025-08-21T19:41:27.188Z]       "LogLevel": "Information",
[2025-08-21T19:41:27.188Z]       "Filter": null
[2025-08-21T19:41:27.188Z]     },
[2025-08-21T19:41:27.188Z]     {
[2025-08-21T19:41:27.188Z]       "ProviderName": null,
[2025-08-21T19:41:27.188Z]       "CategoryName": "Function",
[2025-08-21T19:41:27.188Z]       "LogLevel": "Information",
[2025-08-21T19:41:27.188Z]       "Filter": null
[2025-08-21T19:41:27.188Z]     },
[2025-08-21T19:41:27.188Z]     {
[2025-08-21T19:41:27.188Z]       "ProviderName": null,
[2025-08-21T19:41:27.188Z]       "CategoryName": null,
[2025-08-21T19:41:27.188Z]       "LogLevel": "Information",
[2025-08-21T19:41:27.188Z]       "Filter": null
[2025-08-21T19:41:27.188Z]     },
[2025-08-21T19:41:27.188Z]     {
[2025-08-21T19:41:27.188Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:27.188Z]       "CategoryName": null,
[2025-08-21T19:41:27.188Z]       "LogLevel": "None",
[2025-08-21T19:41:27.188Z]       "Filter": null
[2025-08-21T19:41:27.188Z]     },
[2025-08-21T19:41:27.188Z]     {
[2025-08-21T19:41:27.188Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:27.188Z]       "CategoryName": null,
[2025-08-21T19:41:27.188Z]       "LogLevel": null,
[2025-08-21T19:41:27.188Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:27.188Z]     },
[2025-08-21T19:41:27.188Z]     {
[2025-08-21T19:41:27.188Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:27.188Z]       "CategoryName": null,
[2025-08-21T19:41:27.188Z]       "LogLevel": null,
[2025-08-21T19:41:27.188Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:27.188Z]     }
[2025-08-21T19:41:27.188Z]   ]
[2025-08-21T19:41:27.188Z] }
[2025-08-21T19:41:27.188Z] FunctionResultAggregatorOptions
[2025-08-21T19:41:27.188Z] {
[2025-08-21T19:41:27.188Z]   "BatchSize": 1000,
[2025-08-21T19:41:27.188Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:41:27.188Z]   "IsEnabled": true
[2025-08-21T19:41:27.188Z] }
[2025-08-21T19:41:27.188Z] ConcurrencyOptions
[2025-08-21T19:41:27.188Z] {
[2025-08-21T19:41:27.188Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:41:27.188Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:41:27.188Z]   "CPUThreshold": 0.8,
[2025-08-21T19:41:27.188Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:41:27.188Z] }
[2025-08-21T19:41:27.188Z] SingletonOptions
[2025-08-21T19:41:27.188Z] {
[2025-08-21T19:41:27.188Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:41:27.188Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:41:27.188Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:41:27.188Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:41:27.188Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:41:27.188Z] }
[2025-08-21T19:41:27.188Z] ScaleOptions
[2025-08-21T19:41:27.188Z] {
[2025-08-21T19:41:27.188Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:41:27.188Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:41:27.188Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:41:27.188Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:41:27.188Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:41:27.188Z] }
[2025-08-21T19:41:27.188Z] Starting JobHost
[2025-08-21T19:41:27.188Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=4dbe0437-1f3d-417b-9122-a2cf63c8f304, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:41:27.188Z] Loading functions metadata
[2025-08-21T19:41:27.188Z] Worker indexing is enabled
[2025-08-21T19:41:27.188Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:41:27.188Z] Reading functions metadata (Worker)
[2025-08-21T19:41:27.188Z] Reading functions metadata (Host)
[2025-08-21T19:41:27.376Z] 21 functions found (Host)
[2025-08-21T19:41:27.376Z] Reading functions metadata (Custom)
[2025-08-21T19:41:27.376Z] 0 functions found (Custom)
[2025-08-21T19:41:27.376Z] 21 functions loaded
[2025-08-21T19:41:27.378Z] Worker process started and initialized.
[2025-08-21T19:41:27.378Z] Generating 21 job function(s)
[2025-08-21T19:41:27.385Z] Found the following functions:
[2025-08-21T19:41:27.385Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:41:27.385Z] Host.Functions.analytics
[2025-08-21T19:41:27.385Z] Host.Functions.analyzeUIImage
[2025-08-21T19:41:27.385Z] Host.Functions.atlasComponents
[2025-08-21T19:41:27.385Z] Host.Functions.fast-suggestions
[2025-08-21T19:41:27.385Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:41:27.385Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:41:27.385Z] Host.Functions.generateSuggestions
[2025-08-21T19:41:27.385Z] Host.Functions.generateWireframe
[2025-08-21T19:41:27.385Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:41:27.385Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:41:27.385Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:41:27.385Z] Host.Functions.get-template
[2025-08-21T19:41:27.385Z] Host.Functions.githubAuthCallback
[2025-08-21T19:41:27.385Z] Host.Functions.githubAuthStart
[2025-08-21T19:41:27.385Z] Host.Functions.health
[2025-08-21T19:41:27.385Z] Host.Functions.healthCheck
[2025-08-21T19:41:27.385Z] Host.Functions.openai-health
[2025-08-21T19:41:27.385Z] Host.Functions.performance-stats
[2025-08-21T19:41:27.385Z] Host.Functions.testFunction
[2025-08-21T19:41:27.385Z] Host.Functions.testSimple
[2025-08-21T19:41:27.385Z] 
[2025-08-21T19:41:27.385Z] HttpOptions
[2025-08-21T19:41:27.385Z] {
[2025-08-21T19:41:27.385Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:41:27.385Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:41:27.385Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:41:27.385Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:41:27.385Z]   "RoutePrefix": "api"
[2025-08-21T19:41:27.385Z] }
[2025-08-21T19:41:27.385Z] Initializing function HTTP routes
[2025-08-21T19:41:27.385Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:41:27.385Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:41:27.386Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:41:27.386Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:41:27.386Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:41:27.386Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:41:27.386Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:41:27.386Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:41:27.386Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:41:27.386Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:41:27.386Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:41:27.386Z] 
[2025-08-21T19:41:27.386Z] Host initialized (197ms)
[2025-08-21T19:41:27.386Z] Host started (197ms)
[2025-08-21T19:41:27.386Z] Job host started
[2025-08-21T19:41:27.386Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:41:27.386Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:41:27.417Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:41:27.418Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:41:27.418Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:27.418Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:41:27.455Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:41:27.455Z] 🔍 Current env vars:
[2025-08-21T19:41:27.455Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:41:27.455Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:41:27.455Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:41:27.455Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:27.455Z]   Deployment: gpt-4o
[2025-08-21T19:41:27.455Z]   API Version: 2024-08-01-preview
[2025-08-21T19:41:27.455Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:41:27.456Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:41:27.456Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:41:27.456Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:27.456Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:41:27.458Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:41:27.463Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.464Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.464Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.464Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.464Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.464Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.464Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:27.464Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.464Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'eb791888-3992-49ce-9842-cd3ee0baaca5'.
[2025-08-21T19:41:27.464Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:27.464Z] Result: Failure
[2025-08-21T19:41:27.464Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:27.464Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:41:27.465Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:41:27.465Z]                    ^^^^^
[2025-08-21T19:41:27.465Z] 
[2025-08-21T19:41:27.465Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:41:27.465Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:41:27.465Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:41:27.465Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:41:27.465Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:41:27.465Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:41:27.465Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:41:27.465Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '05708ca5-498c-44a6-b6a1-6e5d5b0f235e'.
[2025-08-21T19:41:27.465Z] Result: Failure
[2025-08-21T19:41:27.465Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:27.465Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:41:27.465Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:41:27.465Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:41:27.465Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:41:27.465Z]                    ^^^^^
[2025-08-21T19:41:27.465Z] 
[2025-08-21T19:41:27.465Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:41:27.465Z]     at Generator.next (<anonymous>).
[2025-08-21T19:41:27.465Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:41:27.465Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:41:27.465Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:41:27.465Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:41:27.465Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:41:27.465Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:41:27.465Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:41:27.465Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z]     at Generator.next (<anonymous>).
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.465Z] Host restarted.
[2025-08-21T19:41:27.465Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.466Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:27.466Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 received FunctionLoadRequest
[2025-08-21T19:41:32.190Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:41:32.699Z] Restarting host.
[2025-08-21T19:41:32.704Z] Stopping JobHost
[2025-08-21T19:41:32.704Z] Job host stopped
[2025-08-21T19:41:32.712Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'de3453d9-1f60-413c-a302-01a066fd4ffe'
[2025-08-21T19:41:32.775Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:41:32.775Z] Host configuration file read:
[2025-08-21T19:41:32.775Z] {
[2025-08-21T19:41:32.775Z]   "version": "2.0",
[2025-08-21T19:41:32.775Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:41:32.775Z]   "logging": {
[2025-08-21T19:41:32.775Z]     "applicationInsights": {
[2025-08-21T19:41:32.775Z]       "samplingSettings": {
[2025-08-21T19:41:32.775Z]         "isEnabled": true,
[2025-08-21T19:41:32.775Z]         "excludedTypes": "Request"
[2025-08-21T19:41:32.775Z]       }
[2025-08-21T19:41:32.775Z]     },
[2025-08-21T19:41:32.775Z]     "logLevel": {
[2025-08-21T19:41:32.775Z]       "default": "Information",
[2025-08-21T19:41:32.775Z]       "Host.Results": "Information",
[2025-08-21T19:41:32.775Z]       "Function": "Information"
[2025-08-21T19:41:32.775Z]     }
[2025-08-21T19:41:32.775Z]   },
[2025-08-21T19:41:32.775Z]   "extensionBundle": {
[2025-08-21T19:41:32.775Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:41:32.775Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:41:32.775Z]   },
[2025-08-21T19:41:32.775Z]   "watchDirectories": [
[2025-08-21T19:41:32.775Z]     "Shared"
[2025-08-21T19:41:32.775Z]   ]
[2025-08-21T19:41:32.775Z] }
[2025-08-21T19:41:32.776Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:41:32.776Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:32.776Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:32.776Z] Loading functions metadata
[2025-08-21T19:41:32.776Z] Worker indexing is enabled
[2025-08-21T19:41:32.777Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:41:32.777Z] Reading functions metadata (Worker)
[2025-08-21T19:41:32.777Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:41:32.781Z] Worker 13dcf13f-7842-45f8-95dc-c2e2e136d601 exited with code 0
[2025-08-21T19:41:32.910Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 connecting on 127.0.0.1:54302
[2025-08-21T19:41:32.933Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received WorkerInitRequest
[2025-08-21T19:41:32.935Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionsMetadataRequest
[2025-08-21T19:41:32.935Z] Reading functions metadata (Host)
[2025-08-21T19:41:33.150Z] 21 functions found (Host)
[2025-08-21T19:41:33.150Z] 21 functions loaded
[2025-08-21T19:41:33.150Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:41:33.151Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:33.151Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:33.151Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:41:33.291Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:33.291Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:33.291Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:41:33.291Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:41:33.326Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:41:33.326Z] Host configuration file read:
[2025-08-21T19:41:33.326Z] {
[2025-08-21T19:41:33.326Z]   "version": "2.0",
[2025-08-21T19:41:33.326Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:41:33.327Z]   "logging": {
[2025-08-21T19:41:33.327Z]     "applicationInsights": {
[2025-08-21T19:41:33.327Z]       "samplingSettings": {
[2025-08-21T19:41:33.327Z]         "isEnabled": true,
[2025-08-21T19:41:33.327Z]         "excludedTypes": "Request"
[2025-08-21T19:41:33.327Z]       }
[2025-08-21T19:41:33.327Z]     },
[2025-08-21T19:41:33.327Z]     "logLevel": {
[2025-08-21T19:41:33.327Z]       "default": "Information",
[2025-08-21T19:41:33.327Z]       "Host.Results": "Information",
[2025-08-21T19:41:33.327Z]       "Function": "Information"
[2025-08-21T19:41:33.327Z]     }
[2025-08-21T19:41:33.327Z]   },
[2025-08-21T19:41:33.327Z]   "extensionBundle": {
[2025-08-21T19:41:33.327Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:41:33.327Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:41:33.327Z]   },
[2025-08-21T19:41:33.327Z]   "watchDirectories": [
[2025-08-21T19:41:33.327Z]     "Shared"
[2025-08-21T19:41:33.327Z]   ]
[2025-08-21T19:41:33.327Z] }
[2025-08-21T19:41:33.395Z] Initializing Warmup Extension.
[2025-08-21T19:41:33.396Z] Initializing Host. OperationId: 'de3453d9-1f60-413c-a302-01a066fd4ffe'.
[2025-08-21T19:41:33.396Z] Host initialization: ConsecutiveErrors=0, StartupCount=20, OperationId=de3453d9-1f60-413c-a302-01a066fd4ffe
[2025-08-21T19:41:33.398Z] LoggerFilterOptions
[2025-08-21T19:41:33.398Z] {
[2025-08-21T19:41:33.398Z]   "MinLevel": "None",
[2025-08-21T19:41:33.398Z]   "Rules": [
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": null,
[2025-08-21T19:41:33.398Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:41:33.398Z]       "LogLevel": "None",
[2025-08-21T19:41:33.398Z]       "Filter": null
[2025-08-21T19:41:33.398Z]     },
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:33.398Z]       "CategoryName": null,
[2025-08-21T19:41:33.398Z]       "LogLevel": "None",
[2025-08-21T19:41:33.398Z]       "Filter": null
[2025-08-21T19:41:33.398Z]     },
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:33.398Z]       "CategoryName": null,
[2025-08-21T19:41:33.398Z]       "LogLevel": null,
[2025-08-21T19:41:33.398Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:33.398Z]     },
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": null,
[2025-08-21T19:41:33.398Z]       "CategoryName": null,
[2025-08-21T19:41:33.398Z]       "LogLevel": null,
[2025-08-21T19:41:33.398Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:33.398Z]     },
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": null,
[2025-08-21T19:41:33.398Z]       "CategoryName": null,
[2025-08-21T19:41:33.398Z]       "LogLevel": null,
[2025-08-21T19:41:33.398Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:33.398Z]     },
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": null,
[2025-08-21T19:41:33.398Z]       "CategoryName": "Host.Results",
[2025-08-21T19:41:33.398Z]       "LogLevel": "Information",
[2025-08-21T19:41:33.398Z]       "Filter": null
[2025-08-21T19:41:33.398Z]     },
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": null,
[2025-08-21T19:41:33.398Z]       "CategoryName": "Function",
[2025-08-21T19:41:33.398Z]       "LogLevel": "Information",
[2025-08-21T19:41:33.398Z]       "Filter": null
[2025-08-21T19:41:33.398Z]     },
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": null,
[2025-08-21T19:41:33.398Z]       "CategoryName": null,
[2025-08-21T19:41:33.398Z]       "LogLevel": "Information",
[2025-08-21T19:41:33.398Z]       "Filter": null
[2025-08-21T19:41:33.398Z]     },
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:33.398Z]       "CategoryName": null,
[2025-08-21T19:41:33.398Z]       "LogLevel": "None",
[2025-08-21T19:41:33.398Z]       "Filter": null
[2025-08-21T19:41:33.398Z]     },
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:33.398Z]       "CategoryName": null,
[2025-08-21T19:41:33.398Z]       "LogLevel": null,
[2025-08-21T19:41:33.398Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:33.398Z]     },
[2025-08-21T19:41:33.398Z]     {
[2025-08-21T19:41:33.398Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:33.398Z]       "CategoryName": null,
[2025-08-21T19:41:33.398Z]       "LogLevel": null,
[2025-08-21T19:41:33.398Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:33.398Z]     }
[2025-08-21T19:41:33.398Z]   ]
[2025-08-21T19:41:33.398Z] }
[2025-08-21T19:41:33.399Z] LoggerFilterOptions
[2025-08-21T19:41:33.399Z] {
[2025-08-21T19:41:33.399Z]   "MinLevel": "None",
[2025-08-21T19:41:33.399Z]   "Rules": [
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": null,
[2025-08-21T19:41:33.399Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:41:33.399Z]       "LogLevel": "None",
[2025-08-21T19:41:33.399Z]       "Filter": null
[2025-08-21T19:41:33.399Z]     },
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:33.399Z]       "CategoryName": null,
[2025-08-21T19:41:33.399Z]       "LogLevel": "None",
[2025-08-21T19:41:33.399Z]       "Filter": null
[2025-08-21T19:41:33.399Z]     },
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:33.399Z]       "CategoryName": null,
[2025-08-21T19:41:33.399Z]       "LogLevel": null,
[2025-08-21T19:41:33.399Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:33.399Z]     },
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": null,
[2025-08-21T19:41:33.399Z]       "CategoryName": null,
[2025-08-21T19:41:33.399Z]       "LogLevel": null,
[2025-08-21T19:41:33.399Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:33.399Z]     },
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": null,
[2025-08-21T19:41:33.399Z]       "CategoryName": null,
[2025-08-21T19:41:33.399Z]       "LogLevel": null,
[2025-08-21T19:41:33.399Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:33.399Z]     },
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": null,
[2025-08-21T19:41:33.399Z]       "CategoryName": "Host.Results",
[2025-08-21T19:41:33.399Z]       "LogLevel": "Information",
[2025-08-21T19:41:33.399Z]       "Filter": null
[2025-08-21T19:41:33.399Z]     },
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": null,
[2025-08-21T19:41:33.399Z]       "CategoryName": "Function",
[2025-08-21T19:41:33.399Z]       "LogLevel": "Information",
[2025-08-21T19:41:33.399Z]       "Filter": null
[2025-08-21T19:41:33.399Z]     },
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": null,
[2025-08-21T19:41:33.399Z]       "CategoryName": null,
[2025-08-21T19:41:33.399Z]       "LogLevel": "Information",
[2025-08-21T19:41:33.399Z]       "Filter": null
[2025-08-21T19:41:33.399Z]     },
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:33.399Z]       "CategoryName": null,
[2025-08-21T19:41:33.399Z]       "LogLevel": "None",
[2025-08-21T19:41:33.399Z]       "Filter": null
[2025-08-21T19:41:33.399Z]     },
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:33.399Z]       "CategoryName": null,
[2025-08-21T19:41:33.399Z]       "LogLevel": null,
[2025-08-21T19:41:33.399Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:33.399Z]     },
[2025-08-21T19:41:33.399Z]     {
[2025-08-21T19:41:33.399Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:33.399Z]       "CategoryName": null,
[2025-08-21T19:41:33.399Z]       "LogLevel": null,
[2025-08-21T19:41:33.399Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:33.399Z]     }
[2025-08-21T19:41:33.399Z]   ]
[2025-08-21T19:41:33.399Z] }
[2025-08-21T19:41:33.399Z] FunctionResultAggregatorOptions
[2025-08-21T19:41:33.399Z] {
[2025-08-21T19:41:33.399Z]   "BatchSize": 1000,
[2025-08-21T19:41:33.399Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:41:33.399Z]   "IsEnabled": true
[2025-08-21T19:41:33.399Z] }
[2025-08-21T19:41:33.399Z] ConcurrencyOptions
[2025-08-21T19:41:33.399Z] {
[2025-08-21T19:41:33.399Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:41:33.399Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:41:33.399Z]   "CPUThreshold": 0.8,
[2025-08-21T19:41:33.399Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:41:33.399Z] }
[2025-08-21T19:41:33.399Z] SingletonOptions
[2025-08-21T19:41:33.399Z] {
[2025-08-21T19:41:33.399Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:41:33.399Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:41:33.399Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:41:33.399Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:41:33.399Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:41:33.399Z] }
[2025-08-21T19:41:33.399Z] ScaleOptions
[2025-08-21T19:41:33.399Z] {
[2025-08-21T19:41:33.399Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:41:33.399Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:41:33.399Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:41:33.399Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:41:33.399Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:41:33.399Z] }
[2025-08-21T19:41:33.399Z] Starting JobHost
[2025-08-21T19:41:33.399Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=150f639e-fc97-4975-a0ec-40d07d71d29a, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:41:33.399Z] Loading functions metadata
[2025-08-21T19:41:33.399Z] Worker indexing is enabled
[2025-08-21T19:41:33.399Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:41:33.399Z] Reading functions metadata (Worker)
[2025-08-21T19:41:33.400Z] Reading functions metadata (Host)
[2025-08-21T19:41:33.595Z] 21 functions found (Host)
[2025-08-21T19:41:33.595Z] Reading functions metadata (Custom)
[2025-08-21T19:41:33.595Z] 0 functions found (Custom)
[2025-08-21T19:41:33.595Z] 21 functions loaded
[2025-08-21T19:41:33.596Z] Generating 21 job function(s)
[2025-08-21T19:41:33.596Z] Worker process started and initialized.
[2025-08-21T19:41:33.602Z] Found the following functions:
[2025-08-21T19:41:33.602Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:41:33.602Z] Host.Functions.analytics
[2025-08-21T19:41:33.602Z] Host.Functions.analyzeUIImage
[2025-08-21T19:41:33.602Z] Host.Functions.atlasComponents
[2025-08-21T19:41:33.602Z] Host.Functions.fast-suggestions
[2025-08-21T19:41:33.602Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:41:33.602Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:41:33.602Z] Host.Functions.generateSuggestions
[2025-08-21T19:41:33.602Z] Host.Functions.generateWireframe
[2025-08-21T19:41:33.602Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:41:33.602Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:41:33.602Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:41:33.602Z] Host.Functions.get-template
[2025-08-21T19:41:33.602Z] Host.Functions.githubAuthCallback
[2025-08-21T19:41:33.602Z] Host.Functions.githubAuthStart
[2025-08-21T19:41:33.602Z] Host.Functions.health
[2025-08-21T19:41:33.602Z] Host.Functions.healthCheck
[2025-08-21T19:41:33.602Z] Host.Functions.openai-health
[2025-08-21T19:41:33.602Z] Host.Functions.performance-stats
[2025-08-21T19:41:33.602Z] Host.Functions.testFunction
[2025-08-21T19:41:33.602Z] Host.Functions.testSimple
[2025-08-21T19:41:33.602Z] 
[2025-08-21T19:41:33.602Z] HttpOptions
[2025-08-21T19:41:33.602Z] {
[2025-08-21T19:41:33.602Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:41:33.602Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:41:33.602Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:41:33.602Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:41:33.602Z]   "RoutePrefix": "api"
[2025-08-21T19:41:33.602Z] Initializing function HTTP routes
[2025-08-21T19:41:33.602Z] }
[2025-08-21T19:41:33.602Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:41:33.602Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:41:33.602Z] 
[2025-08-21T19:41:33.602Z] Host initialized (202ms)
[2025-08-21T19:41:33.602Z] Host started (202ms)
[2025-08-21T19:41:33.602Z] Job host started
[2025-08-21T19:41:33.602Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:41:33.602Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:41:33.630Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:41:33.631Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:41:33.631Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:33.631Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:41:33.666Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:41:33.666Z] 🔍 Current env vars:
[2025-08-21T19:41:33.666Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:41:33.666Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:41:33.666Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:41:33.666Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:33.666Z]   Deployment: gpt-4o
[2025-08-21T19:41:33.666Z]   API Version: 2024-08-01-preview
[2025-08-21T19:41:33.666Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:41:33.666Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:41:33.666Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:41:33.666Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:33.666Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:41:33.668Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:41:33.672Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.672Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.673Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.673Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.673Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.673Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.673Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:33.673Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.673Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'ddccd120-4b52-4227-8098-5315e88c0575'.
[2025-08-21T19:41:33.674Z] Result: Failure
[2025-08-21T19:41:33.673Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:33.674Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:33.674Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:41:33.674Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:41:33.674Z]                    ^^^^^
[2025-08-21T19:41:33.674Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '965ee75f-70ab-4ebf-b3fe-c36e0bb4188c'.
[2025-08-21T19:41:33.674Z] 
[2025-08-21T19:41:33.674Z] Result: Failure
[2025-08-21T19:41:33.674Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:41:33.674Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:33.674Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:41:33.674Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:41:33.674Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.674Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:41:33.674Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:41:33.674Z]                    ^^^^^
[2025-08-21T19:41:33.674Z] 
[2025-08-21T19:41:33.674Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.674Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:41:33.674Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:41:33.674Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)

[2025-08-21T19:41:33.674Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:41:33.674Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:41:33.674Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:41:33.674Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:41:33.674Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:41:33.674Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:41:33.674Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:41:33.674Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:41:33.674Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.674Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:41:33.674Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:41:33.674Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:41:33.674Z]     at Generator.next (<anonymous>).
[2025-08-21T19:41:33.674Z]     at Generator.next (<anonymous>).
[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.674Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.675Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.675Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.675Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 received FunctionLoadRequest
[2025-08-21T19:41:33.688Z] Host restarted.
[2025-08-21T19:41:38.400Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:41:40.718Z] Restarting host.
[2025-08-21T19:41:40.723Z] Stopping JobHost
[2025-08-21T19:41:40.723Z] Job host stopped
[2025-08-21T19:41:40.725Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '75204127-4631-4017-9a83-2b1ee8457e8b'
[2025-08-21T19:41:40.800Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:41:40.800Z] Host configuration file read:
[2025-08-21T19:41:40.800Z] {
[2025-08-21T19:41:40.800Z]   "version": "2.0",
[2025-08-21T19:41:40.800Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:41:40.800Z]   "logging": {
[2025-08-21T19:41:40.800Z]     "applicationInsights": {
[2025-08-21T19:41:40.800Z]       "samplingSettings": {
[2025-08-21T19:41:40.800Z]         "isEnabled": true,
[2025-08-21T19:41:40.800Z]         "excludedTypes": "Request"
[2025-08-21T19:41:40.800Z]       }
[2025-08-21T19:41:40.800Z]     },
[2025-08-21T19:41:40.800Z]     "logLevel": {
[2025-08-21T19:41:40.800Z]       "default": "Information",
[2025-08-21T19:41:40.800Z]       "Host.Results": "Information",
[2025-08-21T19:41:40.800Z]       "Function": "Information"
[2025-08-21T19:41:40.800Z]     }
[2025-08-21T19:41:40.800Z]   },
[2025-08-21T19:41:40.800Z]   "extensionBundle": {
[2025-08-21T19:41:40.800Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:41:40.800Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:41:40.800Z]   },
[2025-08-21T19:41:40.801Z]   "watchDirectories": [
[2025-08-21T19:41:40.801Z]     "Shared"
[2025-08-21T19:41:40.801Z]   ]
[2025-08-21T19:41:40.801Z] }
[2025-08-21T19:41:40.801Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:41:40.804Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:40.804Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:40.804Z] Loading functions metadata
[2025-08-21T19:41:40.804Z] Worker indexing is enabled
[2025-08-21T19:41:40.804Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:41:40.804Z] Reading functions metadata (Worker)
[2025-08-21T19:41:40.804Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:41:40.812Z] Worker c15190d5-638d-4d4f-bacb-22c8ace812e6 exited with code 0
[2025-08-21T19:41:40.942Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 connecting on 127.0.0.1:54302
[2025-08-21T19:41:40.966Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received WorkerInitRequest
[2025-08-21T19:41:40.969Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionsMetadataRequest
[2025-08-21T19:41:40.969Z] Reading functions metadata (Host)
[2025-08-21T19:41:41.195Z] 21 functions found (Host)
[2025-08-21T19:41:41.195Z] 21 functions loaded
[2025-08-21T19:41:41.196Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:41:41.196Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:41.196Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:41.196Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:41:41.321Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:41.322Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:41.322Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:41:41.322Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:41:41.367Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:41:41.367Z] Host configuration file read:
[2025-08-21T19:41:41.367Z] {
[2025-08-21T19:41:41.367Z]   "version": "2.0",
[2025-08-21T19:41:41.367Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:41:41.367Z]   "logging": {
[2025-08-21T19:41:41.367Z]     "applicationInsights": {
[2025-08-21T19:41:41.367Z]       "samplingSettings": {
[2025-08-21T19:41:41.367Z]         "isEnabled": true,
[2025-08-21T19:41:41.367Z]         "excludedTypes": "Request"
[2025-08-21T19:41:41.367Z]       }
[2025-08-21T19:41:41.367Z]     },
[2025-08-21T19:41:41.367Z]     "logLevel": {
[2025-08-21T19:41:41.367Z]       "default": "Information",
[2025-08-21T19:41:41.367Z]       "Host.Results": "Information",
[2025-08-21T19:41:41.367Z]       "Function": "Information"
[2025-08-21T19:41:41.367Z]     }
[2025-08-21T19:41:41.367Z]   },
[2025-08-21T19:41:41.367Z]   "extensionBundle": {
[2025-08-21T19:41:41.367Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:41:41.367Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:41:41.367Z]   },
[2025-08-21T19:41:41.367Z]   "watchDirectories": [
[2025-08-21T19:41:41.367Z]     "Shared"
[2025-08-21T19:41:41.367Z]   ]
[2025-08-21T19:41:41.367Z] }
[2025-08-21T19:41:41.415Z] Initializing Warmup Extension.
[2025-08-21T19:41:41.416Z] Initializing Host. OperationId: '75204127-4631-4017-9a83-2b1ee8457e8b'.
[2025-08-21T19:41:41.416Z] Host initialization: ConsecutiveErrors=0, StartupCount=21, OperationId=75204127-4631-4017-9a83-2b1ee8457e8b
[2025-08-21T19:41:41.417Z] LoggerFilterOptions
[2025-08-21T19:41:41.417Z] {
[2025-08-21T19:41:41.417Z]   "MinLevel": "None",
[2025-08-21T19:41:41.417Z]   "Rules": [
[2025-08-21T19:41:41.417Z]     {
[2025-08-21T19:41:41.417Z]       "ProviderName": null,
[2025-08-21T19:41:41.417Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:41:41.418Z]       "LogLevel": "None",
[2025-08-21T19:41:41.418Z]       "Filter": null
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": "None",
[2025-08-21T19:41:41.418Z]       "Filter": null
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": null,
[2025-08-21T19:41:41.418Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": null,
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": null,
[2025-08-21T19:41:41.418Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": null,
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": null,
[2025-08-21T19:41:41.418Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": null,
[2025-08-21T19:41:41.418Z]       "CategoryName": "Host.Results",
[2025-08-21T19:41:41.418Z]       "LogLevel": "Information",
[2025-08-21T19:41:41.418Z]       "Filter": null
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": null,
[2025-08-21T19:41:41.418Z]       "CategoryName": "Function",
[2025-08-21T19:41:41.418Z]       "LogLevel": "Information",
[2025-08-21T19:41:41.418Z]       "Filter": null
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": null,
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": "Information",
[2025-08-21T19:41:41.418Z]       "Filter": null
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": "None",
[2025-08-21T19:41:41.418Z]       "Filter": null
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": null,
[2025-08-21T19:41:41.418Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": null,
[2025-08-21T19:41:41.418Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:41.418Z]     }
[2025-08-21T19:41:41.418Z]   ]
[2025-08-21T19:41:41.418Z] }
[2025-08-21T19:41:41.418Z] LoggerFilterOptions
[2025-08-21T19:41:41.418Z] {
[2025-08-21T19:41:41.418Z]   "MinLevel": "None",
[2025-08-21T19:41:41.418Z]   "Rules": [
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": null,
[2025-08-21T19:41:41.418Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:41:41.418Z]       "LogLevel": "None",
[2025-08-21T19:41:41.418Z]       "Filter": null
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": "None",
[2025-08-21T19:41:41.418Z]       "Filter": null
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": null,
[2025-08-21T19:41:41.418Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": null,
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": null,
[2025-08-21T19:41:41.418Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:41.418Z]     },
[2025-08-21T19:41:41.418Z]     {
[2025-08-21T19:41:41.418Z]       "ProviderName": null,
[2025-08-21T19:41:41.418Z]       "CategoryName": null,
[2025-08-21T19:41:41.418Z]       "LogLevel": null,
[2025-08-21T19:41:41.419Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:41.419Z]     },
[2025-08-21T19:41:41.419Z]     {
[2025-08-21T19:41:41.419Z]       "ProviderName": null,
[2025-08-21T19:41:41.419Z]       "CategoryName": "Host.Results",
[2025-08-21T19:41:41.419Z]       "LogLevel": "Information",
[2025-08-21T19:41:41.419Z]       "Filter": null
[2025-08-21T19:41:41.419Z]     },
[2025-08-21T19:41:41.419Z]     {
[2025-08-21T19:41:41.419Z]       "ProviderName": null,
[2025-08-21T19:41:41.419Z]       "CategoryName": "Function",
[2025-08-21T19:41:41.419Z]       "LogLevel": "Information",
[2025-08-21T19:41:41.419Z]       "Filter": null
[2025-08-21T19:41:41.419Z]     },
[2025-08-21T19:41:41.419Z]     {
[2025-08-21T19:41:41.419Z]       "ProviderName": null,
[2025-08-21T19:41:41.419Z]       "CategoryName": null,
[2025-08-21T19:41:41.419Z]       "LogLevel": "Information",
[2025-08-21T19:41:41.419Z]       "Filter": null
[2025-08-21T19:41:41.419Z]     },
[2025-08-21T19:41:41.419Z]     {
[2025-08-21T19:41:41.419Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:41.419Z]       "CategoryName": null,
[2025-08-21T19:41:41.419Z]       "LogLevel": "None",
[2025-08-21T19:41:41.419Z]       "Filter": null
[2025-08-21T19:41:41.419Z]     },
[2025-08-21T19:41:41.419Z]     {
[2025-08-21T19:41:41.419Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:41.419Z]       "CategoryName": null,
[2025-08-21T19:41:41.419Z]       "LogLevel": null,
[2025-08-21T19:41:41.419Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:41.419Z]     },
[2025-08-21T19:41:41.419Z]     {
[2025-08-21T19:41:41.419Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:41.419Z]       "CategoryName": null,
[2025-08-21T19:41:41.419Z]       "LogLevel": null,
[2025-08-21T19:41:41.419Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:41.419Z]     }
[2025-08-21T19:41:41.419Z]   ]
[2025-08-21T19:41:41.419Z] }
[2025-08-21T19:41:41.419Z] FunctionResultAggregatorOptions
[2025-08-21T19:41:41.419Z] {
[2025-08-21T19:41:41.419Z]   "BatchSize": 1000,
[2025-08-21T19:41:41.419Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:41:41.419Z]   "IsEnabled": true
[2025-08-21T19:41:41.419Z] }
[2025-08-21T19:41:41.419Z] ConcurrencyOptions
[2025-08-21T19:41:41.419Z] {
[2025-08-21T19:41:41.419Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:41:41.419Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:41:41.419Z]   "CPUThreshold": 0.8,
[2025-08-21T19:41:41.419Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:41:41.419Z] }
[2025-08-21T19:41:41.419Z] SingletonOptions
[2025-08-21T19:41:41.419Z] {
[2025-08-21T19:41:41.419Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:41:41.419Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:41:41.419Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:41:41.419Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:41:41.419Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:41:41.419Z] }
[2025-08-21T19:41:41.419Z] ScaleOptions
[2025-08-21T19:41:41.419Z] {
[2025-08-21T19:41:41.419Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:41:41.419Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:41:41.419Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:41:41.419Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:41:41.419Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:41:41.419Z] }
[2025-08-21T19:41:41.419Z] Starting JobHost
[2025-08-21T19:41:41.419Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=16013e92-4bbc-4fd7-991a-fe75f9469f08, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:41:41.419Z] Loading functions metadata
[2025-08-21T19:41:41.420Z] Worker indexing is enabled
[2025-08-21T19:41:41.420Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:41:41.420Z] Reading functions metadata (Worker)
[2025-08-21T19:41:41.420Z] Reading functions metadata (Host)
[2025-08-21T19:41:41.614Z] 21 functions found (Host)
[2025-08-21T19:41:41.615Z] Reading functions metadata (Custom)
[2025-08-21T19:41:41.615Z] 0 functions found (Custom)
[2025-08-21T19:41:41.615Z] 21 functions loaded
[2025-08-21T19:41:41.620Z] Generating 21 job function(s)
[2025-08-21T19:41:41.620Z] Worker process started and initialized.
[2025-08-21T19:41:41.627Z] Found the following functions:
[2025-08-21T19:41:41.627Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:41:41.627Z] Host.Functions.analytics
[2025-08-21T19:41:41.627Z] Host.Functions.analyzeUIImage
[2025-08-21T19:41:41.627Z] Host.Functions.atlasComponents
[2025-08-21T19:41:41.627Z] Host.Functions.fast-suggestions
[2025-08-21T19:41:41.627Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:41:41.627Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:41:41.627Z] Host.Functions.generateSuggestions
[2025-08-21T19:41:41.627Z] Host.Functions.generateWireframe
[2025-08-21T19:41:41.627Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:41:41.627Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:41:41.628Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:41:41.628Z] Host.Functions.get-template
[2025-08-21T19:41:41.628Z] Host.Functions.githubAuthCallback
[2025-08-21T19:41:41.628Z] Host.Functions.githubAuthStart
[2025-08-21T19:41:41.628Z] Host.Functions.health
[2025-08-21T19:41:41.628Z] Host.Functions.healthCheck
[2025-08-21T19:41:41.628Z] Host.Functions.openai-health
[2025-08-21T19:41:41.628Z] Host.Functions.performance-stats
[2025-08-21T19:41:41.628Z] Host.Functions.testFunction
[2025-08-21T19:41:41.628Z] Host.Functions.testSimple
[2025-08-21T19:41:41.628Z] 
[2025-08-21T19:41:41.628Z] Initializing function HTTP routes
[2025-08-21T19:41:41.628Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:41:41.628Z] HttpOptions
[2025-08-21T19:41:41.628Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:41:41.628Z] {
[2025-08-21T19:41:41.628Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:41:41.628Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:41:41.628Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:41:41.628Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:41:41.628Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:41:41.628Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:41:41.628Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:41:41.628Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:41:41.628Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:41:41.628Z]   "RoutePrefix": "api"
[2025-08-21T19:41:41.628Z] }
[2025-08-21T19:41:41.628Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:41:41.628Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:41:41.628Z] 
[2025-08-21T19:41:41.628Z] Host initialized (208ms)
[2025-08-21T19:41:41.628Z] Host started (208ms)
[2025-08-21T19:41:41.628Z] Job host started
[2025-08-21T19:41:41.628Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:41:41.628Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:41:41.667Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:41:41.668Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:41:41.668Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:41.668Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:41:41.708Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:41:41.708Z] 🔍 Current env vars:
[2025-08-21T19:41:41.708Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:41:41.708Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:41:41.708Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:41:41.708Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:41.708Z]   Deployment: gpt-4o
[2025-08-21T19:41:41.708Z]   API Version: 2024-08-01-preview
[2025-08-21T19:41:41.708Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:41:41.708Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:41:41.708Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:41:41.708Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:41.708Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:41:41.709Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:41:41.714Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.714Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.714Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.714Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.715Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.715Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.715Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:41.715Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'd77e23f1-c5c3-413c-93a6-5363f77ac823'.
[2025-08-21T19:41:41.715Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.715Z] Result: Failure
[2025-08-21T19:41:41.715Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:41.715Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:41:41.715Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:41:41.715Z]                    ^^^^^
[2025-08-21T19:41:41.715Z] 
[2025-08-21T19:41:41.715Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:41:41.715Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:41:41.715Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:41:41.715Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:41.715Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:41:41.715Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:41:41.715Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:41:41.715Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:41:41.715Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:41:41.715Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:41:41.715Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:41:41.715Z]     at Generator.next (<anonymous>).
[2025-08-21T19:41:41.715Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.715Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '36137440-9548-492d-a9b4-45d5a5794df9'.
[2025-08-21T19:41:41.715Z] Result: Failure
[2025-08-21T19:41:41.715Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:41.715Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:41:41.715Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:41:41.715Z]                    ^^^^^
[2025-08-21T19:41:41.715Z] 
[2025-08-21T19:41:41.715Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:41:41.715Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:41:41.715Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:41:41.715Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:41:41.715Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:41:41.715Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:41:41.715Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:41:41.715Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.715Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:41:41.715Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:41:41.715Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.715Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:41:41.715Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.715Z]     at Generator.next (<anonymous>).
[2025-08-21T19:41:41.716Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.716Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.716Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.716Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.716Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.716Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.716Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.716Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.716Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.716Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 received FunctionLoadRequest
[2025-08-21T19:41:41.720Z] Host restarted.
[2025-08-21T19:41:46.420Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:41:48.973Z] Restarting host.
[2025-08-21T19:41:48.977Z] Stopping JobHost
[2025-08-21T19:41:48.978Z] Job host stopped
[2025-08-21T19:41:48.980Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '2011fdbd-5cf4-487b-9920-4e8382d26bee'
[2025-08-21T19:41:49.066Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:41:49.066Z] Host configuration file read:
[2025-08-21T19:41:49.066Z] {
[2025-08-21T19:41:49.066Z]   "version": "2.0",
[2025-08-21T19:41:49.066Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:41:49.066Z]   "logging": {
[2025-08-21T19:41:49.066Z]     "applicationInsights": {
[2025-08-21T19:41:49.066Z]       "samplingSettings": {
[2025-08-21T19:41:49.066Z]         "isEnabled": true,
[2025-08-21T19:41:49.066Z]         "excludedTypes": "Request"
[2025-08-21T19:41:49.066Z]       }
[2025-08-21T19:41:49.066Z]     },
[2025-08-21T19:41:49.066Z]     "logLevel": {
[2025-08-21T19:41:49.066Z]       "default": "Information",
[2025-08-21T19:41:49.066Z]       "Host.Results": "Information",
[2025-08-21T19:41:49.066Z]       "Function": "Information"
[2025-08-21T19:41:49.066Z]     }
[2025-08-21T19:41:49.066Z]   },
[2025-08-21T19:41:49.066Z]   "extensionBundle": {
[2025-08-21T19:41:49.066Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:41:49.066Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:41:49.066Z]   },
[2025-08-21T19:41:49.066Z]   "watchDirectories": [
[2025-08-21T19:41:49.066Z]     "Shared"
[2025-08-21T19:41:49.066Z]   ]
[2025-08-21T19:41:49.066Z] }
[2025-08-21T19:41:49.067Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:41:49.068Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:49.068Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:49.068Z] Loading functions metadata
[2025-08-21T19:41:49.068Z] Worker indexing is enabled
[2025-08-21T19:41:49.068Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:41:49.068Z] Reading functions metadata (Worker)
[2025-08-21T19:41:49.068Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:41:49.071Z] Worker 328490ea-dc86-41eb-ab73-85e7800db099 exited with code 0
[2025-08-21T19:41:49.188Z] Worker 93dda333-d147-4530-95e7-464137ccb31c connecting on 127.0.0.1:54302
[2025-08-21T19:41:49.210Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received WorkerInitRequest
[2025-08-21T19:41:49.213Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionsMetadataRequest
[2025-08-21T19:41:49.213Z] Reading functions metadata (Host)
[2025-08-21T19:41:49.425Z] 21 functions found (Host)
[2025-08-21T19:41:49.425Z] 21 functions loaded
[2025-08-21T19:41:49.425Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:41:49.425Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:49.426Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:49.426Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:41:49.579Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:41:49.579Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:41:49.579Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:41:49.579Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:41:49.619Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:41:49.619Z] Host configuration file read:
[2025-08-21T19:41:49.619Z] {
[2025-08-21T19:41:49.619Z]   "version": "2.0",
[2025-08-21T19:41:49.619Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:41:49.619Z]   "logging": {
[2025-08-21T19:41:49.619Z]     "applicationInsights": {
[2025-08-21T19:41:49.619Z]       "samplingSettings": {
[2025-08-21T19:41:49.619Z]         "isEnabled": true,
[2025-08-21T19:41:49.619Z]         "excludedTypes": "Request"
[2025-08-21T19:41:49.619Z]       }
[2025-08-21T19:41:49.619Z]     },
[2025-08-21T19:41:49.619Z]     "logLevel": {
[2025-08-21T19:41:49.619Z]       "default": "Information",
[2025-08-21T19:41:49.619Z]       "Host.Results": "Information",
[2025-08-21T19:41:49.619Z]       "Function": "Information"
[2025-08-21T19:41:49.619Z]     }
[2025-08-21T19:41:49.619Z]   },
[2025-08-21T19:41:49.619Z]   "extensionBundle": {
[2025-08-21T19:41:49.619Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:41:49.619Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:41:49.619Z]   },
[2025-08-21T19:41:49.619Z]   "watchDirectories": [
[2025-08-21T19:41:49.619Z]     "Shared"
[2025-08-21T19:41:49.619Z]   ]
[2025-08-21T19:41:49.619Z] }
[2025-08-21T19:41:49.660Z] Initializing Warmup Extension.
[2025-08-21T19:41:49.661Z] Initializing Host. OperationId: '2011fdbd-5cf4-487b-9920-4e8382d26bee'.
[2025-08-21T19:41:49.661Z] Host initialization: ConsecutiveErrors=0, StartupCount=22, OperationId=2011fdbd-5cf4-487b-9920-4e8382d26bee
[2025-08-21T19:41:49.662Z] LoggerFilterOptions
[2025-08-21T19:41:49.662Z] {
[2025-08-21T19:41:49.663Z]   "MinLevel": "None",
[2025-08-21T19:41:49.663Z]   "Rules": [
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:41:49.663Z]       "LogLevel": "None",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": "None",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": null,
[2025-08-21T19:41:49.663Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": null,
[2025-08-21T19:41:49.663Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": null,
[2025-08-21T19:41:49.663Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": "Host.Results",
[2025-08-21T19:41:49.663Z]       "LogLevel": "Information",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": "Function",
[2025-08-21T19:41:49.663Z]       "LogLevel": "Information",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": "Information",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": "None",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": null,
[2025-08-21T19:41:49.663Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": null,
[2025-08-21T19:41:49.663Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:49.663Z]     }
[2025-08-21T19:41:49.663Z]   ]
[2025-08-21T19:41:49.663Z] }
[2025-08-21T19:41:49.663Z] LoggerFilterOptions
[2025-08-21T19:41:49.663Z] {
[2025-08-21T19:41:49.663Z]   "MinLevel": "None",
[2025-08-21T19:41:49.663Z]   "Rules": [
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:41:49.663Z]       "LogLevel": "None",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": "None",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": null,
[2025-08-21T19:41:49.663Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": null,
[2025-08-21T19:41:49.663Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": null,
[2025-08-21T19:41:49.663Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": "Host.Results",
[2025-08-21T19:41:49.663Z]       "LogLevel": "Information",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": "Function",
[2025-08-21T19:41:49.663Z]       "LogLevel": "Information",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": null,
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": "Information",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": "None",
[2025-08-21T19:41:49.663Z]       "Filter": null
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:41:49.663Z]       "CategoryName": null,
[2025-08-21T19:41:49.663Z]       "LogLevel": null,
[2025-08-21T19:41:49.663Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:49.663Z]     },
[2025-08-21T19:41:49.663Z]     {
[2025-08-21T19:41:49.663Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:41:49.664Z]       "CategoryName": null,
[2025-08-21T19:41:49.664Z]       "LogLevel": null,
[2025-08-21T19:41:49.664Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:41:49.664Z]     }
[2025-08-21T19:41:49.664Z]   ]
[2025-08-21T19:41:49.664Z] }
[2025-08-21T19:41:49.664Z] FunctionResultAggregatorOptions
[2025-08-21T19:41:49.664Z] {
[2025-08-21T19:41:49.664Z]   "BatchSize": 1000,
[2025-08-21T19:41:49.664Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:41:49.664Z]   "IsEnabled": true
[2025-08-21T19:41:49.664Z] }
[2025-08-21T19:41:49.664Z] ConcurrencyOptions
[2025-08-21T19:41:49.664Z] {
[2025-08-21T19:41:49.664Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:41:49.664Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:41:49.664Z]   "CPUThreshold": 0.8,
[2025-08-21T19:41:49.664Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:41:49.664Z] }
[2025-08-21T19:41:49.664Z] SingletonOptions
[2025-08-21T19:41:49.664Z] {
[2025-08-21T19:41:49.664Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:41:49.664Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:41:49.664Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:41:49.664Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:41:49.664Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:41:49.664Z] }
[2025-08-21T19:41:49.664Z] ScaleOptions
[2025-08-21T19:41:49.664Z] {
[2025-08-21T19:41:49.664Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:41:49.664Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:41:49.664Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:41:49.664Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:41:49.664Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:41:49.664Z] }
[2025-08-21T19:41:49.664Z] Starting JobHost
[2025-08-21T19:41:49.664Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=fbb8dcc4-851e-4274-8a6d-26dc4575b670, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:41:49.664Z] Loading functions metadata
[2025-08-21T19:41:49.664Z] Worker indexing is enabled
[2025-08-21T19:41:49.664Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:41:49.664Z] Reading functions metadata (Worker)
[2025-08-21T19:41:49.664Z] Reading functions metadata (Host)
[2025-08-21T19:41:49.856Z] 21 functions found (Host)
[2025-08-21T19:41:49.856Z] Reading functions metadata (Custom)
[2025-08-21T19:41:49.856Z] 0 functions found (Custom)
[2025-08-21T19:41:49.856Z] 21 functions loaded
[2025-08-21T19:41:49.857Z] Generating 21 job function(s)
[2025-08-21T19:41:49.857Z] Worker process started and initialized.
[2025-08-21T19:41:49.864Z] Found the following functions:
[2025-08-21T19:41:49.864Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:41:49.864Z] Host.Functions.analytics
[2025-08-21T19:41:49.864Z] Host.Functions.analyzeUIImage
[2025-08-21T19:41:49.864Z] Host.Functions.atlasComponents
[2025-08-21T19:41:49.864Z] Host.Functions.fast-suggestions
[2025-08-21T19:41:49.864Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:41:49.864Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:41:49.864Z] Host.Functions.generateSuggestions
[2025-08-21T19:41:49.864Z] Host.Functions.generateWireframe
[2025-08-21T19:41:49.864Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:41:49.864Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:41:49.864Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:41:49.864Z] Host.Functions.get-template
[2025-08-21T19:41:49.864Z] Host.Functions.githubAuthCallback
[2025-08-21T19:41:49.864Z] Host.Functions.githubAuthStart
[2025-08-21T19:41:49.864Z] Host.Functions.health
[2025-08-21T19:41:49.864Z] Host.Functions.healthCheck
[2025-08-21T19:41:49.864Z] Host.Functions.openai-health
[2025-08-21T19:41:49.864Z] Host.Functions.performance-stats
[2025-08-21T19:41:49.864Z] Host.Functions.testFunction
[2025-08-21T19:41:49.864Z] Host.Functions.testSimple
[2025-08-21T19:41:49.864Z] 
[2025-08-21T19:41:49.864Z] HttpOptions
[2025-08-21T19:41:49.864Z] {
[2025-08-21T19:41:49.864Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:41:49.864Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:41:49.864Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:41:49.864Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:41:49.864Z]   "RoutePrefix": "api"
[2025-08-21T19:41:49.864Z] }
[2025-08-21T19:41:49.864Z] Initializing function HTTP routes
[2025-08-21T19:41:49.864Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:41:49.864Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:41:49.864Z] 
[2025-08-21T19:41:49.864Z] Host initialized (200ms)
[2025-08-21T19:41:49.864Z] Host started (200ms)
[2025-08-21T19:41:49.864Z] Job host started
[2025-08-21T19:41:49.864Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:41:49.864Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:41:49.893Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:41:49.893Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:41:49.894Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:49.894Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:41:49.927Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:41:49.927Z] 🔍 Current env vars:
[2025-08-21T19:41:49.927Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:41:49.927Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:41:49.927Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:41:49.927Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:49.927Z]   Deployment: gpt-4o
[2025-08-21T19:41:49.927Z]   API Version: 2024-08-01-preview
[2025-08-21T19:41:49.927Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:41:49.927Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:41:49.927Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:41:49.927Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:41:49.927Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:41:49.928Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:41:49.934Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.934Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.934Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.934Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.934Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:49.935Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '707e857b-9f7a-4e7e-a038-da7bce991da7'.
[2025-08-21T19:41:49.935Z] Result: Failure
[2025-08-21T19:41:49.935Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:49.935Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:41:49.935Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:41:49.935Z]                    ^^^^^
[2025-08-21T19:41:49.935Z] 
[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:49.935Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '4ef84235-9e9a-4de7-b721-cc972ac30f39'.
[2025-08-21T19:41:49.935Z] Result: Failure
[2025-08-21T19:41:49.935Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:41:49.935Z] SyntaxError: await is only valid in async functions and the top level bodies of modules[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:41:49.935Z] const figmaSetup = await import("../../figma-oauth2-setup.js");

[2025-08-21T19:41:49.935Z]                    ^^^^^
[2025-08-21T19:41:49.935Z] 

[2025-08-21T19:41:49.935Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:41:49.935Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:41:49.935Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:41:49.935Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:41:49.935Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:41:49.935Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:41:49.935Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:41:49.935Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:41:49.935Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:41:49.935Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:41:49.935Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:41:49.935Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:41:49.935Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:41:49.935Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:41:49.935Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:41:49.935Z]     at Generator.next (<anonymous>).
[2025-08-21T19:41:49.935Z]     at require (node:internal/modules/helpers:179:18)[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest

[2025-08-21T19:41:49.935Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:41:49.935Z]     at Generator.next (<anonymous>).
[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.935Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.936Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.936Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.936Z] Worker 93dda333-d147-4530-95e7-464137ccb31c received FunctionLoadRequest
[2025-08-21T19:41:49.942Z] Host restarted.
[2025-08-21T19:41:54.664Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:42:02.112Z] Restarting host.
[2025-08-21T19:42:02.120Z] Stopping JobHost
[2025-08-21T19:42:02.121Z] Job host stopped
[2025-08-21T19:42:02.124Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '3d6e5c22-16c6-48df-9912-35341ed0f134'
[2025-08-21T19:42:02.214Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:42:02.214Z] Host configuration file read:
[2025-08-21T19:42:02.214Z] {
[2025-08-21T19:42:02.214Z]   "version": "2.0",
[2025-08-21T19:42:02.214Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:42:02.214Z]   "logging": {
[2025-08-21T19:42:02.214Z]     "applicationInsights": {
[2025-08-21T19:42:02.214Z]       "samplingSettings": {
[2025-08-21T19:42:02.214Z]         "isEnabled": true,
[2025-08-21T19:42:02.214Z]         "excludedTypes": "Request"
[2025-08-21T19:42:02.214Z]       }
[2025-08-21T19:42:02.214Z]     },
[2025-08-21T19:42:02.214Z]     "logLevel": {
[2025-08-21T19:42:02.214Z]       "default": "Information",
[2025-08-21T19:42:02.214Z]       "Host.Results": "Information",
[2025-08-21T19:42:02.214Z]       "Function": "Information"
[2025-08-21T19:42:02.214Z]     }
[2025-08-21T19:42:02.214Z]   },
[2025-08-21T19:42:02.214Z]   "extensionBundle": {
[2025-08-21T19:42:02.214Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:42:02.214Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:42:02.214Z]   },
[2025-08-21T19:42:02.214Z]   "watchDirectories": [
[2025-08-21T19:42:02.214Z]     "Shared"
[2025-08-21T19:42:02.214Z]   ]
[2025-08-21T19:42:02.214Z] }
[2025-08-21T19:42:02.215Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:42:02.216Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:42:02.216Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:42:02.216Z] Loading functions metadata
[2025-08-21T19:42:02.216Z] Worker indexing is enabled
[2025-08-21T19:42:02.216Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:42:02.216Z] Reading functions metadata (Worker)
[2025-08-21T19:42:02.216Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:42:02.219Z] Worker 93dda333-d147-4530-95e7-464137ccb31c exited with code 0
[2025-08-21T19:42:02.358Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 connecting on 127.0.0.1:54302
[2025-08-21T19:42:02.390Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received WorkerInitRequest
[2025-08-21T19:42:02.391Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionsMetadataRequest
[2025-08-21T19:42:02.391Z] Reading functions metadata (Host)
[2025-08-21T19:42:02.612Z] 21 functions found (Host)
[2025-08-21T19:42:02.612Z] 21 functions loaded
[2025-08-21T19:42:02.612Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:42:02.613Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:42:02.613Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:42:02.613Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:42:02.760Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:42:02.761Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:42:02.761Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:42:02.761Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:42:02.800Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:42:02.800Z] Host configuration file read:
[2025-08-21T19:42:02.800Z] {
[2025-08-21T19:42:02.800Z]   "version": "2.0",
[2025-08-21T19:42:02.800Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:42:02.800Z]   "logging": {
[2025-08-21T19:42:02.800Z]     "applicationInsights": {
[2025-08-21T19:42:02.800Z]       "samplingSettings": {
[2025-08-21T19:42:02.800Z]         "isEnabled": true,
[2025-08-21T19:42:02.800Z]         "excludedTypes": "Request"
[2025-08-21T19:42:02.800Z]       }
[2025-08-21T19:42:02.800Z]     },
[2025-08-21T19:42:02.800Z]     "logLevel": {
[2025-08-21T19:42:02.800Z]       "default": "Information",
[2025-08-21T19:42:02.800Z]       "Host.Results": "Information",
[2025-08-21T19:42:02.800Z]       "Function": "Information"
[2025-08-21T19:42:02.800Z]     }
[2025-08-21T19:42:02.800Z]   },
[2025-08-21T19:42:02.800Z]   "extensionBundle": {
[2025-08-21T19:42:02.800Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:42:02.800Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:42:02.800Z]   },
[2025-08-21T19:42:02.800Z]   "watchDirectories": [
[2025-08-21T19:42:02.800Z]     "Shared"
[2025-08-21T19:42:02.800Z]   ]
[2025-08-21T19:42:02.800Z] }
[2025-08-21T19:42:02.842Z] Initializing Warmup Extension.
[2025-08-21T19:42:02.842Z] Initializing Host. OperationId: '3d6e5c22-16c6-48df-9912-35341ed0f134'.
[2025-08-21T19:42:02.843Z] Host initialization: ConsecutiveErrors=0, StartupCount=23, OperationId=3d6e5c22-16c6-48df-9912-35341ed0f134
[2025-08-21T19:42:02.845Z] LoggerFilterOptions
[2025-08-21T19:42:02.845Z] {
[2025-08-21T19:42:02.845Z]   "MinLevel": "None",
[2025-08-21T19:42:02.845Z]   "Rules": [
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": null,
[2025-08-21T19:42:02.845Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:42:02.845Z]       "LogLevel": "None",
[2025-08-21T19:42:02.845Z]       "Filter": null
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:42:02.845Z]       "CategoryName": null,
[2025-08-21T19:42:02.845Z]       "LogLevel": "None",
[2025-08-21T19:42:02.845Z]       "Filter": null
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:42:02.845Z]       "CategoryName": null,
[2025-08-21T19:42:02.845Z]       "LogLevel": null,
[2025-08-21T19:42:02.845Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": null,
[2025-08-21T19:42:02.845Z]       "CategoryName": null,
[2025-08-21T19:42:02.845Z]       "LogLevel": null,
[2025-08-21T19:42:02.845Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": null,
[2025-08-21T19:42:02.845Z]       "CategoryName": null,
[2025-08-21T19:42:02.845Z]       "LogLevel": null,
[2025-08-21T19:42:02.845Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": null,
[2025-08-21T19:42:02.845Z]       "CategoryName": "Host.Results",
[2025-08-21T19:42:02.845Z]       "LogLevel": "Information",
[2025-08-21T19:42:02.845Z]       "Filter": null
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": null,
[2025-08-21T19:42:02.845Z]       "CategoryName": "Function",
[2025-08-21T19:42:02.845Z]       "LogLevel": "Information",
[2025-08-21T19:42:02.845Z]       "Filter": null
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": null,
[2025-08-21T19:42:02.845Z]       "CategoryName": null,
[2025-08-21T19:42:02.845Z]       "LogLevel": "Information",
[2025-08-21T19:42:02.845Z]       "Filter": null
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:42:02.845Z]       "CategoryName": null,
[2025-08-21T19:42:02.845Z]       "LogLevel": "None",
[2025-08-21T19:42:02.845Z]       "Filter": null
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:42:02.845Z]       "CategoryName": null,
[2025-08-21T19:42:02.845Z]       "LogLevel": null,
[2025-08-21T19:42:02.845Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:42:02.845Z]       "CategoryName": null,
[2025-08-21T19:42:02.845Z]       "LogLevel": null,
[2025-08-21T19:42:02.845Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:42:02.845Z]     }
[2025-08-21T19:42:02.845Z]   ]
[2025-08-21T19:42:02.845Z] }
[2025-08-21T19:42:02.845Z] LoggerFilterOptions
[2025-08-21T19:42:02.845Z] {
[2025-08-21T19:42:02.845Z]   "MinLevel": "None",
[2025-08-21T19:42:02.845Z]   "Rules": [
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": null,
[2025-08-21T19:42:02.845Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:42:02.845Z]       "LogLevel": "None",
[2025-08-21T19:42:02.845Z]       "Filter": null
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:42:02.845Z]       "CategoryName": null,
[2025-08-21T19:42:02.845Z]       "LogLevel": "None",
[2025-08-21T19:42:02.845Z]       "Filter": null
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.845Z]     {
[2025-08-21T19:42:02.845Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:42:02.845Z]       "CategoryName": null,
[2025-08-21T19:42:02.845Z]       "LogLevel": null,
[2025-08-21T19:42:02.845Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:42:02.845Z]     },
[2025-08-21T19:42:02.846Z]     {
[2025-08-21T19:42:02.846Z]       "ProviderName": null,
[2025-08-21T19:42:02.846Z]       "CategoryName": null,
[2025-08-21T19:42:02.846Z]       "LogLevel": null,
[2025-08-21T19:42:02.846Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:42:02.846Z]     },
[2025-08-21T19:42:02.846Z]     {
[2025-08-21T19:42:02.846Z]       "ProviderName": null,
[2025-08-21T19:42:02.846Z]       "CategoryName": null,
[2025-08-21T19:42:02.846Z]       "LogLevel": null,
[2025-08-21T19:42:02.846Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:42:02.846Z]     },
[2025-08-21T19:42:02.846Z]     {
[2025-08-21T19:42:02.846Z]       "ProviderName": null,
[2025-08-21T19:42:02.846Z]       "CategoryName": "Host.Results",
[2025-08-21T19:42:02.846Z]       "LogLevel": "Information",
[2025-08-21T19:42:02.846Z]       "Filter": null
[2025-08-21T19:42:02.846Z]     },
[2025-08-21T19:42:02.846Z]     {
[2025-08-21T19:42:02.846Z]       "ProviderName": null,
[2025-08-21T19:42:02.846Z]       "CategoryName": "Function",
[2025-08-21T19:42:02.846Z]       "LogLevel": "Information",
[2025-08-21T19:42:02.846Z]       "Filter": null
[2025-08-21T19:42:02.846Z]     },
[2025-08-21T19:42:02.846Z]     {
[2025-08-21T19:42:02.846Z]       "ProviderName": null,
[2025-08-21T19:42:02.846Z]       "CategoryName": null,
[2025-08-21T19:42:02.846Z]       "LogLevel": "Information",
[2025-08-21T19:42:02.846Z]       "Filter": null
[2025-08-21T19:42:02.846Z]     },
[2025-08-21T19:42:02.846Z]     {
[2025-08-21T19:42:02.846Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:42:02.846Z]       "CategoryName": null,
[2025-08-21T19:42:02.846Z]       "LogLevel": "None",
[2025-08-21T19:42:02.846Z]       "Filter": null
[2025-08-21T19:42:02.846Z]     },
[2025-08-21T19:42:02.846Z]     {
[2025-08-21T19:42:02.846Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:42:02.846Z]       "CategoryName": null,
[2025-08-21T19:42:02.846Z]       "LogLevel": null,
[2025-08-21T19:42:02.846Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:42:02.846Z]     },
[2025-08-21T19:42:02.846Z]     {
[2025-08-21T19:42:02.846Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:42:02.846Z]       "CategoryName": null,
[2025-08-21T19:42:02.846Z]       "LogLevel": null,
[2025-08-21T19:42:02.846Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:42:02.846Z]     }
[2025-08-21T19:42:02.846Z]   ]
[2025-08-21T19:42:02.846Z] }
[2025-08-21T19:42:02.846Z] FunctionResultAggregatorOptions
[2025-08-21T19:42:02.846Z] {
[2025-08-21T19:42:02.846Z]   "BatchSize": 1000,
[2025-08-21T19:42:02.846Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:42:02.846Z]   "IsEnabled": true
[2025-08-21T19:42:02.846Z] }
[2025-08-21T19:42:02.846Z] ConcurrencyOptions
[2025-08-21T19:42:02.846Z] {
[2025-08-21T19:42:02.846Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:42:02.846Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:42:02.846Z]   "CPUThreshold": 0.8,
[2025-08-21T19:42:02.846Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:42:02.846Z] }
[2025-08-21T19:42:02.846Z] SingletonOptions
[2025-08-21T19:42:02.846Z] {
[2025-08-21T19:42:02.846Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:42:02.846Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:42:02.846Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:42:02.846Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:42:02.846Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:42:02.846Z] }
[2025-08-21T19:42:02.846Z] ScaleOptions
[2025-08-21T19:42:02.846Z] {
[2025-08-21T19:42:02.846Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:42:02.846Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:42:02.846Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:42:02.846Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:42:02.846Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:42:02.846Z] }
[2025-08-21T19:42:02.846Z] Starting JobHost
[2025-08-21T19:42:02.846Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=34b298e2-2e1e-4d28-8f90-5bcdc092152b, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:42:02.846Z] Loading functions metadata
[2025-08-21T19:42:02.846Z] Worker indexing is enabled
[2025-08-21T19:42:02.846Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:42:02.846Z] Reading functions metadata (Worker)
[2025-08-21T19:42:02.846Z] Reading functions metadata (Host)
[2025-08-21T19:42:03.049Z] 21 functions found (Host)
[2025-08-21T19:42:03.049Z] Reading functions metadata (Custom)
[2025-08-21T19:42:03.050Z] 0 functions found (Custom)
[2025-08-21T19:42:03.050Z] 21 functions loaded
[2025-08-21T19:42:03.053Z] Worker process started and initialized.
[2025-08-21T19:42:03.053Z] Generating 21 job function(s)
[2025-08-21T19:42:03.069Z] Found the following functions:
[2025-08-21T19:42:03.069Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:42:03.069Z] Host.Functions.analytics
[2025-08-21T19:42:03.069Z] Host.Functions.analyzeUIImage
[2025-08-21T19:42:03.069Z] Host.Functions.atlasComponents
[2025-08-21T19:42:03.069Z] Host.Functions.fast-suggestions
[2025-08-21T19:42:03.069Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:42:03.069Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:42:03.069Z] Host.Functions.generateSuggestions
[2025-08-21T19:42:03.069Z] Host.Functions.generateWireframe
[2025-08-21T19:42:03.069Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:42:03.069Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:42:03.069Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:42:03.069Z] Host.Functions.get-template
[2025-08-21T19:42:03.069Z] Host.Functions.githubAuthCallback
[2025-08-21T19:42:03.069Z] Host.Functions.githubAuthStart
[2025-08-21T19:42:03.069Z] Host.Functions.health
[2025-08-21T19:42:03.069Z] Host.Functions.healthCheck
[2025-08-21T19:42:03.069Z] Host.Functions.openai-health
[2025-08-21T19:42:03.069Z] Host.Functions.performance-stats
[2025-08-21T19:42:03.069Z] Host.Functions.testFunction
[2025-08-21T19:42:03.069Z] Host.Functions.testSimple
[2025-08-21T19:42:03.069Z] 
[2025-08-21T19:42:03.069Z] HttpOptions
[2025-08-21T19:42:03.069Z] {
[2025-08-21T19:42:03.069Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:42:03.069Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:42:03.069Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:42:03.069Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:42:03.070Z]   "RoutePrefix": "api"
[2025-08-21T19:42:03.070Z] }
[2025-08-21T19:42:03.070Z] Initializing function HTTP routes
[2025-08-21T19:42:03.070Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:42:03.070Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:42:03.070Z] 
[2025-08-21T19:42:03.070Z] Host initialized (223ms)
[2025-08-21T19:42:03.070Z] Host started (223ms)
[2025-08-21T19:42:03.070Z] Job host started
[2025-08-21T19:42:03.070Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:42:03.070Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:42:03.106Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:42:03.107Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:42:03.107Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:42:03.107Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:42:03.145Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:42:03.145Z] 🔍 Current env vars:
[2025-08-21T19:42:03.145Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:42:03.145Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:42:03.145Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:42:03.145Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:42:03.145Z]   Deployment: gpt-4o
[2025-08-21T19:42:03.145Z]   API Version: 2024-08-01-preview
[2025-08-21T19:42:03.145Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:42:03.145Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:42:03.145Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:42:03.145Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:42:03.145Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:42:03.147Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:42:03.152Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.152Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.152Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.152Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.152Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.153Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.153Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:42:03.153Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '54ed0a79-d39f-4ee4-9832-2c5bf0d43ee9'.
[2025-08-21T19:42:03.153Z] Result: Failure
[2025-08-21T19:42:03.153Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.153Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:42:03.153Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:42:03.153Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:42:03.153Z]                    ^^^^^
[2025-08-21T19:42:03.153Z] 
[2025-08-21T19:42:03.153Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:42:03.153Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:42:03.153Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:42:03.153Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:42:03.153Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:42:03.153Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:42:03.153Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:42:03.153Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:42:03.153Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:42:03.153Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:42:03.153Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:42:03.153Z]     at Generator.next (<anonymous>).
[2025-08-21T19:42:03.153Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.153Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'ad1e84d9-6c74-4a55-952c-ac6f8e2a8dbf'.
[2025-08-21T19:42:03.153Z] Result: Failure
[2025-08-21T19:42:03.153Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:42:03.153Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:42:03.153Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:42:03.153Z]                    ^^^^^
[2025-08-21T19:42:03.153Z] 
[2025-08-21T19:42:03.153Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:42:03.153Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:42:03.153Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:42:03.153Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.153Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:42:03.153Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:42:03.153Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.153Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.153Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.153Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:42:03.153Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:42:03.153Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:42:03.153Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.153Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:42:03.153Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:42:03.154Z]     at Generator.next (<anonymous>).
[2025-08-21T19:42:03.154Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.154Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.154Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.154Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.154Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.154Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.154Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.154Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionLoadRequest
[2025-08-21T19:42:03.172Z] Host restarted.
[2025-08-21T19:42:07.850Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:43:01.871Z] Executing HTTP request: {
[2025-08-21T19:43:01.872Z]   "requestId": "4c3f51b3-87c0-4248-a26e-b4dbb76dd750",
[2025-08-21T19:43:01.872Z]   "method": "POST",
[2025-08-21T19:43:01.872Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:43:01.872Z]   "uri": "/api/generate-wireframe-enhanced"
[2025-08-21T19:43:01.872Z] }
[2025-08-21T19:43:01.888Z] Executing 'Functions.generateWireframeEnhanced' (Reason='This function was programmatically called via the host APIs.', Id=5d9db233-30de-4d6f-a6cb-062227d1e826)
[2025-08-21T19:43:01.993Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 received FunctionInvocationRequest with invocationId 5d9db233-30de-4d6f-a6cb-062227d1e826
[2025-08-21T19:43:10.308Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:43:10.308Z] 🔍 Atlas component check (ENHANCED):
[2025-08-21T19:43:10.308Z]     Description: "Create Microsoft Learn's learning path overview with module cards and progress tracking"
[2025-08-21T19:43:10.308Z]     Contains learning keywords: true
[2025-08-21T19:43:10.308Z]     Is hero section exclusion: false
[2025-08-21T19:43:10.308Z]     Final isLearningPlatform: true
[2025-08-21T19:43:10.308Z] ✅ Added Atlas learning content section
[2025-08-21T19:43:10.308Z] 🎯 Atlas components added: Hero: 0, Modules: 4, Learning Paths: 2
[2025-08-21T19:43:10.323Z] Executed 'Functions.generateWireframeEnhanced' (Succeeded, Id=5d9db233-30de-4d6f-a6cb-062227d1e826, Duration=8438ms)
[2025-08-21T19:43:10.326Z] Executed HTTP request: {
[2025-08-21T19:43:10.326Z]   "requestId": "4c3f51b3-87c0-4248-a26e-b4dbb76dd750",
[2025-08-21T19:43:10.326Z]   "identities": "",
[2025-08-21T19:43:10.326Z]   "status": "200",
[2025-08-21T19:43:10.326Z]   "duration": "8455"
[2025-08-21T19:43:10.326Z] }
[2025-08-21T19:43:24.645Z] Restarting host.
[2025-08-21T19:43:24.649Z] Stopping JobHost
[2025-08-21T19:43:24.649Z] Job host stopped
[2025-08-21T19:43:24.651Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '6998bbfb-84bc-4e28-b774-f5044c08bd98'
[2025-08-21T19:43:24.728Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:43:24.728Z] Host configuration file read:
[2025-08-21T19:43:24.728Z] {
[2025-08-21T19:43:24.728Z]   "version": "2.0",
[2025-08-21T19:43:24.728Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:43:24.728Z]   "logging": {
[2025-08-21T19:43:24.728Z]     "applicationInsights": {
[2025-08-21T19:43:24.728Z]       "samplingSettings": {
[2025-08-21T19:43:24.728Z]         "isEnabled": true,
[2025-08-21T19:43:24.728Z]         "excludedTypes": "Request"
[2025-08-21T19:43:24.728Z]       }
[2025-08-21T19:43:24.728Z]     },
[2025-08-21T19:43:24.728Z]     "logLevel": {
[2025-08-21T19:43:24.728Z]       "default": "Information",
[2025-08-21T19:43:24.728Z]       "Host.Results": "Information",
[2025-08-21T19:43:24.728Z]       "Function": "Information"
[2025-08-21T19:43:24.728Z]     }
[2025-08-21T19:43:24.728Z]   },
[2025-08-21T19:43:24.728Z]   "extensionBundle": {
[2025-08-21T19:43:24.728Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:43:24.728Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:43:24.728Z]   },
[2025-08-21T19:43:24.728Z]   "watchDirectories": [
[2025-08-21T19:43:24.728Z]     "Shared"
[2025-08-21T19:43:24.728Z]   ]
[2025-08-21T19:43:24.728Z] }
[2025-08-21T19:43:24.731Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:43:24.731Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:43:24.731Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:43:24.731Z] Loading functions metadata
[2025-08-21T19:43:24.731Z] Worker indexing is enabled
[2025-08-21T19:43:24.731Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:43:24.731Z] Reading functions metadata (Worker)
[2025-08-21T19:43:24.731Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:43:24.744Z] Worker e161167d-87b1-41c1-9b4f-541f4ad46698 exited with code 0
[2025-08-21T19:43:24.993Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad connecting on 127.0.0.1:54302
[2025-08-21T19:43:25.021Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received WorkerInitRequest
[2025-08-21T19:43:25.024Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionsMetadataRequest
[2025-08-21T19:43:25.024Z] Reading functions metadata (Host)
[2025-08-21T19:43:25.253Z] 21 functions found (Host)
[2025-08-21T19:43:25.253Z] 21 functions loaded
[2025-08-21T19:43:25.253Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:43:25.254Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:43:25.254Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:43:25.254Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:43:25.446Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:43:25.446Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:43:25.447Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:43:25.447Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:43:25.501Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:43:25.501Z] Host configuration file read:
[2025-08-21T19:43:25.501Z] {
[2025-08-21T19:43:25.501Z]   "version": "2.0",
[2025-08-21T19:43:25.501Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:43:25.501Z]   "logging": {
[2025-08-21T19:43:25.501Z]     "applicationInsights": {
[2025-08-21T19:43:25.501Z]       "samplingSettings": {
[2025-08-21T19:43:25.501Z]         "isEnabled": true,
[2025-08-21T19:43:25.501Z]         "excludedTypes": "Request"
[2025-08-21T19:43:25.501Z]       }
[2025-08-21T19:43:25.501Z]     },
[2025-08-21T19:43:25.501Z]     "logLevel": {
[2025-08-21T19:43:25.501Z]       "default": "Information",
[2025-08-21T19:43:25.501Z]       "Host.Results": "Information",
[2025-08-21T19:43:25.501Z]       "Function": "Information"
[2025-08-21T19:43:25.501Z]     }
[2025-08-21T19:43:25.501Z]   },
[2025-08-21T19:43:25.501Z]   "extensionBundle": {
[2025-08-21T19:43:25.501Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:43:25.501Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:43:25.501Z]   },
[2025-08-21T19:43:25.501Z]   "watchDirectories": [
[2025-08-21T19:43:25.501Z]     "Shared"
[2025-08-21T19:43:25.501Z]   ]
[2025-08-21T19:43:25.501Z] }
[2025-08-21T19:43:25.569Z] Initializing Warmup Extension.
[2025-08-21T19:43:25.571Z] Initializing Host. OperationId: '6998bbfb-84bc-4e28-b774-f5044c08bd98'.
[2025-08-21T19:43:25.572Z] Host initialization: ConsecutiveErrors=0, StartupCount=24, OperationId=6998bbfb-84bc-4e28-b774-f5044c08bd98
[2025-08-21T19:43:25.575Z] LoggerFilterOptions
[2025-08-21T19:43:25.575Z] {
[2025-08-21T19:43:25.575Z]   "MinLevel": "None",
[2025-08-21T19:43:25.576Z]   "Rules": [
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": null,
[2025-08-21T19:43:25.576Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:43:25.576Z]       "LogLevel": "None",
[2025-08-21T19:43:25.576Z]       "Filter": null
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": "None",
[2025-08-21T19:43:25.576Z]       "Filter": null
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": null,
[2025-08-21T19:43:25.576Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": null,
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": null,
[2025-08-21T19:43:25.576Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": null,
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": null,
[2025-08-21T19:43:25.576Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": null,
[2025-08-21T19:43:25.576Z]       "CategoryName": "Host.Results",
[2025-08-21T19:43:25.576Z]       "LogLevel": "Information",
[2025-08-21T19:43:25.576Z]       "Filter": null
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": null,
[2025-08-21T19:43:25.576Z]       "CategoryName": "Function",
[2025-08-21T19:43:25.576Z]       "LogLevel": "Information",
[2025-08-21T19:43:25.576Z]       "Filter": null
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": null,
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": "Information",
[2025-08-21T19:43:25.576Z]       "Filter": null
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": "None",
[2025-08-21T19:43:25.576Z]       "Filter": null
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": null,
[2025-08-21T19:43:25.576Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": null,
[2025-08-21T19:43:25.576Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:43:25.576Z]     }
[2025-08-21T19:43:25.576Z]   ]
[2025-08-21T19:43:25.576Z] }
[2025-08-21T19:43:25.576Z] LoggerFilterOptions
[2025-08-21T19:43:25.576Z] {
[2025-08-21T19:43:25.576Z]   "MinLevel": "None",
[2025-08-21T19:43:25.576Z]   "Rules": [
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": null,
[2025-08-21T19:43:25.576Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:43:25.576Z]       "LogLevel": "None",
[2025-08-21T19:43:25.576Z]       "Filter": null
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": "None",
[2025-08-21T19:43:25.576Z]       "Filter": null
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": null,
[2025-08-21T19:43:25.576Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.576Z]     {
[2025-08-21T19:43:25.576Z]       "ProviderName": null,
[2025-08-21T19:43:25.576Z]       "CategoryName": null,
[2025-08-21T19:43:25.576Z]       "LogLevel": null,
[2025-08-21T19:43:25.576Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:43:25.576Z]     },
[2025-08-21T19:43:25.577Z]     {
[2025-08-21T19:43:25.577Z]       "ProviderName": null,
[2025-08-21T19:43:25.577Z]       "CategoryName": null,
[2025-08-21T19:43:25.577Z]       "LogLevel": null,
[2025-08-21T19:43:25.577Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:43:25.577Z]     },
[2025-08-21T19:43:25.577Z]     {
[2025-08-21T19:43:25.577Z]       "ProviderName": null,
[2025-08-21T19:43:25.577Z]       "CategoryName": "Host.Results",
[2025-08-21T19:43:25.577Z]       "LogLevel": "Information",
[2025-08-21T19:43:25.577Z]       "Filter": null
[2025-08-21T19:43:25.577Z]     },
[2025-08-21T19:43:25.577Z]     {
[2025-08-21T19:43:25.577Z]       "ProviderName": null,
[2025-08-21T19:43:25.577Z]       "CategoryName": "Function",
[2025-08-21T19:43:25.577Z]       "LogLevel": "Information",
[2025-08-21T19:43:25.577Z]       "Filter": null
[2025-08-21T19:43:25.577Z]     },
[2025-08-21T19:43:25.577Z]     {
[2025-08-21T19:43:25.577Z]       "ProviderName": null,
[2025-08-21T19:43:25.577Z]       "CategoryName": null,
[2025-08-21T19:43:25.577Z]       "LogLevel": "Information",
[2025-08-21T19:43:25.577Z]       "Filter": null
[2025-08-21T19:43:25.577Z]     },
[2025-08-21T19:43:25.577Z]     {
[2025-08-21T19:43:25.577Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:43:25.577Z]       "CategoryName": null,
[2025-08-21T19:43:25.577Z]       "LogLevel": "None",
[2025-08-21T19:43:25.577Z]       "Filter": null
[2025-08-21T19:43:25.577Z]     },
[2025-08-21T19:43:25.577Z]     {
[2025-08-21T19:43:25.577Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:43:25.577Z]       "CategoryName": null,
[2025-08-21T19:43:25.577Z]       "LogLevel": null,
[2025-08-21T19:43:25.577Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:43:25.577Z]     },
[2025-08-21T19:43:25.577Z]     {
[2025-08-21T19:43:25.577Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:43:25.577Z]       "CategoryName": null,
[2025-08-21T19:43:25.577Z]       "LogLevel": null,
[2025-08-21T19:43:25.577Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:43:25.577Z]     }
[2025-08-21T19:43:25.577Z]   ]
[2025-08-21T19:43:25.577Z] }
[2025-08-21T19:43:25.577Z] FunctionResultAggregatorOptions
[2025-08-21T19:43:25.577Z] {
[2025-08-21T19:43:25.577Z]   "BatchSize": 1000,
[2025-08-21T19:43:25.577Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:43:25.577Z]   "IsEnabled": true
[2025-08-21T19:43:25.577Z] }
[2025-08-21T19:43:25.577Z] ConcurrencyOptions
[2025-08-21T19:43:25.577Z] {
[2025-08-21T19:43:25.577Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:43:25.577Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:43:25.577Z]   "CPUThreshold": 0.8,
[2025-08-21T19:43:25.577Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:43:25.577Z] }
[2025-08-21T19:43:25.577Z] SingletonOptions
[2025-08-21T19:43:25.577Z] {
[2025-08-21T19:43:25.577Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:43:25.577Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:43:25.577Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:43:25.577Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:43:25.577Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:43:25.577Z] }
[2025-08-21T19:43:25.577Z] ScaleOptions
[2025-08-21T19:43:25.577Z] {
[2025-08-21T19:43:25.577Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:43:25.577Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:43:25.577Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:43:25.577Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:43:25.577Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:43:25.577Z] }
[2025-08-21T19:43:25.577Z] Starting JobHost
[2025-08-21T19:43:25.577Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=02b9ebd4-248d-45d0-96db-28c438312639, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:43:25.577Z] Loading functions metadata
[2025-08-21T19:43:25.577Z] Worker indexing is enabled
[2025-08-21T19:43:25.577Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:43:25.577Z] Reading functions metadata (Worker)
[2025-08-21T19:43:25.577Z] Reading functions metadata (Host)
[2025-08-21T19:43:25.786Z] 21 functions found (Host)
[2025-08-21T19:43:25.788Z] Reading functions metadata (Custom)
[2025-08-21T19:43:25.788Z] 0 functions found (Custom)
[2025-08-21T19:43:25.788Z] 21 functions loaded
[2025-08-21T19:43:25.792Z] Worker process started and initialized.
[2025-08-21T19:43:25.792Z] Generating 21 job function(s)
[2025-08-21T19:43:25.810Z] Found the following functions:
[2025-08-21T19:43:25.810Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:43:25.810Z] Host.Functions.analytics
[2025-08-21T19:43:25.810Z] Host.Functions.analyzeUIImage
[2025-08-21T19:43:25.810Z] Host.Functions.atlasComponents
[2025-08-21T19:43:25.810Z] Host.Functions.fast-suggestions
[2025-08-21T19:43:25.810Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:43:25.810Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:43:25.810Z] Host.Functions.generateSuggestions
[2025-08-21T19:43:25.810Z] Host.Functions.generateWireframe
[2025-08-21T19:43:25.810Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:43:25.810Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:43:25.810Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:43:25.810Z] Host.Functions.get-template
[2025-08-21T19:43:25.810Z] Host.Functions.githubAuthCallback
[2025-08-21T19:43:25.810Z] Host.Functions.githubAuthStart
[2025-08-21T19:43:25.810Z] Host.Functions.health
[2025-08-21T19:43:25.810Z] Host.Functions.healthCheck
[2025-08-21T19:43:25.810Z] Host.Functions.openai-health
[2025-08-21T19:43:25.810Z] Host.Functions.performance-stats
[2025-08-21T19:43:25.810Z] Host.Functions.testFunction
[2025-08-21T19:43:25.810Z] Host.Functions.testSimple
[2025-08-21T19:43:25.810Z] 
[2025-08-21T19:43:25.810Z] HttpOptions
[2025-08-21T19:43:25.810Z] {
[2025-08-21T19:43:25.810Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:43:25.810Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:43:25.810Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:43:25.810Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:43:25.810Z]   "RoutePrefix": "api"
[2025-08-21T19:43:25.810Z] }
[2025-08-21T19:43:25.811Z] Initializing function HTTP routes
[2025-08-21T19:43:25.811Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:43:25.811Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:43:25.811Z] 
[2025-08-21T19:43:25.811Z] Host initialized (233ms)
[2025-08-21T19:43:25.811Z] Host started (233ms)
[2025-08-21T19:43:25.811Z] Job host started
[2025-08-21T19:43:25.811Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:43:25.811Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:43:25.855Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:43:25.856Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:43:25.856Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:43:25.856Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:43:25.900Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:43:25.900Z] 🔍 Current env vars:
[2025-08-21T19:43:25.900Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:43:25.900Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:43:25.900Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:43:25.900Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:43:25.900Z]   Deployment: gpt-4o
[2025-08-21T19:43:25.900Z]   API Version: 2024-08-01-preview
[2025-08-21T19:43:25.900Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:43:25.900Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:43:25.900Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:43:25.900Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:43:25.900Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:43:25.902Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:43:25.908Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.908Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.909Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.909Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.909Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.909Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.909Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:43:25.909Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.909Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:43:25.909Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.909Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'a1f7764d-ac9c-4126-8a4e-c29259fbe433'.
[2025-08-21T19:43:25.909Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '684c3ef7-a4ab-407f-8b8a-8d8ed2a8b1ad'.
[2025-08-21T19:43:25.909Z] Result: Failure
[2025-08-21T19:43:25.909Z] Result: Failure
[2025-08-21T19:43:25.910Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:43:25.909Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'[2025-08-21T19:43:25.910Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2

[2025-08-21T19:43:25.910Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:43:25.910Z]                    ^^^^^
[2025-08-21T19:43:25.910Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z] 
[2025-08-21T19:43:25.910Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:43:25.910Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:43:25.910Z]                    ^^^^^
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z] 
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest

[2025-08-21T19:43:25.910Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:43:25.910Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:43:25.910Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:43:25.910Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:43:25.910Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)

[2025-08-21T19:43:25.910Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:43:25.910Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:43:25.910Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:43:25.910Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:43:25.910Z]     at Generator.next (<anonymous>).
[2025-08-21T19:43:25.910Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:43:25.910Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:43:25.910Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionLoadRequest
[2025-08-21T19:43:25.910Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:43:25.910Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:43:25.910Z]     at Generator.next (<anonymous>).
[2025-08-21T19:43:25.971Z] Host restarted.
[2025-08-21T19:43:30.578Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:44:19.484Z] Executing HTTP request: {
[2025-08-21T19:44:19.485Z]   "requestId": "ebb4d0d6-cccd-4fa8-9d70-155dd1fe5ea8",
[2025-08-21T19:44:19.485Z]   "method": "POST",
[2025-08-21T19:44:19.485Z]   "userAgent": "curl/8.7.1",
[2025-08-21T19:44:19.485Z]   "uri": "/api/generate-html-wireframe"
[2025-08-21T19:44:19.485Z] }
[2025-08-21T19:44:19.496Z] Executing 'Functions.generateWireframe' (Reason='This function was programmatically called via the host APIs.', Id=f8a47c15-12c6-4c63-afec-e4e1e96baf24)
[2025-08-21T19:44:19.586Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad received FunctionInvocationRequest with invocationId f8a47c15-12c6-4c63-afec-e4e1e96baf24
[2025-08-21T19:44:23.312Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:44:23.312Z] 🔍 Atlas component check:
[2025-08-21T19:44:23.312Z]     Description: "create a simple dashboard with two cards"
[2025-08-21T19:44:23.312Z]     Contains learning keywords: false
[2025-08-21T19:44:23.312Z]     Is hero section exclusion: false
[2025-08-21T19:44:23.312Z]     Final isLearningPlatform: false
[2025-08-21T19:44:23.312Z] ℹ️ Not a learning platform, skipping Atlas components
[2025-08-21T19:44:23.312Z] ✅ Wireframe completed with Atlas components: Hero: 0, Modules: 0, Learning Paths: 0
[2025-08-21T19:44:23.320Z] Executed 'Functions.generateWireframe' (Succeeded, Id=f8a47c15-12c6-4c63-afec-e4e1e96baf24, Duration=3826ms)
[2025-08-21T19:44:23.321Z] Executed HTTP request: {
[2025-08-21T19:44:23.321Z]   "requestId": "ebb4d0d6-cccd-4fa8-9d70-155dd1fe5ea8",
[2025-08-21T19:44:23.321Z]   "identities": "",
[2025-08-21T19:44:23.321Z]   "status": "200",
[2025-08-21T19:44:23.321Z]   "duration": "3837"
[2025-08-21T19:44:23.321Z] }
[2025-08-21T19:46:01.966Z] Restarting host.
[2025-08-21T19:46:01.974Z] Stopping JobHost
[2025-08-21T19:46:01.974Z] Job host stopped
[2025-08-21T19:46:01.978Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '4a529b1b-5dda-400a-91ea-1a254415f4bd'
[2025-08-21T19:46:02.077Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:46:02.078Z] Host configuration file read:
[2025-08-21T19:46:02.078Z] {
[2025-08-21T19:46:02.078Z]   "version": "2.0",
[2025-08-21T19:46:02.078Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:46:02.078Z]   "logging": {
[2025-08-21T19:46:02.078Z]     "applicationInsights": {
[2025-08-21T19:46:02.078Z]       "samplingSettings": {
[2025-08-21T19:46:02.078Z]         "isEnabled": true,
[2025-08-21T19:46:02.078Z]         "excludedTypes": "Request"
[2025-08-21T19:46:02.078Z]       }
[2025-08-21T19:46:02.078Z]     },
[2025-08-21T19:46:02.078Z]     "logLevel": {
[2025-08-21T19:46:02.078Z]       "default": "Information",
[2025-08-21T19:46:02.078Z]       "Host.Results": "Information",
[2025-08-21T19:46:02.078Z]       "Function": "Information"
[2025-08-21T19:46:02.078Z]     }
[2025-08-21T19:46:02.078Z]   },
[2025-08-21T19:46:02.078Z]   "extensionBundle": {
[2025-08-21T19:46:02.078Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:46:02.078Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:46:02.078Z]   },
[2025-08-21T19:46:02.078Z]   "watchDirectories": [
[2025-08-21T19:46:02.078Z]     "Shared"
[2025-08-21T19:46:02.078Z]   ]
[2025-08-21T19:46:02.078Z] }
[2025-08-21T19:46:02.079Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:46:02.080Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:46:02.080Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:46:02.080Z] Loading functions metadata
[2025-08-21T19:46:02.081Z] Worker indexing is enabled
[2025-08-21T19:46:02.081Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:46:02.081Z] Reading functions metadata (Worker)
[2025-08-21T19:46:02.081Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:46:02.101Z] Worker d28a061f-a2fb-41cb-b885-a7d52b4c8dad exited with code 0
[2025-08-21T19:46:02.317Z] Worker fe57b3f5-4734-4181-a621-554133c674fd connecting on 127.0.0.1:54302
[2025-08-21T19:46:02.345Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received WorkerInitRequest
[2025-08-21T19:46:02.348Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionsMetadataRequest
[2025-08-21T19:46:02.348Z] Reading functions metadata (Host)
[2025-08-21T19:46:02.711Z] 21 functions found (Host)
[2025-08-21T19:46:02.713Z] 21 functions loaded
[2025-08-21T19:46:02.713Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:46:02.713Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:46:02.713Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:46:02.713Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:46:02.882Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:46:02.883Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:46:02.883Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:46:02.883Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:46:02.947Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:46:02.947Z] Host configuration file read:
[2025-08-21T19:46:02.947Z] {
[2025-08-21T19:46:02.947Z]   "version": "2.0",
[2025-08-21T19:46:02.947Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:46:02.947Z]   "logging": {
[2025-08-21T19:46:02.947Z]     "applicationInsights": {
[2025-08-21T19:46:02.947Z]       "samplingSettings": {
[2025-08-21T19:46:02.947Z]         "isEnabled": true,
[2025-08-21T19:46:02.947Z]         "excludedTypes": "Request"
[2025-08-21T19:46:02.947Z]       }
[2025-08-21T19:46:02.947Z]     },
[2025-08-21T19:46:02.947Z]     "logLevel": {
[2025-08-21T19:46:02.947Z]       "default": "Information",
[2025-08-21T19:46:02.947Z]       "Host.Results": "Information",
[2025-08-21T19:46:02.947Z]       "Function": "Information"
[2025-08-21T19:46:02.947Z]     }
[2025-08-21T19:46:02.947Z]   },
[2025-08-21T19:46:02.947Z]   "extensionBundle": {
[2025-08-21T19:46:02.947Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:46:02.947Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:46:02.947Z]   },
[2025-08-21T19:46:02.947Z]   "watchDirectories": [
[2025-08-21T19:46:02.947Z]     "Shared"
[2025-08-21T19:46:02.947Z]   ]
[2025-08-21T19:46:02.947Z] }
[2025-08-21T19:46:03.032Z] Initializing Warmup Extension.
[2025-08-21T19:46:03.034Z] Initializing Host. OperationId: '4a529b1b-5dda-400a-91ea-1a254415f4bd'.
[2025-08-21T19:46:03.034Z] Host initialization: ConsecutiveErrors=0, StartupCount=25, OperationId=4a529b1b-5dda-400a-91ea-1a254415f4bd
[2025-08-21T19:46:03.067Z] LoggerFilterOptions
[2025-08-21T19:46:03.067Z] {
[2025-08-21T19:46:03.067Z]   "MinLevel": "None",
[2025-08-21T19:46:03.067Z]   "Rules": [
[2025-08-21T19:46:03.067Z]     {
[2025-08-21T19:46:03.067Z]       "ProviderName": null,
[2025-08-21T19:46:03.067Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:46:03.067Z]       "LogLevel": "None",
[2025-08-21T19:46:03.067Z]       "Filter": null
[2025-08-21T19:46:03.067Z]     },
[2025-08-21T19:46:03.067Z]     {
[2025-08-21T19:46:03.067Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:03.067Z]       "CategoryName": null,
[2025-08-21T19:46:03.067Z]       "LogLevel": "None",
[2025-08-21T19:46:03.067Z]       "Filter": null
[2025-08-21T19:46:03.067Z]     },
[2025-08-21T19:46:03.067Z]     {
[2025-08-21T19:46:03.067Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:03.067Z]       "CategoryName": null,
[2025-08-21T19:46:03.067Z]       "LogLevel": null,
[2025-08-21T19:46:03.067Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:03.067Z]     },
[2025-08-21T19:46:03.067Z]     {
[2025-08-21T19:46:03.067Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": null,
[2025-08-21T19:46:03.068Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": null,
[2025-08-21T19:46:03.068Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": "Host.Results",
[2025-08-21T19:46:03.068Z]       "LogLevel": "Information",
[2025-08-21T19:46:03.068Z]       "Filter": null
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": "Function",
[2025-08-21T19:46:03.068Z]       "LogLevel": "Information",
[2025-08-21T19:46:03.068Z]       "Filter": null
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": "Information",
[2025-08-21T19:46:03.068Z]       "Filter": null
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": "None",
[2025-08-21T19:46:03.068Z]       "Filter": null
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": null,
[2025-08-21T19:46:03.068Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": null,
[2025-08-21T19:46:03.068Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:03.068Z]     }
[2025-08-21T19:46:03.068Z]   ]
[2025-08-21T19:46:03.068Z] }
[2025-08-21T19:46:03.068Z] LoggerFilterOptions
[2025-08-21T19:46:03.068Z] {
[2025-08-21T19:46:03.068Z]   "MinLevel": "None",
[2025-08-21T19:46:03.068Z]   "Rules": [
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:46:03.068Z]       "LogLevel": "None",
[2025-08-21T19:46:03.068Z]       "Filter": null
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": "None",
[2025-08-21T19:46:03.068Z]       "Filter": null
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": null,
[2025-08-21T19:46:03.068Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": null,
[2025-08-21T19:46:03.068Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": null,
[2025-08-21T19:46:03.068Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": "Host.Results",
[2025-08-21T19:46:03.068Z]       "LogLevel": "Information",
[2025-08-21T19:46:03.068Z]       "Filter": null
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": "Function",
[2025-08-21T19:46:03.068Z]       "LogLevel": "Information",
[2025-08-21T19:46:03.068Z]       "Filter": null
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": null,
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": "Information",
[2025-08-21T19:46:03.068Z]       "Filter": null
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": "None",
[2025-08-21T19:46:03.068Z]       "Filter": null
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": null,
[2025-08-21T19:46:03.068Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:03.068Z]     },
[2025-08-21T19:46:03.068Z]     {
[2025-08-21T19:46:03.068Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:03.068Z]       "CategoryName": null,
[2025-08-21T19:46:03.068Z]       "LogLevel": null,
[2025-08-21T19:46:03.068Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:03.068Z]     }
[2025-08-21T19:46:03.068Z]   ]
[2025-08-21T19:46:03.068Z] }
[2025-08-21T19:46:03.068Z] FunctionResultAggregatorOptions
[2025-08-21T19:46:03.068Z] {
[2025-08-21T19:46:03.068Z]   "BatchSize": 1000,
[2025-08-21T19:46:03.069Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:46:03.069Z]   "IsEnabled": true
[2025-08-21T19:46:03.069Z] }
[2025-08-21T19:46:03.069Z] ConcurrencyOptions
[2025-08-21T19:46:03.069Z] {
[2025-08-21T19:46:03.069Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:46:03.069Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:46:03.069Z]   "CPUThreshold": 0.8,
[2025-08-21T19:46:03.069Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:46:03.069Z] }
[2025-08-21T19:46:03.069Z] SingletonOptions
[2025-08-21T19:46:03.069Z] {
[2025-08-21T19:46:03.069Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:46:03.069Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:46:03.069Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:46:03.069Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:46:03.069Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:46:03.069Z] }
[2025-08-21T19:46:03.069Z] ScaleOptions
[2025-08-21T19:46:03.069Z] {
[2025-08-21T19:46:03.069Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:46:03.069Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:46:03.069Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:46:03.069Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:46:03.069Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:46:03.069Z] }
[2025-08-21T19:46:03.069Z] Starting JobHost
[2025-08-21T19:46:03.069Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=2bae0bc3-440c-4e8a-a648-6a270bad66ee, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:46:03.069Z] Loading functions metadata
[2025-08-21T19:46:03.069Z] Worker indexing is enabled
[2025-08-21T19:46:03.069Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:46:03.069Z] Reading functions metadata (Worker)
[2025-08-21T19:46:03.069Z] Reading functions metadata (Host)
[2025-08-21T19:46:03.312Z] 21 functions found (Host)
[2025-08-21T19:46:03.312Z] Reading functions metadata (Custom)
[2025-08-21T19:46:03.313Z] 0 functions found (Custom)
[2025-08-21T19:46:03.313Z] 21 functions loaded
[2025-08-21T19:46:03.316Z] Generating 21 job function(s)
[2025-08-21T19:46:03.317Z] Worker process started and initialized.
[2025-08-21T19:46:03.341Z] Found the following functions:
[2025-08-21T19:46:03.341Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:46:03.341Z] Host.Functions.analytics
[2025-08-21T19:46:03.341Z] Host.Functions.analyzeUIImage
[2025-08-21T19:46:03.341Z] Host.Functions.atlasComponents
[2025-08-21T19:46:03.341Z] Host.Functions.fast-suggestions
[2025-08-21T19:46:03.341Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:46:03.341Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:46:03.341Z] Host.Functions.generateSuggestions
[2025-08-21T19:46:03.341Z] Host.Functions.generateWireframe
[2025-08-21T19:46:03.341Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:46:03.341Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:46:03.341Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:46:03.341Z] Host.Functions.get-template
[2025-08-21T19:46:03.341Z] Host.Functions.githubAuthCallback
[2025-08-21T19:46:03.341Z] Host.Functions.githubAuthStart
[2025-08-21T19:46:03.341Z] Host.Functions.health
[2025-08-21T19:46:03.341Z] Host.Functions.healthCheck
[2025-08-21T19:46:03.341Z] Host.Functions.openai-health
[2025-08-21T19:46:03.341Z] Host.Functions.performance-stats
[2025-08-21T19:46:03.341Z] Host.Functions.testFunction
[2025-08-21T19:46:03.341Z] Host.Functions.testSimple
[2025-08-21T19:46:03.341Z] 
[2025-08-21T19:46:03.342Z] HttpOptions
[2025-08-21T19:46:03.342Z] {
[2025-08-21T19:46:03.342Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:46:03.342Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:46:03.342Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:46:03.342Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:46:03.342Z]   "RoutePrefix": "api"
[2025-08-21T19:46:03.342Z] }
[2025-08-21T19:46:03.342Z] Initializing function HTTP routes
[2025-08-21T19:46:03.342Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:46:03.342Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:46:03.342Z] 
[2025-08-21T19:46:03.342Z] Host initialized (273ms)
[2025-08-21T19:46:03.343Z] Host started (273ms)
[2025-08-21T19:46:03.343Z] Job host started
[2025-08-21T19:46:03.343Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:46:03.343Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:46:03.383Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:46:03.384Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:46:03.384Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:46:03.384Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:46:03.434Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:46:03.434Z] 🔍 Current env vars:
[2025-08-21T19:46:03.434Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:46:03.434Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:46:03.434Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:46:03.434Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:46:03.434Z]   Deployment: gpt-4o
[2025-08-21T19:46:03.434Z]   API Version: 2024-08-01-preview
[2025-08-21T19:46:03.434Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:46:03.434Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:46:03.434Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:46:03.434Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:46:03.434Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:46:03.435Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:46:03.436Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.436Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.441Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.442Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.442Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.442Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.442Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:46:03.442Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.442Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '70849c18-749c-4af3-b071-868285a69a68'.
[2025-08-21T19:46:03.442Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:46:03.442Z] Result: Failure
[2025-08-21T19:46:03.442Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:46:03.442Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:46:03.442Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:46:03.442Z]                    ^^^^^
[2025-08-21T19:46:03.442Z] 
[2025-08-21T19:46:03.442Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:46:03.442Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:46:03.442Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:46:03.442Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:46:03.442Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:46:03.442Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:46:03.442Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:46:03.442Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '8892aa9f-bead-4621-8129-e340ecaca8c0'.
[2025-08-21T19:46:03.442Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.442Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:46:03.442Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:46:03.442Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:46:03.442Z] Result: Failure
[2025-08-21T19:46:03.442Z]     at Generator.next (<anonymous>).
[2025-08-21T19:46:03.442Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.442Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:46:03.442Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:46:03.442Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:46:03.442Z]                    ^^^^^
[2025-08-21T19:46:03.442Z] 
[2025-08-21T19:46:03.442Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:46:03.442Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:46:03.442Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:46:03.442Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:46:03.442Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:46:03.442Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:46:03.442Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:46:03.442Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:46:03.442Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.442Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:46:03.442Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.443Z]     at Generator.next (<anonymous>).
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.443Z] Worker fe57b3f5-4734-4181-a621-554133c674fd received FunctionLoadRequest
[2025-08-21T19:46:03.449Z] Host restarted.
[2025-08-21T19:46:08.079Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:46:11.615Z] Restarting host.
[2025-08-21T19:46:11.620Z] Stopping JobHost
[2025-08-21T19:46:11.621Z] Job host stopped
[2025-08-21T19:46:11.623Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '61c0b986-1a37-450c-a4cc-93727e065b16'
[2025-08-21T19:46:11.720Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:46:11.720Z] Host configuration file read:
[2025-08-21T19:46:11.720Z] {
[2025-08-21T19:46:11.720Z]   "version": "2.0",
[2025-08-21T19:46:11.720Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:46:11.720Z]   "logging": {
[2025-08-21T19:46:11.720Z]     "applicationInsights": {
[2025-08-21T19:46:11.720Z]       "samplingSettings": {
[2025-08-21T19:46:11.720Z]         "isEnabled": true,
[2025-08-21T19:46:11.720Z]         "excludedTypes": "Request"
[2025-08-21T19:46:11.720Z]       }
[2025-08-21T19:46:11.720Z]     },
[2025-08-21T19:46:11.720Z]     "logLevel": {
[2025-08-21T19:46:11.720Z]       "default": "Information",
[2025-08-21T19:46:11.720Z]       "Host.Results": "Information",
[2025-08-21T19:46:11.720Z]       "Function": "Information"
[2025-08-21T19:46:11.720Z]     }
[2025-08-21T19:46:11.720Z]   },
[2025-08-21T19:46:11.720Z]   "extensionBundle": {
[2025-08-21T19:46:11.720Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:46:11.720Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:46:11.720Z]   },
[2025-08-21T19:46:11.720Z]   "watchDirectories": [
[2025-08-21T19:46:11.720Z]     "Shared"
[2025-08-21T19:46:11.720Z]   ]
[2025-08-21T19:46:11.720Z] }
[2025-08-21T19:46:11.721Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:46:11.721Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:46:11.721Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:46:11.722Z] Loading functions metadata
[2025-08-21T19:46:11.722Z] Worker indexing is enabled
[2025-08-21T19:46:11.722Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:46:11.722Z] Reading functions metadata (Worker)
[2025-08-21T19:46:11.722Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:46:11.724Z] Worker fe57b3f5-4734-4181-a621-554133c674fd exited with code 0
[2025-08-21T19:46:11.859Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 connecting on 127.0.0.1:54302
[2025-08-21T19:46:11.881Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received WorkerInitRequest
[2025-08-21T19:46:11.884Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionsMetadataRequest
[2025-08-21T19:46:11.884Z] Reading functions metadata (Host)
[2025-08-21T19:46:12.123Z] 21 functions found (Host)
[2025-08-21T19:46:12.124Z] 21 functions loaded
[2025-08-21T19:46:12.124Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:46:12.124Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:46:12.124Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:46:12.125Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:46:12.280Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:46:12.280Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:46:12.280Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:46:12.280Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:46:12.323Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:46:12.323Z] Host configuration file read:
[2025-08-21T19:46:12.323Z] {
[2025-08-21T19:46:12.323Z]   "version": "2.0",
[2025-08-21T19:46:12.323Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:46:12.323Z]   "logging": {
[2025-08-21T19:46:12.323Z]     "applicationInsights": {
[2025-08-21T19:46:12.323Z]       "samplingSettings": {
[2025-08-21T19:46:12.323Z]         "isEnabled": true,
[2025-08-21T19:46:12.323Z]         "excludedTypes": "Request"
[2025-08-21T19:46:12.323Z]       }
[2025-08-21T19:46:12.323Z]     },
[2025-08-21T19:46:12.323Z]     "logLevel": {
[2025-08-21T19:46:12.323Z]       "default": "Information",
[2025-08-21T19:46:12.323Z]       "Host.Results": "Information",
[2025-08-21T19:46:12.323Z]       "Function": "Information"
[2025-08-21T19:46:12.323Z]     }
[2025-08-21T19:46:12.323Z]   },
[2025-08-21T19:46:12.323Z]   "extensionBundle": {
[2025-08-21T19:46:12.323Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:46:12.323Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:46:12.323Z]   },
[2025-08-21T19:46:12.323Z]   "watchDirectories": [
[2025-08-21T19:46:12.323Z]     "Shared"
[2025-08-21T19:46:12.323Z]   ]
[2025-08-21T19:46:12.323Z] }
[2025-08-21T19:46:12.367Z] Initializing Warmup Extension.
[2025-08-21T19:46:12.368Z] Initializing Host. OperationId: '61c0b986-1a37-450c-a4cc-93727e065b16'.
[2025-08-21T19:46:12.368Z] Host initialization: ConsecutiveErrors=0, StartupCount=26, OperationId=61c0b986-1a37-450c-a4cc-93727e065b16
[2025-08-21T19:46:12.369Z] LoggerFilterOptions
[2025-08-21T19:46:12.369Z] {
[2025-08-21T19:46:12.369Z]   "MinLevel": "None",
[2025-08-21T19:46:12.369Z]   "Rules": [
[2025-08-21T19:46:12.369Z]     {
[2025-08-21T19:46:12.369Z]       "ProviderName": null,
[2025-08-21T19:46:12.369Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:46:12.369Z]       "LogLevel": "None",
[2025-08-21T19:46:12.369Z]       "Filter": null
[2025-08-21T19:46:12.369Z]     },
[2025-08-21T19:46:12.369Z]     {
[2025-08-21T19:46:12.369Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:12.369Z]       "CategoryName": null,
[2025-08-21T19:46:12.369Z]       "LogLevel": "None",
[2025-08-21T19:46:12.369Z]       "Filter": null
[2025-08-21T19:46:12.369Z]     },
[2025-08-21T19:46:12.369Z]     {
[2025-08-21T19:46:12.369Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:12.369Z]       "CategoryName": null,
[2025-08-21T19:46:12.369Z]       "LogLevel": null,
[2025-08-21T19:46:12.369Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:12.369Z]     },
[2025-08-21T19:46:12.369Z]     {
[2025-08-21T19:46:12.369Z]       "ProviderName": null,
[2025-08-21T19:46:12.369Z]       "CategoryName": null,
[2025-08-21T19:46:12.369Z]       "LogLevel": null,
[2025-08-21T19:46:12.369Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:12.369Z]     },
[2025-08-21T19:46:12.369Z]     {
[2025-08-21T19:46:12.369Z]       "ProviderName": null,
[2025-08-21T19:46:12.369Z]       "CategoryName": null,
[2025-08-21T19:46:12.369Z]       "LogLevel": null,
[2025-08-21T19:46:12.369Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:12.369Z]     },
[2025-08-21T19:46:12.369Z]     {
[2025-08-21T19:46:12.369Z]       "ProviderName": null,
[2025-08-21T19:46:12.369Z]       "CategoryName": "Host.Results",
[2025-08-21T19:46:12.369Z]       "LogLevel": "Information",
[2025-08-21T19:46:12.369Z]       "Filter": null
[2025-08-21T19:46:12.369Z]     },
[2025-08-21T19:46:12.369Z]     {
[2025-08-21T19:46:12.369Z]       "ProviderName": null,
[2025-08-21T19:46:12.369Z]       "CategoryName": "Function",
[2025-08-21T19:46:12.369Z]       "LogLevel": "Information",
[2025-08-21T19:46:12.369Z]       "Filter": null
[2025-08-21T19:46:12.369Z]     },
[2025-08-21T19:46:12.369Z]     {
[2025-08-21T19:46:12.369Z]       "ProviderName": null,
[2025-08-21T19:46:12.369Z]       "CategoryName": null,
[2025-08-21T19:46:12.369Z]       "LogLevel": "Information",
[2025-08-21T19:46:12.369Z]       "Filter": null
[2025-08-21T19:46:12.369Z]     },
[2025-08-21T19:46:12.369Z]     {
[2025-08-21T19:46:12.369Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:46:12.369Z]       "CategoryName": null,
[2025-08-21T19:46:12.369Z]       "LogLevel": "None",
[2025-08-21T19:46:12.369Z]       "Filter": null
[2025-08-21T19:46:12.369Z]     },
[2025-08-21T19:46:12.369Z]     {
[2025-08-21T19:46:12.369Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:46:12.370Z]       "CategoryName": null,
[2025-08-21T19:46:12.370Z]       "LogLevel": null,
[2025-08-21T19:46:12.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:12.370Z]       "CategoryName": null,
[2025-08-21T19:46:12.370Z]       "LogLevel": null,
[2025-08-21T19:46:12.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:12.370Z]     }
[2025-08-21T19:46:12.370Z]   ]
[2025-08-21T19:46:12.370Z] }
[2025-08-21T19:46:12.370Z] LoggerFilterOptions
[2025-08-21T19:46:12.370Z] {
[2025-08-21T19:46:12.370Z]   "MinLevel": "None",
[2025-08-21T19:46:12.370Z]   "Rules": [
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": null,
[2025-08-21T19:46:12.370Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:46:12.370Z]       "LogLevel": "None",
[2025-08-21T19:46:12.370Z]       "Filter": null
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:12.370Z]       "CategoryName": null,
[2025-08-21T19:46:12.370Z]       "LogLevel": "None",
[2025-08-21T19:46:12.370Z]       "Filter": null
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:12.370Z]       "CategoryName": null,
[2025-08-21T19:46:12.370Z]       "LogLevel": null,
[2025-08-21T19:46:12.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": null,
[2025-08-21T19:46:12.370Z]       "CategoryName": null,
[2025-08-21T19:46:12.370Z]       "LogLevel": null,
[2025-08-21T19:46:12.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": null,
[2025-08-21T19:46:12.370Z]       "CategoryName": null,
[2025-08-21T19:46:12.370Z]       "LogLevel": null,
[2025-08-21T19:46:12.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": null,
[2025-08-21T19:46:12.370Z]       "CategoryName": "Host.Results",
[2025-08-21T19:46:12.370Z]       "LogLevel": "Information",
[2025-08-21T19:46:12.370Z]       "Filter": null
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": null,
[2025-08-21T19:46:12.370Z]       "CategoryName": "Function",
[2025-08-21T19:46:12.370Z]       "LogLevel": "Information",
[2025-08-21T19:46:12.370Z]       "Filter": null
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": null,
[2025-08-21T19:46:12.370Z]       "CategoryName": null,
[2025-08-21T19:46:12.370Z]       "LogLevel": "Information",
[2025-08-21T19:46:12.370Z]       "Filter": null
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:46:12.370Z]       "CategoryName": null,
[2025-08-21T19:46:12.370Z]       "LogLevel": "None",
[2025-08-21T19:46:12.370Z]       "Filter": null
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:46:12.370Z]       "CategoryName": null,
[2025-08-21T19:46:12.370Z]       "LogLevel": null,
[2025-08-21T19:46:12.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:12.370Z]     },
[2025-08-21T19:46:12.370Z]     {
[2025-08-21T19:46:12.370Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:46:12.370Z]       "CategoryName": null,
[2025-08-21T19:46:12.370Z]       "LogLevel": null,
[2025-08-21T19:46:12.370Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:46:12.370Z]     }
[2025-08-21T19:46:12.370Z]   ]
[2025-08-21T19:46:12.370Z] }
[2025-08-21T19:46:12.370Z] FunctionResultAggregatorOptions
[2025-08-21T19:46:12.370Z] {
[2025-08-21T19:46:12.370Z]   "BatchSize": 1000,
[2025-08-21T19:46:12.370Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:46:12.370Z]   "IsEnabled": true
[2025-08-21T19:46:12.370Z] }
[2025-08-21T19:46:12.370Z] ConcurrencyOptions
[2025-08-21T19:46:12.370Z] {
[2025-08-21T19:46:12.370Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:46:12.370Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:46:12.370Z]   "CPUThreshold": 0.8,
[2025-08-21T19:46:12.370Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:46:12.370Z] }
[2025-08-21T19:46:12.370Z] SingletonOptions
[2025-08-21T19:46:12.370Z] {
[2025-08-21T19:46:12.370Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:46:12.370Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:46:12.370Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:46:12.370Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:46:12.370Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:46:12.371Z] }
[2025-08-21T19:46:12.371Z] ScaleOptions
[2025-08-21T19:46:12.371Z] {
[2025-08-21T19:46:12.371Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:46:12.371Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:46:12.371Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:46:12.371Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:46:12.371Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:46:12.371Z] }
[2025-08-21T19:46:12.371Z] Starting JobHost
[2025-08-21T19:46:12.371Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=e65cc848-df09-4214-a3b8-380e57d8bbad, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:46:12.371Z] Loading functions metadata
[2025-08-21T19:46:12.371Z] Worker indexing is enabled
[2025-08-21T19:46:12.371Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:46:12.371Z] Reading functions metadata (Worker)
[2025-08-21T19:46:12.371Z] Reading functions metadata (Host)
[2025-08-21T19:46:12.580Z] 21 functions found (Host)
[2025-08-21T19:46:12.580Z] Reading functions metadata (Custom)
[2025-08-21T19:46:12.580Z] 0 functions found (Custom)
[2025-08-21T19:46:12.580Z] 21 functions loaded
[2025-08-21T19:46:12.595Z] Generating 21 job function(s)
[2025-08-21T19:46:12.595Z] Worker process started and initialized.
[2025-08-21T19:46:12.606Z] Found the following functions:
[2025-08-21T19:46:12.606Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:46:12.606Z] Host.Functions.analytics
[2025-08-21T19:46:12.606Z] Host.Functions.analyzeUIImage
[2025-08-21T19:46:12.606Z] Host.Functions.atlasComponents
[2025-08-21T19:46:12.606Z] Host.Functions.fast-suggestions
[2025-08-21T19:46:12.606Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:46:12.606Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:46:12.606Z] Host.Functions.generateSuggestions
[2025-08-21T19:46:12.606Z] Host.Functions.generateWireframe
[2025-08-21T19:46:12.606Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:46:12.606Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:46:12.606Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:46:12.606Z] Host.Functions.get-template
[2025-08-21T19:46:12.606Z] Host.Functions.githubAuthCallback
[2025-08-21T19:46:12.606Z] Host.Functions.githubAuthStart
[2025-08-21T19:46:12.606Z] Host.Functions.health
[2025-08-21T19:46:12.606Z] Host.Functions.healthCheck
[2025-08-21T19:46:12.606Z] Host.Functions.openai-health
[2025-08-21T19:46:12.606Z] Host.Functions.performance-stats
[2025-08-21T19:46:12.606Z] Host.Functions.testFunction
[2025-08-21T19:46:12.606Z] Host.Functions.testSimple
[2025-08-21T19:46:12.606Z] 
[2025-08-21T19:46:12.606Z] HttpOptions
[2025-08-21T19:46:12.606Z] {
[2025-08-21T19:46:12.606Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:46:12.606Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:46:12.606Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:46:12.606Z] Initializing function HTTP routes
[2025-08-21T19:46:12.606Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:46:12.606Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:46:12.606Z]   "RoutePrefix": "api"
[2025-08-21T19:46:12.606Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:46:12.606Z] }
[2025-08-21T19:46:12.606Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:46:12.606Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:46:12.607Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:46:12.607Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:46:12.607Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:46:12.607Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:46:12.607Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:46:12.607Z] 
[2025-08-21T19:46:12.607Z] Host initialized (235ms)
[2025-08-21T19:46:12.607Z] Host started (236ms)
[2025-08-21T19:46:12.607Z] Job host started
[2025-08-21T19:46:12.607Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:46:12.607Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:46:12.635Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:46:12.635Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:46:12.635Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:46:12.635Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:46:12.675Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:46:12.675Z] 🔍 Current env vars:
[2025-08-21T19:46:12.675Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:46:12.675Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:46:12.675Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:46:12.675Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:46:12.675Z]   Deployment: gpt-4o
[2025-08-21T19:46:12.675Z]   API Version: 2024-08-01-preview
[2025-08-21T19:46:12.675Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:46:12.675Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:46:12.675Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:46:12.675Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:46:12.675Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:46:12.677Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:46:12.678Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.678Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.683Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.683Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.684Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.684Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.684Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:46:12.684Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'd895d8e0-3753-4f48-9010-983a9413d1c2'.
[2025-08-21T19:46:12.684Z] Result: Failure
[2025-08-21T19:46:12.684Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:46:12.684Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:46:12.684Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.684Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:46:12.684Z]                    ^^^^^
[2025-08-21T19:46:12.684Z] 
[2025-08-21T19:46:12.684Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:46:12.684Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:46:12.684Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:46:12.684Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:46:12.684Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:46:12.684Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:46:12.684Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:46:12.684Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:46:12.684Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:46:12.684Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:46:12.684Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:46:12.684Z]     at Generator.next (<anonymous>).
[2025-08-21T19:46:12.684Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '26a109d0-bcdd-4a14-99dc-471ea07236aa'.
[2025-08-21T19:46:12.684Z] Result: Failure
[2025-08-21T19:46:12.684Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:46:12.684Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.684Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:46:12.684Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:46:12.684Z]                    ^^^^^
[2025-08-21T19:46:12.684Z] 
[2025-08-21T19:46:12.684Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.684Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:46:12.684Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:46:12.684Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:46:12.684Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:46:12.684Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:46:12.684Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:46:12.684Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.684Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:46:12.684Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:46:12.684Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.684Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:46:12.684Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:46:12.684Z]     at Generator.next (<anonymous>).
[2025-08-21T19:46:12.684Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.684Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.685Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.685Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.685Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.685Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.685Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.685Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.685Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.685Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionLoadRequest
[2025-08-21T19:46:12.710Z] Host restarted.
[2025-08-21T19:46:17.383Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:46:27.111Z] Executing HTTP request: {
[2025-08-21T19:46:27.111Z]   "requestId": "22e45612-fa75-4089-b091-1629af805f54",
[2025-08-21T19:46:27.111Z]   "method": "POST",
[2025-08-21T19:46:27.111Z]   "userAgent": "curl/8.7.1",
[2025-08-21T19:46:27.111Z]   "uri": "/api/generate-wireframe"
[2025-08-21T19:46:27.111Z] }
[2025-08-21T19:46:27.116Z] Executing 'Functions.generateWireframeAlias' (Reason='This function was programmatically called via the host APIs.', Id=783bbc62-433a-4ce3-aa63-93e43631c69c)
[2025-08-21T19:46:27.132Z]  ALIAS ENDPOINT: Redirecting to unified handler
[2025-08-21T19:46:27.132Z] 🔥 UNIFIED ENDPOINT: Handling wireframe request
[2025-08-21T19:46:27.132Z] 🔥 Method: POST
[2025-08-21T19:46:27.132Z] 🔥 URL: http://localhost:7072/api/generate-wireframe
[2025-08-21T19:46:27.132Z] 🔥 Headers: {
[2025-08-21T19:46:27.132Z]   "accept": "*/*",
[2025-08-21T19:46:27.132Z]   "host": "localhost:7072",
[2025-08-21T19:46:27.132Z]   "user-agent": "curl/8.7.1",
[2025-08-21T19:46:27.132Z]   "content-type": "application/json",
[2025-08-21T19:46:27.132Z]   "content-length": "47"
[2025-08-21T19:46:27.132Z] }
[2025-08-21T19:46:27.132Z] 🔥 Body: {
[2025-08-21T19:46:27.132Z]   "description": "create a simple contact form"
[2025-08-21T19:46:27.132Z] }
[2025-08-21T19:46:27.158Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionInvocationRequest with invocationId 783bbc62-433a-4ce3-aa63-93e43631c69c
[2025-08-21T19:46:32.157Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:46:32.158Z] 🔍 Atlas component check:
[2025-08-21T19:46:32.158Z]     Description: "create a simple contact form"
[2025-08-21T19:46:32.158Z]     Contains learning keywords: false
[2025-08-21T19:46:32.158Z]     Is hero section exclusion: false
[2025-08-21T19:46:32.158Z]     Final isLearningPlatform: false
[2025-08-21T19:46:32.158Z] ℹ️ Not a learning platform, skipping Atlas components
[2025-08-21T19:46:32.158Z] 🧭 Atlas Top Navigation added to wireframe
[2025-08-21T19:46:32.158Z] ✅ Wireframe completed with Atlas components: Hero: 0, Modules: 0, Learning Paths: 0
[2025-08-21T19:46:32.158Z] ✅ UNIFIED ENDPOINT: Successfully generated wireframe
[2025-08-21T19:46:32.168Z] Executed 'Functions.generateWireframeAlias' (Succeeded, Id=783bbc62-433a-4ce3-aa63-93e43631c69c, Duration=5054ms)
[2025-08-21T19:46:32.171Z] Executed HTTP request: {
[2025-08-21T19:46:32.171Z]   "requestId": "22e45612-fa75-4089-b091-1629af805f54",
[2025-08-21T19:46:32.171Z]   "identities": "",
[2025-08-21T19:46:32.171Z]   "status": "200",
[2025-08-21T19:46:32.171Z]   "duration": "5060"
[2025-08-21T19:46:32.171Z] }
[2025-08-21T19:46:58.865Z] Executing HTTP request: {
[2025-08-21T19:46:58.865Z]   "requestId": "dcc31c4b-ac82-4236-baa0-92d78487529f",
[2025-08-21T19:46:58.865Z]   "method": "POST",
[2025-08-21T19:46:58.865Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:46:58.865Z]   "uri": "/api/generate-wireframe-enhanced"
[2025-08-21T19:46:58.865Z] }
[2025-08-21T19:46:58.879Z] Executing 'Functions.generateWireframeEnhanced' (Reason='This function was programmatically called via the host APIs.', Id=e4f7a5d1-7bb3-417e-9116-bb17b73d48d8)
[2025-08-21T19:46:58.927Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 received FunctionInvocationRequest with invocationId e4f7a5d1-7bb3-417e-9116-bb17b73d48d8
[2025-08-21T19:47:01.486Z] Restarting host.
[2025-08-21T19:47:07.393Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:47:07.393Z] 🔍 Atlas component check (ENHANCED):
[2025-08-21T19:47:07.393Z]     Description: "Create Microsoft Learn's learning path overview with module cards and progress tracking"
[2025-08-21T19:47:07.393Z]     Contains learning keywords: true
[2025-08-21T19:47:07.393Z]     Is hero section exclusion: false
[2025-08-21T19:47:07.393Z]     Final isLearningPlatform: true
[2025-08-21T19:47:07.393Z] ✅ Added Atlas learning content section
[2025-08-21T19:47:07.393Z] 🎯 Atlas components added: Hero: 0, Modules: 4, Learning Paths: 2
[2025-08-21T19:47:07.402Z] Executed 'Functions.generateWireframeEnhanced' (Succeeded, Id=e4f7a5d1-7bb3-417e-9116-bb17b73d48d8, Duration=8528ms)
[2025-08-21T19:47:07.403Z] Stopping JobHost
[2025-08-21T19:47:07.403Z] Job host stopped
[2025-08-21T19:47:07.404Z] Executed HTTP request: {
[2025-08-21T19:47:07.404Z]   "requestId": "dcc31c4b-ac82-4236-baa0-92d78487529f",
[2025-08-21T19:47:07.404Z]   "identities": "",
[2025-08-21T19:47:07.404Z]   "status": "200",
[2025-08-21T19:47:07.404Z]   "duration": "8541"
[2025-08-21T19:47:07.404Z] }
[2025-08-21T19:47:07.405Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '0ec71b29-0a01-4a96-a6e0-c79b174bbb3a'
[2025-08-21T19:47:07.512Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:47:07.512Z] Host configuration file read:
[2025-08-21T19:47:07.512Z] {
[2025-08-21T19:47:07.512Z]   "version": "2.0",
[2025-08-21T19:47:07.513Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:47:07.513Z]   "logging": {
[2025-08-21T19:47:07.513Z]     "applicationInsights": {
[2025-08-21T19:47:07.513Z]       "samplingSettings": {
[2025-08-21T19:47:07.513Z]         "isEnabled": true,
[2025-08-21T19:47:07.513Z]         "excludedTypes": "Request"
[2025-08-21T19:47:07.513Z]       }
[2025-08-21T19:47:07.513Z]     },
[2025-08-21T19:47:07.513Z]     "logLevel": {
[2025-08-21T19:47:07.513Z]       "default": "Information",
[2025-08-21T19:47:07.513Z]       "Host.Results": "Information",
[2025-08-21T19:47:07.513Z]       "Function": "Information"
[2025-08-21T19:47:07.513Z]     }
[2025-08-21T19:47:07.513Z]   },
[2025-08-21T19:47:07.513Z]   "extensionBundle": {
[2025-08-21T19:47:07.513Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:47:07.513Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:47:07.513Z]   },
[2025-08-21T19:47:07.513Z]   "watchDirectories": [
[2025-08-21T19:47:07.513Z]     "Shared"
[2025-08-21T19:47:07.513Z]   ]
[2025-08-21T19:47:07.513Z] }
[2025-08-21T19:47:07.513Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:47:07.515Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:47:07.515Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:47:07.515Z] Loading functions metadata
[2025-08-21T19:47:07.515Z] Worker indexing is enabled
[2025-08-21T19:47:07.515Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:47:07.515Z] Reading functions metadata (Worker)
[2025-08-21T19:47:07.515Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:47:07.519Z] Worker a7cd8b8e-793c-4689-a968-c51812ef3db6 exited with code 0
[2025-08-21T19:47:07.802Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb connecting on 127.0.0.1:54302
[2025-08-21T19:47:07.827Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received WorkerInitRequest
[2025-08-21T19:47:07.830Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionsMetadataRequest
[2025-08-21T19:47:07.830Z] Reading functions metadata (Host)
[2025-08-21T19:47:08.071Z] 21 functions found (Host)
[2025-08-21T19:47:08.071Z] 21 functions loaded
[2025-08-21T19:47:08.071Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:47:08.071Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:47:08.071Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:47:08.071Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:47:08.256Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:47:08.256Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:47:08.257Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:47:08.257Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:47:08.309Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:47:08.310Z] Host configuration file read:
[2025-08-21T19:47:08.310Z] {
[2025-08-21T19:47:08.310Z]   "version": "2.0",
[2025-08-21T19:47:08.310Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:47:08.310Z]   "logging": {
[2025-08-21T19:47:08.310Z]     "applicationInsights": {
[2025-08-21T19:47:08.310Z]       "samplingSettings": {
[2025-08-21T19:47:08.310Z]         "isEnabled": true,
[2025-08-21T19:47:08.310Z]         "excludedTypes": "Request"
[2025-08-21T19:47:08.310Z]       }
[2025-08-21T19:47:08.310Z]     },
[2025-08-21T19:47:08.310Z]     "logLevel": {
[2025-08-21T19:47:08.310Z]       "default": "Information",
[2025-08-21T19:47:08.310Z]       "Host.Results": "Information",
[2025-08-21T19:47:08.310Z]       "Function": "Information"
[2025-08-21T19:47:08.310Z]     }
[2025-08-21T19:47:08.310Z]   },
[2025-08-21T19:47:08.310Z]   "extensionBundle": {
[2025-08-21T19:47:08.310Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:47:08.310Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:47:08.310Z]   },
[2025-08-21T19:47:08.310Z]   "watchDirectories": [
[2025-08-21T19:47:08.310Z]     "Shared"
[2025-08-21T19:47:08.310Z]   ]
[2025-08-21T19:47:08.310Z] }
[2025-08-21T19:47:08.354Z] Initializing Warmup Extension.
[2025-08-21T19:47:08.356Z] Initializing Host. OperationId: '0ec71b29-0a01-4a96-a6e0-c79b174bbb3a'.
[2025-08-21T19:47:08.356Z] Host initialization: ConsecutiveErrors=0, StartupCount=27, OperationId=0ec71b29-0a01-4a96-a6e0-c79b174bbb3a
[2025-08-21T19:47:08.361Z] LoggerFilterOptions
[2025-08-21T19:47:08.361Z] {
[2025-08-21T19:47:08.361Z]   "MinLevel": "None",
[2025-08-21T19:47:08.361Z]   "Rules": [
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": null,
[2025-08-21T19:47:08.361Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:47:08.361Z]       "LogLevel": "None",
[2025-08-21T19:47:08.361Z]       "Filter": null
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:47:08.361Z]       "CategoryName": null,
[2025-08-21T19:47:08.361Z]       "LogLevel": "None",
[2025-08-21T19:47:08.361Z]       "Filter": null
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:47:08.361Z]       "CategoryName": null,
[2025-08-21T19:47:08.361Z]       "LogLevel": null,
[2025-08-21T19:47:08.361Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": null,
[2025-08-21T19:47:08.361Z]       "CategoryName": null,
[2025-08-21T19:47:08.361Z]       "LogLevel": null,
[2025-08-21T19:47:08.361Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": null,
[2025-08-21T19:47:08.361Z]       "CategoryName": null,
[2025-08-21T19:47:08.361Z]       "LogLevel": null,
[2025-08-21T19:47:08.361Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": null,
[2025-08-21T19:47:08.361Z]       "CategoryName": "Host.Results",
[2025-08-21T19:47:08.361Z]       "LogLevel": "Information",
[2025-08-21T19:47:08.361Z]       "Filter": null
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": null,
[2025-08-21T19:47:08.361Z]       "CategoryName": "Function",
[2025-08-21T19:47:08.361Z]       "LogLevel": "Information",
[2025-08-21T19:47:08.361Z]       "Filter": null
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": null,
[2025-08-21T19:47:08.361Z]       "CategoryName": null,
[2025-08-21T19:47:08.361Z]       "LogLevel": "Information",
[2025-08-21T19:47:08.361Z]       "Filter": null
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:47:08.361Z]       "CategoryName": null,
[2025-08-21T19:47:08.361Z]       "LogLevel": "None",
[2025-08-21T19:47:08.361Z]       "Filter": null
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:47:08.361Z]       "CategoryName": null,
[2025-08-21T19:47:08.361Z]       "LogLevel": null,
[2025-08-21T19:47:08.361Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:47:08.361Z]       "CategoryName": null,
[2025-08-21T19:47:08.361Z]       "LogLevel": null,
[2025-08-21T19:47:08.361Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:47:08.361Z]     }
[2025-08-21T19:47:08.361Z]   ]
[2025-08-21T19:47:08.361Z] }
[2025-08-21T19:47:08.361Z] LoggerFilterOptions
[2025-08-21T19:47:08.361Z] {
[2025-08-21T19:47:08.361Z]   "MinLevel": "None",
[2025-08-21T19:47:08.361Z]   "Rules": [
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": null,
[2025-08-21T19:47:08.361Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:47:08.361Z]       "LogLevel": "None",
[2025-08-21T19:47:08.361Z]       "Filter": null
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:47:08.361Z]       "CategoryName": null,
[2025-08-21T19:47:08.361Z]       "LogLevel": "None",
[2025-08-21T19:47:08.361Z]       "Filter": null
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:47:08.361Z]       "CategoryName": null,
[2025-08-21T19:47:08.361Z]       "LogLevel": null,
[2025-08-21T19:47:08.361Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:47:08.361Z]     },
[2025-08-21T19:47:08.361Z]     {
[2025-08-21T19:47:08.361Z]       "ProviderName": null,
[2025-08-21T19:47:08.362Z]       "CategoryName": null,
[2025-08-21T19:47:08.362Z]       "LogLevel": null,
[2025-08-21T19:47:08.362Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:47:08.362Z]     },
[2025-08-21T19:47:08.362Z]     {
[2025-08-21T19:47:08.362Z]       "ProviderName": null,
[2025-08-21T19:47:08.362Z]       "CategoryName": null,
[2025-08-21T19:47:08.362Z]       "LogLevel": null,
[2025-08-21T19:47:08.362Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:47:08.362Z]     },
[2025-08-21T19:47:08.362Z]     {
[2025-08-21T19:47:08.362Z]       "ProviderName": null,
[2025-08-21T19:47:08.362Z]       "CategoryName": "Host.Results",
[2025-08-21T19:47:08.362Z]       "LogLevel": "Information",
[2025-08-21T19:47:08.362Z]       "Filter": null
[2025-08-21T19:47:08.362Z]     },
[2025-08-21T19:47:08.362Z]     {
[2025-08-21T19:47:08.362Z]       "ProviderName": null,
[2025-08-21T19:47:08.362Z]       "CategoryName": "Function",
[2025-08-21T19:47:08.362Z]       "LogLevel": "Information",
[2025-08-21T19:47:08.362Z]       "Filter": null
[2025-08-21T19:47:08.362Z]     },
[2025-08-21T19:47:08.362Z]     {
[2025-08-21T19:47:08.362Z]       "ProviderName": null,
[2025-08-21T19:47:08.362Z]       "CategoryName": null,
[2025-08-21T19:47:08.362Z]       "LogLevel": "Information",
[2025-08-21T19:47:08.362Z]       "Filter": null
[2025-08-21T19:47:08.362Z]     },
[2025-08-21T19:47:08.362Z]     {
[2025-08-21T19:47:08.362Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:47:08.362Z]       "CategoryName": null,
[2025-08-21T19:47:08.362Z]       "LogLevel": "None",
[2025-08-21T19:47:08.362Z]       "Filter": null
[2025-08-21T19:47:08.362Z]     },
[2025-08-21T19:47:08.362Z]     {
[2025-08-21T19:47:08.362Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:47:08.362Z]       "CategoryName": null,
[2025-08-21T19:47:08.362Z]       "LogLevel": null,
[2025-08-21T19:47:08.362Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:47:08.362Z]     },
[2025-08-21T19:47:08.362Z]     {
[2025-08-21T19:47:08.362Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:47:08.362Z]       "CategoryName": null,
[2025-08-21T19:47:08.362Z]       "LogLevel": null,
[2025-08-21T19:47:08.362Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:47:08.362Z]     }
[2025-08-21T19:47:08.362Z]   ]
[2025-08-21T19:47:08.362Z] }
[2025-08-21T19:47:08.362Z] FunctionResultAggregatorOptions
[2025-08-21T19:47:08.362Z] {
[2025-08-21T19:47:08.362Z]   "BatchSize": 1000,
[2025-08-21T19:47:08.362Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:47:08.362Z]   "IsEnabled": true
[2025-08-21T19:47:08.362Z] }
[2025-08-21T19:47:08.362Z] ConcurrencyOptions
[2025-08-21T19:47:08.362Z] {
[2025-08-21T19:47:08.362Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:47:08.362Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:47:08.362Z]   "CPUThreshold": 0.8,
[2025-08-21T19:47:08.362Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:47:08.362Z] }
[2025-08-21T19:47:08.362Z] SingletonOptions
[2025-08-21T19:47:08.362Z] {
[2025-08-21T19:47:08.362Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:47:08.362Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:47:08.362Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:47:08.362Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:47:08.362Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:47:08.362Z] }
[2025-08-21T19:47:08.362Z] ScaleOptions
[2025-08-21T19:47:08.362Z] {
[2025-08-21T19:47:08.362Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:47:08.362Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:47:08.362Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:47:08.362Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:47:08.362Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:47:08.362Z] }
[2025-08-21T19:47:08.362Z] Starting JobHost
[2025-08-21T19:47:08.362Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=8cee096f-c202-4ceb-bfd1-4fd1246e822e, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:47:08.362Z] Loading functions metadata
[2025-08-21T19:47:08.362Z] Worker indexing is enabled
[2025-08-21T19:47:08.362Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:47:08.362Z] Reading functions metadata (Worker)
[2025-08-21T19:47:08.362Z] Reading functions metadata (Host)
[2025-08-21T19:47:08.585Z] 21 functions found (Host)
[2025-08-21T19:47:08.585Z] Reading functions metadata (Custom)
[2025-08-21T19:47:08.585Z] 0 functions found (Custom)
[2025-08-21T19:47:08.585Z] 21 functions loaded
[2025-08-21T19:47:08.587Z] Generating 21 job function(s)
[2025-08-21T19:47:08.587Z] Worker process started and initialized.
[2025-08-21T19:47:08.597Z] Found the following functions:
[2025-08-21T19:47:08.597Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:47:08.597Z] Host.Functions.analytics
[2025-08-21T19:47:08.597Z] Host.Functions.analyzeUIImage
[2025-08-21T19:47:08.597Z] Host.Functions.atlasComponents
[2025-08-21T19:47:08.597Z] Host.Functions.fast-suggestions
[2025-08-21T19:47:08.597Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:47:08.597Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:47:08.597Z] Host.Functions.generateSuggestions
[2025-08-21T19:47:08.597Z] Host.Functions.generateWireframe
[2025-08-21T19:47:08.597Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:47:08.597Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:47:08.597Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:47:08.597Z] Host.Functions.get-template
[2025-08-21T19:47:08.597Z] Host.Functions.githubAuthCallback
[2025-08-21T19:47:08.597Z] Host.Functions.githubAuthStart
[2025-08-21T19:47:08.597Z] Host.Functions.health
[2025-08-21T19:47:08.597Z] Host.Functions.healthCheck
[2025-08-21T19:47:08.598Z] Host.Functions.openai-health
[2025-08-21T19:47:08.598Z] Host.Functions.performance-stats
[2025-08-21T19:47:08.598Z] Host.Functions.testFunction
[2025-08-21T19:47:08.598Z] Host.Functions.testSimple
[2025-08-21T19:47:08.598Z] 
[2025-08-21T19:47:08.598Z] HttpOptions
[2025-08-21T19:47:08.598Z] {
[2025-08-21T19:47:08.598Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:47:08.598Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:47:08.598Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:47:08.598Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:47:08.598Z]   "RoutePrefix": "api"
[2025-08-21T19:47:08.598Z] }
[2025-08-21T19:47:08.598Z] Initializing function HTTP routes
[2025-08-21T19:47:08.598Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:47:08.598Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:47:08.598Z] 
[2025-08-21T19:47:08.598Z] Host initialized (235ms)
[2025-08-21T19:47:08.598Z] Host started (235ms)
[2025-08-21T19:47:08.598Z] Job host started
[2025-08-21T19:47:08.598Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:47:08.598Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:47:08.638Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:47:08.638Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:47:08.638Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:47:08.638Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:47:08.683Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:47:08.683Z] 🔍 Current env vars:
[2025-08-21T19:47:08.683Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:47:08.683Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:47:08.683Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:47:08.683Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:47:08.683Z]   Deployment: gpt-4o
[2025-08-21T19:47:08.683Z]   API Version: 2024-08-01-preview
[2025-08-21T19:47:08.683Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:47:08.686Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:47:08.686Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:47:08.693Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.693Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:47:08.693Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:47:08.693Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:47:08.693Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.693Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.693Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '9a621806-4ef8-4851-847a-858a584210c1'.
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'aee2ad8c-3f3e-4291-a8da-1c11326b25e9'.[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest

[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Result: Failure
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:47:08.694Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:47:08.694Z] Result: Failure
[2025-08-21T19:47:08.694Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:47:08.694Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:47:08.694Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:47:08.694Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:47:08.694Z]                    ^^^^^
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb received FunctionLoadRequest
[2025-08-21T19:47:08.694Z]                    ^^^^^
[2025-08-21T19:47:08.694Z] 
[2025-08-21T19:47:08.694Z] 
[2025-08-21T19:47:08.694Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:47:08.694Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:47:08.694Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:47:08.694Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:47:08.694Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:47:08.694Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:47:08.694Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:47:08.694Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:47:08.694Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:47:08.694Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:47:08.694Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:47:08.694Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:47:08.694Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:47:08.694Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:47:08.694Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:47:08.694Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:47:08.694Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:47:08.694Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:47:08.694Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:47:08.694Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:47:08.694Z]     at Generator.next (<anonymous>).
[2025-08-21T19:47:08.694Z]     at Generator.next (<anonymous>).
[2025-08-21T19:47:08.696Z] Host restarted.
[2025-08-21T19:47:13.364Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:48:31.837Z] Restarting host.
[2025-08-21T19:48:31.841Z] Stopping JobHost
[2025-08-21T19:48:31.841Z] Job host stopped
[2025-08-21T19:48:31.842Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '7bba5947-d2ff-4f05-8856-a45e1b86c852'
[2025-08-21T19:48:31.970Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:48:31.970Z] Host configuration file read:
[2025-08-21T19:48:31.970Z] {
[2025-08-21T19:48:31.970Z]   "version": "2.0",
[2025-08-21T19:48:31.970Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:48:31.970Z]   "logging": {
[2025-08-21T19:48:31.970Z]     "applicationInsights": {
[2025-08-21T19:48:31.971Z]       "samplingSettings": {
[2025-08-21T19:48:31.971Z]         "isEnabled": true,
[2025-08-21T19:48:31.971Z]         "excludedTypes": "Request"
[2025-08-21T19:48:31.971Z]       }
[2025-08-21T19:48:31.971Z]     },
[2025-08-21T19:48:31.971Z]     "logLevel": {
[2025-08-21T19:48:31.971Z]       "default": "Information",
[2025-08-21T19:48:31.971Z]       "Host.Results": "Information",
[2025-08-21T19:48:31.971Z]       "Function": "Information"
[2025-08-21T19:48:31.971Z]     }
[2025-08-21T19:48:31.971Z]   },
[2025-08-21T19:48:31.971Z]   "extensionBundle": {
[2025-08-21T19:48:31.971Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:48:31.971Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:48:31.971Z]   },
[2025-08-21T19:48:31.971Z]   "watchDirectories": [
[2025-08-21T19:48:31.971Z]     "Shared"
[2025-08-21T19:48:31.971Z]   ]
[2025-08-21T19:48:31.971Z] }
[2025-08-21T19:48:31.973Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:48:31.974Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:48:31.974Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:48:31.974Z] Loading functions metadata
[2025-08-21T19:48:31.974Z] Worker indexing is enabled
[2025-08-21T19:48:31.974Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:48:31.974Z] Reading functions metadata (Worker)
[2025-08-21T19:48:31.974Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:48:31.988Z] Worker a5de8fe0-095a-42b9-bac7-ecc4705573eb exited with code 0
[2025-08-21T19:48:32.175Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 connecting on 127.0.0.1:54302
[2025-08-21T19:48:32.200Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received WorkerInitRequest
[2025-08-21T19:48:32.204Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionsMetadataRequest
[2025-08-21T19:48:32.204Z] Reading functions metadata (Host)
[2025-08-21T19:48:32.493Z] 21 functions found (Host)
[2025-08-21T19:48:32.494Z] 21 functions loaded
[2025-08-21T19:48:32.494Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:48:32.494Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:48:32.494Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:48:32.494Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:48:32.665Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:48:32.665Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:48:32.666Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:48:32.666Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:48:32.717Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:48:32.717Z] Host configuration file read:
[2025-08-21T19:48:32.717Z] {
[2025-08-21T19:48:32.717Z]   "version": "2.0",
[2025-08-21T19:48:32.717Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:48:32.717Z]   "logging": {
[2025-08-21T19:48:32.717Z]     "applicationInsights": {
[2025-08-21T19:48:32.717Z]       "samplingSettings": {
[2025-08-21T19:48:32.717Z]         "isEnabled": true,
[2025-08-21T19:48:32.718Z]         "excludedTypes": "Request"
[2025-08-21T19:48:32.718Z]       }
[2025-08-21T19:48:32.718Z]     },
[2025-08-21T19:48:32.718Z]     "logLevel": {
[2025-08-21T19:48:32.718Z]       "default": "Information",
[2025-08-21T19:48:32.718Z]       "Host.Results": "Information",
[2025-08-21T19:48:32.718Z]       "Function": "Information"
[2025-08-21T19:48:32.718Z]     }
[2025-08-21T19:48:32.718Z]   },
[2025-08-21T19:48:32.718Z]   "extensionBundle": {
[2025-08-21T19:48:32.718Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:48:32.718Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:48:32.718Z]   },
[2025-08-21T19:48:32.718Z]   "watchDirectories": [
[2025-08-21T19:48:32.718Z]     "Shared"
[2025-08-21T19:48:32.718Z]   ]
[2025-08-21T19:48:32.718Z] }
[2025-08-21T19:48:32.777Z] Initializing Warmup Extension.
[2025-08-21T19:48:32.780Z] Initializing Host. OperationId: '7bba5947-d2ff-4f05-8856-a45e1b86c852'.
[2025-08-21T19:48:32.780Z] Host initialization: ConsecutiveErrors=0, StartupCount=28, OperationId=7bba5947-d2ff-4f05-8856-a45e1b86c852
[2025-08-21T19:48:32.784Z] LoggerFilterOptions
[2025-08-21T19:48:32.784Z] {
[2025-08-21T19:48:32.784Z]   "MinLevel": "None",
[2025-08-21T19:48:32.784Z]   "Rules": [
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": null,
[2025-08-21T19:48:32.784Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:48:32.784Z]       "LogLevel": "None",
[2025-08-21T19:48:32.784Z]       "Filter": null
[2025-08-21T19:48:32.784Z]     },
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:48:32.784Z]       "CategoryName": null,
[2025-08-21T19:48:32.784Z]       "LogLevel": "None",
[2025-08-21T19:48:32.784Z]       "Filter": null
[2025-08-21T19:48:32.784Z]     },
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:48:32.784Z]       "CategoryName": null,
[2025-08-21T19:48:32.784Z]       "LogLevel": null,
[2025-08-21T19:48:32.784Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:48:32.784Z]     },
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": null,
[2025-08-21T19:48:32.784Z]       "CategoryName": null,
[2025-08-21T19:48:32.784Z]       "LogLevel": null,
[2025-08-21T19:48:32.784Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:48:32.784Z]     },
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": null,
[2025-08-21T19:48:32.784Z]       "CategoryName": null,
[2025-08-21T19:48:32.784Z]       "LogLevel": null,
[2025-08-21T19:48:32.784Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:48:32.784Z]     },
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": null,
[2025-08-21T19:48:32.784Z]       "CategoryName": "Host.Results",
[2025-08-21T19:48:32.784Z]       "LogLevel": "Information",
[2025-08-21T19:48:32.784Z]       "Filter": null
[2025-08-21T19:48:32.784Z]     },
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": null,
[2025-08-21T19:48:32.784Z]       "CategoryName": "Function",
[2025-08-21T19:48:32.784Z]       "LogLevel": "Information",
[2025-08-21T19:48:32.784Z]       "Filter": null
[2025-08-21T19:48:32.784Z]     },
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": null,
[2025-08-21T19:48:32.784Z]       "CategoryName": null,
[2025-08-21T19:48:32.784Z]       "LogLevel": "Information",
[2025-08-21T19:48:32.784Z]       "Filter": null
[2025-08-21T19:48:32.784Z]     },
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:48:32.784Z]       "CategoryName": null,
[2025-08-21T19:48:32.784Z]       "LogLevel": "None",
[2025-08-21T19:48:32.784Z]       "Filter": null
[2025-08-21T19:48:32.784Z]     },
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:48:32.784Z]       "CategoryName": null,
[2025-08-21T19:48:32.784Z]       "LogLevel": null,
[2025-08-21T19:48:32.784Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:48:32.784Z]     },
[2025-08-21T19:48:32.784Z]     {
[2025-08-21T19:48:32.784Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:48:32.784Z]       "CategoryName": null,
[2025-08-21T19:48:32.784Z]       "LogLevel": null,
[2025-08-21T19:48:32.784Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:48:32.784Z]     }
[2025-08-21T19:48:32.784Z]   ]
[2025-08-21T19:48:32.784Z] }
[2025-08-21T19:48:32.785Z] LoggerFilterOptions
[2025-08-21T19:48:32.785Z] {
[2025-08-21T19:48:32.785Z]   "MinLevel": "None",
[2025-08-21T19:48:32.785Z]   "Rules": [
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": null,
[2025-08-21T19:48:32.785Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:48:32.785Z]       "LogLevel": "None",
[2025-08-21T19:48:32.785Z]       "Filter": null
[2025-08-21T19:48:32.785Z]     },
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:48:32.785Z]       "CategoryName": null,
[2025-08-21T19:48:32.785Z]       "LogLevel": "None",
[2025-08-21T19:48:32.785Z]       "Filter": null
[2025-08-21T19:48:32.785Z]     },
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:48:32.785Z]       "CategoryName": null,
[2025-08-21T19:48:32.785Z]       "LogLevel": null,
[2025-08-21T19:48:32.785Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:48:32.785Z]     },
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": null,
[2025-08-21T19:48:32.785Z]       "CategoryName": null,
[2025-08-21T19:48:32.785Z]       "LogLevel": null,
[2025-08-21T19:48:32.785Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:48:32.785Z]     },
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": null,
[2025-08-21T19:48:32.785Z]       "CategoryName": null,
[2025-08-21T19:48:32.785Z]       "LogLevel": null,
[2025-08-21T19:48:32.785Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:48:32.785Z]     },
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": null,
[2025-08-21T19:48:32.785Z]       "CategoryName": "Host.Results",
[2025-08-21T19:48:32.785Z]       "LogLevel": "Information",
[2025-08-21T19:48:32.785Z]       "Filter": null
[2025-08-21T19:48:32.785Z]     },
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": null,
[2025-08-21T19:48:32.785Z]       "CategoryName": "Function",
[2025-08-21T19:48:32.785Z]       "LogLevel": "Information",
[2025-08-21T19:48:32.785Z]       "Filter": null
[2025-08-21T19:48:32.785Z]     },
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": null,
[2025-08-21T19:48:32.785Z]       "CategoryName": null,
[2025-08-21T19:48:32.785Z]       "LogLevel": "Information",
[2025-08-21T19:48:32.785Z]       "Filter": null
[2025-08-21T19:48:32.785Z]     },
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:48:32.785Z]       "CategoryName": null,
[2025-08-21T19:48:32.785Z]       "LogLevel": "None",
[2025-08-21T19:48:32.785Z]       "Filter": null
[2025-08-21T19:48:32.785Z]     },
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:48:32.785Z]       "CategoryName": null,
[2025-08-21T19:48:32.785Z]       "LogLevel": null,
[2025-08-21T19:48:32.785Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:48:32.785Z]     },
[2025-08-21T19:48:32.785Z]     {
[2025-08-21T19:48:32.785Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:48:32.785Z]       "CategoryName": null,
[2025-08-21T19:48:32.785Z]       "LogLevel": null,
[2025-08-21T19:48:32.785Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:48:32.785Z]     }
[2025-08-21T19:48:32.785Z]   ]
[2025-08-21T19:48:32.785Z] }
[2025-08-21T19:48:32.785Z] FunctionResultAggregatorOptions
[2025-08-21T19:48:32.785Z] {
[2025-08-21T19:48:32.785Z]   "BatchSize": 1000,
[2025-08-21T19:48:32.785Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:48:32.785Z]   "IsEnabled": true
[2025-08-21T19:48:32.785Z] }
[2025-08-21T19:48:32.785Z] ConcurrencyOptions
[2025-08-21T19:48:32.785Z] {
[2025-08-21T19:48:32.785Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:48:32.785Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:48:32.785Z]   "CPUThreshold": 0.8,
[2025-08-21T19:48:32.785Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:48:32.785Z] }
[2025-08-21T19:48:32.785Z] SingletonOptions
[2025-08-21T19:48:32.785Z] {
[2025-08-21T19:48:32.785Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:48:32.785Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:48:32.785Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:48:32.785Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:48:32.785Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:48:32.786Z] }
[2025-08-21T19:48:32.786Z] ScaleOptions
[2025-08-21T19:48:32.786Z] {
[2025-08-21T19:48:32.786Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:48:32.786Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:48:32.786Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:48:32.786Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:48:32.786Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:48:32.786Z] }
[2025-08-21T19:48:32.786Z] Starting JobHost
[2025-08-21T19:48:32.786Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=05a3f87e-1d8b-432d-bece-66718992f491, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:48:32.786Z] Loading functions metadata
[2025-08-21T19:48:32.786Z] Worker indexing is enabled
[2025-08-21T19:48:32.786Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:48:32.786Z] Reading functions metadata (Worker)
[2025-08-21T19:48:32.786Z] Reading functions metadata (Host)
[2025-08-21T19:48:32.989Z] 21 functions found (Host)
[2025-08-21T19:48:32.989Z] Reading functions metadata (Custom)
[2025-08-21T19:48:32.989Z] 0 functions found (Custom)
[2025-08-21T19:48:32.989Z] 21 functions loaded
[2025-08-21T19:48:32.992Z] Generating 21 job function(s)
[2025-08-21T19:48:32.992Z] Worker process started and initialized.
[2025-08-21T19:48:33.014Z] Found the following functions:
[2025-08-21T19:48:33.014Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:48:33.014Z] Host.Functions.analytics
[2025-08-21T19:48:33.014Z] Host.Functions.analyzeUIImage
[2025-08-21T19:48:33.014Z] Host.Functions.atlasComponents
[2025-08-21T19:48:33.014Z] Host.Functions.fast-suggestions
[2025-08-21T19:48:33.014Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:48:33.014Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:48:33.014Z] Host.Functions.generateSuggestions
[2025-08-21T19:48:33.014Z] Host.Functions.generateWireframe
[2025-08-21T19:48:33.014Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:48:33.014Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:48:33.014Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:48:33.014Z] Host.Functions.get-template
[2025-08-21T19:48:33.014Z] Host.Functions.githubAuthCallback
[2025-08-21T19:48:33.014Z] Host.Functions.githubAuthStart
[2025-08-21T19:48:33.014Z] Host.Functions.health
[2025-08-21T19:48:33.014Z] Host.Functions.healthCheck
[2025-08-21T19:48:33.014Z] Host.Functions.openai-health
[2025-08-21T19:48:33.014Z] Host.Functions.performance-stats
[2025-08-21T19:48:33.014Z] Host.Functions.testFunction
[2025-08-21T19:48:33.014Z] Host.Functions.testSimple
[2025-08-21T19:48:33.014Z] 
[2025-08-21T19:48:33.015Z] HttpOptions
[2025-08-21T19:48:33.015Z] {
[2025-08-21T19:48:33.015Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:48:33.015Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:48:33.015Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:48:33.015Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:48:33.015Z]   "RoutePrefix": "api"
[2025-08-21T19:48:33.015Z] }
[2025-08-21T19:48:33.015Z] Initializing function HTTP routes
[2025-08-21T19:48:33.015Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:48:33.015Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:48:33.015Z] 
[2025-08-21T19:48:33.015Z] Host initialized (229ms)
[2025-08-21T19:48:33.015Z] Host started (229ms)
[2025-08-21T19:48:33.015Z] Job host started
[2025-08-21T19:48:33.015Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:48:33.015Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:48:33.054Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:48:33.055Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:48:33.055Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:48:33.055Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:48:33.103Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:48:33.103Z] 🔍 Current env vars:
[2025-08-21T19:48:33.103Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:48:33.103Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:48:33.103Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:48:33.103Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:48:33.103Z]   Deployment: gpt-4o
[2025-08-21T19:48:33.103Z]   API Version: 2024-08-01-preview
[2025-08-21T19:48:33.103Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:48:33.103Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:48:33.103Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:48:33.103Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:48:33.103Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:48:33.105Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:48:33.110Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.110Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.111Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.111Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.111Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.111Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.111Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:48:33.111Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '451edc4f-c80d-4728-90d7-d24ff773fea9'.
[2025-08-21T19:48:33.111Z] Result: Failure
[2025-08-21T19:48:33.111Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:48:33.111Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:48:33.111Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:48:33.111Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.111Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.111Z]                    ^^^^^
[2025-08-21T19:48:33.111Z] 
[2025-08-21T19:48:33.111Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:48:33.111Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'aceba907-ae94-4c5b-b11b-40c516c6926a'.
[2025-08-21T19:48:33.111Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:48:33.111Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:48:33.111Z] Result: Failure
[2025-08-21T19:48:33.111Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:48:33.111Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:48:33.111Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:48:33.111Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:48:33.111Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:48:33.111Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:48:33.111Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest

[2025-08-21T19:48:33.111Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.111Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.112Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:48:33.112Z]                    ^^^^^
[2025-08-21T19:48:33.112Z] 
[2025-08-21T19:48:33.112Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:48:33.112Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:48:33.112Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:48:33.112Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:48:33.112Z]     at Generator.next (<anonymous>).
[2025-08-21T19:48:33.112Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:48:33.112Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:48:33.112Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:48:33.112Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:48:33.112Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.112Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:48:33.112Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:48:33.112Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:48:33.112Z]     at Generator.next (<anonymous>).
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.112Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 received FunctionLoadRequest
[2025-08-21T19:48:33.126Z] Host restarted.
[2025-08-21T19:48:37.787Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:51:27.773Z] Restarting host.
[2025-08-21T19:51:27.783Z] Stopping JobHost
[2025-08-21T19:51:27.784Z] Job host stopped
[2025-08-21T19:51:27.794Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '9d3c3851-8094-43b9-b245-5f0cbf539ea6'
[2025-08-21T19:51:27.962Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:51:27.962Z] Host configuration file read:
[2025-08-21T19:51:27.962Z] {
[2025-08-21T19:51:27.962Z]   "version": "2.0",
[2025-08-21T19:51:27.962Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:51:27.962Z]   "logging": {
[2025-08-21T19:51:27.962Z]     "applicationInsights": {
[2025-08-21T19:51:27.962Z]       "samplingSettings": {
[2025-08-21T19:51:27.962Z]         "isEnabled": true,
[2025-08-21T19:51:27.962Z]         "excludedTypes": "Request"
[2025-08-21T19:51:27.962Z]       }
[2025-08-21T19:51:27.962Z]     },
[2025-08-21T19:51:27.962Z]     "logLevel": {
[2025-08-21T19:51:27.962Z]       "default": "Information",
[2025-08-21T19:51:27.962Z]       "Host.Results": "Information",
[2025-08-21T19:51:27.962Z]       "Function": "Information"
[2025-08-21T19:51:27.962Z]     }
[2025-08-21T19:51:27.962Z]   },
[2025-08-21T19:51:27.962Z]   "extensionBundle": {
[2025-08-21T19:51:27.962Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:51:27.962Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:51:27.962Z]   },
[2025-08-21T19:51:27.962Z]   "watchDirectories": [
[2025-08-21T19:51:27.962Z]     "Shared"
[2025-08-21T19:51:27.962Z]   ]
[2025-08-21T19:51:27.962Z] }
[2025-08-21T19:51:27.967Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:51:27.968Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:51:27.968Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:51:27.968Z] Loading functions metadata
[2025-08-21T19:51:27.968Z] Worker indexing is enabled
[2025-08-21T19:51:27.968Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:51:27.968Z] Reading functions metadata (Worker)
[2025-08-21T19:51:27.968Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:51:27.981Z] Worker d3a4f38f-08ba-4f2c-92cc-4f591f978fc5 exited with code 0
[2025-08-21T19:51:28.190Z] Worker 8495398a-084d-487f-877f-b093cddb4988 connecting on 127.0.0.1:54302
[2025-08-21T19:51:28.218Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received WorkerInitRequest
[2025-08-21T19:51:28.221Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionsMetadataRequest
[2025-08-21T19:51:28.221Z] Reading functions metadata (Host)
[2025-08-21T19:51:28.512Z] 21 functions found (Host)
[2025-08-21T19:51:28.512Z] 21 functions loaded
[2025-08-21T19:51:28.512Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:51:28.513Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:51:28.513Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:51:28.513Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:51:28.710Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:51:28.710Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:51:28.710Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:51:28.710Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:51:28.760Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:51:28.760Z] Host configuration file read:
[2025-08-21T19:51:28.760Z] {
[2025-08-21T19:51:28.760Z]   "version": "2.0",
[2025-08-21T19:51:28.760Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:51:28.760Z]   "logging": {
[2025-08-21T19:51:28.760Z]     "applicationInsights": {
[2025-08-21T19:51:28.760Z]       "samplingSettings": {
[2025-08-21T19:51:28.760Z]         "isEnabled": true,
[2025-08-21T19:51:28.760Z]         "excludedTypes": "Request"
[2025-08-21T19:51:28.760Z]       }
[2025-08-21T19:51:28.760Z]     },
[2025-08-21T19:51:28.760Z]     "logLevel": {
[2025-08-21T19:51:28.760Z]       "default": "Information",
[2025-08-21T19:51:28.760Z]       "Host.Results": "Information",
[2025-08-21T19:51:28.760Z]       "Function": "Information"
[2025-08-21T19:51:28.760Z]     }
[2025-08-21T19:51:28.760Z]   },
[2025-08-21T19:51:28.760Z]   "extensionBundle": {
[2025-08-21T19:51:28.760Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:51:28.760Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:51:28.760Z]   },
[2025-08-21T19:51:28.760Z]   "watchDirectories": [
[2025-08-21T19:51:28.760Z]     "Shared"
[2025-08-21T19:51:28.760Z]   ]
[2025-08-21T19:51:28.760Z] }
[2025-08-21T19:51:28.803Z] Initializing Warmup Extension.
[2025-08-21T19:51:28.805Z] Initializing Host. OperationId: '9d3c3851-8094-43b9-b245-5f0cbf539ea6'.
[2025-08-21T19:51:28.805Z] Host initialization: ConsecutiveErrors=0, StartupCount=29, OperationId=9d3c3851-8094-43b9-b245-5f0cbf539ea6
[2025-08-21T19:51:28.807Z] LoggerFilterOptions
[2025-08-21T19:51:28.807Z] {
[2025-08-21T19:51:28.807Z]   "MinLevel": "None",
[2025-08-21T19:51:28.807Z]   "Rules": [
[2025-08-21T19:51:28.807Z]     {
[2025-08-21T19:51:28.807Z]       "ProviderName": null,
[2025-08-21T19:51:28.807Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:51:28.807Z]       "LogLevel": "None",
[2025-08-21T19:51:28.807Z]       "Filter": null
[2025-08-21T19:51:28.807Z]     },
[2025-08-21T19:51:28.807Z]     {
[2025-08-21T19:51:28.807Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:51:28.807Z]       "CategoryName": null,
[2025-08-21T19:51:28.807Z]       "LogLevel": "None",
[2025-08-21T19:51:28.807Z]       "Filter": null
[2025-08-21T19:51:28.807Z]     },
[2025-08-21T19:51:28.807Z]     {
[2025-08-21T19:51:28.807Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:51:28.807Z]       "CategoryName": null,
[2025-08-21T19:51:28.807Z]       "LogLevel": null,
[2025-08-21T19:51:28.807Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:51:28.807Z]     },
[2025-08-21T19:51:28.807Z]     {
[2025-08-21T19:51:28.807Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": null,
[2025-08-21T19:51:28.808Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": null,
[2025-08-21T19:51:28.808Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": "Host.Results",
[2025-08-21T19:51:28.808Z]       "LogLevel": "Information",
[2025-08-21T19:51:28.808Z]       "Filter": null
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": "Function",
[2025-08-21T19:51:28.808Z]       "LogLevel": "Information",
[2025-08-21T19:51:28.808Z]       "Filter": null
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": "Information",
[2025-08-21T19:51:28.808Z]       "Filter": null
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": "None",
[2025-08-21T19:51:28.808Z]       "Filter": null
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": null,
[2025-08-21T19:51:28.808Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": null,
[2025-08-21T19:51:28.808Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:51:28.808Z]     }
[2025-08-21T19:51:28.808Z]   ]
[2025-08-21T19:51:28.808Z] }
[2025-08-21T19:51:28.808Z] LoggerFilterOptions
[2025-08-21T19:51:28.808Z] {
[2025-08-21T19:51:28.808Z]   "MinLevel": "None",
[2025-08-21T19:51:28.808Z]   "Rules": [
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:51:28.808Z]       "LogLevel": "None",
[2025-08-21T19:51:28.808Z]       "Filter": null
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": "None",
[2025-08-21T19:51:28.808Z]       "Filter": null
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": null,
[2025-08-21T19:51:28.808Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": null,
[2025-08-21T19:51:28.808Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": null,
[2025-08-21T19:51:28.808Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": "Host.Results",
[2025-08-21T19:51:28.808Z]       "LogLevel": "Information",
[2025-08-21T19:51:28.808Z]       "Filter": null
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": "Function",
[2025-08-21T19:51:28.808Z]       "LogLevel": "Information",
[2025-08-21T19:51:28.808Z]       "Filter": null
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": null,
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": "Information",
[2025-08-21T19:51:28.808Z]       "Filter": null
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": "None",
[2025-08-21T19:51:28.808Z]       "Filter": null
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": null,
[2025-08-21T19:51:28.808Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:51:28.808Z]     },
[2025-08-21T19:51:28.808Z]     {
[2025-08-21T19:51:28.808Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:51:28.808Z]       "CategoryName": null,
[2025-08-21T19:51:28.808Z]       "LogLevel": null,
[2025-08-21T19:51:28.808Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:51:28.808Z]     }
[2025-08-21T19:51:28.808Z]   ]
[2025-08-21T19:51:28.808Z] }
[2025-08-21T19:51:28.808Z] FunctionResultAggregatorOptions
[2025-08-21T19:51:28.808Z] {
[2025-08-21T19:51:28.808Z]   "BatchSize": 1000,
[2025-08-21T19:51:28.808Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:51:28.808Z]   "IsEnabled": true
[2025-08-21T19:51:28.808Z] }
[2025-08-21T19:51:28.808Z] ConcurrencyOptions
[2025-08-21T19:51:28.808Z] {
[2025-08-21T19:51:28.808Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:51:28.808Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:51:28.808Z]   "CPUThreshold": 0.8,
[2025-08-21T19:51:28.808Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:51:28.808Z] }
[2025-08-21T19:51:28.808Z] SingletonOptions
[2025-08-21T19:51:28.808Z] {
[2025-08-21T19:51:28.808Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:51:28.808Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:51:28.808Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:51:28.808Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:51:28.808Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:51:28.808Z] }
[2025-08-21T19:51:28.808Z] ScaleOptions
[2025-08-21T19:51:28.808Z] {
[2025-08-21T19:51:28.808Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:51:28.808Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:51:28.808Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:51:28.808Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:51:28.808Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:51:28.808Z] }
[2025-08-21T19:51:28.808Z] Starting JobHost
[2025-08-21T19:51:28.809Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=cad64c80-ce4e-453c-9a68-d38461d528d1, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:51:28.809Z] Loading functions metadata
[2025-08-21T19:51:28.809Z] Worker indexing is enabled
[2025-08-21T19:51:28.809Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:51:28.809Z] Reading functions metadata (Worker)
[2025-08-21T19:51:28.809Z] Reading functions metadata (Host)
[2025-08-21T19:51:29.029Z] 21 functions found (Host)
[2025-08-21T19:51:29.029Z] Reading functions metadata (Custom)
[2025-08-21T19:51:29.029Z] 0 functions found (Custom)
[2025-08-21T19:51:29.029Z] 21 functions loaded
[2025-08-21T19:51:29.031Z] Generating 21 job function(s)
[2025-08-21T19:51:29.031Z] Worker process started and initialized.
[2025-08-21T19:51:29.040Z] Found the following functions:
[2025-08-21T19:51:29.040Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:51:29.040Z] Host.Functions.analytics
[2025-08-21T19:51:29.040Z] Host.Functions.analyzeUIImage
[2025-08-21T19:51:29.040Z] Host.Functions.atlasComponents
[2025-08-21T19:51:29.040Z] Host.Functions.fast-suggestions
[2025-08-21T19:51:29.040Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:51:29.040Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:51:29.040Z] Host.Functions.generateSuggestions
[2025-08-21T19:51:29.040Z] Host.Functions.generateWireframe
[2025-08-21T19:51:29.040Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:51:29.040Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:51:29.040Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:51:29.040Z] Host.Functions.get-template
[2025-08-21T19:51:29.040Z] Host.Functions.githubAuthCallback
[2025-08-21T19:51:29.040Z] Host.Functions.githubAuthStart
[2025-08-21T19:51:29.040Z] Host.Functions.health
[2025-08-21T19:51:29.040Z] Host.Functions.healthCheck
[2025-08-21T19:51:29.040Z] Host.Functions.openai-health
[2025-08-21T19:51:29.040Z] Host.Functions.performance-stats
[2025-08-21T19:51:29.040Z] Host.Functions.testFunction
[2025-08-21T19:51:29.040Z] Host.Functions.testSimple
[2025-08-21T19:51:29.040Z] 
[2025-08-21T19:51:29.040Z] HttpOptions
[2025-08-21T19:51:29.040Z] {
[2025-08-21T19:51:29.040Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:51:29.040Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:51:29.040Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:51:29.040Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:51:29.040Z]   "RoutePrefix": "api"
[2025-08-21T19:51:29.040Z] }
[2025-08-21T19:51:29.040Z] Initializing function HTTP routes
[2025-08-21T19:51:29.040Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:51:29.040Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:51:29.040Z] 
[2025-08-21T19:51:29.040Z] Host initialized (231ms)
[2025-08-21T19:51:29.040Z] Host started (231ms)
[2025-08-21T19:51:29.040Z] Job host started
[2025-08-21T19:51:29.041Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:51:29.041Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:51:29.078Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:51:29.079Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:51:29.079Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:51:29.079Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:51:29.122Z] Host restarted.
[2025-08-21T19:51:29.127Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:51:29.127Z] 🔍 Current env vars:
[2025-08-21T19:51:29.127Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:51:29.127Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:51:29.127Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:51:29.127Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:51:29.127Z]   Deployment: gpt-4o
[2025-08-21T19:51:29.127Z]   API Version: 2024-08-01-preview
[2025-08-21T19:51:29.127Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:51:29.127Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:51:29.127Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:51:29.127Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:51:29.127Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:51:29.128Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:51:29.133Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.133Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.133Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.133Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.133Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.133Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:51:29.134Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '36d9b686-39a6-4ffe-89d3-77f1708385fd'.
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Result: Failure
[2025-08-21T19:51:29.134Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:51:29.134Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:51:29.134Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:51:29.134Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:51:29.134Z]                    ^^^^^
[2025-08-21T19:51:29.134Z] 
[2025-08-21T19:51:29.134Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:51:29.134Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '0c134096-2b3a-46ed-abec-47c6e6e0e842'.
[2025-08-21T19:51:29.134Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:51:29.134Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:51:29.134Z] Result: Failure
[2025-08-21T19:51:29.134Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:51:29.134Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:51:29.134Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:51:29.134Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:51:29.134Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:51:29.134Z]                    ^^^^^
[2025-08-21T19:51:29.134Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:51:29.134Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:51:29.134Z] 
[2025-08-21T19:51:29.134Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:51:29.134Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:51:29.134Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:51:29.134Z]     at Generator.next (<anonymous>).
[2025-08-21T19:51:29.134Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:51:29.134Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:51:29.134Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:51:29.134Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:51:29.134Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:51:29.134Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:51:29.134Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:51:29.134Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:51:29.134Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:51:29.134Z]     at Generator.next (<anonymous>).
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.134Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.135Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.135Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.135Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:29.135Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionLoadRequest
[2025-08-21T19:51:33.812Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:52:26.576Z] Executing HTTP request: {
[2025-08-21T19:52:26.576Z]   "requestId": "ef74a7c1-6d6b-4db1-b283-14b20e96ffc6",
[2025-08-21T19:52:26.576Z]   "method": "POST",
[2025-08-21T19:52:26.577Z]   "userAgent": "curl/8.7.1",
[2025-08-21T19:52:26.577Z]   "uri": "/api/generate-wireframe"
[2025-08-21T19:52:26.577Z] }
[2025-08-21T19:52:26.584Z] Executing 'Functions.generateWireframeAlias' (Reason='This function was programmatically called via the host APIs.', Id=9d15e246-ce50-4db4-8084-6d54918eb6e1)
[2025-08-21T19:52:26.623Z]  ALIAS ENDPOINT: Redirecting to unified handler
[2025-08-21T19:52:26.623Z] 🔥 UNIFIED ENDPOINT: Handling wireframe request
[2025-08-21T19:52:26.623Z] 🔥 Method: POST
[2025-08-21T19:52:26.623Z] 🔥 URL: http://localhost:7072/api/generate-wireframe
[2025-08-21T19:52:26.623Z] 🔥 Headers: {
[2025-08-21T19:52:26.623Z]   "accept": "*/*",
[2025-08-21T19:52:26.623Z]   "host": "localhost:7072",
[2025-08-21T19:52:26.623Z]   "user-agent": "curl/8.7.1",
[2025-08-21T19:52:26.623Z]   "content-type": "application/json",
[2025-08-21T19:52:26.623Z]   "content-length": "47"
[2025-08-21T19:52:26.623Z] }
[2025-08-21T19:52:26.623Z] 🔥 Body: {
[2025-08-21T19:52:26.623Z]   "description": "create a simple contact form"
[2025-08-21T19:52:26.623Z] }
[2025-08-21T19:52:26.664Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionInvocationRequest with invocationId 9d15e246-ce50-4db4-8084-6d54918eb6e1
[2025-08-21T19:52:32.233Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:52:32.234Z] 🔍 Atlas component check:
[2025-08-21T19:52:32.234Z]     Description: "create a simple contact form"
[2025-08-21T19:52:32.234Z]     Contains learning keywords: false
[2025-08-21T19:52:32.234Z]     Is hero section exclusion: false
[2025-08-21T19:52:32.234Z]     Final isLearningPlatform: false
[2025-08-21T19:52:32.234Z] ℹ️ Not a learning platform, skipping Atlas components
[2025-08-21T19:52:32.234Z] 🧭 Atlas Top Navigation added to wireframe
[2025-08-21T19:52:32.234Z] ✅ Wireframe completed with Atlas components: Hero: 0, Modules: 0, Learning Paths: 0
[2025-08-21T19:52:32.234Z] ✅ UNIFIED ENDPOINT: Successfully generated wireframe
[2025-08-21T19:52:32.246Z] Executed 'Functions.generateWireframeAlias' (Succeeded, Id=9d15e246-ce50-4db4-8084-6d54918eb6e1, Duration=5663ms)
[2025-08-21T19:52:32.247Z] Executed HTTP request: {
[2025-08-21T19:52:32.247Z]   "requestId": "ef74a7c1-6d6b-4db1-b283-14b20e96ffc6",
[2025-08-21T19:52:32.247Z]   "identities": "",
[2025-08-21T19:52:32.247Z]   "status": "200",
[2025-08-21T19:52:32.247Z]   "duration": "5671"
[2025-08-21T19:52:32.247Z] }
[2025-08-21T19:52:41.922Z] Executing HTTP request: {
[2025-08-21T19:52:41.922Z]   "requestId": "3bbe2fa0-835c-4770-bfe7-9935f7a9ac00",
[2025-08-21T19:52:41.922Z]   "method": "POST",
[2025-08-21T19:52:41.922Z]   "userAgent": "curl/8.7.1",
[2025-08-21T19:52:41.922Z]   "uri": "/api/generate-wireframe"
[2025-08-21T19:52:41.922Z] }
[2025-08-21T19:52:41.928Z] Executing 'Functions.generateWireframeAlias' (Reason='This function was programmatically called via the host APIs.', Id=52f3a855-8974-4022-95dd-9a3d7a70b990)
[2025-08-21T19:52:41.931Z]  ALIAS ENDPOINT: Redirecting to unified handler
[2025-08-21T19:52:41.931Z] 🔥 UNIFIED ENDPOINT: Handling wireframe request
[2025-08-21T19:52:41.931Z] 🔥 Method: POST
[2025-08-21T19:52:41.931Z] 🔥 URL: http://localhost:7072/api/generate-wireframe
[2025-08-21T19:52:41.931Z] 🔥 Headers: {
[2025-08-21T19:52:41.931Z]   "accept": "*/*",
[2025-08-21T19:52:41.931Z]   "host": "localhost:7072",
[2025-08-21T19:52:41.932Z]   "user-agent": "curl/8.7.1",
[2025-08-21T19:52:41.932Z]   "content-type": "application/json",
[2025-08-21T19:52:41.932Z]   "content-length": "67"
[2025-08-21T19:52:41.932Z] }
[2025-08-21T19:52:41.932Z] 🔥 Body: {
[2025-08-21T19:52:41.932Z]   "description": "create a learning platform with training modules"
[2025-08-21T19:52:41.932Z] }
[2025-08-21T19:52:41.936Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionInvocationRequest with invocationId 52f3a855-8974-4022-95dd-9a3d7a70b990
[2025-08-21T19:52:46.504Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:52:46.504Z] 🔍 Atlas component check:
[2025-08-21T19:52:46.504Z]     Description: "create a learning platform with training modules"
[2025-08-21T19:52:46.504Z]     Contains learning keywords: true
[2025-08-21T19:52:46.504Z]     Is hero section exclusion: false
[2025-08-21T19:52:46.504Z]     Final isLearningPlatform: true
[2025-08-21T19:52:46.505Z] ✅ Hero section replaced with Atlas Hero component
[2025-08-21T19:52:46.505Z] ✅ Added Atlas Learning Path and Module components
[2025-08-21T19:52:46.505Z] 🎯 Atlas components added: Hero: 1, Modules: 6, Learning Paths: 2
[2025-08-21T19:52:46.505Z] 🧭 Atlas Top Navigation added to wireframe
[2025-08-21T19:52:46.505Z] ✅ Wireframe completed with Atlas components: Hero: 1, Modules: 6, Learning Paths: 2
[2025-08-21T19:52:46.505Z] ✅ UNIFIED ENDPOINT: Successfully generated wireframe
[2025-08-21T19:52:46.514Z] Executed 'Functions.generateWireframeAlias' (Succeeded, Id=52f3a855-8974-4022-95dd-9a3d7a70b990, Duration=4587ms)
[2025-08-21T19:52:46.517Z] Executed HTTP request: {
[2025-08-21T19:52:46.517Z]   "requestId": "3bbe2fa0-835c-4770-bfe7-9935f7a9ac00",
[2025-08-21T19:52:46.517Z]   "identities": "",
[2025-08-21T19:52:46.517Z]   "status": "200",
[2025-08-21T19:52:46.517Z]   "duration": "4594"
[2025-08-21T19:52:46.517Z] }
[2025-08-21T19:53:56.746Z] Executing HTTP request: {
[2025-08-21T19:53:56.746Z]   "requestId": "f595f40f-2f77-45e2-b003-b183e0673dda",
[2025-08-21T19:53:56.746Z]   "method": "POST",
[2025-08-21T19:53:56.746Z]   "userAgent": "curl/8.7.1",
[2025-08-21T19:53:56.746Z]   "uri": "/api/generate-wireframe"
[2025-08-21T19:53:56.746Z] }
[2025-08-21T19:53:56.759Z] Executing 'Functions.generateWireframeAlias' (Reason='This function was programmatically called via the host APIs.', Id=dd752033-01d6-4879-8fa1-7ddcbfc6bed8)
[2025-08-21T19:53:56.783Z]  ALIAS ENDPOINT: Redirecting to unified handler
[2025-08-21T19:53:56.783Z] 🔥 UNIFIED ENDPOINT: Handling wireframe request
[2025-08-21T19:53:56.783Z] 🔥 Method: POST
[2025-08-21T19:53:56.783Z] 🔥 URL: http://localhost:7072/api/generate-wireframe
[2025-08-21T19:53:56.783Z] 🔥 Headers: {
[2025-08-21T19:53:56.783Z]   "accept": "*/*",
[2025-08-21T19:53:56.783Z]   "host": "localhost:7072",
[2025-08-21T19:53:56.783Z]   "user-agent": "curl/8.7.1",
[2025-08-21T19:53:56.783Z]   "content-type": "application/json",
[2025-08-21T19:53:56.783Z]   "content-length": "63"
[2025-08-21T19:53:56.783Z] }
[2025-08-21T19:53:56.783Z] 🔥 Body: {
[2025-08-21T19:53:56.783Z]   "description": "create a business homepage with contact info"
[2025-08-21T19:53:56.783Z] }
[2025-08-21T19:53:56.797Z] Worker 8495398a-084d-487f-877f-b093cddb4988 received FunctionInvocationRequest with invocationId dd752033-01d6-4879-8fa1-7ddcbfc6bed8
[2025-08-21T19:54:02.490Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:54:02.490Z] 🔍 Atlas component check:
[2025-08-21T19:54:02.490Z]     Description: "create a business homepage with contact info"
[2025-08-21T19:54:02.490Z]     Contains learning keywords: false
[2025-08-21T19:54:02.490Z]     Is hero section exclusion: false
[2025-08-21T19:54:02.490Z]     Final isLearningPlatform: false
[2025-08-21T19:54:02.491Z] ℹ️ Not a learning platform, skipping Atlas components
[2025-08-21T19:54:02.491Z] 🧭 Atlas Top Navigation added to wireframe
[2025-08-21T19:54:02.491Z] ✅ Wireframe completed with Atlas components: Hero: 0, Modules: 0, Learning Paths: 0
[2025-08-21T19:54:02.491Z] ✅ UNIFIED ENDPOINT: Successfully generated wireframe
[2025-08-21T19:54:02.492Z] Executed 'Functions.generateWireframeAlias' (Succeeded, Id=dd752033-01d6-4879-8fa1-7ddcbfc6bed8, Duration=5739ms)
[2025-08-21T19:54:02.493Z] Executed HTTP request: {
[2025-08-21T19:54:02.493Z]   "requestId": "f595f40f-2f77-45e2-b003-b183e0673dda",
[2025-08-21T19:54:02.493Z]   "identities": "",
[2025-08-21T19:54:02.493Z]   "status": "200",
[2025-08-21T19:54:02.493Z]   "duration": "5747"
[2025-08-21T19:54:02.493Z] }
[2025-08-21T19:54:49.004Z] Restarting host.
[2025-08-21T19:54:49.016Z] Stopping JobHost
[2025-08-21T19:54:49.017Z] Job host stopped
[2025-08-21T19:54:49.020Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '3108b52d-7d39-45d4-987e-47b4d9e8920a'
[2025-08-21T19:54:49.121Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:54:49.121Z] Host configuration file read:
[2025-08-21T19:54:49.121Z] {
[2025-08-21T19:54:49.121Z]   "version": "2.0",
[2025-08-21T19:54:49.121Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:54:49.121Z]   "logging": {
[2025-08-21T19:54:49.121Z]     "applicationInsights": {
[2025-08-21T19:54:49.121Z]       "samplingSettings": {
[2025-08-21T19:54:49.121Z]         "isEnabled": true,
[2025-08-21T19:54:49.121Z]         "excludedTypes": "Request"
[2025-08-21T19:54:49.121Z]       }
[2025-08-21T19:54:49.121Z]     },
[2025-08-21T19:54:49.121Z]     "logLevel": {
[2025-08-21T19:54:49.121Z]       "default": "Information",
[2025-08-21T19:54:49.121Z]       "Host.Results": "Information",
[2025-08-21T19:54:49.121Z]       "Function": "Information"
[2025-08-21T19:54:49.121Z]     }
[2025-08-21T19:54:49.121Z]   },
[2025-08-21T19:54:49.121Z]   "extensionBundle": {
[2025-08-21T19:54:49.121Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:54:49.121Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:54:49.121Z]   },
[2025-08-21T19:54:49.121Z]   "watchDirectories": [
[2025-08-21T19:54:49.121Z]     "Shared"
[2025-08-21T19:54:49.121Z]   ]
[2025-08-21T19:54:49.121Z] }
[2025-08-21T19:54:49.127Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:54:49.127Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:54:49.127Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:54:49.127Z] Loading functions metadata
[2025-08-21T19:54:49.127Z] Worker indexing is enabled
[2025-08-21T19:54:49.127Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:54:49.127Z] Reading functions metadata (Worker)
[2025-08-21T19:54:49.127Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:54:49.148Z] Worker 8495398a-084d-487f-877f-b093cddb4988 exited with code 0
[2025-08-21T19:54:49.350Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 connecting on 127.0.0.1:54302
[2025-08-21T19:54:49.375Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received WorkerInitRequest
[2025-08-21T19:54:49.379Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionsMetadataRequest
[2025-08-21T19:54:49.379Z] Reading functions metadata (Host)
[2025-08-21T19:54:49.795Z] 21 functions found (Host)
[2025-08-21T19:54:49.795Z] 21 functions loaded
[2025-08-21T19:54:49.795Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:54:49.796Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:54:49.796Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:54:49.796Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:54:50.831Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:54:50.831Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:54:50.832Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:54:50.832Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:54:50.875Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:54:50.875Z] Host configuration file read:
[2025-08-21T19:54:50.875Z] {
[2025-08-21T19:54:50.875Z]   "version": "2.0",
[2025-08-21T19:54:50.875Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:54:50.875Z]   "logging": {
[2025-08-21T19:54:50.875Z]     "applicationInsights": {
[2025-08-21T19:54:50.875Z]       "samplingSettings": {
[2025-08-21T19:54:50.875Z]         "isEnabled": true,
[2025-08-21T19:54:50.875Z]         "excludedTypes": "Request"
[2025-08-21T19:54:50.875Z]       }
[2025-08-21T19:54:50.875Z]     },
[2025-08-21T19:54:50.875Z]     "logLevel": {
[2025-08-21T19:54:50.875Z]       "default": "Information",
[2025-08-21T19:54:50.875Z]       "Host.Results": "Information",
[2025-08-21T19:54:50.875Z]       "Function": "Information"
[2025-08-21T19:54:50.875Z]     }
[2025-08-21T19:54:50.875Z]   },
[2025-08-21T19:54:50.875Z]   "extensionBundle": {
[2025-08-21T19:54:50.875Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:54:50.875Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:54:50.875Z]   },
[2025-08-21T19:54:50.875Z]   "watchDirectories": [
[2025-08-21T19:54:50.875Z]     "Shared"
[2025-08-21T19:54:50.875Z]   ]
[2025-08-21T19:54:50.875Z] }
[2025-08-21T19:54:50.924Z] Initializing Warmup Extension.
[2025-08-21T19:54:50.926Z] Initializing Host. OperationId: '3108b52d-7d39-45d4-987e-47b4d9e8920a'.
[2025-08-21T19:54:50.926Z] Host initialization: ConsecutiveErrors=0, StartupCount=30, OperationId=3108b52d-7d39-45d4-987e-47b4d9e8920a
[2025-08-21T19:54:50.927Z] LoggerFilterOptions
[2025-08-21T19:54:50.927Z] {
[2025-08-21T19:54:50.927Z]   "MinLevel": "None",
[2025-08-21T19:54:50.927Z]   "Rules": [
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": null,
[2025-08-21T19:54:50.927Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:54:50.927Z]       "LogLevel": "None",
[2025-08-21T19:54:50.927Z]       "Filter": null
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:54:50.927Z]       "CategoryName": null,
[2025-08-21T19:54:50.927Z]       "LogLevel": "None",
[2025-08-21T19:54:50.927Z]       "Filter": null
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:54:50.927Z]       "CategoryName": null,
[2025-08-21T19:54:50.927Z]       "LogLevel": null,
[2025-08-21T19:54:50.927Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": null,
[2025-08-21T19:54:50.927Z]       "CategoryName": null,
[2025-08-21T19:54:50.927Z]       "LogLevel": null,
[2025-08-21T19:54:50.927Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": null,
[2025-08-21T19:54:50.927Z]       "CategoryName": null,
[2025-08-21T19:54:50.927Z]       "LogLevel": null,
[2025-08-21T19:54:50.927Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": null,
[2025-08-21T19:54:50.927Z]       "CategoryName": "Host.Results",
[2025-08-21T19:54:50.927Z]       "LogLevel": "Information",
[2025-08-21T19:54:50.927Z]       "Filter": null
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": null,
[2025-08-21T19:54:50.927Z]       "CategoryName": "Function",
[2025-08-21T19:54:50.927Z]       "LogLevel": "Information",
[2025-08-21T19:54:50.927Z]       "Filter": null
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": null,
[2025-08-21T19:54:50.927Z]       "CategoryName": null,
[2025-08-21T19:54:50.927Z]       "LogLevel": "Information",
[2025-08-21T19:54:50.927Z]       "Filter": null
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:54:50.927Z]       "CategoryName": null,
[2025-08-21T19:54:50.927Z]       "LogLevel": "None",
[2025-08-21T19:54:50.927Z]       "Filter": null
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:54:50.927Z]       "CategoryName": null,
[2025-08-21T19:54:50.927Z]       "LogLevel": null,
[2025-08-21T19:54:50.927Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:54:50.927Z]       "CategoryName": null,
[2025-08-21T19:54:50.927Z]       "LogLevel": null,
[2025-08-21T19:54:50.927Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:54:50.927Z]     }
[2025-08-21T19:54:50.927Z]   ]
[2025-08-21T19:54:50.927Z] }
[2025-08-21T19:54:50.927Z] LoggerFilterOptions
[2025-08-21T19:54:50.927Z] {
[2025-08-21T19:54:50.927Z]   "MinLevel": "None",
[2025-08-21T19:54:50.927Z]   "Rules": [
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": null,
[2025-08-21T19:54:50.927Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:54:50.927Z]       "LogLevel": "None",
[2025-08-21T19:54:50.927Z]       "Filter": null
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:54:50.927Z]       "CategoryName": null,
[2025-08-21T19:54:50.927Z]       "LogLevel": "None",
[2025-08-21T19:54:50.927Z]       "Filter": null
[2025-08-21T19:54:50.927Z]     },
[2025-08-21T19:54:50.927Z]     {
[2025-08-21T19:54:50.927Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:54:50.927Z]       "CategoryName": null,
[2025-08-21T19:54:50.927Z]       "LogLevel": null,
[2025-08-21T19:54:50.928Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:54:50.928Z]     },
[2025-08-21T19:54:50.928Z]     {
[2025-08-21T19:54:50.928Z]       "ProviderName": null,
[2025-08-21T19:54:50.928Z]       "CategoryName": null,
[2025-08-21T19:54:50.928Z]       "LogLevel": null,
[2025-08-21T19:54:50.928Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:54:50.928Z]     },
[2025-08-21T19:54:50.928Z]     {
[2025-08-21T19:54:50.928Z]       "ProviderName": null,
[2025-08-21T19:54:50.928Z]       "CategoryName": null,
[2025-08-21T19:54:50.928Z]       "LogLevel": null,
[2025-08-21T19:54:50.928Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:54:50.928Z]     },
[2025-08-21T19:54:50.928Z]     {
[2025-08-21T19:54:50.928Z]       "ProviderName": null,
[2025-08-21T19:54:50.928Z]       "CategoryName": "Host.Results",
[2025-08-21T19:54:50.928Z]       "LogLevel": "Information",
[2025-08-21T19:54:50.928Z]       "Filter": null
[2025-08-21T19:54:50.928Z]     },
[2025-08-21T19:54:50.928Z]     {
[2025-08-21T19:54:50.928Z]       "ProviderName": null,
[2025-08-21T19:54:50.928Z]       "CategoryName": "Function",
[2025-08-21T19:54:50.928Z]       "LogLevel": "Information",
[2025-08-21T19:54:50.928Z]       "Filter": null
[2025-08-21T19:54:50.928Z]     },
[2025-08-21T19:54:50.928Z]     {
[2025-08-21T19:54:50.928Z]       "ProviderName": null,
[2025-08-21T19:54:50.928Z]       "CategoryName": null,
[2025-08-21T19:54:50.928Z]       "LogLevel": "Information",
[2025-08-21T19:54:50.928Z]       "Filter": null
[2025-08-21T19:54:50.928Z]     },
[2025-08-21T19:54:50.928Z]     {
[2025-08-21T19:54:50.928Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:54:50.928Z]       "CategoryName": null,
[2025-08-21T19:54:50.928Z]       "LogLevel": "None",
[2025-08-21T19:54:50.928Z]       "Filter": null
[2025-08-21T19:54:50.928Z]     },
[2025-08-21T19:54:50.928Z]     {
[2025-08-21T19:54:50.928Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:54:50.928Z]       "CategoryName": null,
[2025-08-21T19:54:50.928Z]       "LogLevel": null,
[2025-08-21T19:54:50.928Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:54:50.928Z]     },
[2025-08-21T19:54:50.928Z]     {
[2025-08-21T19:54:50.928Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:54:50.928Z]       "CategoryName": null,
[2025-08-21T19:54:50.928Z]       "LogLevel": null,
[2025-08-21T19:54:50.928Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:54:50.928Z]     }
[2025-08-21T19:54:50.928Z]   ]
[2025-08-21T19:54:50.928Z] }
[2025-08-21T19:54:50.928Z] FunctionResultAggregatorOptions
[2025-08-21T19:54:50.928Z] {
[2025-08-21T19:54:50.928Z]   "BatchSize": 1000,
[2025-08-21T19:54:50.928Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:54:50.928Z]   "IsEnabled": true
[2025-08-21T19:54:50.928Z] }
[2025-08-21T19:54:50.928Z] ConcurrencyOptions
[2025-08-21T19:54:50.928Z] {
[2025-08-21T19:54:50.928Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:54:50.928Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:54:50.928Z]   "CPUThreshold": 0.8,
[2025-08-21T19:54:50.928Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:54:50.928Z] }
[2025-08-21T19:54:50.928Z] SingletonOptions
[2025-08-21T19:54:50.928Z] {
[2025-08-21T19:54:50.928Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:54:50.928Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:54:50.928Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:54:50.928Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:54:50.928Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:54:50.928Z] }
[2025-08-21T19:54:50.928Z] ScaleOptions
[2025-08-21T19:54:50.928Z] {
[2025-08-21T19:54:50.928Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:54:50.928Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:54:50.928Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:54:50.928Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:54:50.928Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:54:50.928Z] }
[2025-08-21T19:54:50.928Z] Starting JobHost
[2025-08-21T19:54:50.928Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=48a67811-9749-4282-a908-905f9b97692b, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:54:50.928Z] Loading functions metadata
[2025-08-21T19:54:50.928Z] Worker indexing is enabled
[2025-08-21T19:54:50.928Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:54:50.928Z] Reading functions metadata (Worker)
[2025-08-21T19:54:50.928Z] Reading functions metadata (Host)
[2025-08-21T19:54:51.119Z] 21 functions found (Host)
[2025-08-21T19:54:51.119Z] Reading functions metadata (Custom)
[2025-08-21T19:54:51.119Z] 0 functions found (Custom)
[2025-08-21T19:54:51.119Z] 21 functions loaded
[2025-08-21T19:54:51.121Z] Generating 21 job function(s)
[2025-08-21T19:54:51.121Z] Worker process started and initialized.
[2025-08-21T19:54:51.134Z] Found the following functions:
[2025-08-21T19:54:51.134Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:54:51.134Z] Host.Functions.analytics
[2025-08-21T19:54:51.134Z] Host.Functions.analyzeUIImage
[2025-08-21T19:54:51.134Z] Host.Functions.atlasComponents
[2025-08-21T19:54:51.134Z] Host.Functions.fast-suggestions
[2025-08-21T19:54:51.134Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:54:51.134Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:54:51.134Z] Host.Functions.generateSuggestions
[2025-08-21T19:54:51.134Z] Host.Functions.generateWireframe
[2025-08-21T19:54:51.134Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:54:51.134Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:54:51.134Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:54:51.134Z] Host.Functions.get-template
[2025-08-21T19:54:51.134Z] Host.Functions.githubAuthCallback
[2025-08-21T19:54:51.134Z] Host.Functions.githubAuthStart
[2025-08-21T19:54:51.134Z] Host.Functions.health
[2025-08-21T19:54:51.134Z] Host.Functions.healthCheck
[2025-08-21T19:54:51.134Z] Host.Functions.openai-health
[2025-08-21T19:54:51.134Z] Host.Functions.performance-stats
[2025-08-21T19:54:51.134Z] Host.Functions.testFunction
[2025-08-21T19:54:51.134Z] Host.Functions.testSimple
[2025-08-21T19:54:51.134Z] 
[2025-08-21T19:54:51.134Z] HttpOptions
[2025-08-21T19:54:51.134Z] {
[2025-08-21T19:54:51.134Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:54:51.135Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:54:51.135Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:54:51.135Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:54:51.135Z]   "RoutePrefix": "api"
[2025-08-21T19:54:51.135Z] }
[2025-08-21T19:54:51.135Z] Initializing function HTTP routes
[2025-08-21T19:54:51.135Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:54:51.135Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:54:51.135Z] 
[2025-08-21T19:54:51.135Z] Host initialized (207ms)
[2025-08-21T19:54:51.135Z] Host started (207ms)
[2025-08-21T19:54:51.135Z] Job host started
[2025-08-21T19:54:51.135Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:54:51.135Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:54:51.178Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:54:51.179Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:54:51.179Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:54:51.179Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:54:51.222Z] Host restarted.
[2025-08-21T19:54:51.225Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:54:51.225Z] 🔍 Current env vars:
[2025-08-21T19:54:51.225Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:54:51.225Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:54:51.225Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:54:51.225Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:54:51.225Z]   Deployment: gpt-4o
[2025-08-21T19:54:51.225Z]   API Version: 2024-08-01-preview
[2025-08-21T19:54:51.225Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:54:51.225Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:54:51.225Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:54:51.225Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:54:51.225Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:54:51.227Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:54:51.231Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.231Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.232Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.232Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.232Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.232Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.232Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:54:51.232Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.232Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '5f08efa1-8814-4644-98d6-80c6a72d75f2'.
[2025-08-21T19:54:51.232Z] Result: Failure
[2025-08-21T19:54:51.232Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:54:51.232Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:54:51.232Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:54:51.232Z]                    ^^^^^
[2025-08-21T19:54:51.232Z] 
[2025-08-21T19:54:51.232Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:54:51.232Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:54:51.232Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:54:51.232Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:54:51.232Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:54:51.232Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:54:51.232Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:54:51.232Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:54:51.232Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:54:51.232Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:54:51.232Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:54:51.232Z]     at Generator.next (<anonymous>).
[2025-08-21T19:54:51.232Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'bdaaaafc-8e50-4f6d-b448-8f85fccb06f6'.
[2025-08-21T19:54:51.232Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.232Z] Result: Failure
[2025-08-21T19:54:51.232Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:54:51.232Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:54:51.232Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:54:51.232Z]                    ^^^^^
[2025-08-21T19:54:51.232Z] 
[2025-08-21T19:54:51.232Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:54:51.232Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:54:51.232Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:54:51.232Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:54:51.232Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:54:51.232Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:54:51.232Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:54:51.232Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:54:51.232Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:54:51.232Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:54:51.232Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.232Z]     at Generator.next (<anonymous>).
[2025-08-21T19:54:51.232Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.232Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.233Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.233Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.233Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.233Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.233Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.233Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.233Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.233Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.233Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:51.233Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 received FunctionLoadRequest
[2025-08-21T19:54:55.929Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:55:04.051Z] Restarting host.
[2025-08-21T19:55:04.055Z] Stopping JobHost
[2025-08-21T19:55:04.055Z] Job host stopped
[2025-08-21T19:55:04.056Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '0bdb109a-d687-4636-8693-556f5fe32593'
[2025-08-21T19:55:04.128Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:55:04.128Z] Host configuration file read:
[2025-08-21T19:55:04.128Z] {
[2025-08-21T19:55:04.128Z]   "version": "2.0",
[2025-08-21T19:55:04.128Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:55:04.128Z]   "logging": {
[2025-08-21T19:55:04.128Z]     "applicationInsights": {
[2025-08-21T19:55:04.128Z]       "samplingSettings": {
[2025-08-21T19:55:04.128Z]         "isEnabled": true,
[2025-08-21T19:55:04.128Z]         "excludedTypes": "Request"
[2025-08-21T19:55:04.128Z]       }
[2025-08-21T19:55:04.128Z]     },
[2025-08-21T19:55:04.128Z]     "logLevel": {
[2025-08-21T19:55:04.128Z]       "default": "Information",
[2025-08-21T19:55:04.128Z]       "Host.Results": "Information",
[2025-08-21T19:55:04.128Z]       "Function": "Information"
[2025-08-21T19:55:04.128Z]     }
[2025-08-21T19:55:04.128Z]   },
[2025-08-21T19:55:04.128Z]   "extensionBundle": {
[2025-08-21T19:55:04.128Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:55:04.128Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:55:04.128Z]   },
[2025-08-21T19:55:04.128Z]   "watchDirectories": [
[2025-08-21T19:55:04.128Z]     "Shared"
[2025-08-21T19:55:04.128Z]   ]
[2025-08-21T19:55:04.128Z] }
[2025-08-21T19:55:04.129Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:55:04.130Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:55:04.130Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:55:04.130Z] Loading functions metadata
[2025-08-21T19:55:04.130Z] Worker indexing is enabled
[2025-08-21T19:55:04.130Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:55:04.130Z] Reading functions metadata (Worker)
[2025-08-21T19:55:04.130Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:55:04.136Z] Worker 3c553d35-9b5e-42fc-924d-95239d415a97 exited with code 0
[2025-08-21T19:55:04.303Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 connecting on 127.0.0.1:54302
[2025-08-21T19:55:04.331Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received WorkerInitRequest
[2025-08-21T19:55:04.334Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionsMetadataRequest
[2025-08-21T19:55:04.334Z] Reading functions metadata (Host)
[2025-08-21T19:55:04.558Z] 21 functions found (Host)
[2025-08-21T19:55:04.559Z] 21 functions loaded
[2025-08-21T19:55:04.559Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:55:04.559Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:55:04.560Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:55:04.560Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:55:04.703Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:55:04.703Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:55:04.703Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:55:04.703Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:55:04.734Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:55:04.734Z] Host configuration file read:
[2025-08-21T19:55:04.734Z] {
[2025-08-21T19:55:04.734Z]   "version": "2.0",
[2025-08-21T19:55:04.734Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:55:04.734Z]   "logging": {
[2025-08-21T19:55:04.734Z]     "applicationInsights": {
[2025-08-21T19:55:04.734Z]       "samplingSettings": {
[2025-08-21T19:55:04.734Z]         "isEnabled": true,
[2025-08-21T19:55:04.734Z]         "excludedTypes": "Request"
[2025-08-21T19:55:04.734Z]       }
[2025-08-21T19:55:04.734Z]     },
[2025-08-21T19:55:04.734Z]     "logLevel": {
[2025-08-21T19:55:04.734Z]       "default": "Information",
[2025-08-21T19:55:04.734Z]       "Host.Results": "Information",
[2025-08-21T19:55:04.734Z]       "Function": "Information"
[2025-08-21T19:55:04.734Z]     }
[2025-08-21T19:55:04.734Z]   },
[2025-08-21T19:55:04.734Z]   "extensionBundle": {
[2025-08-21T19:55:04.734Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:55:04.734Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:55:04.734Z]   },
[2025-08-21T19:55:04.734Z]   "watchDirectories": [
[2025-08-21T19:55:04.734Z]     "Shared"
[2025-08-21T19:55:04.734Z]   ]
[2025-08-21T19:55:04.734Z] }
[2025-08-21T19:55:04.779Z] Initializing Warmup Extension.
[2025-08-21T19:55:04.780Z] Initializing Host. OperationId: '0bdb109a-d687-4636-8693-556f5fe32593'.
[2025-08-21T19:55:04.780Z] Host initialization: ConsecutiveErrors=0, StartupCount=31, OperationId=0bdb109a-d687-4636-8693-556f5fe32593
[2025-08-21T19:55:04.782Z] LoggerFilterOptions
[2025-08-21T19:55:04.782Z] {
[2025-08-21T19:55:04.782Z]   "MinLevel": "None",
[2025-08-21T19:55:04.782Z]   "Rules": [
[2025-08-21T19:55:04.782Z]     {
[2025-08-21T19:55:04.782Z]       "ProviderName": null,
[2025-08-21T19:55:04.782Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:55:04.782Z]       "LogLevel": "None",
[2025-08-21T19:55:04.782Z]       "Filter": null
[2025-08-21T19:55:04.782Z]     },
[2025-08-21T19:55:04.782Z]     {
[2025-08-21T19:55:04.782Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:04.782Z]       "CategoryName": null,
[2025-08-21T19:55:04.782Z]       "LogLevel": "None",
[2025-08-21T19:55:04.782Z]       "Filter": null
[2025-08-21T19:55:04.782Z]     },
[2025-08-21T19:55:04.782Z]     {
[2025-08-21T19:55:04.782Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:04.782Z]       "CategoryName": null,
[2025-08-21T19:55:04.782Z]       "LogLevel": null,
[2025-08-21T19:55:04.782Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:04.782Z]     },
[2025-08-21T19:55:04.782Z]     {
[2025-08-21T19:55:04.782Z]       "ProviderName": null,
[2025-08-21T19:55:04.782Z]       "CategoryName": null,
[2025-08-21T19:55:04.782Z]       "LogLevel": null,
[2025-08-21T19:55:04.782Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:04.782Z]     },
[2025-08-21T19:55:04.782Z]     {
[2025-08-21T19:55:04.782Z]       "ProviderName": null,
[2025-08-21T19:55:04.782Z]       "CategoryName": null,
[2025-08-21T19:55:04.782Z]       "LogLevel": null,
[2025-08-21T19:55:04.782Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:04.782Z]     },
[2025-08-21T19:55:04.782Z]     {
[2025-08-21T19:55:04.782Z]       "ProviderName": null,
[2025-08-21T19:55:04.782Z]       "CategoryName": "Host.Results",
[2025-08-21T19:55:04.782Z]       "LogLevel": "Information",
[2025-08-21T19:55:04.782Z]       "Filter": null
[2025-08-21T19:55:04.782Z]     },
[2025-08-21T19:55:04.782Z]     {
[2025-08-21T19:55:04.782Z]       "ProviderName": null,
[2025-08-21T19:55:04.782Z]       "CategoryName": "Function",
[2025-08-21T19:55:04.782Z]       "LogLevel": "Information",
[2025-08-21T19:55:04.782Z]       "Filter": null
[2025-08-21T19:55:04.782Z]     },
[2025-08-21T19:55:04.782Z]     {
[2025-08-21T19:55:04.782Z]       "ProviderName": null,
[2025-08-21T19:55:04.782Z]       "CategoryName": null,
[2025-08-21T19:55:04.782Z]       "LogLevel": "Information",
[2025-08-21T19:55:04.782Z]       "Filter": null
[2025-08-21T19:55:04.782Z]     },
[2025-08-21T19:55:04.782Z]     {
[2025-08-21T19:55:04.782Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:55:04.782Z]       "CategoryName": null,
[2025-08-21T19:55:04.782Z]       "LogLevel": "None",
[2025-08-21T19:55:04.782Z]       "Filter": null
[2025-08-21T19:55:04.782Z]     },
[2025-08-21T19:55:04.782Z]     {
[2025-08-21T19:55:04.782Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:55:04.783Z]       "CategoryName": null,
[2025-08-21T19:55:04.783Z]       "LogLevel": null,
[2025-08-21T19:55:04.783Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:04.783Z]       "CategoryName": null,
[2025-08-21T19:55:04.783Z]       "LogLevel": null,
[2025-08-21T19:55:04.783Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:04.783Z]     }
[2025-08-21T19:55:04.783Z]   ]
[2025-08-21T19:55:04.783Z] }
[2025-08-21T19:55:04.783Z] LoggerFilterOptions
[2025-08-21T19:55:04.783Z] {
[2025-08-21T19:55:04.783Z]   "MinLevel": "None",
[2025-08-21T19:55:04.783Z]   "Rules": [
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": null,
[2025-08-21T19:55:04.783Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:55:04.783Z]       "LogLevel": "None",
[2025-08-21T19:55:04.783Z]       "Filter": null
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:04.783Z]       "CategoryName": null,
[2025-08-21T19:55:04.783Z]       "LogLevel": "None",
[2025-08-21T19:55:04.783Z]       "Filter": null
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:04.783Z]       "CategoryName": null,
[2025-08-21T19:55:04.783Z]       "LogLevel": null,
[2025-08-21T19:55:04.783Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": null,
[2025-08-21T19:55:04.783Z]       "CategoryName": null,
[2025-08-21T19:55:04.783Z]       "LogLevel": null,
[2025-08-21T19:55:04.783Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": null,
[2025-08-21T19:55:04.783Z]       "CategoryName": null,
[2025-08-21T19:55:04.783Z]       "LogLevel": null,
[2025-08-21T19:55:04.783Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": null,
[2025-08-21T19:55:04.783Z]       "CategoryName": "Host.Results",
[2025-08-21T19:55:04.783Z]       "LogLevel": "Information",
[2025-08-21T19:55:04.783Z]       "Filter": null
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": null,
[2025-08-21T19:55:04.783Z]       "CategoryName": "Function",
[2025-08-21T19:55:04.783Z]       "LogLevel": "Information",
[2025-08-21T19:55:04.783Z]       "Filter": null
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": null,
[2025-08-21T19:55:04.783Z]       "CategoryName": null,
[2025-08-21T19:55:04.783Z]       "LogLevel": "Information",
[2025-08-21T19:55:04.783Z]       "Filter": null
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:55:04.783Z]       "CategoryName": null,
[2025-08-21T19:55:04.783Z]       "LogLevel": "None",
[2025-08-21T19:55:04.783Z]       "Filter": null
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:55:04.783Z]       "CategoryName": null,
[2025-08-21T19:55:04.783Z]       "LogLevel": null,
[2025-08-21T19:55:04.783Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:04.783Z]     },
[2025-08-21T19:55:04.783Z]     {
[2025-08-21T19:55:04.783Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:04.783Z]       "CategoryName": null,
[2025-08-21T19:55:04.783Z]       "LogLevel": null,
[2025-08-21T19:55:04.783Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:04.783Z]     }
[2025-08-21T19:55:04.783Z]   ]
[2025-08-21T19:55:04.783Z] }
[2025-08-21T19:55:04.783Z] FunctionResultAggregatorOptions
[2025-08-21T19:55:04.783Z] {
[2025-08-21T19:55:04.783Z]   "BatchSize": 1000,
[2025-08-21T19:55:04.783Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:55:04.783Z]   "IsEnabled": true
[2025-08-21T19:55:04.783Z] }
[2025-08-21T19:55:04.783Z] ConcurrencyOptions
[2025-08-21T19:55:04.783Z] {
[2025-08-21T19:55:04.783Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:55:04.783Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:55:04.783Z]   "CPUThreshold": 0.8,
[2025-08-21T19:55:04.783Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:55:04.783Z] }
[2025-08-21T19:55:04.783Z] SingletonOptions
[2025-08-21T19:55:04.783Z] {
[2025-08-21T19:55:04.783Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:55:04.783Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:55:04.783Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:55:04.783Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:55:04.783Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:55:04.783Z] }
[2025-08-21T19:55:04.783Z] ScaleOptions
[2025-08-21T19:55:04.783Z] {
[2025-08-21T19:55:04.783Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:55:04.783Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:55:04.783Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:55:04.783Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:55:04.783Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:55:04.783Z] }
[2025-08-21T19:55:04.783Z] Starting JobHost
[2025-08-21T19:55:04.783Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=da0e4f8c-912a-42d9-a58c-6133bc04aba5, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:55:04.783Z] Loading functions metadata
[2025-08-21T19:55:04.783Z] Worker indexing is enabled
[2025-08-21T19:55:04.783Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:55:04.783Z] Reading functions metadata (Worker)
[2025-08-21T19:55:04.783Z] Reading functions metadata (Host)
[2025-08-21T19:55:05.003Z] 21 functions found (Host)
[2025-08-21T19:55:05.003Z] Reading functions metadata (Custom)
[2025-08-21T19:55:05.003Z] 0 functions found (Custom)
[2025-08-21T19:55:05.003Z] 21 functions loaded
[2025-08-21T19:55:05.004Z] Generating 21 job function(s)
[2025-08-21T19:55:05.004Z] Worker process started and initialized.
[2025-08-21T19:55:05.015Z] Found the following functions:
[2025-08-21T19:55:05.015Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:55:05.015Z] Host.Functions.analytics
[2025-08-21T19:55:05.015Z] Host.Functions.analyzeUIImage
[2025-08-21T19:55:05.015Z] Host.Functions.atlasComponents
[2025-08-21T19:55:05.015Z] Host.Functions.fast-suggestions
[2025-08-21T19:55:05.015Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:55:05.015Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:55:05.015Z] Host.Functions.generateSuggestions
[2025-08-21T19:55:05.015Z] Host.Functions.generateWireframe
[2025-08-21T19:55:05.015Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:55:05.015Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:55:05.015Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:55:05.015Z] Host.Functions.get-template
[2025-08-21T19:55:05.015Z] Host.Functions.githubAuthCallback
[2025-08-21T19:55:05.015Z] Host.Functions.githubAuthStart
[2025-08-21T19:55:05.015Z] Host.Functions.health
[2025-08-21T19:55:05.015Z] Host.Functions.healthCheck
[2025-08-21T19:55:05.015Z] Host.Functions.openai-health
[2025-08-21T19:55:05.015Z] Host.Functions.performance-stats
[2025-08-21T19:55:05.015Z] Host.Functions.testFunction
[2025-08-21T19:55:05.015Z] Host.Functions.testSimple
[2025-08-21T19:55:05.015Z] 
[2025-08-21T19:55:05.015Z] HttpOptions
[2025-08-21T19:55:05.015Z] {
[2025-08-21T19:55:05.015Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:55:05.015Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:55:05.015Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:55:05.015Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:55:05.015Z]   "RoutePrefix": "api"
[2025-08-21T19:55:05.015Z] }
[2025-08-21T19:55:05.015Z] Initializing function HTTP routes
[2025-08-21T19:55:05.015Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:55:05.015Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:55:05.015Z] 
[2025-08-21T19:55:05.015Z] Host initialized (231ms)
[2025-08-21T19:55:05.015Z] Host started (232ms)
[2025-08-21T19:55:05.015Z] Job host started
[2025-08-21T19:55:05.016Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:55:05.016Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:55:05.052Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:55:05.052Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:55:05.052Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:55:05.052Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:55:05.096Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:55:05.096Z] 🔍 Current env vars:
[2025-08-21T19:55:05.096Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:55:05.096Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:55:05.096Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:55:05.096Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:55:05.096Z]   Deployment: gpt-4o
[2025-08-21T19:55:05.096Z]   API Version: 2024-08-01-preview
[2025-08-21T19:55:05.096Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:55:05.096Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:55:05.096Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:55:05.096Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:55:05.096Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:55:05.098Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:55:05.102Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.102Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.103Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.103Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.103Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.103Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.103Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:55:05.103Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '30511e25-eebb-4f16-a4b6-d08f216f86d4'.
[2025-08-21T19:55:05.103Z] Result: Failure
[2025-08-21T19:55:05.103Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:55:05.103Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:55:05.103Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:55:05.103Z]                    ^^^^^
[2025-08-21T19:55:05.103Z] 
[2025-08-21T19:55:05.103Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:55:05.103Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:55:05.103Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:55:05.103Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:55:05.103Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:55:05.103Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:55:05.103Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest[2025-08-21T19:55:05.104Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'

[2025-08-21T19:55:05.104Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.104Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '60e5a515-e292-42c3-8bcc-e7d18eb58574'.
[2025-08-21T19:55:05.104Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:55:05.104Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:55:05.104Z] Result: Failure
[2025-08-21T19:55:05.104Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:55:05.104Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:55:05.104Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:55:05.104Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:55:05.104Z]                    ^^^^^
[2025-08-21T19:55:05.104Z]     at Generator.next (<anonymous>).
[2025-08-21T19:55:05.104Z] 
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.104Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:55:05.104Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:55:05.104Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:55:05.104Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:55:05.104Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.104Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:55:05.104Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:55:05.104Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:55:05.104Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:55:05.104Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:55:05.104Z]     at Generator.next (<anonymous>).
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.104Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.105Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.105Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.105Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 received FunctionLoadRequest
[2025-08-21T19:55:05.109Z] Host restarted.
[2025-08-21T19:55:09.783Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:55:58.671Z] Restarting host.
[2025-08-21T19:55:58.676Z] Stopping JobHost
[2025-08-21T19:55:58.677Z] Job host stopped
[2025-08-21T19:55:58.678Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'd6af4dd9-557e-4755-918c-15d5c41d680c'
[2025-08-21T19:55:58.760Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:55:58.760Z] Host configuration file read:
[2025-08-21T19:55:58.760Z] {
[2025-08-21T19:55:58.760Z]   "version": "2.0",
[2025-08-21T19:55:58.760Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:55:58.760Z]   "logging": {
[2025-08-21T19:55:58.760Z]     "applicationInsights": {
[2025-08-21T19:55:58.760Z]       "samplingSettings": {
[2025-08-21T19:55:58.760Z]         "isEnabled": true,
[2025-08-21T19:55:58.760Z]         "excludedTypes": "Request"
[2025-08-21T19:55:58.760Z]       }
[2025-08-21T19:55:58.760Z]     },
[2025-08-21T19:55:58.760Z]     "logLevel": {
[2025-08-21T19:55:58.760Z]       "default": "Information",
[2025-08-21T19:55:58.760Z]       "Host.Results": "Information",
[2025-08-21T19:55:58.760Z]       "Function": "Information"
[2025-08-21T19:55:58.760Z]     }
[2025-08-21T19:55:58.760Z]   },
[2025-08-21T19:55:58.760Z]   "extensionBundle": {
[2025-08-21T19:55:58.760Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:55:58.760Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:55:58.760Z]   },
[2025-08-21T19:55:58.760Z]   "watchDirectories": [
[2025-08-21T19:55:58.760Z]     "Shared"
[2025-08-21T19:55:58.760Z]   ]
[2025-08-21T19:55:58.760Z] }
[2025-08-21T19:55:58.761Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:55:58.761Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:55:58.761Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:55:58.761Z] Loading functions metadata
[2025-08-21T19:55:58.761Z] Worker indexing is enabled
[2025-08-21T19:55:58.761Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:55:58.761Z] Reading functions metadata (Worker)
[2025-08-21T19:55:58.761Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:55:58.766Z] Worker 07db866d-4b50-471e-bef7-c9ae16a7e486 exited with code 0
[2025-08-21T19:55:58.956Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 connecting on 127.0.0.1:54302
[2025-08-21T19:55:58.981Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received WorkerInitRequest
[2025-08-21T19:55:58.984Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionsMetadataRequest
[2025-08-21T19:55:58.984Z] Reading functions metadata (Host)
[2025-08-21T19:55:59.273Z] 21 functions found (Host)
[2025-08-21T19:55:59.273Z] 21 functions loaded
[2025-08-21T19:55:59.273Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:55:59.273Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:55:59.273Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:55:59.273Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:55:59.449Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:55:59.449Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:55:59.449Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:55:59.449Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:55:59.508Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:55:59.508Z] Host configuration file read:
[2025-08-21T19:55:59.508Z] {
[2025-08-21T19:55:59.508Z]   "version": "2.0",
[2025-08-21T19:55:59.508Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:55:59.508Z]   "logging": {
[2025-08-21T19:55:59.508Z]     "applicationInsights": {
[2025-08-21T19:55:59.508Z]       "samplingSettings": {
[2025-08-21T19:55:59.508Z]         "isEnabled": true,
[2025-08-21T19:55:59.508Z]         "excludedTypes": "Request"
[2025-08-21T19:55:59.508Z]       }
[2025-08-21T19:55:59.508Z]     },
[2025-08-21T19:55:59.508Z]     "logLevel": {
[2025-08-21T19:55:59.508Z]       "default": "Information",
[2025-08-21T19:55:59.508Z]       "Host.Results": "Information",
[2025-08-21T19:55:59.508Z]       "Function": "Information"
[2025-08-21T19:55:59.508Z]     }
[2025-08-21T19:55:59.508Z]   },
[2025-08-21T19:55:59.508Z]   "extensionBundle": {
[2025-08-21T19:55:59.508Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:55:59.508Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:55:59.508Z]   },
[2025-08-21T19:55:59.508Z]   "watchDirectories": [
[2025-08-21T19:55:59.508Z]     "Shared"
[2025-08-21T19:55:59.508Z]   ]
[2025-08-21T19:55:59.508Z] }
[2025-08-21T19:55:59.554Z] Initializing Warmup Extension.
[2025-08-21T19:55:59.556Z] Initializing Host. OperationId: 'd6af4dd9-557e-4755-918c-15d5c41d680c'.
[2025-08-21T19:55:59.556Z] Host initialization: ConsecutiveErrors=0, StartupCount=32, OperationId=d6af4dd9-557e-4755-918c-15d5c41d680c
[2025-08-21T19:55:59.557Z] LoggerFilterOptions
[2025-08-21T19:55:59.557Z] {
[2025-08-21T19:55:59.557Z]   "MinLevel": "None",
[2025-08-21T19:55:59.557Z]   "Rules": [
[2025-08-21T19:55:59.557Z]     {
[2025-08-21T19:55:59.557Z]       "ProviderName": null,
[2025-08-21T19:55:59.557Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:55:59.557Z]       "LogLevel": "None",
[2025-08-21T19:55:59.557Z]       "Filter": null
[2025-08-21T19:55:59.557Z]     },
[2025-08-21T19:55:59.557Z]     {
[2025-08-21T19:55:59.557Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:59.557Z]       "CategoryName": null,
[2025-08-21T19:55:59.557Z]       "LogLevel": "None",
[2025-08-21T19:55:59.557Z]       "Filter": null
[2025-08-21T19:55:59.557Z]     },
[2025-08-21T19:55:59.557Z]     {
[2025-08-21T19:55:59.557Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:59.557Z]       "CategoryName": null,
[2025-08-21T19:55:59.557Z]       "LogLevel": null,
[2025-08-21T19:55:59.557Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:59.557Z]     },
[2025-08-21T19:55:59.557Z]     {
[2025-08-21T19:55:59.557Z]       "ProviderName": null,
[2025-08-21T19:55:59.557Z]       "CategoryName": null,
[2025-08-21T19:55:59.557Z]       "LogLevel": null,
[2025-08-21T19:55:59.557Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:59.557Z]     },
[2025-08-21T19:55:59.557Z]     {
[2025-08-21T19:55:59.557Z]       "ProviderName": null,
[2025-08-21T19:55:59.557Z]       "CategoryName": null,
[2025-08-21T19:55:59.557Z]       "LogLevel": null,
[2025-08-21T19:55:59.557Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:59.557Z]     },
[2025-08-21T19:55:59.557Z]     {
[2025-08-21T19:55:59.557Z]       "ProviderName": null,
[2025-08-21T19:55:59.557Z]       "CategoryName": "Host.Results",
[2025-08-21T19:55:59.557Z]       "LogLevel": "Information",
[2025-08-21T19:55:59.557Z]       "Filter": null
[2025-08-21T19:55:59.557Z]     },
[2025-08-21T19:55:59.557Z]     {
[2025-08-21T19:55:59.557Z]       "ProviderName": null,
[2025-08-21T19:55:59.557Z]       "CategoryName": "Function",
[2025-08-21T19:55:59.557Z]       "LogLevel": "Information",
[2025-08-21T19:55:59.557Z]       "Filter": null
[2025-08-21T19:55:59.557Z]     },
[2025-08-21T19:55:59.557Z]     {
[2025-08-21T19:55:59.557Z]       "ProviderName": null,
[2025-08-21T19:55:59.557Z]       "CategoryName": null,
[2025-08-21T19:55:59.558Z]       "LogLevel": "Information",
[2025-08-21T19:55:59.558Z]       "Filter": null
[2025-08-21T19:55:59.558Z]     },
[2025-08-21T19:55:59.558Z]     {
[2025-08-21T19:55:59.558Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:55:59.558Z]       "CategoryName": null,
[2025-08-21T19:55:59.558Z]       "LogLevel": "None",
[2025-08-21T19:55:59.558Z]       "Filter": null
[2025-08-21T19:55:59.558Z]     },
[2025-08-21T19:55:59.558Z]     {
[2025-08-21T19:55:59.558Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:55:59.558Z]       "CategoryName": null,
[2025-08-21T19:55:59.558Z]       "LogLevel": null,
[2025-08-21T19:55:59.558Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:59.558Z]     },
[2025-08-21T19:55:59.558Z]     {
[2025-08-21T19:55:59.558Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:59.558Z]       "CategoryName": null,
[2025-08-21T19:55:59.558Z]       "LogLevel": null,
[2025-08-21T19:55:59.558Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:59.558Z]     }
[2025-08-21T19:55:59.558Z]   ]
[2025-08-21T19:55:59.558Z] }
[2025-08-21T19:55:59.558Z] LoggerFilterOptions
[2025-08-21T19:55:59.558Z] {
[2025-08-21T19:55:59.558Z]   "MinLevel": "None",
[2025-08-21T19:55:59.558Z]   "Rules": [
[2025-08-21T19:55:59.558Z]     {
[2025-08-21T19:55:59.558Z]       "ProviderName": null,
[2025-08-21T19:55:59.558Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:55:59.558Z]       "LogLevel": "None",
[2025-08-21T19:55:59.558Z]       "Filter": null
[2025-08-21T19:55:59.558Z]     },
[2025-08-21T19:55:59.558Z]     {
[2025-08-21T19:55:59.558Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:59.558Z]       "CategoryName": null,
[2025-08-21T19:55:59.558Z]       "LogLevel": "None",
[2025-08-21T19:55:59.558Z]       "Filter": null
[2025-08-21T19:55:59.558Z]     },
[2025-08-21T19:55:59.558Z]     {
[2025-08-21T19:55:59.558Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:59.558Z]       "CategoryName": null,
[2025-08-21T19:55:59.558Z]       "LogLevel": null,
[2025-08-21T19:55:59.558Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:59.558Z]     },
[2025-08-21T19:55:59.558Z]     {
[2025-08-21T19:55:59.558Z]       "ProviderName": null,
[2025-08-21T19:55:59.558Z]       "CategoryName": null,
[2025-08-21T19:55:59.558Z]       "LogLevel": null,
[2025-08-21T19:55:59.558Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:59.558Z]     },
[2025-08-21T19:55:59.558Z]     {
[2025-08-21T19:55:59.558Z]       "ProviderName": null,
[2025-08-21T19:55:59.558Z]       "CategoryName": null,
[2025-08-21T19:55:59.558Z]       "LogLevel": null,
[2025-08-21T19:55:59.558Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:59.558Z]     },
[2025-08-21T19:55:59.558Z]     {
[2025-08-21T19:55:59.558Z]       "ProviderName": null,
[2025-08-21T19:55:59.558Z]       "CategoryName": "Host.Results",
[2025-08-21T19:55:59.558Z]       "LogLevel": "Information",
[2025-08-21T19:55:59.558Z]       "Filter": null
[2025-08-21T19:55:59.558Z]     },
[2025-08-21T19:55:59.558Z]     {
[2025-08-21T19:55:59.558Z]       "ProviderName": null,
[2025-08-21T19:55:59.559Z]       "CategoryName": "Function",
[2025-08-21T19:55:59.559Z]       "LogLevel": "Information",
[2025-08-21T19:55:59.559Z]       "Filter": null
[2025-08-21T19:55:59.559Z]     },
[2025-08-21T19:55:59.559Z]     {
[2025-08-21T19:55:59.559Z]       "ProviderName": null,
[2025-08-21T19:55:59.559Z]       "CategoryName": null,
[2025-08-21T19:55:59.559Z]       "LogLevel": "Information",
[2025-08-21T19:55:59.559Z]       "Filter": null
[2025-08-21T19:55:59.559Z]     },
[2025-08-21T19:55:59.559Z]     {
[2025-08-21T19:55:59.559Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:55:59.559Z]       "CategoryName": null,
[2025-08-21T19:55:59.559Z]       "LogLevel": "None",
[2025-08-21T19:55:59.559Z]       "Filter": null
[2025-08-21T19:55:59.559Z]     },
[2025-08-21T19:55:59.559Z]     {
[2025-08-21T19:55:59.559Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:55:59.559Z]       "CategoryName": null,
[2025-08-21T19:55:59.559Z]       "LogLevel": null,
[2025-08-21T19:55:59.559Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:59.559Z]     },
[2025-08-21T19:55:59.559Z]     {
[2025-08-21T19:55:59.559Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:55:59.559Z]       "CategoryName": null,
[2025-08-21T19:55:59.559Z]       "LogLevel": null,
[2025-08-21T19:55:59.559Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:55:59.559Z]     }
[2025-08-21T19:55:59.559Z]   ]
[2025-08-21T19:55:59.559Z] }
[2025-08-21T19:55:59.559Z] FunctionResultAggregatorOptions
[2025-08-21T19:55:59.559Z] {
[2025-08-21T19:55:59.559Z]   "BatchSize": 1000,
[2025-08-21T19:55:59.559Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:55:59.559Z]   "IsEnabled": true
[2025-08-21T19:55:59.559Z] }
[2025-08-21T19:55:59.559Z] ConcurrencyOptions
[2025-08-21T19:55:59.559Z] {
[2025-08-21T19:55:59.559Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:55:59.559Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:55:59.559Z]   "CPUThreshold": 0.8,
[2025-08-21T19:55:59.559Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:55:59.559Z] }
[2025-08-21T19:55:59.559Z] SingletonOptions
[2025-08-21T19:55:59.559Z] {
[2025-08-21T19:55:59.559Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:55:59.559Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:55:59.559Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:55:59.559Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:55:59.559Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:55:59.559Z] }
[2025-08-21T19:55:59.559Z] ScaleOptions
[2025-08-21T19:55:59.559Z] {
[2025-08-21T19:55:59.559Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:55:59.559Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:55:59.559Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:55:59.559Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:55:59.559Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:55:59.559Z] }
[2025-08-21T19:55:59.559Z] Starting JobHost
[2025-08-21T19:55:59.559Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=57264bee-9602-4eda-9e2e-4b6c81ce62f0, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:55:59.560Z] Loading functions metadata
[2025-08-21T19:55:59.560Z] Worker indexing is enabled
[2025-08-21T19:55:59.560Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:55:59.560Z] Reading functions metadata (Worker)
[2025-08-21T19:55:59.560Z] Reading functions metadata (Host)
[2025-08-21T19:55:59.766Z] 21 functions found (Host)
[2025-08-21T19:55:59.766Z] Reading functions metadata (Custom)
[2025-08-21T19:55:59.767Z] 0 functions found (Custom)
[2025-08-21T19:55:59.767Z] 21 functions loaded
[2025-08-21T19:55:59.781Z] Generating 21 job function(s)
[2025-08-21T19:55:59.781Z] Worker process started and initialized.
[2025-08-21T19:55:59.796Z] Found the following functions:
[2025-08-21T19:55:59.796Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:55:59.796Z] Host.Functions.analytics
[2025-08-21T19:55:59.796Z] Host.Functions.analyzeUIImage
[2025-08-21T19:55:59.796Z] Host.Functions.atlasComponents
[2025-08-21T19:55:59.796Z] Host.Functions.fast-suggestions
[2025-08-21T19:55:59.796Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:55:59.796Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:55:59.796Z] Host.Functions.generateSuggestions
[2025-08-21T19:55:59.796Z] Host.Functions.generateWireframe
[2025-08-21T19:55:59.796Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:55:59.796Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:55:59.796Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:55:59.796Z] Host.Functions.get-template
[2025-08-21T19:55:59.796Z] Host.Functions.githubAuthCallback
[2025-08-21T19:55:59.796Z] Host.Functions.githubAuthStart
[2025-08-21T19:55:59.796Z] Host.Functions.health
[2025-08-21T19:55:59.796Z] Host.Functions.healthCheck
[2025-08-21T19:55:59.796Z] Host.Functions.openai-health
[2025-08-21T19:55:59.796Z] Host.Functions.performance-stats
[2025-08-21T19:55:59.796Z] Host.Functions.testFunction
[2025-08-21T19:55:59.796Z] Host.Functions.testSimple
[2025-08-21T19:55:59.796Z] 
[2025-08-21T19:55:59.796Z] HttpOptions
[2025-08-21T19:55:59.796Z] {
[2025-08-21T19:55:59.796Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:55:59.796Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:55:59.796Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:55:59.796Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:55:59.796Z]   "RoutePrefix": "api"
[2025-08-21T19:55:59.796Z] }
[2025-08-21T19:55:59.797Z] Initializing function HTTP routes
[2025-08-21T19:55:59.797Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:55:59.797Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:55:59.797Z] 
[2025-08-21T19:55:59.797Z] Host initialized (237ms)
[2025-08-21T19:55:59.797Z] Host started (237ms)
[2025-08-21T19:55:59.797Z] Job host started
[2025-08-21T19:55:59.797Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:55:59.797Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:55:59.841Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:55:59.841Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:55:59.841Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:55:59.841Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:55:59.887Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:55:59.887Z] 🔍 Current env vars:
[2025-08-21T19:55:59.887Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:55:59.887Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:55:59.887Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:55:59.887Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:55:59.887Z]   Deployment: gpt-4o
[2025-08-21T19:55:59.887Z]   API Version: 2024-08-01-preview
[2025-08-21T19:55:59.887Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:55:59.887Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:55:59.887Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:55:59.887Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:55:59.887Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:55:59.889Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:55:59.892Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.892Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.894Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '1217a06e-12a4-44d4-824a-af866ead9b07'.
[2025-08-21T19:55:59.893Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '6d2dfd33-471e-429a-93f1-da9b9a27b34d'.
[2025-08-21T19:55:59.895Z] Result: Failure
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.893Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.894Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.894Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.894Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.894Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.894Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.894Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.894Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 received FunctionLoadRequest
[2025-08-21T19:55:59.895Z] Result: Failure
[2025-08-21T19:55:59.895Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:55:59.895Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:55:59.895Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:55:59.895Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:55:59.895Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:55:59.895Z]                    ^^^^^
[2025-08-21T19:55:59.895Z] 
[2025-08-21T19:55:59.895Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:55:59.895Z]                    ^^^^^
[2025-08-21T19:55:59.895Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:55:59.895Z] 
[2025-08-21T19:55:59.895Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:55:59.895Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:55:59.895Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:55:59.895Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:55:59.895Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:55:59.895Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:55:59.895Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:55:59.895Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:55:59.895Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:55:59.895Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:55:59.895Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:55:59.895Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:55:59.895Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:55:59.895Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:55:59.895Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:55:59.895Z]     at Generator.next (<anonymous>).
[2025-08-21T19:55:59.895Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:55:59.895Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:55:59.895Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:55:59.895Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:55:59.895Z]     at Generator.next (<anonymous>).
[2025-08-21T19:55:59.897Z] Host restarted.
[2025-08-21T19:56:04.558Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:57:18.665Z] Restarting host.
[2025-08-21T19:57:18.673Z] Stopping JobHost
[2025-08-21T19:57:18.674Z] Job host stopped
[2025-08-21T19:57:18.679Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'd6dc9232-4e23-416f-b3fb-df710d28fe31'
[2025-08-21T19:57:18.771Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:57:18.771Z] Host configuration file read:
[2025-08-21T19:57:18.771Z] {
[2025-08-21T19:57:18.771Z]   "version": "2.0",
[2025-08-21T19:57:18.771Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:57:18.771Z]   "logging": {
[2025-08-21T19:57:18.771Z]     "applicationInsights": {
[2025-08-21T19:57:18.771Z]       "samplingSettings": {
[2025-08-21T19:57:18.771Z]         "isEnabled": true,
[2025-08-21T19:57:18.771Z]         "excludedTypes": "Request"
[2025-08-21T19:57:18.771Z]       }
[2025-08-21T19:57:18.771Z]     },
[2025-08-21T19:57:18.771Z]     "logLevel": {
[2025-08-21T19:57:18.771Z]       "default": "Information",
[2025-08-21T19:57:18.771Z]       "Host.Results": "Information",
[2025-08-21T19:57:18.771Z]       "Function": "Information"
[2025-08-21T19:57:18.771Z]     }
[2025-08-21T19:57:18.771Z]   },
[2025-08-21T19:57:18.771Z]   "extensionBundle": {
[2025-08-21T19:57:18.771Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:57:18.771Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:57:18.771Z]   },
[2025-08-21T19:57:18.771Z]   "watchDirectories": [
[2025-08-21T19:57:18.771Z]     "Shared"
[2025-08-21T19:57:18.771Z]   ]
[2025-08-21T19:57:18.771Z] }
[2025-08-21T19:57:18.775Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:57:18.775Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:57:18.775Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:57:18.776Z] Loading functions metadata
[2025-08-21T19:57:18.776Z] Worker indexing is enabled
[2025-08-21T19:57:18.776Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:57:18.776Z] Reading functions metadata (Worker)
[2025-08-21T19:57:18.776Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:57:18.802Z] Worker 15a30a93-7560-471f-8e73-2c2ad3717ec3 exited with code 0
[2025-08-21T19:57:18.978Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 connecting on 127.0.0.1:54302
[2025-08-21T19:57:19.004Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received WorkerInitRequest
[2025-08-21T19:57:19.008Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionsMetadataRequest
[2025-08-21T19:57:19.008Z] Reading functions metadata (Host)
[2025-08-21T19:57:19.226Z] 21 functions found (Host)
[2025-08-21T19:57:19.226Z] 21 functions loaded
[2025-08-21T19:57:19.226Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:57:19.226Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:57:19.226Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:57:19.226Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:57:19.377Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:57:19.377Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:57:19.377Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:57:19.377Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:57:19.402Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:57:19.402Z] Host configuration file read:
[2025-08-21T19:57:19.402Z] {
[2025-08-21T19:57:19.402Z]   "version": "2.0",
[2025-08-21T19:57:19.402Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:57:19.402Z]   "logging": {
[2025-08-21T19:57:19.402Z]     "applicationInsights": {
[2025-08-21T19:57:19.402Z]       "samplingSettings": {
[2025-08-21T19:57:19.402Z]         "isEnabled": true,
[2025-08-21T19:57:19.402Z]         "excludedTypes": "Request"
[2025-08-21T19:57:19.402Z]       }
[2025-08-21T19:57:19.402Z]     },
[2025-08-21T19:57:19.402Z]     "logLevel": {
[2025-08-21T19:57:19.402Z]       "default": "Information",
[2025-08-21T19:57:19.402Z]       "Host.Results": "Information",
[2025-08-21T19:57:19.402Z]       "Function": "Information"
[2025-08-21T19:57:19.402Z]     }
[2025-08-21T19:57:19.402Z]   },
[2025-08-21T19:57:19.402Z]   "extensionBundle": {
[2025-08-21T19:57:19.402Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:57:19.402Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:57:19.402Z]   },
[2025-08-21T19:57:19.402Z]   "watchDirectories": [
[2025-08-21T19:57:19.402Z]     "Shared"
[2025-08-21T19:57:19.402Z]   ]
[2025-08-21T19:57:19.402Z] }
[2025-08-21T19:57:19.436Z] Initializing Warmup Extension.
[2025-08-21T19:57:19.437Z] Initializing Host. OperationId: 'd6dc9232-4e23-416f-b3fb-df710d28fe31'.
[2025-08-21T19:57:19.437Z] Host initialization: ConsecutiveErrors=0, StartupCount=33, OperationId=d6dc9232-4e23-416f-b3fb-df710d28fe31
[2025-08-21T19:57:19.440Z] LoggerFilterOptions
[2025-08-21T19:57:19.440Z] {
[2025-08-21T19:57:19.440Z]   "MinLevel": "None",
[2025-08-21T19:57:19.440Z]   "Rules": [
[2025-08-21T19:57:19.440Z]     {
[2025-08-21T19:57:19.440Z]       "ProviderName": null,
[2025-08-21T19:57:19.440Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:57:19.440Z]       "LogLevel": "None",
[2025-08-21T19:57:19.440Z]       "Filter": null
[2025-08-21T19:57:19.440Z]     },
[2025-08-21T19:57:19.440Z]     {
[2025-08-21T19:57:19.440Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:57:19.440Z]       "CategoryName": null,
[2025-08-21T19:57:19.440Z]       "LogLevel": "None",
[2025-08-21T19:57:19.440Z]       "Filter": null
[2025-08-21T19:57:19.440Z]     },
[2025-08-21T19:57:19.440Z]     {
[2025-08-21T19:57:19.440Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:57:19.440Z]       "CategoryName": null,
[2025-08-21T19:57:19.440Z]       "LogLevel": null,
[2025-08-21T19:57:19.440Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:57:19.440Z]     },
[2025-08-21T19:57:19.440Z]     {
[2025-08-21T19:57:19.440Z]       "ProviderName": null,
[2025-08-21T19:57:19.440Z]       "CategoryName": null,
[2025-08-21T19:57:19.440Z]       "LogLevel": null,
[2025-08-21T19:57:19.440Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:57:19.440Z]     },
[2025-08-21T19:57:19.440Z]     {
[2025-08-21T19:57:19.440Z]       "ProviderName": null,
[2025-08-21T19:57:19.440Z]       "CategoryName": null,
[2025-08-21T19:57:19.440Z]       "LogLevel": null,
[2025-08-21T19:57:19.440Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:57:19.440Z]     },
[2025-08-21T19:57:19.440Z]     {
[2025-08-21T19:57:19.440Z]       "ProviderName": null,
[2025-08-21T19:57:19.440Z]       "CategoryName": "Host.Results",
[2025-08-21T19:57:19.440Z]       "LogLevel": "Information",
[2025-08-21T19:57:19.440Z]       "Filter": null
[2025-08-21T19:57:19.440Z]     },
[2025-08-21T19:57:19.440Z]     {
[2025-08-21T19:57:19.440Z]       "ProviderName": null,
[2025-08-21T19:57:19.440Z]       "CategoryName": "Function",
[2025-08-21T19:57:19.440Z]       "LogLevel": "Information",
[2025-08-21T19:57:19.440Z]       "Filter": null
[2025-08-21T19:57:19.440Z]     },
[2025-08-21T19:57:19.440Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": null,
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": "Information",
[2025-08-21T19:57:19.441Z]       "Filter": null
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": "None",
[2025-08-21T19:57:19.441Z]       "Filter": null
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": null,
[2025-08-21T19:57:19.441Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": null,
[2025-08-21T19:57:19.441Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:57:19.441Z]     }
[2025-08-21T19:57:19.441Z]   ]
[2025-08-21T19:57:19.441Z] }
[2025-08-21T19:57:19.441Z] LoggerFilterOptions
[2025-08-21T19:57:19.441Z] {
[2025-08-21T19:57:19.441Z]   "MinLevel": "None",
[2025-08-21T19:57:19.441Z]   "Rules": [
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": null,
[2025-08-21T19:57:19.441Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:57:19.441Z]       "LogLevel": "None",
[2025-08-21T19:57:19.441Z]       "Filter": null
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": "None",
[2025-08-21T19:57:19.441Z]       "Filter": null
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": null,
[2025-08-21T19:57:19.441Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": null,
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": null,
[2025-08-21T19:57:19.441Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": null,
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": null,
[2025-08-21T19:57:19.441Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": null,
[2025-08-21T19:57:19.441Z]       "CategoryName": "Host.Results",
[2025-08-21T19:57:19.441Z]       "LogLevel": "Information",
[2025-08-21T19:57:19.441Z]       "Filter": null
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": null,
[2025-08-21T19:57:19.441Z]       "CategoryName": "Function",
[2025-08-21T19:57:19.441Z]       "LogLevel": "Information",
[2025-08-21T19:57:19.441Z]       "Filter": null
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": null,
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": "Information",
[2025-08-21T19:57:19.441Z]       "Filter": null
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": "None",
[2025-08-21T19:57:19.441Z]       "Filter": null
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": null,
[2025-08-21T19:57:19.441Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:57:19.441Z]     },
[2025-08-21T19:57:19.441Z]     {
[2025-08-21T19:57:19.441Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:57:19.441Z]       "CategoryName": null,
[2025-08-21T19:57:19.441Z]       "LogLevel": null,
[2025-08-21T19:57:19.441Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:57:19.441Z]     }
[2025-08-21T19:57:19.441Z]   ]
[2025-08-21T19:57:19.441Z] }
[2025-08-21T19:57:19.441Z] FunctionResultAggregatorOptions
[2025-08-21T19:57:19.441Z] {
[2025-08-21T19:57:19.441Z]   "BatchSize": 1000,
[2025-08-21T19:57:19.441Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:57:19.441Z]   "IsEnabled": true
[2025-08-21T19:57:19.441Z] }
[2025-08-21T19:57:19.441Z] ConcurrencyOptions
[2025-08-21T19:57:19.441Z] {
[2025-08-21T19:57:19.441Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:57:19.441Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:57:19.441Z]   "CPUThreshold": 0.8,
[2025-08-21T19:57:19.441Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:57:19.441Z] }
[2025-08-21T19:57:19.441Z] SingletonOptions
[2025-08-21T19:57:19.441Z] {
[2025-08-21T19:57:19.441Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:57:19.441Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:57:19.441Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:57:19.441Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:57:19.441Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:57:19.441Z] }
[2025-08-21T19:57:19.441Z] ScaleOptions
[2025-08-21T19:57:19.441Z] {
[2025-08-21T19:57:19.441Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:57:19.441Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:57:19.441Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:57:19.442Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:57:19.442Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:57:19.442Z] }
[2025-08-21T19:57:19.442Z] Starting JobHost
[2025-08-21T19:57:19.442Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=01a08ff3-c017-4bd5-a350-47b77f4cef4b, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:57:19.442Z] Loading functions metadata
[2025-08-21T19:57:19.442Z] Worker indexing is enabled
[2025-08-21T19:57:19.442Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:57:19.442Z] Reading functions metadata (Worker)
[2025-08-21T19:57:19.442Z] Reading functions metadata (Host)
[2025-08-21T19:57:19.642Z] 21 functions found (Host)
[2025-08-21T19:57:19.642Z] Reading functions metadata (Custom)
[2025-08-21T19:57:19.642Z] 0 functions found (Custom)
[2025-08-21T19:57:19.642Z] 21 functions loaded
[2025-08-21T19:57:19.643Z] Generating 21 job function(s)
[2025-08-21T19:57:19.643Z] Worker process started and initialized.
[2025-08-21T19:57:19.654Z] Found the following functions:
[2025-08-21T19:57:19.654Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:57:19.654Z] Host.Functions.analytics
[2025-08-21T19:57:19.654Z] Host.Functions.analyzeUIImage
[2025-08-21T19:57:19.654Z] Host.Functions.atlasComponents
[2025-08-21T19:57:19.654Z] Host.Functions.fast-suggestions
[2025-08-21T19:57:19.654Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:57:19.654Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:57:19.654Z] Host.Functions.generateSuggestions
[2025-08-21T19:57:19.654Z] Host.Functions.generateWireframe
[2025-08-21T19:57:19.654Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:57:19.654Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:57:19.654Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:57:19.654Z] Host.Functions.get-template
[2025-08-21T19:57:19.654Z] Host.Functions.githubAuthCallback
[2025-08-21T19:57:19.654Z] Host.Functions.githubAuthStart
[2025-08-21T19:57:19.654Z] Host.Functions.health
[2025-08-21T19:57:19.654Z] Host.Functions.healthCheck
[2025-08-21T19:57:19.654Z] Host.Functions.openai-health
[2025-08-21T19:57:19.654Z] Host.Functions.performance-stats
[2025-08-21T19:57:19.654Z] Host.Functions.testFunction
[2025-08-21T19:57:19.654Z] Host.Functions.testSimple
[2025-08-21T19:57:19.654Z] 
[2025-08-21T19:57:19.654Z] HttpOptions
[2025-08-21T19:57:19.654Z] {
[2025-08-21T19:57:19.654Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:57:19.654Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:57:19.654Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:57:19.654Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:57:19.654Z]   "RoutePrefix": "api"
[2025-08-21T19:57:19.654Z] }
[2025-08-21T19:57:19.654Z] Initializing function HTTP routes
[2025-08-21T19:57:19.654Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:57:19.654Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:57:19.654Z] 
[2025-08-21T19:57:19.654Z] Host initialized (212ms)
[2025-08-21T19:57:19.654Z] Host started (212ms)
[2025-08-21T19:57:19.654Z] Job host started
[2025-08-21T19:57:19.654Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:57:19.654Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:57:19.689Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:57:19.690Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:57:19.690Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:57:19.690Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:57:19.738Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:57:19.738Z] 🔍 Current env vars:
[2025-08-21T19:57:19.738Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:57:19.738Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:57:19.738Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:57:19.738Z] Host restarted.
[2025-08-21T19:57:19.739Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:57:19.739Z]   Deployment: gpt-4o
[2025-08-21T19:57:19.739Z]   API Version: 2024-08-01-preview
[2025-08-21T19:57:19.739Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:57:19.739Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:57:19.739Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:57:19.739Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:57:19.739Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:57:19.740Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:57:19.745Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.745Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.745Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.745Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.746Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.746Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.746Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:57:19.746Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest[2025-08-21T19:57:19.746Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '6533475c-fe94-437a-8329-fbc24c7655df'.
[2025-08-21T19:57:19.746Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.746Z] Result: Failure[2025-08-21T19:57:19.746Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '3fb1e572-40ae-4c38-8e5c-28644ac611c2'.
[2025-08-21T19:57:19.746Z] Result: Failure
[2025-08-21T19:57:19.746Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:57:19.746Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2

[2025-08-21T19:57:19.746Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:57:19.746Z]                    ^^^^^

[2025-08-21T19:57:19.746Z] 
[2025-08-21T19:57:19.746Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:57:19.746Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.746Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:57:19.746Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:57:19.746Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:57:19.746Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:57:19.746Z]                    ^^^^^
[2025-08-21T19:57:19.746Z] 
[2025-08-21T19:57:19.746Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:57:19.746Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:57:19.746Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.746Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:57:19.747Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.746Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:57:19.747Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:57:19.747Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:57:19.747Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:57:19.747Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:57:19.747Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:57:19.747Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:57:19.747Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:57:19.747Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:57:19.747Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:57:19.747Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:57:19.747Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:57:19.747Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:57:19.747Z]     at Generator.next (<anonymous>).
[2025-08-21T19:57:19.747Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:57:19.747Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:57:19.747Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.747Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest[2025-08-21T19:57:19.747Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:57:19.747Z]     at Generator.next (<anonymous>).
[2025-08-21T19:57:19.747Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest

[2025-08-21T19:57:19.747Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.747Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.747Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.747Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.756Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.756Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:19.756Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionLoadRequest
[2025-08-21T19:57:24.444Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:57:45.312Z] Executing HTTP request: {
[2025-08-21T19:57:45.312Z]   "requestId": "298329a0-d64c-4a12-b535-9f5f72c46931",
[2025-08-21T19:57:45.312Z]   "method": "POST",
[2025-08-21T19:57:45.312Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:57:45.312Z]   "uri": "/api/generate-suggestions"
[2025-08-21T19:57:45.312Z] }
[2025-08-21T19:57:45.322Z] Executing 'Functions.generateSuggestions' (Reason='This function was programmatically called via the host APIs.', Id=2107b398-6b7c-48b3-875e-dc727b0420a7)
[2025-08-21T19:57:45.362Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionInvocationRequest with invocationId 2107b398-6b7c-48b3-875e-dc727b0420a7
[2025-08-21T19:57:45.362Z] Executed 'Functions.generateSuggestions' (Succeeded, Id=2107b398-6b7c-48b3-875e-dc727b0420a7, Duration=44ms)
[2025-08-21T19:57:45.363Z] Executed HTTP request: {
[2025-08-21T19:57:45.363Z]   "requestId": "298329a0-d64c-4a12-b535-9f5f72c46931",
[2025-08-21T19:57:45.363Z]   "identities": "",
[2025-08-21T19:57:45.363Z]   "status": "200",
[2025-08-21T19:57:45.363Z]   "duration": "51"
[2025-08-21T19:57:45.363Z] }
[2025-08-21T19:57:46.602Z] Executing HTTP request: {
[2025-08-21T19:57:46.602Z]   "requestId": "d6b854d0-2b50-4583-a280-956f91b99d1f",
[2025-08-21T19:57:46.602Z]   "method": "POST",
[2025-08-21T19:57:46.602Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T19:57:46.602Z]   "uri": "/api/generate-wireframe-enhanced"
[2025-08-21T19:57:46.602Z] }
[2025-08-21T19:57:46.603Z] Executing 'Functions.generateWireframeEnhanced' (Reason='This function was programmatically called via the host APIs.', Id=f4eaf030-9cb2-45ec-a38e-842f4d38ace7)
[2025-08-21T19:57:46.699Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 received FunctionInvocationRequest with invocationId f4eaf030-9cb2-45ec-a38e-842f4d38ace7
[2025-08-21T19:57:56.513Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T19:57:56.513Z] 🔍 Atlas component check (ENHANCED):
[2025-08-21T19:57:56.513Z]     Description: "Design Microsoft Learn's documentation page with table of contents and code examples"
[2025-08-21T19:57:56.513Z]     Contains learning keywords: false
[2025-08-21T19:57:56.513Z]     Is hero section exclusion: false
[2025-08-21T19:57:56.513Z]     Final isLearningPlatform: false
[2025-08-21T19:57:56.513Z] ℹ️ Not a learning platform, skipping Atlas components
[2025-08-21T19:57:56.518Z] Executed 'Functions.generateWireframeEnhanced' (Succeeded, Id=f4eaf030-9cb2-45ec-a38e-842f4d38ace7, Duration=9915ms)
[2025-08-21T19:57:56.519Z] Executed HTTP request: {
[2025-08-21T19:57:56.519Z]   "requestId": "d6b854d0-2b50-4583-a280-956f91b99d1f",
[2025-08-21T19:57:56.519Z]   "identities": "",
[2025-08-21T19:57:56.519Z]   "status": "200",
[2025-08-21T19:57:56.519Z]   "duration": "9917"
[2025-08-21T19:57:56.519Z] }
[2025-08-21T19:58:01.853Z] Restarting host.
[2025-08-21T19:58:01.859Z] Stopping JobHost
[2025-08-21T19:58:01.859Z] Job host stopped
[2025-08-21T19:58:01.861Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'd7bf8abc-1884-4097-bb86-59897b189da3'
[2025-08-21T19:58:01.963Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:58:01.964Z] Host configuration file read:
[2025-08-21T19:58:01.964Z] {
[2025-08-21T19:58:01.964Z]   "version": "2.0",
[2025-08-21T19:58:01.964Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:58:01.964Z]   "logging": {
[2025-08-21T19:58:01.964Z]     "applicationInsights": {
[2025-08-21T19:58:01.964Z]       "samplingSettings": {
[2025-08-21T19:58:01.964Z]         "isEnabled": true,
[2025-08-21T19:58:01.964Z]         "excludedTypes": "Request"
[2025-08-21T19:58:01.964Z]       }
[2025-08-21T19:58:01.964Z]     },
[2025-08-21T19:58:01.964Z]     "logLevel": {
[2025-08-21T19:58:01.964Z]       "default": "Information",
[2025-08-21T19:58:01.964Z]       "Host.Results": "Information",
[2025-08-21T19:58:01.964Z]       "Function": "Information"
[2025-08-21T19:58:01.964Z]     }
[2025-08-21T19:58:01.964Z]   },
[2025-08-21T19:58:01.964Z]   "extensionBundle": {
[2025-08-21T19:58:01.964Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:58:01.964Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:58:01.964Z]   },
[2025-08-21T19:58:01.964Z]   "watchDirectories": [
[2025-08-21T19:58:01.964Z]     "Shared"
[2025-08-21T19:58:01.964Z]   ]
[2025-08-21T19:58:01.964Z] }
[2025-08-21T19:58:01.965Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:58:01.968Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:58:01.968Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:58:01.968Z] Loading functions metadata
[2025-08-21T19:58:01.968Z] Worker indexing is enabled
[2025-08-21T19:58:01.968Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:58:01.968Z] Reading functions metadata (Worker)
[2025-08-21T19:58:01.968Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:58:01.978Z] Worker 87765fc1-cc25-4839-843b-0d2e53048181 exited with code 0
[2025-08-21T19:58:02.173Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 connecting on 127.0.0.1:54302
[2025-08-21T19:58:02.198Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received WorkerInitRequest
[2025-08-21T19:58:02.201Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionsMetadataRequest
[2025-08-21T19:58:02.201Z] Reading functions metadata (Host)
[2025-08-21T19:58:02.477Z] 21 functions found (Host)
[2025-08-21T19:58:02.477Z] 21 functions loaded
[2025-08-21T19:58:02.478Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:58:02.478Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:58:02.478Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:58:02.478Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:58:02.662Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:58:02.662Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:58:02.662Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:58:02.662Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:58:02.714Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:58:02.714Z] Host configuration file read:
[2025-08-21T19:58:02.714Z] {
[2025-08-21T19:58:02.714Z]   "version": "2.0",
[2025-08-21T19:58:02.714Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:58:02.714Z]   "logging": {
[2025-08-21T19:58:02.714Z]     "applicationInsights": {
[2025-08-21T19:58:02.714Z]       "samplingSettings": {
[2025-08-21T19:58:02.714Z]         "isEnabled": true,
[2025-08-21T19:58:02.714Z]         "excludedTypes": "Request"
[2025-08-21T19:58:02.714Z]       }
[2025-08-21T19:58:02.714Z]     },
[2025-08-21T19:58:02.714Z]     "logLevel": {
[2025-08-21T19:58:02.714Z]       "default": "Information",
[2025-08-21T19:58:02.714Z]       "Host.Results": "Information",
[2025-08-21T19:58:02.714Z]       "Function": "Information"
[2025-08-21T19:58:02.714Z]     }
[2025-08-21T19:58:02.714Z]   },
[2025-08-21T19:58:02.714Z]   "extensionBundle": {
[2025-08-21T19:58:02.714Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:58:02.714Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:58:02.714Z]   },
[2025-08-21T19:58:02.714Z]   "watchDirectories": [
[2025-08-21T19:58:02.714Z]     "Shared"
[2025-08-21T19:58:02.714Z]   ]
[2025-08-21T19:58:02.714Z] }
[2025-08-21T19:58:02.781Z] Initializing Warmup Extension.
[2025-08-21T19:58:02.784Z] Initializing Host. OperationId: 'd7bf8abc-1884-4097-bb86-59897b189da3'.
[2025-08-21T19:58:02.784Z] Host initialization: ConsecutiveErrors=0, StartupCount=34, OperationId=d7bf8abc-1884-4097-bb86-59897b189da3
[2025-08-21T19:58:02.787Z] LoggerFilterOptions
[2025-08-21T19:58:02.787Z] {
[2025-08-21T19:58:02.787Z]   "MinLevel": "None",
[2025-08-21T19:58:02.787Z]   "Rules": [
[2025-08-21T19:58:02.787Z]     {
[2025-08-21T19:58:02.787Z]       "ProviderName": null,
[2025-08-21T19:58:02.787Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:58:02.787Z]       "LogLevel": "None",
[2025-08-21T19:58:02.787Z]       "Filter": null
[2025-08-21T19:58:02.787Z]     },
[2025-08-21T19:58:02.787Z]     {
[2025-08-21T19:58:02.787Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:02.787Z]       "CategoryName": null,
[2025-08-21T19:58:02.787Z]       "LogLevel": "None",
[2025-08-21T19:58:02.787Z]       "Filter": null
[2025-08-21T19:58:02.787Z]     },
[2025-08-21T19:58:02.787Z]     {
[2025-08-21T19:58:02.787Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:02.787Z]       "CategoryName": null,
[2025-08-21T19:58:02.787Z]       "LogLevel": null,
[2025-08-21T19:58:02.787Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:02.787Z]     },
[2025-08-21T19:58:02.787Z]     {
[2025-08-21T19:58:02.787Z]       "ProviderName": null,
[2025-08-21T19:58:02.787Z]       "CategoryName": null,
[2025-08-21T19:58:02.787Z]       "LogLevel": null,
[2025-08-21T19:58:02.787Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:02.787Z]     },
[2025-08-21T19:58:02.787Z]     {
[2025-08-21T19:58:02.787Z]       "ProviderName": null,
[2025-08-21T19:58:02.787Z]       "CategoryName": null,
[2025-08-21T19:58:02.787Z]       "LogLevel": null,
[2025-08-21T19:58:02.787Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:02.787Z]     },
[2025-08-21T19:58:02.787Z]     {
[2025-08-21T19:58:02.787Z]       "ProviderName": null,
[2025-08-21T19:58:02.787Z]       "CategoryName": "Host.Results",
[2025-08-21T19:58:02.787Z]       "LogLevel": "Information",
[2025-08-21T19:58:02.787Z]       "Filter": null
[2025-08-21T19:58:02.787Z]     },
[2025-08-21T19:58:02.788Z]     {
[2025-08-21T19:58:02.788Z]       "ProviderName": null,
[2025-08-21T19:58:02.788Z]       "CategoryName": "Function",
[2025-08-21T19:58:02.788Z]       "LogLevel": "Information",
[2025-08-21T19:58:02.788Z]       "Filter": null
[2025-08-21T19:58:02.788Z]     },
[2025-08-21T19:58:02.788Z]     {
[2025-08-21T19:58:02.788Z]       "ProviderName": null,
[2025-08-21T19:58:02.788Z]       "CategoryName": null,
[2025-08-21T19:58:02.788Z]       "LogLevel": "Information",
[2025-08-21T19:58:02.788Z]       "Filter": null
[2025-08-21T19:58:02.788Z]     },
[2025-08-21T19:58:02.788Z]     {
[2025-08-21T19:58:02.788Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:02.788Z]       "CategoryName": null,
[2025-08-21T19:58:02.788Z]       "LogLevel": "None",
[2025-08-21T19:58:02.788Z]       "Filter": null
[2025-08-21T19:58:02.788Z]     },
[2025-08-21T19:58:02.788Z]     {
[2025-08-21T19:58:02.788Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:02.788Z]       "CategoryName": null,
[2025-08-21T19:58:02.788Z]       "LogLevel": null,
[2025-08-21T19:58:02.788Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:02.788Z]     },
[2025-08-21T19:58:02.788Z]     {
[2025-08-21T19:58:02.788Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:02.788Z]       "CategoryName": null,
[2025-08-21T19:58:02.788Z]       "LogLevel": null,
[2025-08-21T19:58:02.788Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:02.788Z]     }
[2025-08-21T19:58:02.788Z]   ]
[2025-08-21T19:58:02.788Z] }
[2025-08-21T19:58:02.788Z] LoggerFilterOptions
[2025-08-21T19:58:02.789Z] {
[2025-08-21T19:58:02.789Z]   "MinLevel": "None",
[2025-08-21T19:58:02.789Z]   "Rules": [
[2025-08-21T19:58:02.789Z]     {
[2025-08-21T19:58:02.789Z]       "ProviderName": null,
[2025-08-21T19:58:02.789Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:58:02.789Z]       "LogLevel": "None",
[2025-08-21T19:58:02.789Z]       "Filter": null
[2025-08-21T19:58:02.789Z]     },
[2025-08-21T19:58:02.789Z]     {
[2025-08-21T19:58:02.789Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:02.789Z]       "CategoryName": null,
[2025-08-21T19:58:02.789Z]       "LogLevel": "None",
[2025-08-21T19:58:02.789Z]       "Filter": null
[2025-08-21T19:58:02.789Z]     },
[2025-08-21T19:58:02.789Z]     {
[2025-08-21T19:58:02.789Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:02.789Z]       "CategoryName": null,
[2025-08-21T19:58:02.789Z]       "LogLevel": null,
[2025-08-21T19:58:02.789Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:02.789Z]     },
[2025-08-21T19:58:02.790Z]     {
[2025-08-21T19:58:02.790Z]       "ProviderName": null,
[2025-08-21T19:58:02.790Z]       "CategoryName": null,
[2025-08-21T19:58:02.790Z]       "LogLevel": null,
[2025-08-21T19:58:02.790Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:02.790Z]     },
[2025-08-21T19:58:02.790Z]     {
[2025-08-21T19:58:02.790Z]       "ProviderName": null,
[2025-08-21T19:58:02.790Z]       "CategoryName": null,
[2025-08-21T19:58:02.790Z]       "LogLevel": null,
[2025-08-21T19:58:02.790Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:02.790Z]     },
[2025-08-21T19:58:02.790Z]     {
[2025-08-21T19:58:02.790Z]       "ProviderName": null,
[2025-08-21T19:58:02.790Z]       "CategoryName": "Host.Results",
[2025-08-21T19:58:02.790Z]       "LogLevel": "Information",
[2025-08-21T19:58:02.790Z]       "Filter": null
[2025-08-21T19:58:02.790Z]     },
[2025-08-21T19:58:02.790Z]     {
[2025-08-21T19:58:02.790Z]       "ProviderName": null,
[2025-08-21T19:58:02.791Z]       "CategoryName": "Function",
[2025-08-21T19:58:02.791Z]       "LogLevel": "Information",
[2025-08-21T19:58:02.791Z]       "Filter": null
[2025-08-21T19:58:02.791Z]     },
[2025-08-21T19:58:02.791Z]     {
[2025-08-21T19:58:02.791Z]       "ProviderName": null,
[2025-08-21T19:58:02.791Z]       "CategoryName": null,
[2025-08-21T19:58:02.791Z]       "LogLevel": "Information",
[2025-08-21T19:58:02.791Z]       "Filter": null
[2025-08-21T19:58:02.791Z]     },
[2025-08-21T19:58:02.791Z]     {
[2025-08-21T19:58:02.791Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:02.792Z]       "CategoryName": null,
[2025-08-21T19:58:02.792Z]       "LogLevel": "None",
[2025-08-21T19:58:02.792Z]       "Filter": null
[2025-08-21T19:58:02.792Z]     },
[2025-08-21T19:58:02.792Z]     {
[2025-08-21T19:58:02.792Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:02.792Z]       "CategoryName": null,
[2025-08-21T19:58:02.792Z]       "LogLevel": null,
[2025-08-21T19:58:02.792Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:02.792Z]     },
[2025-08-21T19:58:02.792Z]     {
[2025-08-21T19:58:02.792Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:02.792Z]       "CategoryName": null,
[2025-08-21T19:58:02.792Z]       "LogLevel": null,
[2025-08-21T19:58:02.792Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:02.792Z]     }
[2025-08-21T19:58:02.792Z]   ]
[2025-08-21T19:58:02.792Z] }
[2025-08-21T19:58:02.793Z] FunctionResultAggregatorOptions
[2025-08-21T19:58:02.793Z] {
[2025-08-21T19:58:02.793Z]   "BatchSize": 1000,
[2025-08-21T19:58:02.793Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:58:02.793Z]   "IsEnabled": true
[2025-08-21T19:58:02.793Z] }
[2025-08-21T19:58:02.793Z] ConcurrencyOptions
[2025-08-21T19:58:02.793Z] {
[2025-08-21T19:58:02.793Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:58:02.793Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:58:02.793Z]   "CPUThreshold": 0.8,
[2025-08-21T19:58:02.793Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:58:02.793Z] }
[2025-08-21T19:58:02.793Z] SingletonOptions
[2025-08-21T19:58:02.793Z] {
[2025-08-21T19:58:02.793Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:58:02.793Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:58:02.793Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:58:02.793Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:58:02.793Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:58:02.793Z] }
[2025-08-21T19:58:02.794Z] ScaleOptions
[2025-08-21T19:58:02.794Z] {
[2025-08-21T19:58:02.794Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:58:02.794Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:58:02.794Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:58:02.794Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:58:02.794Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:58:02.794Z] }
[2025-08-21T19:58:02.794Z] Starting JobHost
[2025-08-21T19:58:02.795Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=7629b9e3-333e-4fc0-abbb-85e329397ff8, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:58:02.795Z] Loading functions metadata
[2025-08-21T19:58:02.795Z] Worker indexing is enabled
[2025-08-21T19:58:02.795Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:58:02.795Z] Reading functions metadata (Worker)
[2025-08-21T19:58:02.795Z] Reading functions metadata (Host)
[2025-08-21T19:58:03.013Z] 21 functions found (Host)
[2025-08-21T19:58:03.014Z] Reading functions metadata (Custom)
[2025-08-21T19:58:03.014Z] 0 functions found (Custom)
[2025-08-21T19:58:03.014Z] 21 functions loaded
[2025-08-21T19:58:03.018Z] Generating 21 job function(s)
[2025-08-21T19:58:03.018Z] Worker process started and initialized.
[2025-08-21T19:58:03.053Z] Found the following functions:
[2025-08-21T19:58:03.053Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:58:03.053Z] Host.Functions.analytics
[2025-08-21T19:58:03.053Z] Host.Functions.analyzeUIImage
[2025-08-21T19:58:03.053Z] Host.Functions.atlasComponents
[2025-08-21T19:58:03.053Z] Host.Functions.fast-suggestions
[2025-08-21T19:58:03.053Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:58:03.053Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:58:03.053Z] Host.Functions.generateSuggestions
[2025-08-21T19:58:03.053Z] Host.Functions.generateWireframe
[2025-08-21T19:58:03.053Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:58:03.053Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:58:03.053Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:58:03.053Z] Host.Functions.get-template
[2025-08-21T19:58:03.053Z] Host.Functions.githubAuthCallback
[2025-08-21T19:58:03.053Z] Host.Functions.githubAuthStart
[2025-08-21T19:58:03.053Z] Host.Functions.health
[2025-08-21T19:58:03.053Z] Host.Functions.healthCheck
[2025-08-21T19:58:03.053Z] Host.Functions.openai-health
[2025-08-21T19:58:03.053Z] Host.Functions.performance-stats
[2025-08-21T19:58:03.053Z] Host.Functions.testFunction
[2025-08-21T19:58:03.053Z] Host.Functions.testSimple
[2025-08-21T19:58:03.053Z] 
[2025-08-21T19:58:03.053Z] HttpOptions
[2025-08-21T19:58:03.053Z] {
[2025-08-21T19:58:03.053Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:58:03.053Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:58:03.053Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:58:03.053Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:58:03.053Z]   "RoutePrefix": "api"
[2025-08-21T19:58:03.053Z] }
[2025-08-21T19:58:03.054Z] Initializing function HTTP routes
[2025-08-21T19:58:03.054Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:58:03.054Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:58:03.054Z] 
[2025-08-21T19:58:03.054Z] Host initialized (259ms)
[2025-08-21T19:58:03.054Z] Host started (259ms)
[2025-08-21T19:58:03.054Z] Job host started
[2025-08-21T19:58:03.054Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:58:03.054Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:58:03.101Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:58:03.101Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:58:03.101Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:58:03.101Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:58:03.146Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:58:03.146Z] 🔍 Current env vars:
[2025-08-21T19:58:03.146Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:58:03.146Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:58:03.146Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:58:03.146Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:58:03.146Z]   Deployment: gpt-4o
[2025-08-21T19:58:03.146Z]   API Version: 2024-08-01-preview
[2025-08-21T19:58:03.147Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:58:03.147Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:58:03.147Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:58:03.147Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:58:03.147Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:58:03.148Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:58:03.156Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.156Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.157Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.157Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.157Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.158Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.158Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:03.158Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.158Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:03.158Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'd9a36cc2-2023-4b76-8a38-6c2da0d93308'.
[2025-08-21T19:58:03.158Z] Result: Failure
[2025-08-21T19:58:03.158Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:03.158Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.158Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:58:03.158Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:58:03.158Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '4c76a1d7-2996-45d1-aef9-a4505513732c'.
[2025-08-21T19:58:03.158Z] Result: Failure
[2025-08-21T19:58:03.158Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:03.158Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:58:03.158Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:58:03.158Z]                    ^^^^^
[2025-08-21T19:58:03.158Z] 
[2025-08-21T19:58:03.158Z]                    ^^^^^
[2025-08-21T19:58:03.158Z] 
[2025-08-21T19:58:03.158Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:58:03.158Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:58:03.158Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:58:03.158Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.158Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.158Z] SyntaxError: await is only valid in async functions and the top level bodies of modules[2025-08-21T19:58:03.158Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.158Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)

[2025-08-21T19:58:03.159Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:58:03.159Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:58:03.159Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:58:03.159Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.159Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:58:03.159Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:58:03.159Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:58:03.159Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.159Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:58:03.159Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.159Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:58:03.159Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:58:03.159Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:58:03.159Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.159Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:58:03.159Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:58:03.159Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:58:03.159Z]     at Generator.next (<anonymous>).
[2025-08-21T19:58:03.159Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:58:03.159Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:58:03.159Z]     at Generator.next (<anonymous>).
[2025-08-21T19:58:03.159Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.159Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.159Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.159Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.159Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.159Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 received FunctionLoadRequest
[2025-08-21T19:58:03.166Z] Host restarted.
[2025-08-21T19:58:07.793Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:58:09.874Z] Restarting host.
[2025-08-21T19:58:09.879Z] Stopping JobHost
[2025-08-21T19:58:09.880Z] Job host stopped
[2025-08-21T19:58:09.892Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '4ef15cb0-8d82-46da-bd5e-af971f970660'
[2025-08-21T19:58:09.978Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:58:09.978Z] Host configuration file read:
[2025-08-21T19:58:09.978Z] {
[2025-08-21T19:58:09.978Z]   "version": "2.0",
[2025-08-21T19:58:09.978Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:58:09.979Z]   "logging": {
[2025-08-21T19:58:09.979Z]     "applicationInsights": {
[2025-08-21T19:58:09.979Z]       "samplingSettings": {
[2025-08-21T19:58:09.979Z]         "isEnabled": true,
[2025-08-21T19:58:09.979Z]         "excludedTypes": "Request"
[2025-08-21T19:58:09.979Z]       }
[2025-08-21T19:58:09.979Z]     },
[2025-08-21T19:58:09.979Z]     "logLevel": {
[2025-08-21T19:58:09.979Z]       "default": "Information",
[2025-08-21T19:58:09.979Z]       "Host.Results": "Information",
[2025-08-21T19:58:09.979Z]       "Function": "Information"
[2025-08-21T19:58:09.979Z]     }
[2025-08-21T19:58:09.979Z]   },
[2025-08-21T19:58:09.979Z]   "extensionBundle": {
[2025-08-21T19:58:09.979Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:58:09.979Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:58:09.979Z]   },
[2025-08-21T19:58:09.979Z]   "watchDirectories": [
[2025-08-21T19:58:09.979Z]     "Shared"
[2025-08-21T19:58:09.979Z]   ]
[2025-08-21T19:58:09.979Z] }
[2025-08-21T19:58:09.980Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:58:09.981Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:58:09.982Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:58:09.982Z] Loading functions metadata
[2025-08-21T19:58:09.983Z] Worker indexing is enabled
[2025-08-21T19:58:09.983Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:58:09.983Z] Reading functions metadata (Worker)
[2025-08-21T19:58:09.983Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:58:09.998Z] Worker 2c6d340d-379d-4451-b4ee-0e56aae0bea9 exited with code 0
[2025-08-21T19:58:10.138Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 connecting on 127.0.0.1:54302
[2025-08-21T19:58:10.161Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received WorkerInitRequest
[2025-08-21T19:58:10.163Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionsMetadataRequest
[2025-08-21T19:58:10.163Z] Reading functions metadata (Host)
[2025-08-21T19:58:10.442Z] 21 functions found (Host)
[2025-08-21T19:58:10.442Z] 21 functions loaded
[2025-08-21T19:58:10.442Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:58:10.442Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:58:10.442Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:58:10.442Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:58:10.631Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:58:10.631Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:58:10.632Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:58:10.632Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:58:10.686Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:58:10.686Z] Host configuration file read:
[2025-08-21T19:58:10.686Z] {
[2025-08-21T19:58:10.686Z]   "version": "2.0",
[2025-08-21T19:58:10.686Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:58:10.687Z]   "logging": {
[2025-08-21T19:58:10.687Z]     "applicationInsights": {
[2025-08-21T19:58:10.687Z]       "samplingSettings": {
[2025-08-21T19:58:10.687Z]         "isEnabled": true,
[2025-08-21T19:58:10.687Z]         "excludedTypes": "Request"
[2025-08-21T19:58:10.687Z]       }
[2025-08-21T19:58:10.687Z]     },
[2025-08-21T19:58:10.687Z]     "logLevel": {
[2025-08-21T19:58:10.687Z]       "default": "Information",
[2025-08-21T19:58:10.687Z]       "Host.Results": "Information",
[2025-08-21T19:58:10.687Z]       "Function": "Information"
[2025-08-21T19:58:10.687Z]     }
[2025-08-21T19:58:10.687Z]   },
[2025-08-21T19:58:10.687Z]   "extensionBundle": {
[2025-08-21T19:58:10.687Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:58:10.687Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:58:10.687Z]   },
[2025-08-21T19:58:10.687Z]   "watchDirectories": [
[2025-08-21T19:58:10.687Z]     "Shared"
[2025-08-21T19:58:10.687Z]   ]
[2025-08-21T19:58:10.687Z] }
[2025-08-21T19:58:10.740Z] Initializing Warmup Extension.
[2025-08-21T19:58:10.741Z] Initializing Host. OperationId: '4ef15cb0-8d82-46da-bd5e-af971f970660'.
[2025-08-21T19:58:10.741Z] Host initialization: ConsecutiveErrors=0, StartupCount=35, OperationId=4ef15cb0-8d82-46da-bd5e-af971f970660
[2025-08-21T19:58:10.742Z] LoggerFilterOptions
[2025-08-21T19:58:10.743Z] {
[2025-08-21T19:58:10.743Z]   "MinLevel": "None",
[2025-08-21T19:58:10.743Z]   "Rules": [
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": null,
[2025-08-21T19:58:10.743Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:58:10.743Z]       "LogLevel": "None",
[2025-08-21T19:58:10.743Z]       "Filter": null
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": "None",
[2025-08-21T19:58:10.743Z]       "Filter": null
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": null,
[2025-08-21T19:58:10.743Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": null,
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": null,
[2025-08-21T19:58:10.743Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": null,
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": null,
[2025-08-21T19:58:10.743Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": null,
[2025-08-21T19:58:10.743Z]       "CategoryName": "Host.Results",
[2025-08-21T19:58:10.743Z]       "LogLevel": "Information",
[2025-08-21T19:58:10.743Z]       "Filter": null
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": null,
[2025-08-21T19:58:10.743Z]       "CategoryName": "Function",
[2025-08-21T19:58:10.743Z]       "LogLevel": "Information",
[2025-08-21T19:58:10.743Z]       "Filter": null
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": null,
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": "Information",
[2025-08-21T19:58:10.743Z]       "Filter": null
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": "None",
[2025-08-21T19:58:10.743Z]       "Filter": null
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": null,
[2025-08-21T19:58:10.743Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": null,
[2025-08-21T19:58:10.743Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:10.743Z]     }
[2025-08-21T19:58:10.743Z]   ]
[2025-08-21T19:58:10.743Z] }
[2025-08-21T19:58:10.743Z] LoggerFilterOptions
[2025-08-21T19:58:10.743Z] {
[2025-08-21T19:58:10.743Z]   "MinLevel": "None",
[2025-08-21T19:58:10.743Z]   "Rules": [
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": null,
[2025-08-21T19:58:10.743Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:58:10.743Z]       "LogLevel": "None",
[2025-08-21T19:58:10.743Z]       "Filter": null
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": "None",
[2025-08-21T19:58:10.743Z]       "Filter": null
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": null,
[2025-08-21T19:58:10.743Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": null,
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": null,
[2025-08-21T19:58:10.743Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": null,
[2025-08-21T19:58:10.743Z]       "CategoryName": null,
[2025-08-21T19:58:10.743Z]       "LogLevel": null,
[2025-08-21T19:58:10.743Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:10.743Z]     },
[2025-08-21T19:58:10.743Z]     {
[2025-08-21T19:58:10.743Z]       "ProviderName": null,
[2025-08-21T19:58:10.744Z]       "CategoryName": "Host.Results",
[2025-08-21T19:58:10.744Z]       "LogLevel": "Information",
[2025-08-21T19:58:10.744Z]       "Filter": null
[2025-08-21T19:58:10.744Z]     },
[2025-08-21T19:58:10.744Z]     {
[2025-08-21T19:58:10.744Z]       "ProviderName": null,
[2025-08-21T19:58:10.744Z]       "CategoryName": "Function",
[2025-08-21T19:58:10.744Z]       "LogLevel": "Information",
[2025-08-21T19:58:10.744Z]       "Filter": null
[2025-08-21T19:58:10.744Z]     },
[2025-08-21T19:58:10.744Z]     {
[2025-08-21T19:58:10.744Z]       "ProviderName": null,
[2025-08-21T19:58:10.744Z]       "CategoryName": null,
[2025-08-21T19:58:10.744Z]       "LogLevel": "Information",
[2025-08-21T19:58:10.744Z]       "Filter": null
[2025-08-21T19:58:10.744Z]     },
[2025-08-21T19:58:10.744Z]     {
[2025-08-21T19:58:10.744Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:10.744Z]       "CategoryName": null,
[2025-08-21T19:58:10.744Z]       "LogLevel": "None",
[2025-08-21T19:58:10.744Z]       "Filter": null
[2025-08-21T19:58:10.744Z]     },
[2025-08-21T19:58:10.744Z]     {
[2025-08-21T19:58:10.744Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:10.744Z]       "CategoryName": null,
[2025-08-21T19:58:10.744Z]       "LogLevel": null,
[2025-08-21T19:58:10.744Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:10.744Z]     },
[2025-08-21T19:58:10.744Z]     {
[2025-08-21T19:58:10.744Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:10.744Z]       "CategoryName": null,
[2025-08-21T19:58:10.744Z]       "LogLevel": null,
[2025-08-21T19:58:10.744Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:10.744Z]     }
[2025-08-21T19:58:10.744Z]   ]
[2025-08-21T19:58:10.744Z] }
[2025-08-21T19:58:10.744Z] FunctionResultAggregatorOptions
[2025-08-21T19:58:10.744Z] {
[2025-08-21T19:58:10.744Z]   "BatchSize": 1000,
[2025-08-21T19:58:10.744Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:58:10.744Z]   "IsEnabled": true
[2025-08-21T19:58:10.744Z] }
[2025-08-21T19:58:10.744Z] ConcurrencyOptions
[2025-08-21T19:58:10.744Z] {
[2025-08-21T19:58:10.744Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:58:10.744Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:58:10.744Z]   "CPUThreshold": 0.8,
[2025-08-21T19:58:10.744Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:58:10.744Z] }
[2025-08-21T19:58:10.744Z] SingletonOptions
[2025-08-21T19:58:10.744Z] {
[2025-08-21T19:58:10.744Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:58:10.744Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:58:10.744Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:58:10.744Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:58:10.744Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:58:10.744Z] }
[2025-08-21T19:58:10.744Z] ScaleOptions
[2025-08-21T19:58:10.744Z] {
[2025-08-21T19:58:10.744Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:58:10.744Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:58:10.744Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:58:10.744Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:58:10.744Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:58:10.744Z] }
[2025-08-21T19:58:10.744Z] Starting JobHost
[2025-08-21T19:58:10.744Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=837ea4c4-9130-4270-8d53-2a4869ddc71e, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:58:10.744Z] Loading functions metadata
[2025-08-21T19:58:10.744Z] Worker indexing is enabled
[2025-08-21T19:58:10.744Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:58:10.744Z] Reading functions metadata (Worker)
[2025-08-21T19:58:10.744Z] Reading functions metadata (Host)
[2025-08-21T19:58:10.949Z] 21 functions found (Host)
[2025-08-21T19:58:10.949Z] Reading functions metadata (Custom)
[2025-08-21T19:58:10.949Z] 0 functions found (Custom)
[2025-08-21T19:58:10.949Z] 21 functions loaded
[2025-08-21T19:58:10.952Z] Generating 21 job function(s)
[2025-08-21T19:58:10.952Z] Worker process started and initialized.
[2025-08-21T19:58:10.967Z] Found the following functions:
[2025-08-21T19:58:10.967Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:58:10.967Z] Host.Functions.analytics
[2025-08-21T19:58:10.967Z] Host.Functions.analyzeUIImage
[2025-08-21T19:58:10.967Z] Host.Functions.atlasComponents
[2025-08-21T19:58:10.967Z] Host.Functions.fast-suggestions
[2025-08-21T19:58:10.967Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:58:10.967Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:58:10.967Z] Host.Functions.generateSuggestions
[2025-08-21T19:58:10.967Z] Host.Functions.generateWireframe
[2025-08-21T19:58:10.967Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:58:10.967Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:58:10.967Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:58:10.967Z] Host.Functions.get-template
[2025-08-21T19:58:10.967Z] Host.Functions.githubAuthCallback
[2025-08-21T19:58:10.967Z] Host.Functions.githubAuthStart
[2025-08-21T19:58:10.967Z] Host.Functions.health
[2025-08-21T19:58:10.967Z] Host.Functions.healthCheck
[2025-08-21T19:58:10.967Z] Host.Functions.openai-health
[2025-08-21T19:58:10.967Z] Host.Functions.performance-stats
[2025-08-21T19:58:10.967Z] Host.Functions.testFunction
[2025-08-21T19:58:10.967Z] Host.Functions.testSimple
[2025-08-21T19:58:10.967Z] 
[2025-08-21T19:58:10.968Z] HttpOptions
[2025-08-21T19:58:10.968Z] {
[2025-08-21T19:58:10.968Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:58:10.968Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:58:10.968Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:58:10.968Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:58:10.968Z]   "RoutePrefix": "api"
[2025-08-21T19:58:10.968Z] }
[2025-08-21T19:58:10.968Z] Initializing function HTTP routes
[2025-08-21T19:58:10.968Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:58:10.968Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:58:10.968Z] 
[2025-08-21T19:58:10.968Z] Host initialized (224ms)
[2025-08-21T19:58:10.969Z] Host started (224ms)
[2025-08-21T19:58:10.969Z] Job host started
[2025-08-21T19:58:10.969Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:58:10.969Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:58:11.002Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:58:11.002Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:58:11.003Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:58:11.003Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:58:11.040Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:58:11.040Z] 🔍 Current env vars:
[2025-08-21T19:58:11.040Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:58:11.040Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:58:11.040Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:58:11.040Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:58:11.040Z]   Deployment: gpt-4o
[2025-08-21T19:58:11.040Z]   API Version: 2024-08-01-preview
[2025-08-21T19:58:11.040Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:58:11.040Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:58:11.040Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:58:11.041Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:58:11.041Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:58:11.041Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:58:11.045Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.045Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.045Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.045Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.046Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.046Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.046Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:11.046Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'cd7fcc1f-3a0e-4468-aa2a-63efea6490f7'.
[2025-08-21T19:58:11.046Z] Result: Failure
[2025-08-21T19:58:11.046Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:11.046Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.046Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:58:11.046Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:58:11.046Z]                    ^^^^^
[2025-08-21T19:58:11.046Z] 
[2025-08-21T19:58:11.046Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:58:11.046Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:58:11.046Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:58:11.046Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:58:11.046Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:58:11.046Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:58:11.046Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:58:11.046Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:58:11.046Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:58:11.046Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:58:11.046Z]     at Generator.next (<anonymous>).
[2025-08-21T19:58:11.046Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:11.046Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '78c9aa91-f0f0-4680-a52a-6b8f64e28ff4'.
[2025-08-21T19:58:11.046Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.046Z] Result: Failure
[2025-08-21T19:58:11.046Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:11.046Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:58:11.046Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:58:11.046Z]                    ^^^^^
[2025-08-21T19:58:11.046Z] 
[2025-08-21T19:58:11.046Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:58:11.046Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:58:11.046Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:58:11.046Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:58:11.046Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:58:11.046Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:58:11.046Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.046Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:58:11.046Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:58:11.046Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:58:11.046Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:58:11.046Z]     at Generator.next (<anonymous>).
[2025-08-21T19:58:11.046Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.046Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.046Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.047Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.047Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.047Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.047Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.047Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.047Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.047Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.047Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.047Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 received FunctionLoadRequest
[2025-08-21T19:58:11.076Z] Host restarted.
[2025-08-21T19:58:15.745Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:58:46.997Z] Restarting host.
[2025-08-21T19:58:47.005Z] Stopping JobHost
[2025-08-21T19:58:47.006Z] Job host stopped
[2025-08-21T19:58:47.007Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'ab9cd56b-0adf-4262-9ff2-47253de18c6b'
[2025-08-21T19:58:47.100Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:58:47.100Z] Host configuration file read:
[2025-08-21T19:58:47.100Z] {
[2025-08-21T19:58:47.100Z]   "version": "2.0",
[2025-08-21T19:58:47.100Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:58:47.100Z]   "logging": {
[2025-08-21T19:58:47.100Z]     "applicationInsights": {
[2025-08-21T19:58:47.100Z]       "samplingSettings": {
[2025-08-21T19:58:47.100Z]         "isEnabled": true,
[2025-08-21T19:58:47.100Z]         "excludedTypes": "Request"
[2025-08-21T19:58:47.100Z]       }
[2025-08-21T19:58:47.100Z]     },
[2025-08-21T19:58:47.100Z]     "logLevel": {
[2025-08-21T19:58:47.100Z]       "default": "Information",
[2025-08-21T19:58:47.100Z]       "Host.Results": "Information",
[2025-08-21T19:58:47.100Z]       "Function": "Information"
[2025-08-21T19:58:47.100Z]     }
[2025-08-21T19:58:47.100Z]   },
[2025-08-21T19:58:47.100Z]   "extensionBundle": {
[2025-08-21T19:58:47.100Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:58:47.100Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:58:47.100Z]   },
[2025-08-21T19:58:47.100Z]   "watchDirectories": [
[2025-08-21T19:58:47.100Z]     "Shared"
[2025-08-21T19:58:47.100Z]   ]
[2025-08-21T19:58:47.100Z] }
[2025-08-21T19:58:47.101Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:58:47.102Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:58:47.102Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:58:47.102Z] Loading functions metadata
[2025-08-21T19:58:47.102Z] Worker indexing is enabled
[2025-08-21T19:58:47.102Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:58:47.102Z] Reading functions metadata (Worker)
[2025-08-21T19:58:47.102Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:58:47.108Z] Worker 1462eac8-46c1-473a-929f-e308f6ca2839 exited with code 0
[2025-08-21T19:58:47.257Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf connecting on 127.0.0.1:54302
[2025-08-21T19:58:47.279Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received WorkerInitRequest
[2025-08-21T19:58:47.281Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionsMetadataRequest
[2025-08-21T19:58:47.282Z] Reading functions metadata (Host)
[2025-08-21T19:58:47.549Z] 21 functions found (Host)
[2025-08-21T19:58:47.549Z] 21 functions loaded
[2025-08-21T19:58:47.549Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:58:47.550Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:58:47.550Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:58:47.550Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:58:47.722Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:58:47.722Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:58:47.722Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:58:47.722Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:58:47.776Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:58:47.777Z] Host configuration file read:
[2025-08-21T19:58:47.777Z] {
[2025-08-21T19:58:47.777Z]   "version": "2.0",
[2025-08-21T19:58:47.777Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:58:47.777Z]   "logging": {
[2025-08-21T19:58:47.777Z]     "applicationInsights": {
[2025-08-21T19:58:47.777Z]       "samplingSettings": {
[2025-08-21T19:58:47.777Z]         "isEnabled": true,
[2025-08-21T19:58:47.777Z]         "excludedTypes": "Request"
[2025-08-21T19:58:47.777Z]       }
[2025-08-21T19:58:47.777Z]     },
[2025-08-21T19:58:47.777Z]     "logLevel": {
[2025-08-21T19:58:47.777Z]       "default": "Information",
[2025-08-21T19:58:47.777Z]       "Host.Results": "Information",
[2025-08-21T19:58:47.777Z]       "Function": "Information"
[2025-08-21T19:58:47.777Z]     }
[2025-08-21T19:58:47.777Z]   },
[2025-08-21T19:58:47.777Z]   "extensionBundle": {
[2025-08-21T19:58:47.777Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:58:47.777Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:58:47.778Z]   },
[2025-08-21T19:58:47.778Z]   "watchDirectories": [
[2025-08-21T19:58:47.778Z]     "Shared"
[2025-08-21T19:58:47.778Z]   ]
[2025-08-21T19:58:47.778Z] }
[2025-08-21T19:58:47.863Z] Initializing Warmup Extension.
[2025-08-21T19:58:47.864Z] Initializing Host. OperationId: 'ab9cd56b-0adf-4262-9ff2-47253de18c6b'.
[2025-08-21T19:58:47.864Z] Host initialization: ConsecutiveErrors=0, StartupCount=36, OperationId=ab9cd56b-0adf-4262-9ff2-47253de18c6b
[2025-08-21T19:58:47.866Z] LoggerFilterOptions
[2025-08-21T19:58:47.866Z] {
[2025-08-21T19:58:47.866Z]   "MinLevel": "None",
[2025-08-21T19:58:47.866Z]   "Rules": [
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": null,
[2025-08-21T19:58:47.866Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:58:47.866Z]       "LogLevel": "None",
[2025-08-21T19:58:47.866Z]       "Filter": null
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:47.866Z]       "CategoryName": null,
[2025-08-21T19:58:47.866Z]       "LogLevel": "None",
[2025-08-21T19:58:47.866Z]       "Filter": null
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:47.866Z]       "CategoryName": null,
[2025-08-21T19:58:47.866Z]       "LogLevel": null,
[2025-08-21T19:58:47.866Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": null,
[2025-08-21T19:58:47.866Z]       "CategoryName": null,
[2025-08-21T19:58:47.866Z]       "LogLevel": null,
[2025-08-21T19:58:47.866Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": null,
[2025-08-21T19:58:47.866Z]       "CategoryName": null,
[2025-08-21T19:58:47.866Z]       "LogLevel": null,
[2025-08-21T19:58:47.866Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": null,
[2025-08-21T19:58:47.866Z]       "CategoryName": "Host.Results",
[2025-08-21T19:58:47.866Z]       "LogLevel": "Information",
[2025-08-21T19:58:47.866Z]       "Filter": null
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": null,
[2025-08-21T19:58:47.866Z]       "CategoryName": "Function",
[2025-08-21T19:58:47.866Z]       "LogLevel": "Information",
[2025-08-21T19:58:47.866Z]       "Filter": null
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": null,
[2025-08-21T19:58:47.866Z]       "CategoryName": null,
[2025-08-21T19:58:47.866Z]       "LogLevel": "Information",
[2025-08-21T19:58:47.866Z]       "Filter": null
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:47.866Z]       "CategoryName": null,
[2025-08-21T19:58:47.866Z]       "LogLevel": "None",
[2025-08-21T19:58:47.866Z]       "Filter": null
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:47.866Z]       "CategoryName": null,
[2025-08-21T19:58:47.866Z]       "LogLevel": null,
[2025-08-21T19:58:47.866Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:47.866Z]       "CategoryName": null,
[2025-08-21T19:58:47.866Z]       "LogLevel": null,
[2025-08-21T19:58:47.866Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:47.866Z]     }
[2025-08-21T19:58:47.866Z]   ]
[2025-08-21T19:58:47.866Z] }
[2025-08-21T19:58:47.866Z] LoggerFilterOptions
[2025-08-21T19:58:47.866Z] {
[2025-08-21T19:58:47.866Z]   "MinLevel": "None",
[2025-08-21T19:58:47.866Z]   "Rules": [
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": null,
[2025-08-21T19:58:47.866Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:58:47.866Z]       "LogLevel": "None",
[2025-08-21T19:58:47.866Z]       "Filter": null
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:47.866Z]       "CategoryName": null,
[2025-08-21T19:58:47.866Z]       "LogLevel": "None",
[2025-08-21T19:58:47.866Z]       "Filter": null
[2025-08-21T19:58:47.866Z]     },
[2025-08-21T19:58:47.866Z]     {
[2025-08-21T19:58:47.866Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:47.866Z]       "CategoryName": null,
[2025-08-21T19:58:47.867Z]       "LogLevel": null,
[2025-08-21T19:58:47.867Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:47.867Z]     },
[2025-08-21T19:58:47.867Z]     {
[2025-08-21T19:58:47.867Z]       "ProviderName": null,
[2025-08-21T19:58:47.867Z]       "CategoryName": null,
[2025-08-21T19:58:47.867Z]       "LogLevel": null,
[2025-08-21T19:58:47.867Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:47.867Z]     },
[2025-08-21T19:58:47.867Z]     {
[2025-08-21T19:58:47.867Z]       "ProviderName": null,
[2025-08-21T19:58:47.867Z]       "CategoryName": null,
[2025-08-21T19:58:47.867Z]       "LogLevel": null,
[2025-08-21T19:58:47.867Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:47.867Z]     },
[2025-08-21T19:58:47.867Z]     {
[2025-08-21T19:58:47.867Z]       "ProviderName": null,
[2025-08-21T19:58:47.867Z]       "CategoryName": "Host.Results",
[2025-08-21T19:58:47.867Z]       "LogLevel": "Information",
[2025-08-21T19:58:47.867Z]       "Filter": null
[2025-08-21T19:58:47.867Z]     },
[2025-08-21T19:58:47.867Z]     {
[2025-08-21T19:58:47.867Z]       "ProviderName": null,
[2025-08-21T19:58:47.867Z]       "CategoryName": "Function",
[2025-08-21T19:58:47.867Z]       "LogLevel": "Information",
[2025-08-21T19:58:47.867Z]       "Filter": null
[2025-08-21T19:58:47.867Z]     },
[2025-08-21T19:58:47.867Z]     {
[2025-08-21T19:58:47.867Z]       "ProviderName": null,
[2025-08-21T19:58:47.867Z]       "CategoryName": null,
[2025-08-21T19:58:47.867Z]       "LogLevel": "Information",
[2025-08-21T19:58:47.867Z]       "Filter": null
[2025-08-21T19:58:47.867Z]     },
[2025-08-21T19:58:47.867Z]     {
[2025-08-21T19:58:47.867Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:47.867Z]       "CategoryName": null,
[2025-08-21T19:58:47.867Z]       "LogLevel": "None",
[2025-08-21T19:58:47.867Z]       "Filter": null
[2025-08-21T19:58:47.867Z]     },
[2025-08-21T19:58:47.867Z]     {
[2025-08-21T19:58:47.867Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:58:47.867Z]       "CategoryName": null,
[2025-08-21T19:58:47.867Z]       "LogLevel": null,
[2025-08-21T19:58:47.867Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:47.867Z]     },
[2025-08-21T19:58:47.867Z]     {
[2025-08-21T19:58:47.867Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:58:47.867Z]       "CategoryName": null,
[2025-08-21T19:58:47.867Z]       "LogLevel": null,
[2025-08-21T19:58:47.867Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:58:47.867Z]     }
[2025-08-21T19:58:47.867Z]   ]
[2025-08-21T19:58:47.867Z] }
[2025-08-21T19:58:47.867Z] FunctionResultAggregatorOptions
[2025-08-21T19:58:47.867Z] {
[2025-08-21T19:58:47.867Z]   "BatchSize": 1000,
[2025-08-21T19:58:47.867Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:58:47.867Z]   "IsEnabled": true
[2025-08-21T19:58:47.867Z] }
[2025-08-21T19:58:47.867Z] ConcurrencyOptions
[2025-08-21T19:58:47.867Z] {
[2025-08-21T19:58:47.867Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:58:47.867Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:58:47.867Z]   "CPUThreshold": 0.8,
[2025-08-21T19:58:47.867Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:58:47.867Z] }
[2025-08-21T19:58:47.867Z] SingletonOptions
[2025-08-21T19:58:47.867Z] {
[2025-08-21T19:58:47.867Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:58:47.867Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:58:47.867Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:58:47.867Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:58:47.867Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:58:47.867Z] }
[2025-08-21T19:58:47.867Z] ScaleOptions
[2025-08-21T19:58:47.867Z] {
[2025-08-21T19:58:47.867Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:58:47.867Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:58:47.867Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:58:47.868Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:58:47.868Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:58:47.868Z] }
[2025-08-21T19:58:47.868Z] Starting JobHost
[2025-08-21T19:58:47.868Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=f478aff9-5c6c-4eb9-85c1-bce135161c7d, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:58:47.868Z] Loading functions metadata
[2025-08-21T19:58:47.868Z] Worker indexing is enabled
[2025-08-21T19:58:47.868Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:58:47.868Z] Reading functions metadata (Worker)
[2025-08-21T19:58:47.868Z] Reading functions metadata (Host)
[2025-08-21T19:58:48.083Z] 21 functions found (Host)
[2025-08-21T19:58:48.083Z] Reading functions metadata (Custom)
[2025-08-21T19:58:48.084Z] 0 functions found (Custom)
[2025-08-21T19:58:48.084Z] 21 functions loaded
[2025-08-21T19:58:48.087Z] Generating 21 job function(s)
[2025-08-21T19:58:48.087Z] Worker process started and initialized.
[2025-08-21T19:58:48.101Z] Found the following functions:
[2025-08-21T19:58:48.101Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:58:48.101Z] Host.Functions.analytics
[2025-08-21T19:58:48.101Z] Host.Functions.analyzeUIImage
[2025-08-21T19:58:48.101Z] Host.Functions.atlasComponents
[2025-08-21T19:58:48.101Z] Host.Functions.fast-suggestions
[2025-08-21T19:58:48.101Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:58:48.101Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:58:48.101Z] Host.Functions.generateSuggestions
[2025-08-21T19:58:48.101Z] Host.Functions.generateWireframe
[2025-08-21T19:58:48.101Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:58:48.101Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:58:48.101Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:58:48.101Z] Host.Functions.get-template
[2025-08-21T19:58:48.101Z] Host.Functions.githubAuthCallback
[2025-08-21T19:58:48.101Z] Host.Functions.githubAuthStart
[2025-08-21T19:58:48.101Z] Host.Functions.health
[2025-08-21T19:58:48.101Z] Host.Functions.healthCheck
[2025-08-21T19:58:48.101Z] Host.Functions.openai-health
[2025-08-21T19:58:48.101Z] Host.Functions.performance-stats
[2025-08-21T19:58:48.101Z] Host.Functions.testFunction
[2025-08-21T19:58:48.101Z] Host.Functions.testSimple
[2025-08-21T19:58:48.101Z] 
[2025-08-21T19:58:48.101Z] HttpOptions
[2025-08-21T19:58:48.101Z] {
[2025-08-21T19:58:48.101Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:58:48.101Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:58:48.101Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:58:48.101Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:58:48.101Z]   "RoutePrefix": "api"
[2025-08-21T19:58:48.101Z] }
[2025-08-21T19:58:48.101Z] Initializing function HTTP routes
[2025-08-21T19:58:48.101Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:58:48.101Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:58:48.102Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:58:48.102Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:58:48.102Z] 
[2025-08-21T19:58:48.102Z] Host initialized (233ms)
[2025-08-21T19:58:48.102Z] Host started (234ms)
[2025-08-21T19:58:48.102Z] Job host started
[2025-08-21T19:58:48.102Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:58:48.102Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:58:48.147Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:58:48.148Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:58:48.148Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:58:48.148Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:58:48.192Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:58:48.192Z] 🔍 Current env vars:
[2025-08-21T19:58:48.192Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:58:48.192Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:58:48.192Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:58:48.192Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:58:48.192Z]   Deployment: gpt-4o
[2025-08-21T19:58:48.192Z]   API Version: 2024-08-01-preview
[2025-08-21T19:58:48.192Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:58:48.192Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:58:48.192Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:58:48.192Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:58:48.192Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:58:48.194Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:58:48.199Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.199Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.200Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.200Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.200Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.200Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.200Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:48.200Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.200Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '1c91e72c-1b28-46e4-b8a3-40915e9b0ca0'.
[2025-08-21T19:58:48.200Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:48.200Z] Result: Failure
[2025-08-21T19:58:48.200Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:48.200Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:58:48.200Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:58:48.200Z]                    ^^^^^
[2025-08-21T19:58:48.200Z] 
[2025-08-21T19:58:48.200Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:58:48.200Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:58:48.200Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:58:48.200Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:58:48.200Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:58:48.200Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '233a223d-c5b9-4de0-8634-7ec849fbc967'.
[2025-08-21T19:58:48.200Z] Result: Failure
[2025-08-21T19:58:48.200Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)[2025-08-21T19:58:48.200Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest

[2025-08-21T19:58:48.200Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.200Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:58:48.200Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:58:48.200Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:58:48.200Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:58:48.200Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:58:48.200Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:58:48.200Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.200Z]     at Generator.next (<anonymous>).
[2025-08-21T19:58:48.200Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:58:48.200Z]                    ^^^^^
[2025-08-21T19:58:48.200Z] 
[2025-08-21T19:58:48.200Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:58:48.200Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:58:48.200Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:58:48.200Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:58:48.200Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:58:48.201Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:58:48.201Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:58:48.201Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:58:48.201Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.201Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:58:48.201Z]     at Generator.next (<anonymous>).
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.201Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf received FunctionLoadRequest
[2025-08-21T19:58:48.206Z] Host restarted.
[2025-08-21T19:58:52.868Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:59:03.619Z] Restarting host.
[2025-08-21T19:59:03.626Z] Stopping JobHost
[2025-08-21T19:59:03.626Z] Job host stopped
[2025-08-21T19:59:03.635Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '11ff07ed-95a4-4ae3-8a8e-8296da065371'
[2025-08-21T19:59:03.730Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:59:03.730Z] Host configuration file read:
[2025-08-21T19:59:03.730Z] {
[2025-08-21T19:59:03.730Z]   "version": "2.0",
[2025-08-21T19:59:03.730Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:59:03.730Z]   "logging": {
[2025-08-21T19:59:03.730Z]     "applicationInsights": {
[2025-08-21T19:59:03.730Z]       "samplingSettings": {
[2025-08-21T19:59:03.730Z]         "isEnabled": true,
[2025-08-21T19:59:03.730Z]         "excludedTypes": "Request"
[2025-08-21T19:59:03.730Z]       }
[2025-08-21T19:59:03.730Z]     },
[2025-08-21T19:59:03.730Z]     "logLevel": {
[2025-08-21T19:59:03.730Z]       "default": "Information",
[2025-08-21T19:59:03.730Z]       "Host.Results": "Information",
[2025-08-21T19:59:03.730Z]       "Function": "Information"
[2025-08-21T19:59:03.730Z]     }
[2025-08-21T19:59:03.730Z]   },
[2025-08-21T19:59:03.730Z]   "extensionBundle": {
[2025-08-21T19:59:03.730Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:59:03.730Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:59:03.731Z]   },
[2025-08-21T19:59:03.731Z]   "watchDirectories": [
[2025-08-21T19:59:03.731Z]     "Shared"
[2025-08-21T19:59:03.731Z]   ]
[2025-08-21T19:59:03.731Z] }
[2025-08-21T19:59:03.732Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:59:03.732Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:59:03.733Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:59:03.733Z] Loading functions metadata
[2025-08-21T19:59:03.733Z] Worker indexing is enabled
[2025-08-21T19:59:03.733Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:59:03.733Z] Reading functions metadata (Worker)
[2025-08-21T19:59:03.733Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:59:03.745Z] Worker 072a9bb7-2e61-4e6e-8c4c-d4a60d178adf exited with code 0
[2025-08-21T19:59:03.924Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f connecting on 127.0.0.1:54302
[2025-08-21T19:59:03.962Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received WorkerInitRequest
[2025-08-21T19:59:03.966Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionsMetadataRequest
[2025-08-21T19:59:03.966Z] Reading functions metadata (Host)
[2025-08-21T19:59:04.457Z] 21 functions found (Host)
[2025-08-21T19:59:04.457Z] 21 functions loaded
[2025-08-21T19:59:04.457Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:59:04.458Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:59:04.458Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:59:04.458Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:59:04.621Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:59:04.621Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:59:04.622Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:59:04.622Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:59:04.687Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:59:04.687Z] Host configuration file read:
[2025-08-21T19:59:04.687Z] {
[2025-08-21T19:59:04.687Z]   "version": "2.0",
[2025-08-21T19:59:04.687Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:59:04.687Z]   "logging": {
[2025-08-21T19:59:04.687Z]     "applicationInsights": {
[2025-08-21T19:59:04.687Z]       "samplingSettings": {
[2025-08-21T19:59:04.687Z]         "isEnabled": true,
[2025-08-21T19:59:04.687Z]         "excludedTypes": "Request"
[2025-08-21T19:59:04.687Z]       }
[2025-08-21T19:59:04.687Z]     },
[2025-08-21T19:59:04.687Z]     "logLevel": {
[2025-08-21T19:59:04.687Z]       "default": "Information",
[2025-08-21T19:59:04.687Z]       "Host.Results": "Information",
[2025-08-21T19:59:04.687Z]       "Function": "Information"
[2025-08-21T19:59:04.687Z]     }
[2025-08-21T19:59:04.687Z]   },
[2025-08-21T19:59:04.687Z]   "extensionBundle": {
[2025-08-21T19:59:04.687Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:59:04.687Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:59:04.687Z]   },
[2025-08-21T19:59:04.687Z]   "watchDirectories": [
[2025-08-21T19:59:04.687Z]     "Shared"
[2025-08-21T19:59:04.687Z]   ]
[2025-08-21T19:59:04.687Z] }
[2025-08-21T19:59:04.791Z] Initializing Warmup Extension.
[2025-08-21T19:59:04.793Z] Initializing Host. OperationId: '11ff07ed-95a4-4ae3-8a8e-8296da065371'.
[2025-08-21T19:59:04.793Z] Host initialization: ConsecutiveErrors=0, StartupCount=37, OperationId=11ff07ed-95a4-4ae3-8a8e-8296da065371
[2025-08-21T19:59:04.797Z] LoggerFilterOptions
[2025-08-21T19:59:04.797Z] {
[2025-08-21T19:59:04.797Z]   "MinLevel": "None",
[2025-08-21T19:59:04.797Z]   "Rules": [
[2025-08-21T19:59:04.797Z]     {
[2025-08-21T19:59:04.797Z]       "ProviderName": null,
[2025-08-21T19:59:04.797Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:59:04.797Z]       "LogLevel": "None",
[2025-08-21T19:59:04.798Z]       "Filter": null
[2025-08-21T19:59:04.798Z]     },
[2025-08-21T19:59:04.798Z]     {
[2025-08-21T19:59:04.798Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:04.798Z]       "CategoryName": null,
[2025-08-21T19:59:04.798Z]       "LogLevel": "None",
[2025-08-21T19:59:04.798Z]       "Filter": null
[2025-08-21T19:59:04.798Z]     },
[2025-08-21T19:59:04.798Z]     {
[2025-08-21T19:59:04.798Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:04.798Z]       "CategoryName": null,
[2025-08-21T19:59:04.798Z]       "LogLevel": null,
[2025-08-21T19:59:04.798Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:04.798Z]     },
[2025-08-21T19:59:04.798Z]     {
[2025-08-21T19:59:04.798Z]       "ProviderName": null,
[2025-08-21T19:59:04.798Z]       "CategoryName": null,
[2025-08-21T19:59:04.798Z]       "LogLevel": null,
[2025-08-21T19:59:04.798Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:04.798Z]     },
[2025-08-21T19:59:04.798Z]     {
[2025-08-21T19:59:04.798Z]       "ProviderName": null,
[2025-08-21T19:59:04.798Z]       "CategoryName": null,
[2025-08-21T19:59:04.798Z]       "LogLevel": null,
[2025-08-21T19:59:04.798Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:04.798Z]     },
[2025-08-21T19:59:04.798Z]     {
[2025-08-21T19:59:04.798Z]       "ProviderName": null,
[2025-08-21T19:59:04.798Z]       "CategoryName": "Host.Results",
[2025-08-21T19:59:04.798Z]       "LogLevel": "Information",
[2025-08-21T19:59:04.798Z]       "Filter": null
[2025-08-21T19:59:04.798Z]     },
[2025-08-21T19:59:04.798Z]     {
[2025-08-21T19:59:04.798Z]       "ProviderName": null,
[2025-08-21T19:59:04.799Z]       "CategoryName": "Function",
[2025-08-21T19:59:04.799Z]       "LogLevel": "Information",
[2025-08-21T19:59:04.799Z]       "Filter": null
[2025-08-21T19:59:04.799Z]     },
[2025-08-21T19:59:04.799Z]     {
[2025-08-21T19:59:04.799Z]       "ProviderName": null,
[2025-08-21T19:59:04.799Z]       "CategoryName": null,
[2025-08-21T19:59:04.799Z]       "LogLevel": "Information",
[2025-08-21T19:59:04.799Z]       "Filter": null
[2025-08-21T19:59:04.799Z]     },
[2025-08-21T19:59:04.799Z]     {
[2025-08-21T19:59:04.799Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:04.799Z]       "CategoryName": null,
[2025-08-21T19:59:04.799Z]       "LogLevel": "None",
[2025-08-21T19:59:04.799Z]       "Filter": null
[2025-08-21T19:59:04.799Z]     },
[2025-08-21T19:59:04.800Z]     {
[2025-08-21T19:59:04.800Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:04.800Z]       "CategoryName": null,
[2025-08-21T19:59:04.800Z]       "LogLevel": null,
[2025-08-21T19:59:04.800Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:04.800Z]     },
[2025-08-21T19:59:04.800Z]     {
[2025-08-21T19:59:04.800Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:04.800Z]       "CategoryName": null,
[2025-08-21T19:59:04.800Z]       "LogLevel": null,
[2025-08-21T19:59:04.800Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:04.800Z]     }
[2025-08-21T19:59:04.800Z]   ]
[2025-08-21T19:59:04.800Z] }
[2025-08-21T19:59:04.800Z] LoggerFilterOptions
[2025-08-21T19:59:04.800Z] {
[2025-08-21T19:59:04.800Z]   "MinLevel": "None",
[2025-08-21T19:59:04.800Z]   "Rules": [
[2025-08-21T19:59:04.800Z]     {
[2025-08-21T19:59:04.800Z]       "ProviderName": null,
[2025-08-21T19:59:04.800Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:59:04.800Z]       "LogLevel": "None",
[2025-08-21T19:59:04.800Z]       "Filter": null
[2025-08-21T19:59:04.800Z]     },
[2025-08-21T19:59:04.800Z]     {
[2025-08-21T19:59:04.800Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:04.800Z]       "CategoryName": null,
[2025-08-21T19:59:04.800Z]       "LogLevel": "None",
[2025-08-21T19:59:04.800Z]       "Filter": null
[2025-08-21T19:59:04.800Z]     },
[2025-08-21T19:59:04.800Z]     {
[2025-08-21T19:59:04.800Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:04.800Z]       "CategoryName": null,
[2025-08-21T19:59:04.800Z]       "LogLevel": null,
[2025-08-21T19:59:04.800Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:04.800Z]     },
[2025-08-21T19:59:04.800Z]     {
[2025-08-21T19:59:04.800Z]       "ProviderName": null,
[2025-08-21T19:59:04.800Z]       "CategoryName": null,
[2025-08-21T19:59:04.800Z]       "LogLevel": null,
[2025-08-21T19:59:04.800Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:04.800Z]     },
[2025-08-21T19:59:04.800Z]     {
[2025-08-21T19:59:04.800Z]       "ProviderName": null,
[2025-08-21T19:59:04.800Z]       "CategoryName": null,
[2025-08-21T19:59:04.800Z]       "LogLevel": null,
[2025-08-21T19:59:04.800Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:04.800Z]     },
[2025-08-21T19:59:04.800Z]     {
[2025-08-21T19:59:04.800Z]       "ProviderName": null,
[2025-08-21T19:59:04.800Z]       "CategoryName": "Host.Results",
[2025-08-21T19:59:04.800Z]       "LogLevel": "Information",
[2025-08-21T19:59:04.800Z]       "Filter": null
[2025-08-21T19:59:04.800Z]     },
[2025-08-21T19:59:04.800Z]     {
[2025-08-21T19:59:04.800Z]       "ProviderName": null,
[2025-08-21T19:59:04.800Z]       "CategoryName": "Function",
[2025-08-21T19:59:04.800Z]       "LogLevel": "Information",
[2025-08-21T19:59:04.800Z]       "Filter": null
[2025-08-21T19:59:04.800Z]     },
[2025-08-21T19:59:04.801Z]     {
[2025-08-21T19:59:04.801Z]       "ProviderName": null,
[2025-08-21T19:59:04.801Z]       "CategoryName": null,
[2025-08-21T19:59:04.801Z]       "LogLevel": "Information",
[2025-08-21T19:59:04.801Z]       "Filter": null
[2025-08-21T19:59:04.801Z]     },
[2025-08-21T19:59:04.801Z]     {
[2025-08-21T19:59:04.801Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:04.801Z]       "CategoryName": null,
[2025-08-21T19:59:04.801Z]       "LogLevel": "None",
[2025-08-21T19:59:04.801Z]       "Filter": null
[2025-08-21T19:59:04.801Z]     },
[2025-08-21T19:59:04.801Z]     {
[2025-08-21T19:59:04.801Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:04.801Z]       "CategoryName": null,
[2025-08-21T19:59:04.801Z]       "LogLevel": null,
[2025-08-21T19:59:04.801Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:04.801Z]     },
[2025-08-21T19:59:04.801Z]     {
[2025-08-21T19:59:04.801Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:04.801Z]       "CategoryName": null,
[2025-08-21T19:59:04.801Z]       "LogLevel": null,
[2025-08-21T19:59:04.801Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:04.801Z]     }
[2025-08-21T19:59:04.801Z]   ]
[2025-08-21T19:59:04.801Z] }
[2025-08-21T19:59:04.801Z] FunctionResultAggregatorOptions
[2025-08-21T19:59:04.801Z] {
[2025-08-21T19:59:04.801Z]   "BatchSize": 1000,
[2025-08-21T19:59:04.801Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:59:04.801Z]   "IsEnabled": true
[2025-08-21T19:59:04.801Z] }
[2025-08-21T19:59:04.801Z] ConcurrencyOptions
[2025-08-21T19:59:04.801Z] {
[2025-08-21T19:59:04.801Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:59:04.801Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:59:04.801Z]   "CPUThreshold": 0.8,
[2025-08-21T19:59:04.801Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:59:04.801Z] }
[2025-08-21T19:59:04.801Z] SingletonOptions
[2025-08-21T19:59:04.801Z] {
[2025-08-21T19:59:04.801Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:59:04.801Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:59:04.801Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:59:04.801Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:59:04.801Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:59:04.801Z] }
[2025-08-21T19:59:04.801Z] ScaleOptions
[2025-08-21T19:59:04.801Z] {
[2025-08-21T19:59:04.801Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:59:04.801Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:59:04.801Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:59:04.801Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:59:04.801Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:59:04.801Z] }
[2025-08-21T19:59:04.801Z] Starting JobHost
[2025-08-21T19:59:04.801Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=993b43ca-362b-4932-ac64-41abd380c6fb, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:59:04.801Z] Loading functions metadata
[2025-08-21T19:59:04.802Z] Worker indexing is enabled
[2025-08-21T19:59:04.802Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:59:04.802Z] Reading functions metadata (Worker)
[2025-08-21T19:59:04.802Z] Reading functions metadata (Host)
[2025-08-21T19:59:05.023Z] 21 functions found (Host)
[2025-08-21T19:59:05.024Z] Reading functions metadata (Custom)
[2025-08-21T19:59:05.024Z] 0 functions found (Custom)
[2025-08-21T19:59:05.024Z] 21 functions loaded
[2025-08-21T19:59:05.037Z] Generating 21 job function(s)
[2025-08-21T19:59:05.037Z] Worker process started and initialized.
[2025-08-21T19:59:05.047Z] Found the following functions:
[2025-08-21T19:59:05.047Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:59:05.047Z] Host.Functions.analytics
[2025-08-21T19:59:05.047Z] Host.Functions.analyzeUIImage
[2025-08-21T19:59:05.047Z] Host.Functions.atlasComponents
[2025-08-21T19:59:05.047Z] Host.Functions.fast-suggestions
[2025-08-21T19:59:05.047Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:59:05.047Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:59:05.047Z] Host.Functions.generateSuggestions
[2025-08-21T19:59:05.047Z] Host.Functions.generateWireframe
[2025-08-21T19:59:05.047Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:59:05.047Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:59:05.047Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:59:05.047Z] Host.Functions.get-template
[2025-08-21T19:59:05.047Z] Host.Functions.githubAuthCallback
[2025-08-21T19:59:05.047Z] Host.Functions.githubAuthStart
[2025-08-21T19:59:05.047Z] Host.Functions.health
[2025-08-21T19:59:05.047Z] Host.Functions.healthCheck
[2025-08-21T19:59:05.047Z] Host.Functions.openai-health
[2025-08-21T19:59:05.047Z] Host.Functions.performance-stats
[2025-08-21T19:59:05.047Z] Host.Functions.testFunction
[2025-08-21T19:59:05.047Z] Host.Functions.testSimple
[2025-08-21T19:59:05.047Z] 
[2025-08-21T19:59:05.047Z] HttpOptions
[2025-08-21T19:59:05.047Z] {
[2025-08-21T19:59:05.047Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:59:05.047Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:59:05.047Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:59:05.047Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:59:05.047Z]   "RoutePrefix": "api"
[2025-08-21T19:59:05.047Z] }
[2025-08-21T19:59:05.047Z] Initializing function HTTP routes
[2025-08-21T19:59:05.047Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:59:05.047Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:59:05.047Z] 
[2025-08-21T19:59:05.047Z] Host initialized (246ms)
[2025-08-21T19:59:05.047Z] Host started (246ms)
[2025-08-21T19:59:05.048Z] Job host started
[2025-08-21T19:59:05.048Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:59:05.048Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:59:05.109Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:59:05.110Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:59:05.110Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:59:05.110Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:59:05.154Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:59:05.154Z] 🔍 Current env vars:
[2025-08-21T19:59:05.154Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:59:05.154Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:59:05.154Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:59:05.154Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:59:05.154Z]   Deployment: gpt-4o
[2025-08-21T19:59:05.154Z]   API Version: 2024-08-01-preview
[2025-08-21T19:59:05.154Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:59:05.155Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:59:05.155Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:59:05.155Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:59:05.155Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:59:05.160Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:59:05.162Z] Host restarted.
[2025-08-21T19:59:05.167Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.167Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.167Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.167Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.168Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.168Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.168Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:05.168Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '4c123cc6-cefc-4ae3-a742-946c4e73f5fe'.
[2025-08-21T19:59:05.168Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.168Z] Result: Failure
[2025-08-21T19:59:05.168Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:05.168Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:59:05.168Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:59:05.168Z]                    ^^^^^
[2025-08-21T19:59:05.168Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:05.168Z] 
[2025-08-21T19:59:05.168Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:59:05.168Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:59:05.168Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:59:05.168Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:59:05.168Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:59:05.168Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:59:05.168Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.168Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:59:05.168Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '1be39112-61bc-489f-8597-0242d41a1352'.
[2025-08-21T19:59:05.168Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:59:05.168Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:59:05.168Z] Result: Failure
[2025-08-21T19:59:05.168Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:59:05.168Z]     at Generator.next (<anonymous>).
[2025-08-21T19:59:05.168Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:05.168Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:59:05.168Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:59:05.168Z]                    ^^^^^
[2025-08-21T19:59:05.168Z] 
[2025-08-21T19:59:05.168Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:59:05.168Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.168Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.168Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:59:05.168Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:59:05.168Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:59:05.168Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:59:05.168Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:59:05.168Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:59:05.168Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:59:05.168Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:59:05.168Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:59:05.168Z]     at Generator.next (<anonymous>).
[2025-08-21T19:59:05.168Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.168Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.168Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.169Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.169Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.169Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.169Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.169Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.169Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.169Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:05.169Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f received FunctionLoadRequest
[2025-08-21T19:59:09.800Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:59:36.219Z] Restarting host.
[2025-08-21T19:59:36.222Z] Stopping JobHost
[2025-08-21T19:59:36.223Z] Job host stopped
[2025-08-21T19:59:36.224Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '3e3cdb92-1d83-4873-b80a-1560edd83ce4'
[2025-08-21T19:59:36.308Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:59:36.308Z] Host configuration file read:
[2025-08-21T19:59:36.308Z] {
[2025-08-21T19:59:36.308Z]   "version": "2.0",
[2025-08-21T19:59:36.308Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:59:36.308Z]   "logging": {
[2025-08-21T19:59:36.308Z]     "applicationInsights": {
[2025-08-21T19:59:36.308Z]       "samplingSettings": {
[2025-08-21T19:59:36.308Z]         "isEnabled": true,
[2025-08-21T19:59:36.308Z]         "excludedTypes": "Request"
[2025-08-21T19:59:36.308Z]       }
[2025-08-21T19:59:36.308Z]     },
[2025-08-21T19:59:36.308Z]     "logLevel": {
[2025-08-21T19:59:36.308Z]       "default": "Information",
[2025-08-21T19:59:36.308Z]       "Host.Results": "Information",
[2025-08-21T19:59:36.308Z]       "Function": "Information"
[2025-08-21T19:59:36.308Z]     }
[2025-08-21T19:59:36.308Z]   },
[2025-08-21T19:59:36.308Z]   "extensionBundle": {
[2025-08-21T19:59:36.308Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:59:36.308Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:59:36.308Z]   },
[2025-08-21T19:59:36.308Z]   "watchDirectories": [
[2025-08-21T19:59:36.308Z]     "Shared"
[2025-08-21T19:59:36.308Z]   ]
[2025-08-21T19:59:36.308Z] }
[2025-08-21T19:59:36.310Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:59:36.311Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:59:36.311Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:59:36.311Z] Loading functions metadata
[2025-08-21T19:59:36.311Z] Worker indexing is enabled
[2025-08-21T19:59:36.311Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:59:36.311Z] Reading functions metadata (Worker)
[2025-08-21T19:59:36.311Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:59:36.317Z] Worker 1f72c139-3ba1-4fca-9339-d14d73c8808f exited with code 0
[2025-08-21T19:59:36.459Z] Worker 662ba520-69bf-473c-a375-13d01db84837 connecting on 127.0.0.1:54302
[2025-08-21T19:59:36.483Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received WorkerInitRequest
[2025-08-21T19:59:36.485Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionsMetadataRequest
[2025-08-21T19:59:36.485Z] Reading functions metadata (Host)
[2025-08-21T19:59:36.732Z] 21 functions found (Host)
[2025-08-21T19:59:36.732Z] 21 functions loaded
[2025-08-21T19:59:36.732Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:59:36.732Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:59:36.732Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:59:36.733Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:59:37.182Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:59:37.182Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:59:37.182Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:59:37.183Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:59:37.244Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:59:37.244Z] Host configuration file read:
[2025-08-21T19:59:37.244Z] {
[2025-08-21T19:59:37.244Z]   "version": "2.0",
[2025-08-21T19:59:37.244Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:59:37.244Z]   "logging": {
[2025-08-21T19:59:37.244Z]     "applicationInsights": {
[2025-08-21T19:59:37.244Z]       "samplingSettings": {
[2025-08-21T19:59:37.244Z]         "isEnabled": true,
[2025-08-21T19:59:37.244Z]         "excludedTypes": "Request"
[2025-08-21T19:59:37.244Z]       }
[2025-08-21T19:59:37.244Z]     },
[2025-08-21T19:59:37.244Z]     "logLevel": {
[2025-08-21T19:59:37.244Z]       "default": "Information",
[2025-08-21T19:59:37.244Z]       "Host.Results": "Information",
[2025-08-21T19:59:37.244Z]       "Function": "Information"
[2025-08-21T19:59:37.244Z]     }
[2025-08-21T19:59:37.244Z]   },
[2025-08-21T19:59:37.244Z]   "extensionBundle": {
[2025-08-21T19:59:37.244Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:59:37.244Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:59:37.244Z]   },
[2025-08-21T19:59:37.244Z]   "watchDirectories": [
[2025-08-21T19:59:37.244Z]     "Shared"
[2025-08-21T19:59:37.244Z]   ]
[2025-08-21T19:59:37.244Z] }
[2025-08-21T19:59:37.294Z] Initializing Warmup Extension.
[2025-08-21T19:59:37.295Z] Initializing Host. OperationId: '3e3cdb92-1d83-4873-b80a-1560edd83ce4'.
[2025-08-21T19:59:37.295Z] Host initialization: ConsecutiveErrors=0, StartupCount=38, OperationId=3e3cdb92-1d83-4873-b80a-1560edd83ce4
[2025-08-21T19:59:37.299Z] LoggerFilterOptions
[2025-08-21T19:59:37.299Z] {
[2025-08-21T19:59:37.299Z]   "MinLevel": "None",
[2025-08-21T19:59:37.299Z]   "Rules": [
[2025-08-21T19:59:37.299Z]     {
[2025-08-21T19:59:37.299Z]       "ProviderName": null,
[2025-08-21T19:59:37.299Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:59:37.299Z]       "LogLevel": "None",
[2025-08-21T19:59:37.299Z]       "Filter": null
[2025-08-21T19:59:37.299Z]     },
[2025-08-21T19:59:37.299Z]     {
[2025-08-21T19:59:37.299Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:37.300Z]       "CategoryName": null,
[2025-08-21T19:59:37.300Z]       "LogLevel": "None",
[2025-08-21T19:59:37.300Z]       "Filter": null
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:37.300Z]       "CategoryName": null,
[2025-08-21T19:59:37.300Z]       "LogLevel": null,
[2025-08-21T19:59:37.300Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": null,
[2025-08-21T19:59:37.300Z]       "CategoryName": null,
[2025-08-21T19:59:37.300Z]       "LogLevel": null,
[2025-08-21T19:59:37.300Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": null,
[2025-08-21T19:59:37.300Z]       "CategoryName": null,
[2025-08-21T19:59:37.300Z]       "LogLevel": null,
[2025-08-21T19:59:37.300Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": null,
[2025-08-21T19:59:37.300Z]       "CategoryName": "Host.Results",
[2025-08-21T19:59:37.300Z]       "LogLevel": "Information",
[2025-08-21T19:59:37.300Z]       "Filter": null
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": null,
[2025-08-21T19:59:37.300Z]       "CategoryName": "Function",
[2025-08-21T19:59:37.300Z]       "LogLevel": "Information",
[2025-08-21T19:59:37.300Z]       "Filter": null
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": null,
[2025-08-21T19:59:37.300Z]       "CategoryName": null,
[2025-08-21T19:59:37.300Z]       "LogLevel": "Information",
[2025-08-21T19:59:37.300Z]       "Filter": null
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:37.300Z]       "CategoryName": null,
[2025-08-21T19:59:37.300Z]       "LogLevel": "None",
[2025-08-21T19:59:37.300Z]       "Filter": null
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:37.300Z]       "CategoryName": null,
[2025-08-21T19:59:37.300Z]       "LogLevel": null,
[2025-08-21T19:59:37.300Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:37.300Z]       "CategoryName": null,
[2025-08-21T19:59:37.300Z]       "LogLevel": null,
[2025-08-21T19:59:37.300Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:37.300Z]     }
[2025-08-21T19:59:37.300Z]   ]
[2025-08-21T19:59:37.300Z] }
[2025-08-21T19:59:37.300Z] LoggerFilterOptions
[2025-08-21T19:59:37.300Z] {
[2025-08-21T19:59:37.300Z]   "MinLevel": "None",
[2025-08-21T19:59:37.300Z]   "Rules": [
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": null,
[2025-08-21T19:59:37.300Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:59:37.300Z]       "LogLevel": "None",
[2025-08-21T19:59:37.300Z]       "Filter": null
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.300Z]     {
[2025-08-21T19:59:37.300Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:37.300Z]       "CategoryName": null,
[2025-08-21T19:59:37.300Z]       "LogLevel": "None",
[2025-08-21T19:59:37.300Z]       "Filter": null
[2025-08-21T19:59:37.300Z]     },
[2025-08-21T19:59:37.301Z]     {
[2025-08-21T19:59:37.301Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:37.301Z]       "CategoryName": null,
[2025-08-21T19:59:37.301Z]       "LogLevel": null,
[2025-08-21T19:59:37.301Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:37.301Z]     },
[2025-08-21T19:59:37.301Z]     {
[2025-08-21T19:59:37.301Z]       "ProviderName": null,
[2025-08-21T19:59:37.301Z]       "CategoryName": null,
[2025-08-21T19:59:37.301Z]       "LogLevel": null,
[2025-08-21T19:59:37.301Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:37.301Z]     },
[2025-08-21T19:59:37.301Z]     {
[2025-08-21T19:59:37.301Z]       "ProviderName": null,
[2025-08-21T19:59:37.301Z]       "CategoryName": null,
[2025-08-21T19:59:37.301Z]       "LogLevel": null,
[2025-08-21T19:59:37.301Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:37.301Z]     },
[2025-08-21T19:59:37.301Z]     {
[2025-08-21T19:59:37.301Z]       "ProviderName": null,
[2025-08-21T19:59:37.301Z]       "CategoryName": "Host.Results",
[2025-08-21T19:59:37.301Z]       "LogLevel": "Information",
[2025-08-21T19:59:37.301Z]       "Filter": null
[2025-08-21T19:59:37.301Z]     },
[2025-08-21T19:59:37.301Z]     {
[2025-08-21T19:59:37.301Z]       "ProviderName": null,
[2025-08-21T19:59:37.301Z]       "CategoryName": "Function",
[2025-08-21T19:59:37.301Z]       "LogLevel": "Information",
[2025-08-21T19:59:37.301Z]       "Filter": null
[2025-08-21T19:59:37.301Z]     },
[2025-08-21T19:59:37.301Z]     {
[2025-08-21T19:59:37.301Z]       "ProviderName": null,
[2025-08-21T19:59:37.301Z]       "CategoryName": null,
[2025-08-21T19:59:37.301Z]       "LogLevel": "Information",
[2025-08-21T19:59:37.301Z]       "Filter": null
[2025-08-21T19:59:37.301Z]     },
[2025-08-21T19:59:37.301Z]     {
[2025-08-21T19:59:37.301Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:37.301Z]       "CategoryName": null,
[2025-08-21T19:59:37.301Z]       "LogLevel": "None",
[2025-08-21T19:59:37.301Z]       "Filter": null
[2025-08-21T19:59:37.301Z]     },
[2025-08-21T19:59:37.301Z]     {
[2025-08-21T19:59:37.301Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:37.301Z]       "CategoryName": null,
[2025-08-21T19:59:37.301Z]       "LogLevel": null,
[2025-08-21T19:59:37.301Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:37.301Z]     },
[2025-08-21T19:59:37.301Z]     {
[2025-08-21T19:59:37.301Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:37.301Z]       "CategoryName": null,
[2025-08-21T19:59:37.301Z]       "LogLevel": null,
[2025-08-21T19:59:37.301Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:37.301Z]     }
[2025-08-21T19:59:37.301Z]   ]
[2025-08-21T19:59:37.301Z] }
[2025-08-21T19:59:37.301Z] FunctionResultAggregatorOptions
[2025-08-21T19:59:37.301Z] {
[2025-08-21T19:59:37.301Z]   "BatchSize": 1000,
[2025-08-21T19:59:37.301Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:59:37.301Z]   "IsEnabled": true
[2025-08-21T19:59:37.301Z] }
[2025-08-21T19:59:37.301Z] ConcurrencyOptions
[2025-08-21T19:59:37.301Z] {
[2025-08-21T19:59:37.301Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:59:37.301Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:59:37.301Z]   "CPUThreshold": 0.8,
[2025-08-21T19:59:37.301Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:59:37.301Z] }
[2025-08-21T19:59:37.301Z] SingletonOptions
[2025-08-21T19:59:37.301Z] {
[2025-08-21T19:59:37.301Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:59:37.301Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:59:37.301Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:59:37.301Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:59:37.301Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:59:37.301Z] }
[2025-08-21T19:59:37.302Z] ScaleOptions
[2025-08-21T19:59:37.302Z] {
[2025-08-21T19:59:37.302Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:59:37.302Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:59:37.302Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:59:37.302Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:59:37.302Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:59:37.302Z] }
[2025-08-21T19:59:37.302Z] Starting JobHost
[2025-08-21T19:59:37.302Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=249828b1-882b-4585-8556-58ea02669ea7, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:59:37.302Z] Loading functions metadata
[2025-08-21T19:59:37.302Z] Worker indexing is enabled
[2025-08-21T19:59:37.302Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:59:37.302Z] Reading functions metadata (Worker)
[2025-08-21T19:59:37.302Z] Reading functions metadata (Host)
[2025-08-21T19:59:37.515Z] 21 functions found (Host)
[2025-08-21T19:59:37.515Z] Reading functions metadata (Custom)
[2025-08-21T19:59:37.515Z] 0 functions found (Custom)
[2025-08-21T19:59:37.516Z] 21 functions loaded
[2025-08-21T19:59:37.518Z] Generating 21 job function(s)
[2025-08-21T19:59:37.518Z] Worker process started and initialized.
[2025-08-21T19:59:37.534Z] Found the following functions:
[2025-08-21T19:59:37.534Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:59:37.535Z] Host.Functions.analytics
[2025-08-21T19:59:37.535Z] Host.Functions.analyzeUIImage
[2025-08-21T19:59:37.535Z] Host.Functions.atlasComponents
[2025-08-21T19:59:37.535Z] Host.Functions.fast-suggestions
[2025-08-21T19:59:37.535Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:59:37.535Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:59:37.535Z] Host.Functions.generateSuggestions
[2025-08-21T19:59:37.535Z] Host.Functions.generateWireframe
[2025-08-21T19:59:37.535Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:59:37.535Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:59:37.535Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:59:37.535Z] Host.Functions.get-template
[2025-08-21T19:59:37.535Z] Host.Functions.githubAuthCallback
[2025-08-21T19:59:37.535Z] Host.Functions.githubAuthStart
[2025-08-21T19:59:37.535Z] Host.Functions.health
[2025-08-21T19:59:37.535Z] Host.Functions.healthCheck
[2025-08-21T19:59:37.535Z] Host.Functions.openai-health
[2025-08-21T19:59:37.535Z] Host.Functions.performance-stats
[2025-08-21T19:59:37.535Z] Host.Functions.testFunction
[2025-08-21T19:59:37.535Z] Host.Functions.testSimple
[2025-08-21T19:59:37.535Z] 
[2025-08-21T19:59:37.535Z] HttpOptions
[2025-08-21T19:59:37.535Z] {
[2025-08-21T19:59:37.535Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:59:37.535Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:59:37.535Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:59:37.535Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:59:37.535Z]   "RoutePrefix": "api"
[2025-08-21T19:59:37.535Z] }
[2025-08-21T19:59:37.536Z] Initializing function HTTP routes
[2025-08-21T19:59:37.536Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:59:37.536Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:59:37.536Z] 
[2025-08-21T19:59:37.536Z] Host initialized (234ms)
[2025-08-21T19:59:37.536Z] Host started (234ms)
[2025-08-21T19:59:37.536Z] Job host started
[2025-08-21T19:59:37.536Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:59:37.536Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:59:37.580Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:59:37.580Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:59:37.580Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:59:37.580Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:59:37.628Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:59:37.628Z] 🔍 Current env vars:
[2025-08-21T19:59:37.628Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:59:37.628Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:59:37.628Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:59:37.628Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:59:37.628Z]   Deployment: gpt-4o
[2025-08-21T19:59:37.628Z]   API Version: 2024-08-01-preview
[2025-08-21T19:59:37.628Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:59:37.628Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:59:37.628Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:59:37.628Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:59:37.628Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:59:37.630Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:59:37.636Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.636Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.637Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.637Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.637Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.637Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.637Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:37.637Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '986c518f-4d77-40f2-8733-aea6292ea00b'.
[2025-08-21T19:59:37.637Z] Result: Failure
[2025-08-21T19:59:37.637Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:37.637Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:59:37.637Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:59:37.637Z]                    ^^^^^
[2025-08-21T19:59:37.637Z] 
[2025-08-21T19:59:37.637Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:59:37.637Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:59:37.637Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:59:37.637Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:59:37.637Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:59:37.637Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:59:37.637Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:59:37.637Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:59:37.637Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:59:37.637Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:59:37.637Z]     at Generator.next (<anonymous>).
[2025-08-21T19:59:37.637Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.637Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:37.637Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.638Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.638Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '11edf157-b1f1-41b9-b4a5-f8e75f335c7c'.
[2025-08-21T19:59:37.638Z] Result: Failure
[2025-08-21T19:59:37.638Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:37.638Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T19:59:37.638Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:59:37.638Z]                    ^^^^^
[2025-08-21T19:59:37.638Z] 
[2025-08-21T19:59:37.638Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:59:37.638Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:59:37.638Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:59:37.638Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:59:37.638Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:59:37.638Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:59:37.638Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:59:37.638Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:59:37.638Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:59:37.638Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:59:37.638Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.638Z]     at Generator.next (<anonymous>).
[2025-08-21T19:59:37.638Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.638Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.638Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.638Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.638Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.638Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.638Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.639Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.639Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.639Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.639Z] Worker 662ba520-69bf-473c-a375-13d01db84837 received FunctionLoadRequest
[2025-08-21T19:59:37.639Z] Host restarted.
[2025-08-21T19:59:42.302Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T19:59:44.615Z] Restarting host.
[2025-08-21T19:59:44.619Z] Stopping JobHost
[2025-08-21T19:59:44.619Z] Job host stopped
[2025-08-21T19:59:44.621Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '96913f66-e88e-4465-ab67-d047a439fd18'
[2025-08-21T19:59:44.722Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:59:44.722Z] Host configuration file read:
[2025-08-21T19:59:44.722Z] {
[2025-08-21T19:59:44.722Z]   "version": "2.0",
[2025-08-21T19:59:44.722Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:59:44.722Z]   "logging": {
[2025-08-21T19:59:44.722Z]     "applicationInsights": {
[2025-08-21T19:59:44.722Z]       "samplingSettings": {
[2025-08-21T19:59:44.722Z]         "isEnabled": true,
[2025-08-21T19:59:44.722Z]         "excludedTypes": "Request"
[2025-08-21T19:59:44.722Z]       }
[2025-08-21T19:59:44.722Z]     },
[2025-08-21T19:59:44.722Z]     "logLevel": {
[2025-08-21T19:59:44.722Z]       "default": "Information",
[2025-08-21T19:59:44.722Z]       "Host.Results": "Information",
[2025-08-21T19:59:44.722Z]       "Function": "Information"
[2025-08-21T19:59:44.722Z]     }
[2025-08-21T19:59:44.722Z]   },
[2025-08-21T19:59:44.722Z]   "extensionBundle": {
[2025-08-21T19:59:44.722Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:59:44.722Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:59:44.722Z]   },
[2025-08-21T19:59:44.722Z]   "watchDirectories": [
[2025-08-21T19:59:44.722Z]     "Shared"
[2025-08-21T19:59:44.722Z]   ]
[2025-08-21T19:59:44.722Z] }
[2025-08-21T19:59:44.723Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:59:44.723Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:59:44.724Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:59:44.724Z] Loading functions metadata
[2025-08-21T19:59:44.724Z] Worker indexing is enabled
[2025-08-21T19:59:44.724Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:59:44.724Z] Reading functions metadata (Worker)
[2025-08-21T19:59:44.724Z] Shutting down language worker channels for runtime:node
[2025-08-21T19:59:44.727Z] Worker 662ba520-69bf-473c-a375-13d01db84837 exited with code 0
[2025-08-21T19:59:44.878Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 connecting on 127.0.0.1:54302
[2025-08-21T19:59:44.901Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received WorkerInitRequest
[2025-08-21T19:59:44.904Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionsMetadataRequest
[2025-08-21T19:59:44.904Z] Reading functions metadata (Host)
[2025-08-21T19:59:45.157Z] 21 functions found (Host)
[2025-08-21T19:59:45.157Z] 21 functions loaded
[2025-08-21T19:59:45.157Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T19:59:45.157Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:59:45.157Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:59:45.157Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T19:59:45.304Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T19:59:45.304Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T19:59:45.304Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T19:59:45.304Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T19:59:45.348Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T19:59:45.348Z] Host configuration file read:
[2025-08-21T19:59:45.348Z] {
[2025-08-21T19:59:45.348Z]   "version": "2.0",
[2025-08-21T19:59:45.348Z]   "functionTimeout": "00:05:00",
[2025-08-21T19:59:45.348Z]   "logging": {
[2025-08-21T19:59:45.348Z]     "applicationInsights": {
[2025-08-21T19:59:45.348Z]       "samplingSettings": {
[2025-08-21T19:59:45.348Z]         "isEnabled": true,
[2025-08-21T19:59:45.348Z]         "excludedTypes": "Request"
[2025-08-21T19:59:45.348Z]       }
[2025-08-21T19:59:45.348Z]     },
[2025-08-21T19:59:45.348Z]     "logLevel": {
[2025-08-21T19:59:45.348Z]       "default": "Information",
[2025-08-21T19:59:45.348Z]       "Host.Results": "Information",
[2025-08-21T19:59:45.348Z]       "Function": "Information"
[2025-08-21T19:59:45.348Z]     }
[2025-08-21T19:59:45.348Z]   },
[2025-08-21T19:59:45.348Z]   "extensionBundle": {
[2025-08-21T19:59:45.348Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T19:59:45.348Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T19:59:45.348Z]   },
[2025-08-21T19:59:45.348Z]   "watchDirectories": [
[2025-08-21T19:59:45.348Z]     "Shared"
[2025-08-21T19:59:45.348Z]   ]
[2025-08-21T19:59:45.348Z] }
[2025-08-21T19:59:45.385Z] Initializing Warmup Extension.
[2025-08-21T19:59:45.385Z] Initializing Host. OperationId: '96913f66-e88e-4465-ab67-d047a439fd18'.
[2025-08-21T19:59:45.386Z] Host initialization: ConsecutiveErrors=0, StartupCount=39, OperationId=96913f66-e88e-4465-ab67-d047a439fd18
[2025-08-21T19:59:45.389Z] LoggerFilterOptions
[2025-08-21T19:59:45.389Z] {
[2025-08-21T19:59:45.389Z]   "MinLevel": "None",
[2025-08-21T19:59:45.389Z]   "Rules": [
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": null,
[2025-08-21T19:59:45.389Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:59:45.389Z]       "LogLevel": "None",
[2025-08-21T19:59:45.389Z]       "Filter": null
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": "None",
[2025-08-21T19:59:45.389Z]       "Filter": null
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": null,
[2025-08-21T19:59:45.389Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": null,
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": null,
[2025-08-21T19:59:45.389Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": null,
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": null,
[2025-08-21T19:59:45.389Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": null,
[2025-08-21T19:59:45.389Z]       "CategoryName": "Host.Results",
[2025-08-21T19:59:45.389Z]       "LogLevel": "Information",
[2025-08-21T19:59:45.389Z]       "Filter": null
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": null,
[2025-08-21T19:59:45.389Z]       "CategoryName": "Function",
[2025-08-21T19:59:45.389Z]       "LogLevel": "Information",
[2025-08-21T19:59:45.389Z]       "Filter": null
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": null,
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": "Information",
[2025-08-21T19:59:45.389Z]       "Filter": null
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": "None",
[2025-08-21T19:59:45.389Z]       "Filter": null
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": null,
[2025-08-21T19:59:45.389Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": null,
[2025-08-21T19:59:45.389Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:45.389Z]     }
[2025-08-21T19:59:45.389Z]   ]
[2025-08-21T19:59:45.389Z] }
[2025-08-21T19:59:45.389Z] LoggerFilterOptions
[2025-08-21T19:59:45.389Z] {
[2025-08-21T19:59:45.389Z]   "MinLevel": "None",
[2025-08-21T19:59:45.389Z]   "Rules": [
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": null,
[2025-08-21T19:59:45.389Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T19:59:45.389Z]       "LogLevel": "None",
[2025-08-21T19:59:45.389Z]       "Filter": null
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": "None",
[2025-08-21T19:59:45.389Z]       "Filter": null
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": null,
[2025-08-21T19:59:45.389Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.389Z]     {
[2025-08-21T19:59:45.389Z]       "ProviderName": null,
[2025-08-21T19:59:45.389Z]       "CategoryName": null,
[2025-08-21T19:59:45.389Z]       "LogLevel": null,
[2025-08-21T19:59:45.389Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:45.389Z]     },
[2025-08-21T19:59:45.390Z]     {
[2025-08-21T19:59:45.390Z]       "ProviderName": null,
[2025-08-21T19:59:45.390Z]       "CategoryName": null,
[2025-08-21T19:59:45.390Z]       "LogLevel": null,
[2025-08-21T19:59:45.390Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:45.390Z]     },
[2025-08-21T19:59:45.390Z]     {
[2025-08-21T19:59:45.390Z]       "ProviderName": null,
[2025-08-21T19:59:45.390Z]       "CategoryName": "Host.Results",
[2025-08-21T19:59:45.390Z]       "LogLevel": "Information",
[2025-08-21T19:59:45.390Z]       "Filter": null
[2025-08-21T19:59:45.390Z]     },
[2025-08-21T19:59:45.390Z]     {
[2025-08-21T19:59:45.390Z]       "ProviderName": null,
[2025-08-21T19:59:45.390Z]       "CategoryName": "Function",
[2025-08-21T19:59:45.390Z]       "LogLevel": "Information",
[2025-08-21T19:59:45.390Z]       "Filter": null
[2025-08-21T19:59:45.390Z]     },
[2025-08-21T19:59:45.390Z]     {
[2025-08-21T19:59:45.390Z]       "ProviderName": null,
[2025-08-21T19:59:45.390Z]       "CategoryName": null,
[2025-08-21T19:59:45.390Z]       "LogLevel": "Information",
[2025-08-21T19:59:45.390Z]       "Filter": null
[2025-08-21T19:59:45.390Z]     },
[2025-08-21T19:59:45.390Z]     {
[2025-08-21T19:59:45.390Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:45.390Z]       "CategoryName": null,
[2025-08-21T19:59:45.390Z]       "LogLevel": "None",
[2025-08-21T19:59:45.390Z]       "Filter": null
[2025-08-21T19:59:45.390Z]     },
[2025-08-21T19:59:45.390Z]     {
[2025-08-21T19:59:45.390Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T19:59:45.390Z]       "CategoryName": null,
[2025-08-21T19:59:45.390Z]       "LogLevel": null,
[2025-08-21T19:59:45.390Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:45.390Z]     },
[2025-08-21T19:59:45.390Z]     {
[2025-08-21T19:59:45.390Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T19:59:45.390Z]       "CategoryName": null,
[2025-08-21T19:59:45.390Z]       "LogLevel": null,
[2025-08-21T19:59:45.390Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T19:59:45.390Z]     }
[2025-08-21T19:59:45.390Z]   ]
[2025-08-21T19:59:45.390Z] }
[2025-08-21T19:59:45.390Z] FunctionResultAggregatorOptions
[2025-08-21T19:59:45.390Z] {
[2025-08-21T19:59:45.390Z]   "BatchSize": 1000,
[2025-08-21T19:59:45.390Z]   "FlushTimeout": "00:00:30",
[2025-08-21T19:59:45.390Z]   "IsEnabled": true
[2025-08-21T19:59:45.390Z] }
[2025-08-21T19:59:45.390Z] ConcurrencyOptions
[2025-08-21T19:59:45.390Z] {
[2025-08-21T19:59:45.390Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T19:59:45.390Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T19:59:45.390Z]   "CPUThreshold": 0.8,
[2025-08-21T19:59:45.390Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T19:59:45.390Z] }
[2025-08-21T19:59:45.390Z] SingletonOptions
[2025-08-21T19:59:45.390Z] {
[2025-08-21T19:59:45.390Z]   "LockPeriod": "00:00:15",
[2025-08-21T19:59:45.390Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T19:59:45.390Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T19:59:45.390Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T19:59:45.390Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T19:59:45.390Z] }
[2025-08-21T19:59:45.390Z] ScaleOptions
[2025-08-21T19:59:45.390Z] {
[2025-08-21T19:59:45.390Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T19:59:45.390Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T19:59:45.390Z]   "MetricsPurgeEnabled": true,
[2025-08-21T19:59:45.390Z]   "IsTargetScalingEnabled": true,
[2025-08-21T19:59:45.390Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T19:59:45.390Z] }
[2025-08-21T19:59:45.390Z] Starting JobHost
[2025-08-21T19:59:45.390Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=3a639185-550f-4bbb-9b74-4c30679dea45, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T19:59:45.390Z] Loading functions metadata
[2025-08-21T19:59:45.390Z] Worker indexing is enabled
[2025-08-21T19:59:45.390Z] Fetching metadata for workerRuntime: node
[2025-08-21T19:59:45.391Z] Reading functions metadata (Worker)
[2025-08-21T19:59:45.391Z] Reading functions metadata (Host)
[2025-08-21T19:59:45.608Z] 21 functions found (Host)
[2025-08-21T19:59:45.609Z] Reading functions metadata (Custom)
[2025-08-21T19:59:45.609Z] 0 functions found (Custom)
[2025-08-21T19:59:45.609Z] 21 functions loaded
[2025-08-21T19:59:45.612Z] Generating 21 job function(s)
[2025-08-21T19:59:45.612Z] Worker process started and initialized.
[2025-08-21T19:59:45.628Z] Found the following functions:
[2025-08-21T19:59:45.628Z] Host.Functions.aiBuilderHealth
[2025-08-21T19:59:45.628Z] Host.Functions.analytics
[2025-08-21T19:59:45.628Z] Host.Functions.analyzeUIImage
[2025-08-21T19:59:45.628Z] Host.Functions.atlasComponents
[2025-08-21T19:59:45.628Z] Host.Functions.fast-suggestions
[2025-08-21T19:59:45.628Z] Host.Functions.figmaOAuthCallback
[2025-08-21T19:59:45.628Z] Host.Functions.figmaOAuthStart
[2025-08-21T19:59:45.628Z] Host.Functions.generateSuggestions
[2025-08-21T19:59:45.628Z] Host.Functions.generateWireframe
[2025-08-21T19:59:45.628Z] Host.Functions.generateWireframeAlias
[2025-08-21T19:59:45.628Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T19:59:45.628Z] Host.Functions.generateWireframeOptionB
[2025-08-21T19:59:45.628Z] Host.Functions.get-template
[2025-08-21T19:59:45.628Z] Host.Functions.githubAuthCallback
[2025-08-21T19:59:45.628Z] Host.Functions.githubAuthStart
[2025-08-21T19:59:45.628Z] Host.Functions.health
[2025-08-21T19:59:45.628Z] Host.Functions.healthCheck
[2025-08-21T19:59:45.628Z] Host.Functions.openai-health
[2025-08-21T19:59:45.628Z] Host.Functions.performance-stats
[2025-08-21T19:59:45.628Z] Host.Functions.testFunction
[2025-08-21T19:59:45.628Z] Host.Functions.testSimple
[2025-08-21T19:59:45.628Z] 
[2025-08-21T19:59:45.628Z] HttpOptions
[2025-08-21T19:59:45.628Z] {
[2025-08-21T19:59:45.628Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T19:59:45.628Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T19:59:45.628Z]   "MaxConcurrentRequests": -1,
[2025-08-21T19:59:45.628Z]   "MaxOutstandingRequests": -1,
[2025-08-21T19:59:45.628Z] Initializing function HTTP routes
[2025-08-21T19:59:45.628Z]   "RoutePrefix": "api"
[2025-08-21T19:59:45.628Z] }
[2025-08-21T19:59:45.628Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T19:59:45.628Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T19:59:45.628Z] 
[2025-08-21T19:59:45.629Z] Host initialized (238ms)
[2025-08-21T19:59:45.629Z] Host started (238ms)
[2025-08-21T19:59:45.629Z] Job host started
[2025-08-21T19:59:45.629Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:59:45.629Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T19:59:45.661Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T19:59:45.662Z] ✅ OpenAI initialized for image analysis
[2025-08-21T19:59:45.662Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:59:45.662Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:59:45.699Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T19:59:45.699Z] 🔍 Current env vars:
[2025-08-21T19:59:45.699Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T19:59:45.699Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T19:59:45.699Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T19:59:45.699Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:59:45.699Z]   Deployment: gpt-4o
[2025-08-21T19:59:45.699Z]   API Version: 2024-08-01-preview
[2025-08-21T19:59:45.699Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T19:59:45.699Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T19:59:45.699Z] ✅ OpenAI client initialized successfully
[2025-08-21T19:59:45.699Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T19:59:45.699Z] 🎯 Using deployment: gpt-4o
[2025-08-21T19:59:45.701Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T19:59:45.706Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.706Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.706Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.706Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.706Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:45.707Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '43cc682d-02e4-49f3-aec9-703c62b82cbc'.[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '1d4fc4c0-53a2-46ab-a900-85b92890ca8e'.
[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z] Result: Failure
[2025-08-21T19:59:45.707Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:45.707Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2

[2025-08-21T19:59:45.707Z] Result: Failure
[2025-08-21T19:59:45.707Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:59:45.707Z]                    ^^^^^
[2025-08-21T19:59:45.707Z] 
[2025-08-21T19:59:45.707Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:59:45.707Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:59:45.707Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T19:59:45.707Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T19:59:45.707Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T19:59:45.707Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T19:59:45.707Z]                    ^^^^^
[2025-08-21T19:59:45.707Z] 
[2025-08-21T19:59:45.707Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T19:59:45.707Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T19:59:45.707Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:59:45.707Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:59:45.707Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest

[2025-08-21T19:59:45.707Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:59:45.707Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:59:45.707Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:59:45.707Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T19:59:45.707Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T19:59:45.707Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T19:59:45.707Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.707Z]     at Generator.next (<anonymous>).
[2025-08-21T19:59:45.707Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T19:59:45.708Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T19:59:45.707Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.708Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.708Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T19:59:45.708Z]     at Generator.next (<anonymous>).
[2025-08-21T19:59:45.708Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.708Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.708Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 received FunctionLoadRequest
[2025-08-21T19:59:45.717Z] Host restarted.
[2025-08-21T19:59:50.392Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T20:00:00.733Z] Restarting host.
[2025-08-21T20:00:00.736Z] Stopping JobHost
[2025-08-21T20:00:00.736Z] Job host stopped
[2025-08-21T20:00:00.737Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: 'acadbfed-9dfd-4bc6-894d-e41f680018cf'
[2025-08-21T20:00:00.811Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T20:00:00.811Z] Host configuration file read:
[2025-08-21T20:00:00.811Z] {
[2025-08-21T20:00:00.811Z]   "version": "2.0",
[2025-08-21T20:00:00.811Z]   "functionTimeout": "00:05:00",
[2025-08-21T20:00:00.811Z]   "logging": {
[2025-08-21T20:00:00.811Z]     "applicationInsights": {
[2025-08-21T20:00:00.811Z]       "samplingSettings": {
[2025-08-21T20:00:00.811Z]         "isEnabled": true,
[2025-08-21T20:00:00.811Z]         "excludedTypes": "Request"
[2025-08-21T20:00:00.811Z]       }
[2025-08-21T20:00:00.811Z]     },
[2025-08-21T20:00:00.811Z]     "logLevel": {
[2025-08-21T20:00:00.811Z]       "default": "Information",
[2025-08-21T20:00:00.811Z]       "Host.Results": "Information",
[2025-08-21T20:00:00.811Z]       "Function": "Information"
[2025-08-21T20:00:00.811Z]     }
[2025-08-21T20:00:00.811Z]   },
[2025-08-21T20:00:00.811Z]   "extensionBundle": {
[2025-08-21T20:00:00.811Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T20:00:00.811Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T20:00:00.811Z]   },
[2025-08-21T20:00:00.811Z]   "watchDirectories": [
[2025-08-21T20:00:00.811Z]     "Shared"
[2025-08-21T20:00:00.811Z]   ]
[2025-08-21T20:00:00.811Z] }
[2025-08-21T20:00:00.812Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T20:00:00.812Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:00:00.812Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:00:00.813Z] Loading functions metadata
[2025-08-21T20:00:00.813Z] Worker indexing is enabled
[2025-08-21T20:00:00.813Z] Fetching metadata for workerRuntime: node
[2025-08-21T20:00:00.813Z] Reading functions metadata (Worker)
[2025-08-21T20:00:00.813Z] Shutting down language worker channels for runtime:node
[2025-08-21T20:00:00.823Z] Worker 4be32ffb-4d47-4581-a3e3-ce5982ce98d7 exited with code 0
[2025-08-21T20:00:00.960Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 connecting on 127.0.0.1:54302
[2025-08-21T20:00:00.984Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received WorkerInitRequest
[2025-08-21T20:00:00.987Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionsMetadataRequest
[2025-08-21T20:00:00.987Z] Reading functions metadata (Host)
[2025-08-21T20:00:01.221Z] 21 functions found (Host)
[2025-08-21T20:00:01.221Z] 21 functions loaded
[2025-08-21T20:00:01.221Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T20:00:01.222Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:00:01.222Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:00:01.222Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T20:00:01.395Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:00:01.395Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:00:01.396Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T20:00:01.396Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T20:00:01.454Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T20:00:01.454Z] Host configuration file read:
[2025-08-21T20:00:01.454Z] {
[2025-08-21T20:00:01.454Z]   "version": "2.0",
[2025-08-21T20:00:01.455Z]   "functionTimeout": "00:05:00",
[2025-08-21T20:00:01.455Z]   "logging": {
[2025-08-21T20:00:01.455Z]     "applicationInsights": {
[2025-08-21T20:00:01.455Z]       "samplingSettings": {
[2025-08-21T20:00:01.455Z]         "isEnabled": true,
[2025-08-21T20:00:01.455Z]         "excludedTypes": "Request"
[2025-08-21T20:00:01.455Z]       }
[2025-08-21T20:00:01.455Z]     },
[2025-08-21T20:00:01.455Z]     "logLevel": {
[2025-08-21T20:00:01.455Z]       "default": "Information",
[2025-08-21T20:00:01.455Z]       "Host.Results": "Information",
[2025-08-21T20:00:01.455Z]       "Function": "Information"
[2025-08-21T20:00:01.455Z]     }
[2025-08-21T20:00:01.455Z]   },
[2025-08-21T20:00:01.455Z]   "extensionBundle": {
[2025-08-21T20:00:01.455Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T20:00:01.455Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T20:00:01.455Z]   },
[2025-08-21T20:00:01.455Z]   "watchDirectories": [
[2025-08-21T20:00:01.455Z]     "Shared"
[2025-08-21T20:00:01.455Z]   ]
[2025-08-21T20:00:01.455Z] }
[2025-08-21T20:00:01.521Z] Initializing Warmup Extension.
[2025-08-21T20:00:01.522Z] Initializing Host. OperationId: 'acadbfed-9dfd-4bc6-894d-e41f680018cf'.
[2025-08-21T20:00:01.522Z] Host initialization: ConsecutiveErrors=0, StartupCount=40, OperationId=acadbfed-9dfd-4bc6-894d-e41f680018cf
[2025-08-21T20:00:01.525Z] LoggerFilterOptions
[2025-08-21T20:00:01.525Z] {
[2025-08-21T20:00:01.525Z]   "MinLevel": "None",
[2025-08-21T20:00:01.525Z]   "Rules": [
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": null,
[2025-08-21T20:00:01.525Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T20:00:01.525Z]       "LogLevel": "None",
[2025-08-21T20:00:01.525Z]       "Filter": null
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": "None",
[2025-08-21T20:00:01.525Z]       "Filter": null
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": null,
[2025-08-21T20:00:01.525Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": null,
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": null,
[2025-08-21T20:00:01.525Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": null,
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": null,
[2025-08-21T20:00:01.525Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": null,
[2025-08-21T20:00:01.525Z]       "CategoryName": "Host.Results",
[2025-08-21T20:00:01.525Z]       "LogLevel": "Information",
[2025-08-21T20:00:01.525Z]       "Filter": null
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": null,
[2025-08-21T20:00:01.525Z]       "CategoryName": "Function",
[2025-08-21T20:00:01.525Z]       "LogLevel": "Information",
[2025-08-21T20:00:01.525Z]       "Filter": null
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": null,
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": "Information",
[2025-08-21T20:00:01.525Z]       "Filter": null
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": "None",
[2025-08-21T20:00:01.525Z]       "Filter": null
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": null,
[2025-08-21T20:00:01.525Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": null,
[2025-08-21T20:00:01.525Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:00:01.525Z]     }
[2025-08-21T20:00:01.525Z]   ]
[2025-08-21T20:00:01.525Z] }
[2025-08-21T20:00:01.525Z] LoggerFilterOptions
[2025-08-21T20:00:01.525Z] {
[2025-08-21T20:00:01.525Z]   "MinLevel": "None",
[2025-08-21T20:00:01.525Z]   "Rules": [
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": null,
[2025-08-21T20:00:01.525Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T20:00:01.525Z]       "LogLevel": "None",
[2025-08-21T20:00:01.525Z]       "Filter": null
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": "None",
[2025-08-21T20:00:01.525Z]       "Filter": null
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": null,
[2025-08-21T20:00:01.525Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:00:01.525Z]     },
[2025-08-21T20:00:01.525Z]     {
[2025-08-21T20:00:01.525Z]       "ProviderName": null,
[2025-08-21T20:00:01.525Z]       "CategoryName": null,
[2025-08-21T20:00:01.525Z]       "LogLevel": null,
[2025-08-21T20:00:01.526Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:00:01.526Z]     },
[2025-08-21T20:00:01.526Z]     {
[2025-08-21T20:00:01.526Z]       "ProviderName": null,
[2025-08-21T20:00:01.526Z]       "CategoryName": null,
[2025-08-21T20:00:01.526Z]       "LogLevel": null,
[2025-08-21T20:00:01.526Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:00:01.526Z]     },
[2025-08-21T20:00:01.526Z]     {
[2025-08-21T20:00:01.526Z]       "ProviderName": null,
[2025-08-21T20:00:01.526Z]       "CategoryName": "Host.Results",
[2025-08-21T20:00:01.526Z]       "LogLevel": "Information",
[2025-08-21T20:00:01.526Z]       "Filter": null
[2025-08-21T20:00:01.526Z]     },
[2025-08-21T20:00:01.526Z]     {
[2025-08-21T20:00:01.526Z]       "ProviderName": null,
[2025-08-21T20:00:01.526Z]       "CategoryName": "Function",
[2025-08-21T20:00:01.526Z]       "LogLevel": "Information",
[2025-08-21T20:00:01.526Z]       "Filter": null
[2025-08-21T20:00:01.526Z]     },
[2025-08-21T20:00:01.526Z]     {
[2025-08-21T20:00:01.526Z]       "ProviderName": null,
[2025-08-21T20:00:01.526Z]       "CategoryName": null,
[2025-08-21T20:00:01.526Z]       "LogLevel": "Information",
[2025-08-21T20:00:01.526Z]       "Filter": null
[2025-08-21T20:00:01.526Z]     },
[2025-08-21T20:00:01.526Z]     {
[2025-08-21T20:00:01.526Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:00:01.526Z]       "CategoryName": null,
[2025-08-21T20:00:01.526Z]       "LogLevel": "None",
[2025-08-21T20:00:01.526Z]       "Filter": null
[2025-08-21T20:00:01.526Z]     },
[2025-08-21T20:00:01.526Z]     {
[2025-08-21T20:00:01.526Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:00:01.526Z]       "CategoryName": null,
[2025-08-21T20:00:01.526Z]       "LogLevel": null,
[2025-08-21T20:00:01.526Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:00:01.526Z]     },
[2025-08-21T20:00:01.526Z]     {
[2025-08-21T20:00:01.526Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:00:01.526Z]       "CategoryName": null,
[2025-08-21T20:00:01.526Z]       "LogLevel": null,
[2025-08-21T20:00:01.526Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:00:01.526Z]     }
[2025-08-21T20:00:01.526Z]   ]
[2025-08-21T20:00:01.526Z] }
[2025-08-21T20:00:01.526Z] FunctionResultAggregatorOptions
[2025-08-21T20:00:01.526Z] {
[2025-08-21T20:00:01.526Z]   "BatchSize": 1000,
[2025-08-21T20:00:01.526Z]   "FlushTimeout": "00:00:30",
[2025-08-21T20:00:01.526Z]   "IsEnabled": true
[2025-08-21T20:00:01.526Z] }
[2025-08-21T20:00:01.526Z] ConcurrencyOptions
[2025-08-21T20:00:01.526Z] {
[2025-08-21T20:00:01.526Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T20:00:01.526Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T20:00:01.526Z]   "CPUThreshold": 0.8,
[2025-08-21T20:00:01.526Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T20:00:01.526Z] }
[2025-08-21T20:00:01.526Z] SingletonOptions
[2025-08-21T20:00:01.526Z] {
[2025-08-21T20:00:01.526Z]   "LockPeriod": "00:00:15",
[2025-08-21T20:00:01.526Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T20:00:01.526Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T20:00:01.526Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T20:00:01.526Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T20:00:01.526Z] }
[2025-08-21T20:00:01.526Z] ScaleOptions
[2025-08-21T20:00:01.526Z] {
[2025-08-21T20:00:01.526Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T20:00:01.526Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T20:00:01.526Z]   "MetricsPurgeEnabled": true,
[2025-08-21T20:00:01.526Z]   "IsTargetScalingEnabled": true,
[2025-08-21T20:00:01.526Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T20:00:01.526Z] }
[2025-08-21T20:00:01.526Z] Starting JobHost
[2025-08-21T20:00:01.526Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=37fed10b-245e-494a-9d0a-8a95cbffbee8, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T20:00:01.526Z] Loading functions metadata
[2025-08-21T20:00:01.526Z] Worker indexing is enabled
[2025-08-21T20:00:01.526Z] Fetching metadata for workerRuntime: node
[2025-08-21T20:00:01.526Z] Reading functions metadata (Worker)
[2025-08-21T20:00:01.526Z] Reading functions metadata (Host)
[2025-08-21T20:00:01.773Z] 21 functions found (Host)
[2025-08-21T20:00:01.773Z] Reading functions metadata (Custom)
[2025-08-21T20:00:01.773Z] 0 functions found (Custom)
[2025-08-21T20:00:01.774Z] 21 functions loaded
[2025-08-21T20:00:01.777Z] Generating 21 job function(s)
[2025-08-21T20:00:01.778Z] Worker process started and initialized.
[2025-08-21T20:00:01.791Z] Found the following functions:
[2025-08-21T20:00:01.791Z] Host.Functions.aiBuilderHealth
[2025-08-21T20:00:01.791Z] Host.Functions.analytics
[2025-08-21T20:00:01.791Z] Host.Functions.analyzeUIImage
[2025-08-21T20:00:01.791Z] Host.Functions.atlasComponents
[2025-08-21T20:00:01.791Z] Host.Functions.fast-suggestions
[2025-08-21T20:00:01.791Z] Host.Functions.figmaOAuthCallback
[2025-08-21T20:00:01.791Z] Host.Functions.figmaOAuthStart
[2025-08-21T20:00:01.791Z] Host.Functions.generateSuggestions
[2025-08-21T20:00:01.791Z] Host.Functions.generateWireframe
[2025-08-21T20:00:01.791Z] Host.Functions.generateWireframeAlias
[2025-08-21T20:00:01.791Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T20:00:01.791Z] Host.Functions.generateWireframeOptionB
[2025-08-21T20:00:01.791Z] Host.Functions.get-template
[2025-08-21T20:00:01.791Z] Host.Functions.githubAuthCallback
[2025-08-21T20:00:01.791Z] Host.Functions.githubAuthStart
[2025-08-21T20:00:01.791Z] Host.Functions.health
[2025-08-21T20:00:01.791Z] Host.Functions.healthCheck
[2025-08-21T20:00:01.791Z] Host.Functions.openai-health
[2025-08-21T20:00:01.791Z] Host.Functions.performance-stats
[2025-08-21T20:00:01.791Z] Host.Functions.testFunction
[2025-08-21T20:00:01.791Z] Host.Functions.testSimple
[2025-08-21T20:00:01.791Z] 
[2025-08-21T20:00:01.792Z] HttpOptions
[2025-08-21T20:00:01.792Z] {
[2025-08-21T20:00:01.792Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T20:00:01.792Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T20:00:01.792Z]   "MaxConcurrentRequests": -1,
[2025-08-21T20:00:01.792Z]   "MaxOutstandingRequests": -1,
[2025-08-21T20:00:01.792Z] Initializing function HTTP routes
[2025-08-21T20:00:01.792Z]   "RoutePrefix": "api"
[2025-08-21T20:00:01.792Z] }
[2025-08-21T20:00:01.792Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T20:00:01.792Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T20:00:01.792Z] 
[2025-08-21T20:00:01.792Z] Host initialized (265ms)
[2025-08-21T20:00:01.792Z] Host started (266ms)
[2025-08-21T20:00:01.792Z] Job host started
[2025-08-21T20:00:01.792Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T20:00:01.792Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T20:00:01.823Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T20:00:01.824Z] ✅ OpenAI initialized for image analysis
[2025-08-21T20:00:01.824Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:00:01.824Z] 🎯 Using deployment: gpt-4o
[2025-08-21T20:00:01.862Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T20:00:01.862Z] 🔍 Current env vars:
[2025-08-21T20:00:01.862Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T20:00:01.862Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T20:00:01.862Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T20:00:01.862Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:00:01.862Z]   Deployment: gpt-4o
[2025-08-21T20:00:01.862Z]   API Version: 2024-08-01-preview
[2025-08-21T20:00:01.862Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T20:00:01.862Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T20:00:01.862Z] ✅ OpenAI client initialized successfully
[2025-08-21T20:00:01.862Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:00:01.862Z] 🎯 Using deployment: gpt-4o
[2025-08-21T20:00:01.863Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T20:00:01.868Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.868Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.869Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.869Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.869Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.869Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.870Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:00:01.870Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.870Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '1a80ae2c-ca5c-4228-b65a-ffe05de2a869'.
[2025-08-21T20:00:01.870Z] Result: Failure
[2025-08-21T20:00:01.870Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:00:01.870Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:00:01.870Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T20:00:01.870Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T20:00:01.870Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.870Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'a6f4e2a4-eba9-4d1c-ae7d-7195a56001f4'.
[2025-08-21T20:00:01.870Z]                    ^^^^^
[2025-08-21T20:00:01.870Z] 
[2025-08-21T20:00:01.870Z] Result: Failure
[2025-08-21T20:00:01.870Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T20:00:01.870Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.870Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T20:00:01.870Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T20:00:01.870Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:00:01.870Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T20:00:01.870Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.870Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T20:00:01.870Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.870Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T20:00:01.870Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T20:00:01.870Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T20:00:01.870Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T20:00:01.870Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T20:00:01.870Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T20:00:01.870Z]     at Generator.next (<anonymous>).
[2025-08-21T20:00:01.870Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T20:00:01.870Z]                    ^^^^^
[2025-08-21T20:00:01.870Z] 
[2025-08-21T20:00:01.870Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T20:00:01.870Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T20:00:01.870Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T20:00:01.870Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T20:00:01.871Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T20:00:01.871Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T20:00:01.871Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T20:00:01.871Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T20:00:01.871Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T20:00:01.871Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T20:00:01.871Z]     at Generator.next (<anonymous>).
[2025-08-21T20:00:01.870Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.870Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.871Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.871Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.871Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.871Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.871Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.871Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.871Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.871Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionLoadRequest
[2025-08-21T20:00:01.884Z] Host restarted.
[2025-08-21T20:00:06.534Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T20:00:34.397Z] Executing HTTP request: {
[2025-08-21T20:00:34.397Z]   "requestId": "aa61303e-735a-4774-98c7-9bb2e9a4e570",
[2025-08-21T20:00:34.397Z]   "method": "POST",
[2025-08-21T20:00:34.397Z]   "userAgent": "curl/8.7.1",
[2025-08-21T20:00:34.397Z]   "uri": "/api/generate-wireframe"
[2025-08-21T20:00:34.397Z] }
[2025-08-21T20:00:34.403Z] Executing 'Functions.generateWireframeAlias' (Reason='This function was programmatically called via the host APIs.', Id=246531d2-6892-4ae8-a8e8-74c3a5d77c0f)
[2025-08-21T20:00:34.418Z]  ALIAS ENDPOINT: Redirecting to unified handler
[2025-08-21T20:00:34.418Z] 🔥 UNIFIED ENDPOINT: Handling wireframe request
[2025-08-21T20:00:34.419Z] 🔥 Method: POST
[2025-08-21T20:00:34.419Z] 🔥 URL: http://localhost:7072/api/generate-wireframe
[2025-08-21T20:00:34.419Z] 🔥 Headers: {
[2025-08-21T20:00:34.419Z]   "accept": "*/*",
[2025-08-21T20:00:34.419Z]   "host": "localhost:7072",
[2025-08-21T20:00:34.419Z]   "user-agent": "curl/8.7.1",
[2025-08-21T20:00:34.419Z]   "content-type": "application/json",
[2025-08-21T20:00:34.419Z]   "content-length": "43"
[2025-08-21T20:00:34.419Z] }
[2025-08-21T20:00:34.419Z] 🔥 Body: {
[2025-08-21T20:00:34.419Z]   "description": "create a simple homepage"
[2025-08-21T20:00:34.419Z] }
[2025-08-21T20:00:34.449Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 received FunctionInvocationRequest with invocationId 246531d2-6892-4ae8-a8e8-74c3a5d77c0f
[2025-08-21T20:00:38.583Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T20:00:38.583Z] 🔍 Atlas component check:
[2025-08-21T20:00:38.583Z]     Description: "create a simple homepage"
[2025-08-21T20:00:38.583Z]     Specifically requests learning components: false
[2025-08-21T20:00:38.583Z] ℹ️ Learning components not specifically requested, skipping
[2025-08-21T20:00:38.583Z] 🧭 Atlas Top Navigation added to wireframe
[2025-08-21T20:00:38.583Z] ✅ Wireframe completed with Atlas components: Hero: 0, Modules: 0, Learning Paths: 0
[2025-08-21T20:00:38.583Z] ✅ UNIFIED ENDPOINT: Successfully generated wireframe
[2025-08-21T20:00:38.591Z] Executed 'Functions.generateWireframeAlias' (Succeeded, Id=246531d2-6892-4ae8-a8e8-74c3a5d77c0f, Duration=4190ms)
[2025-08-21T20:00:38.592Z] Executed HTTP request: {
[2025-08-21T20:00:38.592Z]   "requestId": "aa61303e-735a-4774-98c7-9bb2e9a4e570",
[2025-08-21T20:00:38.592Z]   "identities": "",
[2025-08-21T20:00:38.592Z]   "status": "200",
[2025-08-21T20:00:38.592Z]   "duration": "4195"
[2025-08-21T20:00:38.592Z] }
[2025-08-21T20:02:04.783Z] Restarting host.
[2025-08-21T20:02:04.788Z] Stopping JobHost
[2025-08-21T20:02:04.789Z] Job host stopped
[2025-08-21T20:02:04.791Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '06095a71-166d-4be5-a421-a77573fafe8e'
[2025-08-21T20:02:04.971Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T20:02:04.971Z] Host configuration file read:
[2025-08-21T20:02:04.971Z] {
[2025-08-21T20:02:04.971Z]   "version": "2.0",
[2025-08-21T20:02:04.971Z]   "functionTimeout": "00:05:00",
[2025-08-21T20:02:04.971Z]   "logging": {
[2025-08-21T20:02:04.971Z]     "applicationInsights": {
[2025-08-21T20:02:04.971Z]       "samplingSettings": {
[2025-08-21T20:02:04.971Z]         "isEnabled": true,
[2025-08-21T20:02:04.971Z]         "excludedTypes": "Request"
[2025-08-21T20:02:04.971Z]       }
[2025-08-21T20:02:04.971Z]     },
[2025-08-21T20:02:04.971Z]     "logLevel": {
[2025-08-21T20:02:04.971Z]       "default": "Information",
[2025-08-21T20:02:04.971Z]       "Host.Results": "Information",
[2025-08-21T20:02:04.971Z]       "Function": "Information"
[2025-08-21T20:02:04.971Z]     }
[2025-08-21T20:02:04.971Z]   },
[2025-08-21T20:02:04.971Z]   "extensionBundle": {
[2025-08-21T20:02:04.971Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T20:02:04.971Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T20:02:04.971Z]   },
[2025-08-21T20:02:04.971Z]   "watchDirectories": [
[2025-08-21T20:02:04.971Z]     "Shared"
[2025-08-21T20:02:04.971Z]   ]
[2025-08-21T20:02:04.971Z] }
[2025-08-21T20:02:04.979Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T20:02:04.979Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:04.979Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:04.980Z] Loading functions metadata
[2025-08-21T20:02:04.980Z] Worker indexing is enabled
[2025-08-21T20:02:04.980Z] Fetching metadata for workerRuntime: node
[2025-08-21T20:02:04.980Z] Reading functions metadata (Worker)
[2025-08-21T20:02:04.980Z] Shutting down language worker channels for runtime:node
[2025-08-21T20:02:04.989Z] Worker 6ac2a6b7-0e1d-4feb-8dc0-ec2ad7810431 exited with code 0
[2025-08-21T20:02:05.221Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 connecting on 127.0.0.1:54302
[2025-08-21T20:02:05.246Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received WorkerInitRequest
[2025-08-21T20:02:05.250Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionsMetadataRequest
[2025-08-21T20:02:05.250Z] Reading functions metadata (Host)
[2025-08-21T20:02:05.559Z] 21 functions found (Host)
[2025-08-21T20:02:05.559Z] 21 functions loaded
[2025-08-21T20:02:05.559Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T20:02:05.559Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:05.559Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:05.559Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T20:02:05.912Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:05.913Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:05.913Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T20:02:05.914Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T20:02:06.000Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T20:02:06.000Z] Host configuration file read:
[2025-08-21T20:02:06.000Z] {
[2025-08-21T20:02:06.000Z]   "version": "2.0",
[2025-08-21T20:02:06.000Z]   "functionTimeout": "00:05:00",
[2025-08-21T20:02:06.000Z]   "logging": {
[2025-08-21T20:02:06.000Z]     "applicationInsights": {
[2025-08-21T20:02:06.001Z]       "samplingSettings": {
[2025-08-21T20:02:06.001Z]         "isEnabled": true,
[2025-08-21T20:02:06.001Z]         "excludedTypes": "Request"
[2025-08-21T20:02:06.001Z]       }
[2025-08-21T20:02:06.001Z]     },
[2025-08-21T20:02:06.001Z]     "logLevel": {
[2025-08-21T20:02:06.001Z]       "default": "Information",
[2025-08-21T20:02:06.001Z]       "Host.Results": "Information",
[2025-08-21T20:02:06.001Z]       "Function": "Information"
[2025-08-21T20:02:06.001Z]     }
[2025-08-21T20:02:06.001Z]   },
[2025-08-21T20:02:06.001Z]   "extensionBundle": {
[2025-08-21T20:02:06.001Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T20:02:06.001Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T20:02:06.001Z]   },
[2025-08-21T20:02:06.001Z]   "watchDirectories": [
[2025-08-21T20:02:06.001Z]     "Shared"
[2025-08-21T20:02:06.001Z]   ]
[2025-08-21T20:02:06.001Z] }
[2025-08-21T20:02:06.061Z] Initializing Warmup Extension.
[2025-08-21T20:02:06.063Z] Initializing Host. OperationId: '06095a71-166d-4be5-a421-a77573fafe8e'.
[2025-08-21T20:02:06.064Z] Host initialization: ConsecutiveErrors=0, StartupCount=41, OperationId=06095a71-166d-4be5-a421-a77573fafe8e
[2025-08-21T20:02:06.067Z] LoggerFilterOptions
[2025-08-21T20:02:06.067Z] {
[2025-08-21T20:02:06.067Z]   "MinLevel": "None",
[2025-08-21T20:02:06.067Z]   "Rules": [
[2025-08-21T20:02:06.067Z]     {
[2025-08-21T20:02:06.067Z]       "ProviderName": null,
[2025-08-21T20:02:06.067Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T20:02:06.067Z]       "LogLevel": "None",
[2025-08-21T20:02:06.067Z]       "Filter": null
[2025-08-21T20:02:06.067Z]     },
[2025-08-21T20:02:06.067Z]     {
[2025-08-21T20:02:06.067Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:06.067Z]       "CategoryName": null,
[2025-08-21T20:02:06.067Z]       "LogLevel": "None",
[2025-08-21T20:02:06.067Z]       "Filter": null
[2025-08-21T20:02:06.067Z]     },
[2025-08-21T20:02:06.067Z]     {
[2025-08-21T20:02:06.067Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:06.067Z]       "CategoryName": null,
[2025-08-21T20:02:06.067Z]       "LogLevel": null,
[2025-08-21T20:02:06.067Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:06.067Z]     },
[2025-08-21T20:02:06.067Z]     {
[2025-08-21T20:02:06.067Z]       "ProviderName": null,
[2025-08-21T20:02:06.067Z]       "CategoryName": null,
[2025-08-21T20:02:06.067Z]       "LogLevel": null,
[2025-08-21T20:02:06.067Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:06.067Z]     },
[2025-08-21T20:02:06.068Z]     {
[2025-08-21T20:02:06.112Z]       "ProviderName": null,
[2025-08-21T20:02:06.113Z]       "CategoryName": null,
[2025-08-21T20:02:06.113Z]       "LogLevel": null,
[2025-08-21T20:02:06.113Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:06.113Z]     },
[2025-08-21T20:02:06.113Z]     {
[2025-08-21T20:02:06.113Z]       "ProviderName": null,
[2025-08-21T20:02:06.113Z]       "CategoryName": "Host.Results",
[2025-08-21T20:02:06.113Z]       "LogLevel": "Information",
[2025-08-21T20:02:06.113Z]       "Filter": null
[2025-08-21T20:02:06.113Z]     },
[2025-08-21T20:02:06.113Z]     {
[2025-08-21T20:02:06.113Z]       "ProviderName": null,
[2025-08-21T20:02:06.113Z]       "CategoryName": "Function",
[2025-08-21T20:02:06.113Z]       "LogLevel": "Information",
[2025-08-21T20:02:06.113Z]       "Filter": null
[2025-08-21T20:02:06.113Z]     },
[2025-08-21T20:02:06.113Z]     {
[2025-08-21T20:02:06.113Z]       "ProviderName": null,
[2025-08-21T20:02:06.113Z]       "CategoryName": null,
[2025-08-21T20:02:06.113Z]       "LogLevel": "Information",
[2025-08-21T20:02:06.113Z]       "Filter": null
[2025-08-21T20:02:06.113Z]     },
[2025-08-21T20:02:06.113Z]     {
[2025-08-21T20:02:06.113Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:06.113Z]       "CategoryName": null,
[2025-08-21T20:02:06.113Z]       "LogLevel": "None",
[2025-08-21T20:02:06.113Z]       "Filter": null
[2025-08-21T20:02:06.113Z]     },
[2025-08-21T20:02:06.113Z]     {
[2025-08-21T20:02:06.113Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:06.113Z]       "CategoryName": null,
[2025-08-21T20:02:06.113Z]       "LogLevel": null,
[2025-08-21T20:02:06.113Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:06.113Z]     },
[2025-08-21T20:02:06.113Z]     {
[2025-08-21T20:02:06.113Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:06.113Z]       "CategoryName": null,
[2025-08-21T20:02:06.113Z]       "LogLevel": null,
[2025-08-21T20:02:06.113Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:06.113Z]     }
[2025-08-21T20:02:06.113Z]   ]
[2025-08-21T20:02:06.113Z] }
[2025-08-21T20:02:06.113Z] LoggerFilterOptions
[2025-08-21T20:02:06.113Z] {
[2025-08-21T20:02:06.113Z]   "MinLevel": "None",
[2025-08-21T20:02:06.113Z]   "Rules": [
[2025-08-21T20:02:06.113Z]     {
[2025-08-21T20:02:06.113Z]       "ProviderName": null,
[2025-08-21T20:02:06.113Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T20:02:06.113Z]       "LogLevel": "None",
[2025-08-21T20:02:06.113Z]       "Filter": null
[2025-08-21T20:02:06.113Z]     },
[2025-08-21T20:02:06.113Z]     {
[2025-08-21T20:02:06.113Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:06.114Z]       "CategoryName": null,
[2025-08-21T20:02:06.114Z]       "LogLevel": "None",
[2025-08-21T20:02:06.114Z]       "Filter": null
[2025-08-21T20:02:06.114Z]     },
[2025-08-21T20:02:06.114Z]     {
[2025-08-21T20:02:06.114Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:06.114Z]       "CategoryName": null,
[2025-08-21T20:02:06.114Z]       "LogLevel": null,
[2025-08-21T20:02:06.114Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:06.114Z]     },
[2025-08-21T20:02:06.114Z]     {
[2025-08-21T20:02:06.114Z]       "ProviderName": null,
[2025-08-21T20:02:06.114Z]       "CategoryName": null,
[2025-08-21T20:02:06.114Z]       "LogLevel": null,
[2025-08-21T20:02:06.114Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:06.114Z]     },
[2025-08-21T20:02:06.114Z]     {
[2025-08-21T20:02:06.114Z]       "ProviderName": null,
[2025-08-21T20:02:06.114Z]       "CategoryName": null,
[2025-08-21T20:02:06.114Z]       "LogLevel": null,
[2025-08-21T20:02:06.114Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:06.114Z]     },
[2025-08-21T20:02:06.114Z]     {
[2025-08-21T20:02:06.114Z]       "ProviderName": null,
[2025-08-21T20:02:06.114Z]       "CategoryName": "Host.Results",
[2025-08-21T20:02:06.114Z]       "LogLevel": "Information",
[2025-08-21T20:02:06.114Z]       "Filter": null
[2025-08-21T20:02:06.114Z]     },
[2025-08-21T20:02:06.114Z]     {
[2025-08-21T20:02:06.114Z]       "ProviderName": null,
[2025-08-21T20:02:06.114Z]       "CategoryName": "Function",
[2025-08-21T20:02:06.114Z]       "LogLevel": "Information",
[2025-08-21T20:02:06.114Z]       "Filter": null
[2025-08-21T20:02:06.114Z]     },
[2025-08-21T20:02:06.114Z]     {
[2025-08-21T20:02:06.114Z]       "ProviderName": null,
[2025-08-21T20:02:06.114Z]       "CategoryName": null,
[2025-08-21T20:02:06.114Z]       "LogLevel": "Information",
[2025-08-21T20:02:06.114Z]       "Filter": null
[2025-08-21T20:02:06.114Z]     },
[2025-08-21T20:02:06.114Z]     {
[2025-08-21T20:02:06.114Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:06.114Z]       "CategoryName": null,
[2025-08-21T20:02:06.114Z]       "LogLevel": "None",
[2025-08-21T20:02:06.114Z]       "Filter": null
[2025-08-21T20:02:06.114Z]     },
[2025-08-21T20:02:06.114Z]     {
[2025-08-21T20:02:06.114Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:06.114Z]       "CategoryName": null,
[2025-08-21T20:02:06.114Z]       "LogLevel": null,
[2025-08-21T20:02:06.114Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:06.114Z]     },
[2025-08-21T20:02:06.114Z]     {
[2025-08-21T20:02:06.114Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:06.114Z]       "CategoryName": null,
[2025-08-21T20:02:06.114Z]       "LogLevel": null,
[2025-08-21T20:02:06.114Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:06.114Z]     }
[2025-08-21T20:02:06.114Z]   ]
[2025-08-21T20:02:06.114Z] }
[2025-08-21T20:02:06.114Z] FunctionResultAggregatorOptions
[2025-08-21T20:02:06.114Z] {
[2025-08-21T20:02:06.114Z]   "BatchSize": 1000,
[2025-08-21T20:02:06.114Z]   "FlushTimeout": "00:00:30",
[2025-08-21T20:02:06.114Z]   "IsEnabled": true
[2025-08-21T20:02:06.114Z] }
[2025-08-21T20:02:06.114Z] ConcurrencyOptions
[2025-08-21T20:02:06.114Z] {
[2025-08-21T20:02:06.114Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T20:02:06.114Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T20:02:06.114Z]   "CPUThreshold": 0.8,
[2025-08-21T20:02:06.114Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T20:02:06.114Z] }
[2025-08-21T20:02:06.114Z] SingletonOptions
[2025-08-21T20:02:06.114Z] {
[2025-08-21T20:02:06.114Z]   "LockPeriod": "00:00:15",
[2025-08-21T20:02:06.114Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T20:02:06.114Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T20:02:06.114Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T20:02:06.114Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T20:02:06.114Z] }
[2025-08-21T20:02:06.114Z] ScaleOptions
[2025-08-21T20:02:06.114Z] {
[2025-08-21T20:02:06.114Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T20:02:06.114Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T20:02:06.114Z]   "MetricsPurgeEnabled": true,
[2025-08-21T20:02:06.114Z]   "IsTargetScalingEnabled": true,
[2025-08-21T20:02:06.114Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T20:02:06.114Z] }
[2025-08-21T20:02:06.114Z] Starting JobHost
[2025-08-21T20:02:06.114Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=d7866adc-92c2-4d20-a032-40950c1dd217, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T20:02:06.114Z] Loading functions metadata
[2025-08-21T20:02:06.114Z] Worker indexing is enabled
[2025-08-21T20:02:06.114Z] Fetching metadata for workerRuntime: node
[2025-08-21T20:02:06.114Z] Reading functions metadata (Worker)
[2025-08-21T20:02:06.115Z] Reading functions metadata (Host)
[2025-08-21T20:02:06.344Z] 21 functions found (Host)
[2025-08-21T20:02:06.345Z] Reading functions metadata (Custom)
[2025-08-21T20:02:06.345Z] 0 functions found (Custom)
[2025-08-21T20:02:06.345Z] 21 functions loaded
[2025-08-21T20:02:06.351Z] Worker process started and initialized.
[2025-08-21T20:02:06.351Z] Generating 21 job function(s)
[2025-08-21T20:02:06.365Z] Found the following functions:
[2025-08-21T20:02:06.365Z] Host.Functions.aiBuilderHealth
[2025-08-21T20:02:06.365Z] Host.Functions.analytics
[2025-08-21T20:02:06.365Z] Host.Functions.analyzeUIImage
[2025-08-21T20:02:06.365Z] Host.Functions.atlasComponents
[2025-08-21T20:02:06.365Z] Host.Functions.fast-suggestions
[2025-08-21T20:02:06.365Z] Host.Functions.figmaOAuthCallback
[2025-08-21T20:02:06.365Z] Host.Functions.figmaOAuthStart
[2025-08-21T20:02:06.365Z] Host.Functions.generateSuggestions
[2025-08-21T20:02:06.365Z] Host.Functions.generateWireframe
[2025-08-21T20:02:06.365Z] Host.Functions.generateWireframeAlias
[2025-08-21T20:02:06.365Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T20:02:06.365Z] Host.Functions.generateWireframeOptionB
[2025-08-21T20:02:06.365Z] Host.Functions.get-template
[2025-08-21T20:02:06.365Z] Host.Functions.githubAuthCallback
[2025-08-21T20:02:06.365Z] Host.Functions.githubAuthStart
[2025-08-21T20:02:06.365Z] Host.Functions.health
[2025-08-21T20:02:06.365Z] Host.Functions.healthCheck
[2025-08-21T20:02:06.365Z] Host.Functions.openai-health
[2025-08-21T20:02:06.366Z] Host.Functions.performance-stats
[2025-08-21T20:02:06.366Z] Host.Functions.testFunction
[2025-08-21T20:02:06.366Z] Host.Functions.testSimple
[2025-08-21T20:02:06.366Z] 
[2025-08-21T20:02:06.366Z] HttpOptions
[2025-08-21T20:02:06.366Z] {
[2025-08-21T20:02:06.366Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T20:02:06.366Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T20:02:06.366Z]   "MaxConcurrentRequests": -1,
[2025-08-21T20:02:06.366Z]   "MaxOutstandingRequests": -1,
[2025-08-21T20:02:06.366Z]   "RoutePrefix": "api"
[2025-08-21T20:02:06.366Z] }
[2025-08-21T20:02:06.366Z] Initializing function HTTP routes
[2025-08-21T20:02:06.366Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T20:02:06.366Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T20:02:06.366Z] 
[2025-08-21T20:02:06.366Z] Host initialized (251ms)
[2025-08-21T20:02:06.366Z] Host started (251ms)
[2025-08-21T20:02:06.366Z] Job host started
[2025-08-21T20:02:06.366Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T20:02:06.366Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T20:02:06.408Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T20:02:06.409Z] ✅ OpenAI initialized for image analysis
[2025-08-21T20:02:06.409Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:06.409Z] 🎯 Using deployment: gpt-4o
[2025-08-21T20:02:06.460Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T20:02:06.460Z] 🔍 Current env vars:
[2025-08-21T20:02:06.460Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T20:02:06.460Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T20:02:06.460Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T20:02:06.460Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:06.460Z]   Deployment: gpt-4o
[2025-08-21T20:02:06.460Z]   API Version: 2024-08-01-preview
[2025-08-21T20:02:06.460Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T20:02:06.460Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T20:02:06.461Z] ✅ OpenAI client initialized successfully
[2025-08-21T20:02:06.461Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:06.461Z] 🎯 Using deployment: gpt-4o
[2025-08-21T20:02:06.464Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T20:02:06.473Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.473Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.473Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.473Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.474Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.474Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.474Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:06.474Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '3bfddb72-3976-4845-a325-fb6321781d23'.
[2025-08-21T20:02:06.474Z] Result: Failure
[2025-08-21T20:02:06.474Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:06.474Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest[2025-08-21T20:02:06.474Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'

[2025-08-21T20:02:06.474Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T20:02:06.474Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.474Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T20:02:06.474Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '64f54742-fb70-4311-a364-ae1c8ba90312'.
[2025-08-21T20:02:06.474Z] Result: Failure
[2025-08-21T20:02:06.474Z]                    ^^^^^
[2025-08-21T20:02:06.475Z] 
[2025-08-21T20:02:06.475Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.475Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T20:02:06.475Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T20:02:06.474Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:06.475Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T20:02:06.475Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.475Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T20:02:06.475Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T20:02:06.475Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T20:02:06.475Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T20:02:06.475Z]                    ^^^^^
[2025-08-21T20:02:06.475Z] 
[2025-08-21T20:02:06.475Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T20:02:06.475Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T20:02:06.475Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.475Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T20:02:06.475Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T20:02:06.475Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T20:02:06.475Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T20:02:06.475Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T20:02:06.475Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T20:02:06.475Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T20:02:06.475Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T20:02:06.475Z]     at Generator.next (<anonymous>).
[2025-08-21T20:02:06.475Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T20:02:06.475Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T20:02:06.475Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T20:02:06.475Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T20:02:06.475Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T20:02:06.475Z]     at Generator.next (<anonymous>).
[2025-08-21T20:02:06.475Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.475Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.475Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.475Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.475Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.475Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.476Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.476Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.476Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.476Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionLoadRequest
[2025-08-21T20:02:06.487Z] Host restarted.
[2025-08-21T20:02:07.488Z] Executing HTTP request: {
[2025-08-21T20:02:07.488Z]   "requestId": "60756996-763d-4ab7-9af8-f232d67f4f93",
[2025-08-21T20:02:07.488Z]   "method": "POST",
[2025-08-21T20:02:07.488Z]   "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0",
[2025-08-21T20:02:07.488Z]   "uri": "/api/generate-wireframe-enhanced"
[2025-08-21T20:02:07.488Z] }
[2025-08-21T20:02:07.490Z] Executing 'Functions.generateWireframeEnhanced' (Reason='This function was programmatically called via the host APIs.', Id=89ae9341-f84e-4d9b-a86b-9b3dc0b1f5e5)
[2025-08-21T20:02:07.542Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 received FunctionInvocationRequest with invocationId 89ae9341-f84e-4d9b-a86b-9b3dc0b1f5e5
[2025-08-21T20:02:11.070Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T20:02:11.712Z] Restarting host.
[2025-08-21T20:02:16.526Z] 🎨 Processing wireframe for Atlas components...
[2025-08-21T20:02:16.526Z] 🔍 Atlas component check (ENHANCED):
[2025-08-21T20:02:16.526Z]     Description: "Design Microsoft Learn's documentation page with table of contents and code examples"
[2025-08-21T20:02:16.526Z]     Contains learning keywords: false
[2025-08-21T20:02:16.526Z]     Is hero section exclusion: false
[2025-08-21T20:02:16.526Z]     Final isLearningPlatform: false
[2025-08-21T20:02:16.526Z] ℹ️ Not a learning platform, skipping Atlas components
[2025-08-21T20:02:16.533Z] Stopping JobHost
[2025-08-21T20:02:16.533Z] Job host stopped
[2025-08-21T20:02:16.533Z] Executed 'Functions.generateWireframeEnhanced' (Succeeded, Id=89ae9341-f84e-4d9b-a86b-9b3dc0b1f5e5, Duration=9043ms)
[2025-08-21T20:02:16.534Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '696f5540-05e3-42f9-a29d-13bc59bdb3bb'
[2025-08-21T20:02:16.535Z] Executed HTTP request: {
[2025-08-21T20:02:16.535Z]   "requestId": "60756996-763d-4ab7-9af8-f232d67f4f93",
[2025-08-21T20:02:16.535Z]   "identities": "",
[2025-08-21T20:02:16.535Z]   "status": "200",
[2025-08-21T20:02:16.535Z]   "duration": "9046"
[2025-08-21T20:02:16.535Z] }
[2025-08-21T20:02:16.760Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T20:02:16.760Z] Host configuration file read:
[2025-08-21T20:02:16.760Z] {
[2025-08-21T20:02:16.760Z]   "version": "2.0",
[2025-08-21T20:02:16.760Z]   "functionTimeout": "00:05:00",
[2025-08-21T20:02:16.760Z]   "logging": {
[2025-08-21T20:02:16.760Z]     "applicationInsights": {
[2025-08-21T20:02:16.760Z]       "samplingSettings": {
[2025-08-21T20:02:16.760Z]         "isEnabled": true,
[2025-08-21T20:02:16.760Z]         "excludedTypes": "Request"
[2025-08-21T20:02:16.761Z]       }
[2025-08-21T20:02:16.761Z]     },
[2025-08-21T20:02:16.761Z]     "logLevel": {
[2025-08-21T20:02:16.761Z]       "default": "Information",
[2025-08-21T20:02:16.761Z]       "Host.Results": "Information",
[2025-08-21T20:02:16.761Z]       "Function": "Information"
[2025-08-21T20:02:16.761Z]     }
[2025-08-21T20:02:16.761Z]   },
[2025-08-21T20:02:16.761Z]   "extensionBundle": {
[2025-08-21T20:02:16.761Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T20:02:16.761Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T20:02:16.761Z]   },
[2025-08-21T20:02:16.761Z]   "watchDirectories": [
[2025-08-21T20:02:16.761Z]     "Shared"
[2025-08-21T20:02:16.761Z]   ]
[2025-08-21T20:02:16.761Z] }
[2025-08-21T20:02:16.762Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T20:02:16.768Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:16.768Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:16.769Z] Loading functions metadata
[2025-08-21T20:02:16.769Z] Worker indexing is enabled
[2025-08-21T20:02:16.769Z] Fetching metadata for workerRuntime: node
[2025-08-21T20:02:16.769Z] Reading functions metadata (Worker)
[2025-08-21T20:02:16.769Z] Shutting down language worker channels for runtime:node
[2025-08-21T20:02:16.772Z] Worker 2d8450a0-b7ab-444b-ac0b-d6d67354a836 exited with code 0
[2025-08-21T20:02:16.928Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 connecting on 127.0.0.1:54302
[2025-08-21T20:02:16.964Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received WorkerInitRequest
[2025-08-21T20:02:16.969Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionsMetadataRequest
[2025-08-21T20:02:16.969Z] Reading functions metadata (Host)
[2025-08-21T20:02:17.296Z] 21 functions found (Host)
[2025-08-21T20:02:17.296Z] 21 functions loaded
[2025-08-21T20:02:17.296Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T20:02:17.297Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:17.297Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:17.297Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T20:02:17.471Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:17.471Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:17.471Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T20:02:17.471Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T20:02:17.513Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T20:02:17.513Z] Host configuration file read:
[2025-08-21T20:02:17.513Z] {
[2025-08-21T20:02:17.513Z]   "version": "2.0",
[2025-08-21T20:02:17.513Z]   "functionTimeout": "00:05:00",
[2025-08-21T20:02:17.513Z]   "logging": {
[2025-08-21T20:02:17.513Z]     "applicationInsights": {
[2025-08-21T20:02:17.513Z]       "samplingSettings": {
[2025-08-21T20:02:17.513Z]         "isEnabled": true,
[2025-08-21T20:02:17.513Z]         "excludedTypes": "Request"
[2025-08-21T20:02:17.513Z]       }
[2025-08-21T20:02:17.513Z]     },
[2025-08-21T20:02:17.513Z]     "logLevel": {
[2025-08-21T20:02:17.513Z]       "default": "Information",
[2025-08-21T20:02:17.513Z]       "Host.Results": "Information",
[2025-08-21T20:02:17.513Z]       "Function": "Information"
[2025-08-21T20:02:17.513Z]     }
[2025-08-21T20:02:17.513Z]   },
[2025-08-21T20:02:17.513Z]   "extensionBundle": {
[2025-08-21T20:02:17.513Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T20:02:17.513Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T20:02:17.513Z]   },
[2025-08-21T20:02:17.513Z]   "watchDirectories": [
[2025-08-21T20:02:17.513Z]     "Shared"
[2025-08-21T20:02:17.513Z]   ]
[2025-08-21T20:02:17.513Z] }
[2025-08-21T20:02:17.557Z] Initializing Warmup Extension.
[2025-08-21T20:02:17.558Z] Initializing Host. OperationId: '696f5540-05e3-42f9-a29d-13bc59bdb3bb'.
[2025-08-21T20:02:17.558Z] Host initialization: ConsecutiveErrors=0, StartupCount=42, OperationId=696f5540-05e3-42f9-a29d-13bc59bdb3bb
[2025-08-21T20:02:17.561Z] LoggerFilterOptions
[2025-08-21T20:02:17.561Z] {
[2025-08-21T20:02:17.561Z]   "MinLevel": "None",
[2025-08-21T20:02:17.561Z]   "Rules": [
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": null,
[2025-08-21T20:02:17.561Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T20:02:17.561Z]       "LogLevel": "None",
[2025-08-21T20:02:17.561Z]       "Filter": null
[2025-08-21T20:02:17.561Z]     },
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:17.561Z]       "CategoryName": null,
[2025-08-21T20:02:17.561Z]       "LogLevel": "None",
[2025-08-21T20:02:17.561Z]       "Filter": null
[2025-08-21T20:02:17.561Z]     },
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:17.561Z]       "CategoryName": null,
[2025-08-21T20:02:17.561Z]       "LogLevel": null,
[2025-08-21T20:02:17.561Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:17.561Z]     },
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": null,
[2025-08-21T20:02:17.561Z]       "CategoryName": null,
[2025-08-21T20:02:17.561Z]       "LogLevel": null,
[2025-08-21T20:02:17.561Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:17.561Z]     },
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": null,
[2025-08-21T20:02:17.561Z]       "CategoryName": null,
[2025-08-21T20:02:17.561Z]       "LogLevel": null,
[2025-08-21T20:02:17.561Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:17.561Z]     },
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": null,
[2025-08-21T20:02:17.561Z]       "CategoryName": "Host.Results",
[2025-08-21T20:02:17.561Z]       "LogLevel": "Information",
[2025-08-21T20:02:17.561Z]       "Filter": null
[2025-08-21T20:02:17.561Z]     },
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": null,
[2025-08-21T20:02:17.561Z]       "CategoryName": "Function",
[2025-08-21T20:02:17.561Z]       "LogLevel": "Information",
[2025-08-21T20:02:17.561Z]       "Filter": null
[2025-08-21T20:02:17.561Z]     },
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": null,
[2025-08-21T20:02:17.561Z]       "CategoryName": null,
[2025-08-21T20:02:17.561Z]       "LogLevel": "Information",
[2025-08-21T20:02:17.561Z]       "Filter": null
[2025-08-21T20:02:17.561Z]     },
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:17.561Z]       "CategoryName": null,
[2025-08-21T20:02:17.561Z]       "LogLevel": "None",
[2025-08-21T20:02:17.561Z]       "Filter": null
[2025-08-21T20:02:17.561Z]     },
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:17.561Z]       "CategoryName": null,
[2025-08-21T20:02:17.561Z]       "LogLevel": null,
[2025-08-21T20:02:17.561Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:17.561Z]     },
[2025-08-21T20:02:17.561Z]     {
[2025-08-21T20:02:17.561Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:17.561Z]       "CategoryName": null,
[2025-08-21T20:02:17.562Z]       "LogLevel": null,
[2025-08-21T20:02:17.562Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:17.562Z]     }
[2025-08-21T20:02:17.562Z]   ]
[2025-08-21T20:02:17.562Z] }
[2025-08-21T20:02:17.562Z] LoggerFilterOptions
[2025-08-21T20:02:17.562Z] {
[2025-08-21T20:02:17.562Z]   "MinLevel": "None",
[2025-08-21T20:02:17.562Z]   "Rules": [
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": null,
[2025-08-21T20:02:17.562Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T20:02:17.562Z]       "LogLevel": "None",
[2025-08-21T20:02:17.562Z]       "Filter": null
[2025-08-21T20:02:17.562Z]     },
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:17.562Z]       "CategoryName": null,
[2025-08-21T20:02:17.562Z]       "LogLevel": "None",
[2025-08-21T20:02:17.562Z]       "Filter": null
[2025-08-21T20:02:17.562Z]     },
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:17.562Z]       "CategoryName": null,
[2025-08-21T20:02:17.562Z]       "LogLevel": null,
[2025-08-21T20:02:17.562Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:17.562Z]     },
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": null,
[2025-08-21T20:02:17.562Z]       "CategoryName": null,
[2025-08-21T20:02:17.562Z]       "LogLevel": null,
[2025-08-21T20:02:17.562Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:17.562Z]     },
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": null,
[2025-08-21T20:02:17.562Z]       "CategoryName": null,
[2025-08-21T20:02:17.562Z]       "LogLevel": null,
[2025-08-21T20:02:17.562Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:17.562Z]     },
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": null,
[2025-08-21T20:02:17.562Z]       "CategoryName": "Host.Results",
[2025-08-21T20:02:17.562Z]       "LogLevel": "Information",
[2025-08-21T20:02:17.562Z]       "Filter": null
[2025-08-21T20:02:17.562Z]     },
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": null,
[2025-08-21T20:02:17.562Z]       "CategoryName": "Function",
[2025-08-21T20:02:17.562Z]       "LogLevel": "Information",
[2025-08-21T20:02:17.562Z]       "Filter": null
[2025-08-21T20:02:17.562Z]     },
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": null,
[2025-08-21T20:02:17.562Z]       "CategoryName": null,
[2025-08-21T20:02:17.562Z]       "LogLevel": "Information",
[2025-08-21T20:02:17.562Z]       "Filter": null
[2025-08-21T20:02:17.562Z]     },
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:17.562Z]       "CategoryName": null,
[2025-08-21T20:02:17.562Z]       "LogLevel": "None",
[2025-08-21T20:02:17.562Z]       "Filter": null
[2025-08-21T20:02:17.562Z]     },
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:17.562Z]       "CategoryName": null,
[2025-08-21T20:02:17.562Z]       "LogLevel": null,
[2025-08-21T20:02:17.562Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:17.562Z]     },
[2025-08-21T20:02:17.562Z]     {
[2025-08-21T20:02:17.562Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:17.562Z]       "CategoryName": null,
[2025-08-21T20:02:17.562Z]       "LogLevel": null,
[2025-08-21T20:02:17.562Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:17.562Z]     }
[2025-08-21T20:02:17.562Z]   ]
[2025-08-21T20:02:17.562Z] }
[2025-08-21T20:02:17.562Z] FunctionResultAggregatorOptions
[2025-08-21T20:02:17.562Z] {
[2025-08-21T20:02:17.562Z]   "BatchSize": 1000,
[2025-08-21T20:02:17.562Z]   "FlushTimeout": "00:00:30",
[2025-08-21T20:02:17.562Z]   "IsEnabled": true
[2025-08-21T20:02:17.562Z] }
[2025-08-21T20:02:17.562Z] ConcurrencyOptions
[2025-08-21T20:02:17.562Z] {
[2025-08-21T20:02:17.562Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T20:02:17.562Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T20:02:17.562Z]   "CPUThreshold": 0.8,
[2025-08-21T20:02:17.562Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T20:02:17.562Z] }
[2025-08-21T20:02:17.562Z] SingletonOptions
[2025-08-21T20:02:17.562Z] {
[2025-08-21T20:02:17.562Z]   "LockPeriod": "00:00:15",
[2025-08-21T20:02:17.562Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T20:02:17.562Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T20:02:17.562Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T20:02:17.562Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T20:02:17.562Z] }
[2025-08-21T20:02:17.562Z] ScaleOptions
[2025-08-21T20:02:17.562Z] {
[2025-08-21T20:02:17.562Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T20:02:17.562Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T20:02:17.562Z]   "MetricsPurgeEnabled": true,
[2025-08-21T20:02:17.562Z]   "IsTargetScalingEnabled": true,
[2025-08-21T20:02:17.562Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T20:02:17.562Z] }
[2025-08-21T20:02:17.562Z] Starting JobHost
[2025-08-21T20:02:17.563Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=4d077a11-9ba8-4b33-8170-8f558c75bb6e, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T20:02:17.563Z] Loading functions metadata
[2025-08-21T20:02:17.563Z] Worker indexing is enabled
[2025-08-21T20:02:17.563Z] Fetching metadata for workerRuntime: node
[2025-08-21T20:02:17.563Z] Reading functions metadata (Worker)
[2025-08-21T20:02:17.563Z] Reading functions metadata (Host)
[2025-08-21T20:02:17.771Z] 21 functions found (Host)
[2025-08-21T20:02:17.772Z] Reading functions metadata (Custom)
[2025-08-21T20:02:17.772Z] 0 functions found (Custom)
[2025-08-21T20:02:17.772Z] 21 functions loaded
[2025-08-21T20:02:17.790Z] Worker process started and initialized.
[2025-08-21T20:02:17.790Z] Generating 21 job function(s)
[2025-08-21T20:02:17.797Z] Found the following functions:
[2025-08-21T20:02:17.797Z] Host.Functions.aiBuilderHealth
[2025-08-21T20:02:17.797Z] Host.Functions.analytics
[2025-08-21T20:02:17.797Z] Host.Functions.analyzeUIImage
[2025-08-21T20:02:17.797Z] Host.Functions.atlasComponents
[2025-08-21T20:02:17.797Z] Host.Functions.fast-suggestions
[2025-08-21T20:02:17.797Z] Host.Functions.figmaOAuthCallback
[2025-08-21T20:02:17.797Z] Host.Functions.figmaOAuthStart
[2025-08-21T20:02:17.797Z] Host.Functions.generateSuggestions
[2025-08-21T20:02:17.797Z] Host.Functions.generateWireframe
[2025-08-21T20:02:17.797Z] Host.Functions.generateWireframeAlias
[2025-08-21T20:02:17.797Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T20:02:17.797Z] Host.Functions.generateWireframeOptionB
[2025-08-21T20:02:17.797Z] Host.Functions.get-template
[2025-08-21T20:02:17.797Z] Host.Functions.githubAuthCallback
[2025-08-21T20:02:17.797Z] Host.Functions.githubAuthStart
[2025-08-21T20:02:17.797Z] Host.Functions.health
[2025-08-21T20:02:17.797Z] Host.Functions.healthCheck
[2025-08-21T20:02:17.797Z] Host.Functions.openai-health
[2025-08-21T20:02:17.797Z] Host.Functions.performance-stats
[2025-08-21T20:02:17.797Z] Host.Functions.testFunction
[2025-08-21T20:02:17.797Z] Host.Functions.testSimple
[2025-08-21T20:02:17.797Z] 
[2025-08-21T20:02:17.797Z] HttpOptions
[2025-08-21T20:02:17.797Z] {
[2025-08-21T20:02:17.797Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T20:02:17.797Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T20:02:17.797Z]   "MaxConcurrentRequests": -1,
[2025-08-21T20:02:17.797Z]   "MaxOutstandingRequests": -1,
[2025-08-21T20:02:17.797Z]   "RoutePrefix": "api"
[2025-08-21T20:02:17.798Z] }
[2025-08-21T20:02:17.798Z] Initializing function HTTP routes
[2025-08-21T20:02:17.798Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T20:02:17.798Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T20:02:17.798Z] 
[2025-08-21T20:02:17.798Z] Host initialized (235ms)
[2025-08-21T20:02:17.798Z] Host started (235ms)
[2025-08-21T20:02:17.798Z] Job host started
[2025-08-21T20:02:17.798Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T20:02:17.798Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T20:02:17.830Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T20:02:17.831Z] ✅ OpenAI initialized for image analysis
[2025-08-21T20:02:17.831Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:17.831Z] 🎯 Using deployment: gpt-4o
[2025-08-21T20:02:17.869Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T20:02:17.869Z] 🔍 Current env vars:
[2025-08-21T20:02:17.869Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T20:02:17.869Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T20:02:17.869Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T20:02:17.869Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:17.869Z]   Deployment: gpt-4o
[2025-08-21T20:02:17.869Z]   API Version: 2024-08-01-preview
[2025-08-21T20:02:17.869Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T20:02:17.869Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T20:02:17.869Z] ✅ OpenAI client initialized successfully
[2025-08-21T20:02:17.869Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:17.869Z] 🎯 Using deployment: gpt-4o
[2025-08-21T20:02:17.871Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T20:02:17.876Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.876Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.876Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.876Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.877Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.877Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.877Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:17.877Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.877Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '60d58bbd-ecae-4466-a204-edcb0621e58f'.
[2025-08-21T20:02:17.877Z] Result: Failure
[2025-08-21T20:02:17.877Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:17.877Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:17.877Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T20:02:17.877Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T20:02:17.877Z]                    ^^^^^
[2025-08-21T20:02:17.877Z] 
[2025-08-21T20:02:17.877Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T20:02:17.877Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T20:02:17.877Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '9c5df6f6-0576-49ed-9f01-b89780090a20'.
[2025-08-21T20:02:17.877Z] Result: Failure
[2025-08-21T20:02:17.877Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:17.877Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T20:02:17.877Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T20:02:17.877Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T20:02:17.877Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T20:02:17.877Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T20:02:17.877Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.877Z]                    ^^^^^
[2025-08-21T20:02:17.877Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T20:02:17.877Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T20:02:17.877Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T20:02:17.877Z] 
[2025-08-21T20:02:17.877Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T20:02:17.877Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T20:02:17.877Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T20:02:17.877Z]     at Generator.next (<anonymous>).
[2025-08-21T20:02:17.877Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T20:02:17.877Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T20:02:17.877Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T20:02:17.877Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T20:02:17.877Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T20:02:17.877Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T20:02:17.877Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.877Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T20:02:17.877Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T20:02:17.877Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T20:02:17.877Z]     at Generator.next (<anonymous>).
[2025-08-21T20:02:17.877Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.877Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.878Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.878Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.878Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.878Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.878Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.878Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.878Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.878Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.878Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.878Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 received FunctionLoadRequest
[2025-08-21T20:02:17.895Z] Host restarted.
[2025-08-21T20:02:22.564Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T20:02:31.931Z] Restarting host.
[2025-08-21T20:02:31.936Z] Stopping JobHost
[2025-08-21T20:02:31.936Z] Job host stopped
[2025-08-21T20:02:31.939Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '37b490cf-53e0-4908-8310-e1b00c72738d'
[2025-08-21T20:02:32.038Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T20:02:32.038Z] Host configuration file read:
[2025-08-21T20:02:32.038Z] {
[2025-08-21T20:02:32.038Z]   "version": "2.0",
[2025-08-21T20:02:32.038Z]   "functionTimeout": "00:05:00",
[2025-08-21T20:02:32.038Z]   "logging": {
[2025-08-21T20:02:32.038Z]     "applicationInsights": {
[2025-08-21T20:02:32.038Z]       "samplingSettings": {
[2025-08-21T20:02:32.038Z]         "isEnabled": true,
[2025-08-21T20:02:32.038Z]         "excludedTypes": "Request"
[2025-08-21T20:02:32.038Z]       }
[2025-08-21T20:02:32.038Z]     },
[2025-08-21T20:02:32.038Z]     "logLevel": {
[2025-08-21T20:02:32.038Z]       "default": "Information",
[2025-08-21T20:02:32.038Z]       "Host.Results": "Information",
[2025-08-21T20:02:32.038Z]       "Function": "Information"
[2025-08-21T20:02:32.038Z]     }
[2025-08-21T20:02:32.038Z]   },
[2025-08-21T20:02:32.038Z]   "extensionBundle": {
[2025-08-21T20:02:32.038Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T20:02:32.038Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T20:02:32.038Z]   },
[2025-08-21T20:02:32.038Z]   "watchDirectories": [
[2025-08-21T20:02:32.038Z]     "Shared"
[2025-08-21T20:02:32.038Z]   ]
[2025-08-21T20:02:32.038Z] }
[2025-08-21T20:02:32.040Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T20:02:32.040Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:32.041Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:32.041Z] Loading functions metadata
[2025-08-21T20:02:32.041Z] Worker indexing is enabled
[2025-08-21T20:02:32.041Z] Fetching metadata for workerRuntime: node
[2025-08-21T20:02:32.041Z] Reading functions metadata (Worker)
[2025-08-21T20:02:32.041Z] Shutting down language worker channels for runtime:node
[2025-08-21T20:02:32.045Z] Worker 8d41750c-e96a-4022-a22d-6a8188467632 exited with code 0
[2025-08-21T20:02:32.170Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 connecting on 127.0.0.1:54302
[2025-08-21T20:02:32.192Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received WorkerInitRequest
[2025-08-21T20:02:32.195Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionsMetadataRequest
[2025-08-21T20:02:32.195Z] Reading functions metadata (Host)
[2025-08-21T20:02:32.480Z] 21 functions found (Host)
[2025-08-21T20:02:32.480Z] 21 functions loaded
[2025-08-21T20:02:32.481Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T20:02:32.481Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:32.481Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:32.481Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T20:02:32.653Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:32.653Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:32.653Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T20:02:32.653Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T20:02:32.716Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T20:02:32.716Z] Host configuration file read:
[2025-08-21T20:02:32.716Z] {
[2025-08-21T20:02:32.716Z]   "version": "2.0",
[2025-08-21T20:02:32.716Z]   "functionTimeout": "00:05:00",
[2025-08-21T20:02:32.716Z]   "logging": {
[2025-08-21T20:02:32.716Z]     "applicationInsights": {
[2025-08-21T20:02:32.716Z]       "samplingSettings": {
[2025-08-21T20:02:32.716Z]         "isEnabled": true,
[2025-08-21T20:02:32.716Z]         "excludedTypes": "Request"
[2025-08-21T20:02:32.716Z]       }
[2025-08-21T20:02:32.716Z]     },
[2025-08-21T20:02:32.716Z]     "logLevel": {
[2025-08-21T20:02:32.716Z]       "default": "Information",
[2025-08-21T20:02:32.716Z]       "Host.Results": "Information",
[2025-08-21T20:02:32.716Z]       "Function": "Information"
[2025-08-21T20:02:32.716Z]     }
[2025-08-21T20:02:32.716Z]   },
[2025-08-21T20:02:32.716Z]   "extensionBundle": {
[2025-08-21T20:02:32.716Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T20:02:32.716Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T20:02:32.716Z]   },
[2025-08-21T20:02:32.716Z]   "watchDirectories": [
[2025-08-21T20:02:32.716Z]     "Shared"
[2025-08-21T20:02:32.716Z]   ]
[2025-08-21T20:02:32.716Z] }
[2025-08-21T20:02:32.757Z] Initializing Warmup Extension.
[2025-08-21T20:02:32.757Z] Initializing Host. OperationId: '37b490cf-53e0-4908-8310-e1b00c72738d'.
[2025-08-21T20:02:32.757Z] Host initialization: ConsecutiveErrors=0, StartupCount=43, OperationId=37b490cf-53e0-4908-8310-e1b00c72738d
[2025-08-21T20:02:32.759Z] LoggerFilterOptions
[2025-08-21T20:02:32.759Z] {
[2025-08-21T20:02:32.759Z]   "MinLevel": "None",
[2025-08-21T20:02:32.759Z]   "Rules": [
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": null,
[2025-08-21T20:02:32.759Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T20:02:32.759Z]       "LogLevel": "None",
[2025-08-21T20:02:32.759Z]       "Filter": null
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:32.759Z]       "CategoryName": null,
[2025-08-21T20:02:32.759Z]       "LogLevel": "None",
[2025-08-21T20:02:32.759Z]       "Filter": null
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:32.759Z]       "CategoryName": null,
[2025-08-21T20:02:32.759Z]       "LogLevel": null,
[2025-08-21T20:02:32.759Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": null,
[2025-08-21T20:02:32.759Z]       "CategoryName": null,
[2025-08-21T20:02:32.759Z]       "LogLevel": null,
[2025-08-21T20:02:32.759Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": null,
[2025-08-21T20:02:32.759Z]       "CategoryName": null,
[2025-08-21T20:02:32.759Z]       "LogLevel": null,
[2025-08-21T20:02:32.759Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": null,
[2025-08-21T20:02:32.759Z]       "CategoryName": "Host.Results",
[2025-08-21T20:02:32.759Z]       "LogLevel": "Information",
[2025-08-21T20:02:32.759Z]       "Filter": null
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": null,
[2025-08-21T20:02:32.759Z]       "CategoryName": "Function",
[2025-08-21T20:02:32.759Z]       "LogLevel": "Information",
[2025-08-21T20:02:32.759Z]       "Filter": null
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": null,
[2025-08-21T20:02:32.759Z]       "CategoryName": null,
[2025-08-21T20:02:32.759Z]       "LogLevel": "Information",
[2025-08-21T20:02:32.759Z]       "Filter": null
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:32.759Z]       "CategoryName": null,
[2025-08-21T20:02:32.759Z]       "LogLevel": "None",
[2025-08-21T20:02:32.759Z]       "Filter": null
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:32.759Z]       "CategoryName": null,
[2025-08-21T20:02:32.759Z]       "LogLevel": null,
[2025-08-21T20:02:32.759Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:32.759Z]       "CategoryName": null,
[2025-08-21T20:02:32.759Z]       "LogLevel": null,
[2025-08-21T20:02:32.759Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:32.759Z]     }
[2025-08-21T20:02:32.759Z]   ]
[2025-08-21T20:02:32.759Z] }
[2025-08-21T20:02:32.759Z] LoggerFilterOptions
[2025-08-21T20:02:32.759Z] {
[2025-08-21T20:02:32.759Z]   "MinLevel": "None",
[2025-08-21T20:02:32.759Z]   "Rules": [
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": null,
[2025-08-21T20:02:32.759Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T20:02:32.759Z]       "LogLevel": "None",
[2025-08-21T20:02:32.759Z]       "Filter": null
[2025-08-21T20:02:32.759Z]     },
[2025-08-21T20:02:32.759Z]     {
[2025-08-21T20:02:32.759Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:32.760Z]       "CategoryName": null,
[2025-08-21T20:02:32.760Z]       "LogLevel": "None",
[2025-08-21T20:02:32.760Z]       "Filter": null
[2025-08-21T20:02:32.760Z]     },
[2025-08-21T20:02:32.760Z]     {
[2025-08-21T20:02:32.760Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:32.760Z]       "CategoryName": null,
[2025-08-21T20:02:32.760Z]       "LogLevel": null,
[2025-08-21T20:02:32.760Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:32.760Z]     },
[2025-08-21T20:02:32.760Z]     {
[2025-08-21T20:02:32.760Z]       "ProviderName": null,
[2025-08-21T20:02:32.760Z]       "CategoryName": null,
[2025-08-21T20:02:32.760Z]       "LogLevel": null,
[2025-08-21T20:02:32.760Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:32.760Z]     },
[2025-08-21T20:02:32.760Z]     {
[2025-08-21T20:02:32.760Z]       "ProviderName": null,
[2025-08-21T20:02:32.760Z]       "CategoryName": null,
[2025-08-21T20:02:32.760Z]       "LogLevel": null,
[2025-08-21T20:02:32.760Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:32.760Z]     },
[2025-08-21T20:02:32.760Z]     {
[2025-08-21T20:02:32.760Z]       "ProviderName": null,
[2025-08-21T20:02:32.760Z]       "CategoryName": "Host.Results",
[2025-08-21T20:02:32.760Z]       "LogLevel": "Information",
[2025-08-21T20:02:32.760Z]       "Filter": null
[2025-08-21T20:02:32.760Z]     },
[2025-08-21T20:02:32.760Z]     {
[2025-08-21T20:02:32.760Z]       "ProviderName": null,
[2025-08-21T20:02:32.760Z]       "CategoryName": "Function",
[2025-08-21T20:02:32.760Z]       "LogLevel": "Information",
[2025-08-21T20:02:32.760Z]       "Filter": null
[2025-08-21T20:02:32.760Z]     },
[2025-08-21T20:02:32.760Z]     {
[2025-08-21T20:02:32.760Z]       "ProviderName": null,
[2025-08-21T20:02:32.760Z]       "CategoryName": null,
[2025-08-21T20:02:32.760Z]       "LogLevel": "Information",
[2025-08-21T20:02:32.760Z]       "Filter": null
[2025-08-21T20:02:32.760Z]     },
[2025-08-21T20:02:32.760Z]     {
[2025-08-21T20:02:32.760Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:32.760Z]       "CategoryName": null,
[2025-08-21T20:02:32.760Z]       "LogLevel": "None",
[2025-08-21T20:02:32.760Z]       "Filter": null
[2025-08-21T20:02:32.760Z]     },
[2025-08-21T20:02:32.760Z]     {
[2025-08-21T20:02:32.760Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:32.760Z]       "CategoryName": null,
[2025-08-21T20:02:32.760Z]       "LogLevel": null,
[2025-08-21T20:02:32.760Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:32.760Z]     },
[2025-08-21T20:02:32.760Z]     {
[2025-08-21T20:02:32.760Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:32.760Z]       "CategoryName": null,
[2025-08-21T20:02:32.760Z]       "LogLevel": null,
[2025-08-21T20:02:32.760Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:32.760Z]     }
[2025-08-21T20:02:32.760Z]   ]
[2025-08-21T20:02:32.760Z] }
[2025-08-21T20:02:32.760Z] FunctionResultAggregatorOptions
[2025-08-21T20:02:32.760Z] {
[2025-08-21T20:02:32.760Z]   "BatchSize": 1000,
[2025-08-21T20:02:32.760Z]   "FlushTimeout": "00:00:30",
[2025-08-21T20:02:32.760Z]   "IsEnabled": true
[2025-08-21T20:02:32.760Z] }
[2025-08-21T20:02:32.760Z] ConcurrencyOptions
[2025-08-21T20:02:32.760Z] {
[2025-08-21T20:02:32.760Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T20:02:32.760Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T20:02:32.760Z]   "CPUThreshold": 0.8,
[2025-08-21T20:02:32.760Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T20:02:32.760Z] }
[2025-08-21T20:02:32.760Z] SingletonOptions
[2025-08-21T20:02:32.760Z] {
[2025-08-21T20:02:32.760Z]   "LockPeriod": "00:00:15",
[2025-08-21T20:02:32.760Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T20:02:32.760Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T20:02:32.760Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T20:02:32.760Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T20:02:32.760Z] }
[2025-08-21T20:02:32.760Z] ScaleOptions
[2025-08-21T20:02:32.760Z] {
[2025-08-21T20:02:32.760Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T20:02:32.760Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T20:02:32.760Z]   "MetricsPurgeEnabled": true,
[2025-08-21T20:02:32.760Z]   "IsTargetScalingEnabled": true,
[2025-08-21T20:02:32.760Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T20:02:32.760Z] }
[2025-08-21T20:02:32.760Z] Starting JobHost
[2025-08-21T20:02:32.760Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=4274e31d-e98b-4bef-aa95-43b0f5fd7a5a, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T20:02:32.760Z] Loading functions metadata
[2025-08-21T20:02:32.760Z] Worker indexing is enabled
[2025-08-21T20:02:32.760Z] Fetching metadata for workerRuntime: node
[2025-08-21T20:02:32.760Z] Reading functions metadata (Worker)
[2025-08-21T20:02:32.760Z] Reading functions metadata (Host)
[2025-08-21T20:02:32.977Z] 21 functions found (Host)
[2025-08-21T20:02:32.977Z] Reading functions metadata (Custom)
[2025-08-21T20:02:32.978Z] 0 functions found (Custom)
[2025-08-21T20:02:32.978Z] 21 functions loaded
[2025-08-21T20:02:32.981Z] Generating 21 job function(s)
[2025-08-21T20:02:32.981Z] Worker process started and initialized.
[2025-08-21T20:02:32.997Z] Found the following functions:
[2025-08-21T20:02:32.997Z] Host.Functions.aiBuilderHealth
[2025-08-21T20:02:32.997Z] Host.Functions.analytics
[2025-08-21T20:02:32.997Z] Host.Functions.analyzeUIImage
[2025-08-21T20:02:32.997Z] Host.Functions.atlasComponents
[2025-08-21T20:02:32.997Z] Host.Functions.fast-suggestions
[2025-08-21T20:02:32.997Z] Host.Functions.figmaOAuthCallback
[2025-08-21T20:02:32.997Z] Host.Functions.figmaOAuthStart
[2025-08-21T20:02:32.997Z] Host.Functions.generateSuggestions
[2025-08-21T20:02:32.997Z] Host.Functions.generateWireframe
[2025-08-21T20:02:32.997Z] Host.Functions.generateWireframeAlias
[2025-08-21T20:02:32.997Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T20:02:32.997Z] Host.Functions.generateWireframeOptionB
[2025-08-21T20:02:32.997Z] Host.Functions.get-template
[2025-08-21T20:02:32.997Z] Host.Functions.githubAuthCallback
[2025-08-21T20:02:32.997Z] Host.Functions.githubAuthStart
[2025-08-21T20:02:32.997Z] Host.Functions.health
[2025-08-21T20:02:32.997Z] Host.Functions.healthCheck
[2025-08-21T20:02:32.997Z] Host.Functions.openai-health
[2025-08-21T20:02:32.997Z] Host.Functions.performance-stats
[2025-08-21T20:02:32.997Z] Host.Functions.testFunction
[2025-08-21T20:02:32.997Z] Host.Functions.testSimple
[2025-08-21T20:02:32.997Z] 
[2025-08-21T20:02:32.998Z] HttpOptions
[2025-08-21T20:02:32.998Z] {
[2025-08-21T20:02:32.998Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T20:02:32.998Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T20:02:32.998Z]   "MaxConcurrentRequests": -1,
[2025-08-21T20:02:32.998Z]   "MaxOutstandingRequests": -1,
[2025-08-21T20:02:32.998Z]   "RoutePrefix": "api"
[2025-08-21T20:02:32.998Z] }
[2025-08-21T20:02:32.998Z] Initializing function HTTP routes
[2025-08-21T20:02:32.998Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T20:02:32.998Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T20:02:32.999Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T20:02:32.999Z] 
[2025-08-21T20:02:32.999Z] Host initialized (238ms)
[2025-08-21T20:02:32.999Z] Host started (238ms)
[2025-08-21T20:02:32.999Z] Job host started
[2025-08-21T20:02:32.999Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T20:02:32.999Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T20:02:33.032Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T20:02:33.032Z] ✅ OpenAI initialized for image analysis
[2025-08-21T20:02:33.032Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:33.033Z] 🎯 Using deployment: gpt-4o
[2025-08-21T20:02:33.072Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T20:02:33.073Z] 🔍 Current env vars:
[2025-08-21T20:02:33.073Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T20:02:33.073Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T20:02:33.074Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T20:02:33.074Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:33.074Z]   Deployment: gpt-4o
[2025-08-21T20:02:33.074Z]   API Version: 2024-08-01-preview
[2025-08-21T20:02:33.074Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T20:02:33.074Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T20:02:33.074Z] ✅ OpenAI client initialized successfully
[2025-08-21T20:02:33.074Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:33.074Z] 🎯 Using deployment: gpt-4o
[2025-08-21T20:02:33.075Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T20:02:33.079Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.079Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.080Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.080Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.080Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.080Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.080Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:33.080Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.080Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:33.080Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: 'c4ad2166-a442-4b55-a0c7-dc1b01158fdc'.
[2025-08-21T20:02:33.080Z] Result: Failure
[2025-08-21T20:02:33.080Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:33.080Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T20:02:33.080Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T20:02:33.080Z]                    ^^^^^
[2025-08-21T20:02:33.080Z] 
[2025-08-21T20:02:33.080Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T20:02:33.080Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T20:02:33.080Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T20:02:33.080Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T20:02:33.080Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T20:02:33.080Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T20:02:33.080Z] Worker failed to load function: 'figmaOAuthStart' with functionId: 'e1385ed5-5fd4-47ab-827e-6edd9f8d91a0'.
[2025-08-21T20:02:33.080Z] Result: Failure
[2025-08-21T20:02:33.080Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T20:02:33.080Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T20:02:33.080Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:33.080Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T20:02:33.080Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T20:02:33.080Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.080Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.080Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.080Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T20:02:33.080Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T20:02:33.080Z]                    ^^^^^
[2025-08-21T20:02:33.081Z] 
[2025-08-21T20:02:33.080Z]     at Generator.next (<anonymous>).
[2025-08-21T20:02:33.081Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T20:02:33.081Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
[2025-08-21T20:02:33.081Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T20:02:33.081Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T20:02:33.081Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T20:02:33.081Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T20:02:33.081Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T20:02:33.081Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T20:02:33.081Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T20:02:33.081Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.081Z]     at Generator.next (<anonymous>).
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.081Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 received FunctionLoadRequest
[2025-08-21T20:02:33.105Z] Host restarted.
[2025-08-21T20:02:37.760Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
[2025-08-21T20:02:39.381Z] Restarting host.
[2025-08-21T20:02:39.387Z] Stopping JobHost
[2025-08-21T20:02:39.387Z] Job host stopped
[2025-08-21T20:02:39.390Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '810f3cf2-eead-41ad-a9e7-7b51b3bd0052'
[2025-08-21T20:02:39.487Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T20:02:39.487Z] Host configuration file read:
[2025-08-21T20:02:39.487Z] {
[2025-08-21T20:02:39.487Z]   "version": "2.0",
[2025-08-21T20:02:39.487Z]   "functionTimeout": "00:05:00",
[2025-08-21T20:02:39.487Z]   "logging": {
[2025-08-21T20:02:39.487Z]     "applicationInsights": {
[2025-08-21T20:02:39.487Z]       "samplingSettings": {
[2025-08-21T20:02:39.487Z]         "isEnabled": true,
[2025-08-21T20:02:39.487Z]         "excludedTypes": "Request"
[2025-08-21T20:02:39.487Z]       }
[2025-08-21T20:02:39.487Z]     },
[2025-08-21T20:02:39.488Z]     "logLevel": {
[2025-08-21T20:02:39.488Z]       "default": "Information",
[2025-08-21T20:02:39.488Z]       "Host.Results": "Information",
[2025-08-21T20:02:39.488Z]       "Function": "Information"
[2025-08-21T20:02:39.488Z]     }
[2025-08-21T20:02:39.488Z]   },
[2025-08-21T20:02:39.488Z]   "extensionBundle": {
[2025-08-21T20:02:39.488Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T20:02:39.488Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T20:02:39.488Z]   },
[2025-08-21T20:02:39.488Z]   "watchDirectories": [
[2025-08-21T20:02:39.488Z]     "Shared"
[2025-08-21T20:02:39.488Z]   ]
[2025-08-21T20:02:39.488Z] }
[2025-08-21T20:02:39.490Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T20:02:39.490Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:39.491Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:39.491Z] Loading functions metadata
[2025-08-21T20:02:39.492Z] Worker indexing is enabled
[2025-08-21T20:02:39.492Z] Fetching metadata for workerRuntime: node
[2025-08-21T20:02:39.492Z] Reading functions metadata (Worker)
[2025-08-21T20:02:39.492Z] Shutting down language worker channels for runtime:node
[2025-08-21T20:02:39.498Z] Worker 591c63d6-262f-43a4-8261-76fdcb71df83 exited with code 0
[2025-08-21T20:02:39.666Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 connecting on 127.0.0.1:54302
[2025-08-21T20:02:39.688Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received WorkerInitRequest
[2025-08-21T20:02:39.696Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionsMetadataRequest
[2025-08-21T20:02:39.696Z] Reading functions metadata (Host)
[2025-08-21T20:02:39.937Z] 21 functions found (Host)
[2025-08-21T20:02:39.937Z] 21 functions loaded
[2025-08-21T20:02:39.938Z] Looking for extension bundle Microsoft.Azure.Functions.ExtensionBundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle
[2025-08-21T20:02:39.938Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:39.938Z] Found a matching extension bundle at /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:39.938Z] Fetching information on versions of extension bundle Microsoft.Azure.Functions.ExtensionBundle available on https://cdn.functions.azure.com/public/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/index.json
[2025-08-21T20:02:40.103Z] Applying platform release channel configuration LATEST. Bundle version 4.25.1 will be used
[2025-08-21T20:02:40.103Z] Skipping bundle download since it already exists at path /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1
[2025-08-21T20:02:40.103Z] Loading extension bundle from /Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin
[2025-08-21T20:02:40.103Z] Script Startup resetting load context with base path: '/Users/carlosmarinburgos/.azure-functions-core-tools/Functions/ExtensionBundles/Microsoft.Azure.Functions.ExtensionBundle/4.25.1/bin'.
[2025-08-21T20:02:40.156Z] Reading host configuration file '/Users/carlosmarinburgos/designetica/backend/host.json'
[2025-08-21T20:02:40.157Z] Host configuration file read:
[2025-08-21T20:02:40.157Z] {
[2025-08-21T20:02:40.157Z]   "version": "2.0",
[2025-08-21T20:02:40.157Z]   "functionTimeout": "00:05:00",
[2025-08-21T20:02:40.157Z]   "logging": {
[2025-08-21T20:02:40.157Z]     "applicationInsights": {
[2025-08-21T20:02:40.157Z]       "samplingSettings": {
[2025-08-21T20:02:40.157Z]         "isEnabled": true,
[2025-08-21T20:02:40.157Z]         "excludedTypes": "Request"
[2025-08-21T20:02:40.157Z]       }
[2025-08-21T20:02:40.157Z]     },
[2025-08-21T20:02:40.157Z]     "logLevel": {
[2025-08-21T20:02:40.157Z]       "default": "Information",
[2025-08-21T20:02:40.157Z]       "Host.Results": "Information",
[2025-08-21T20:02:40.157Z]       "Function": "Information"
[2025-08-21T20:02:40.157Z]     }
[2025-08-21T20:02:40.157Z]   },
[2025-08-21T20:02:40.157Z]   "extensionBundle": {
[2025-08-21T20:02:40.157Z]     "id": "Microsoft.Azure.Functions.ExtensionBundle",
[2025-08-21T20:02:40.157Z]     "version": "[4.*, 5.0.0)"
[2025-08-21T20:02:40.157Z]   },
[2025-08-21T20:02:40.157Z]   "watchDirectories": [
[2025-08-21T20:02:40.157Z]     "Shared"
[2025-08-21T20:02:40.157Z]   ]
[2025-08-21T20:02:40.157Z] }
[2025-08-21T20:02:40.200Z] Initializing Warmup Extension.
[2025-08-21T20:02:40.201Z] Initializing Host. OperationId: '810f3cf2-eead-41ad-a9e7-7b51b3bd0052'.
[2025-08-21T20:02:40.201Z] Host initialization: ConsecutiveErrors=0, StartupCount=44, OperationId=810f3cf2-eead-41ad-a9e7-7b51b3bd0052
[2025-08-21T20:02:40.203Z] LoggerFilterOptions
[2025-08-21T20:02:40.203Z] {
[2025-08-21T20:02:40.203Z]   "MinLevel": "None",
[2025-08-21T20:02:40.203Z]   "Rules": [
[2025-08-21T20:02:40.203Z]     {
[2025-08-21T20:02:40.203Z]       "ProviderName": null,
[2025-08-21T20:02:40.203Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T20:02:40.203Z]       "LogLevel": "None",
[2025-08-21T20:02:40.203Z]       "Filter": null
[2025-08-21T20:02:40.203Z]     },
[2025-08-21T20:02:40.203Z]     {
[2025-08-21T20:02:40.203Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:40.203Z]       "CategoryName": null,
[2025-08-21T20:02:40.203Z]       "LogLevel": "None",
[2025-08-21T20:02:40.203Z]       "Filter": null
[2025-08-21T20:02:40.203Z]     },
[2025-08-21T20:02:40.203Z]     {
[2025-08-21T20:02:40.203Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:40.203Z]       "CategoryName": null,
[2025-08-21T20:02:40.203Z]       "LogLevel": null,
[2025-08-21T20:02:40.203Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:40.203Z]     },
[2025-08-21T20:02:40.203Z]     {
[2025-08-21T20:02:40.203Z]       "ProviderName": null,
[2025-08-21T20:02:40.203Z]       "CategoryName": null,
[2025-08-21T20:02:40.203Z]       "LogLevel": null,
[2025-08-21T20:02:40.203Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:40.203Z]     },
[2025-08-21T20:02:40.203Z]     {
[2025-08-21T20:02:40.203Z]       "ProviderName": null,
[2025-08-21T20:02:40.203Z]       "CategoryName": null,
[2025-08-21T20:02:40.203Z]       "LogLevel": null,
[2025-08-21T20:02:40.203Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:40.203Z]     },
[2025-08-21T20:02:40.203Z]     {
[2025-08-21T20:02:40.203Z]       "ProviderName": null,
[2025-08-21T20:02:40.203Z]       "CategoryName": "Host.Results",
[2025-08-21T20:02:40.203Z]       "LogLevel": "Information",
[2025-08-21T20:02:40.203Z]       "Filter": null
[2025-08-21T20:02:40.203Z]     },
[2025-08-21T20:02:40.203Z]     {
[2025-08-21T20:02:40.203Z]       "ProviderName": null,
[2025-08-21T20:02:40.203Z]       "CategoryName": "Function",
[2025-08-21T20:02:40.203Z]       "LogLevel": "Information",
[2025-08-21T20:02:40.203Z]       "Filter": null
[2025-08-21T20:02:40.203Z]     },
[2025-08-21T20:02:40.203Z]     {
[2025-08-21T20:02:40.203Z]       "ProviderName": null,
[2025-08-21T20:02:40.204Z]       "CategoryName": null,
[2025-08-21T20:02:40.204Z]       "LogLevel": "Information",
[2025-08-21T20:02:40.204Z]       "Filter": null
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:40.204Z]       "CategoryName": null,
[2025-08-21T20:02:40.204Z]       "LogLevel": "None",
[2025-08-21T20:02:40.204Z]       "Filter": null
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:40.204Z]       "CategoryName": null,
[2025-08-21T20:02:40.204Z]       "LogLevel": null,
[2025-08-21T20:02:40.204Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:40.204Z]       "CategoryName": null,
[2025-08-21T20:02:40.204Z]       "LogLevel": null,
[2025-08-21T20:02:40.204Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:40.204Z]     }
[2025-08-21T20:02:40.204Z]   ]
[2025-08-21T20:02:40.204Z] }
[2025-08-21T20:02:40.204Z] LoggerFilterOptions
[2025-08-21T20:02:40.204Z] {
[2025-08-21T20:02:40.204Z]   "MinLevel": "None",
[2025-08-21T20:02:40.204Z]   "Rules": [
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": null,
[2025-08-21T20:02:40.204Z]       "CategoryName": "Microsoft.Hosting.Lifetime",
[2025-08-21T20:02:40.204Z]       "LogLevel": "None",
[2025-08-21T20:02:40.204Z]       "Filter": null
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:40.204Z]       "CategoryName": null,
[2025-08-21T20:02:40.204Z]       "LogLevel": "None",
[2025-08-21T20:02:40.204Z]       "Filter": null
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:40.204Z]       "CategoryName": null,
[2025-08-21T20:02:40.204Z]       "LogLevel": null,
[2025-08-21T20:02:40.204Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": null,
[2025-08-21T20:02:40.204Z]       "CategoryName": null,
[2025-08-21T20:02:40.204Z]       "LogLevel": null,
[2025-08-21T20:02:40.204Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": null,
[2025-08-21T20:02:40.204Z]       "CategoryName": null,
[2025-08-21T20:02:40.204Z]       "LogLevel": null,
[2025-08-21T20:02:40.204Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": null,
[2025-08-21T20:02:40.204Z]       "CategoryName": "Host.Results",
[2025-08-21T20:02:40.204Z]       "LogLevel": "Information",
[2025-08-21T20:02:40.204Z]       "Filter": null
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": null,
[2025-08-21T20:02:40.204Z]       "CategoryName": "Function",
[2025-08-21T20:02:40.204Z]       "LogLevel": "Information",
[2025-08-21T20:02:40.204Z]       "Filter": null
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": null,
[2025-08-21T20:02:40.204Z]       "CategoryName": null,
[2025-08-21T20:02:40.204Z]       "LogLevel": "Information",
[2025-08-21T20:02:40.204Z]       "Filter": null
[2025-08-21T20:02:40.204Z]     },
[2025-08-21T20:02:40.204Z]     {
[2025-08-21T20:02:40.204Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:40.204Z]       "CategoryName": null,
[2025-08-21T20:02:40.204Z]       "LogLevel": "None",
[2025-08-21T20:02:40.205Z]       "Filter": null
[2025-08-21T20:02:40.205Z]     },
[2025-08-21T20:02:40.205Z]     {
[2025-08-21T20:02:40.205Z]       "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
[2025-08-21T20:02:40.205Z]       "CategoryName": null,
[2025-08-21T20:02:40.205Z]       "LogLevel": null,
[2025-08-21T20:02:40.205Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:40.205Z]     },
[2025-08-21T20:02:40.205Z]     {
[2025-08-21T20:02:40.205Z]       "ProviderName": "Azure.Functions.Cli.Diagnostics.ColoredConsoleLoggerProvider",
[2025-08-21T20:02:40.205Z]       "CategoryName": null,
[2025-08-21T20:02:40.205Z]       "LogLevel": null,
[2025-08-21T20:02:40.205Z]       "Filter": "<AddFilter>b__0"
[2025-08-21T20:02:40.205Z]     }
[2025-08-21T20:02:40.205Z]   ]
[2025-08-21T20:02:40.205Z] }
[2025-08-21T20:02:40.205Z] FunctionResultAggregatorOptions
[2025-08-21T20:02:40.205Z] {
[2025-08-21T20:02:40.205Z]   "BatchSize": 1000,
[2025-08-21T20:02:40.205Z]   "FlushTimeout": "00:00:30",
[2025-08-21T20:02:40.205Z]   "IsEnabled": true
[2025-08-21T20:02:40.205Z] }
[2025-08-21T20:02:40.205Z] ConcurrencyOptions
[2025-08-21T20:02:40.205Z] {
[2025-08-21T20:02:40.205Z]   "DynamicConcurrencyEnabled": false,
[2025-08-21T20:02:40.205Z]   "MaximumFunctionConcurrency": 500,
[2025-08-21T20:02:40.205Z]   "CPUThreshold": 0.8,
[2025-08-21T20:02:40.205Z]   "SnapshotPersistenceEnabled": true
[2025-08-21T20:02:40.205Z] }
[2025-08-21T20:02:40.205Z] SingletonOptions
[2025-08-21T20:02:40.205Z] {
[2025-08-21T20:02:40.205Z]   "LockPeriod": "00:00:15",
[2025-08-21T20:02:40.205Z]   "ListenerLockPeriod": "00:00:15",
[2025-08-21T20:02:40.205Z]   "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
[2025-08-21T20:02:40.205Z]   "LockAcquisitionPollingInterval": "00:00:05",
[2025-08-21T20:02:40.205Z]   "ListenerLockRecoveryPollingInterval": "00:01:00"
[2025-08-21T20:02:40.205Z] }
[2025-08-21T20:02:40.205Z] ScaleOptions
[2025-08-21T20:02:40.205Z] {
[2025-08-21T20:02:40.205Z]   "ScaleMetricsMaxAge": "00:02:00",
[2025-08-21T20:02:40.205Z]   "ScaleMetricsSampleInterval": "00:00:10",
[2025-08-21T20:02:40.205Z]   "MetricsPurgeEnabled": true,
[2025-08-21T20:02:40.205Z]   "IsTargetScalingEnabled": true,
[2025-08-21T20:02:40.205Z]   "IsRuntimeScalingEnabled": false
[2025-08-21T20:02:40.205Z] }
[2025-08-21T20:02:40.205Z] Starting JobHost
[2025-08-21T20:02:40.205Z] Starting Host (HostId=carlossmacbookpro-1492551428, InstanceId=41ca932d-4ca8-424a-801e-aa5bc90b9b90, Version=4.1040.300.25317, ProcessId=22008, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=(null))
[2025-08-21T20:02:40.205Z] Loading functions metadata
[2025-08-21T20:02:40.205Z] Worker indexing is enabled
[2025-08-21T20:02:40.205Z] Fetching metadata for workerRuntime: node
[2025-08-21T20:02:40.205Z] Reading functions metadata (Worker)
[2025-08-21T20:02:40.205Z] Reading functions metadata (Host)
[2025-08-21T20:02:40.426Z] 21 functions found (Host)
[2025-08-21T20:02:40.426Z] Reading functions metadata (Custom)
[2025-08-21T20:02:40.427Z] 0 functions found (Custom)
[2025-08-21T20:02:40.427Z] 21 functions loaded
[2025-08-21T20:02:40.429Z] Generating 21 job function(s)
[2025-08-21T20:02:40.429Z] Worker process started and initialized.
[2025-08-21T20:02:40.446Z] Found the following functions:
[2025-08-21T20:02:40.446Z] Host.Functions.aiBuilderHealth
[2025-08-21T20:02:40.446Z] Host.Functions.analytics
[2025-08-21T20:02:40.446Z] Host.Functions.analyzeUIImage
[2025-08-21T20:02:40.446Z] Host.Functions.atlasComponents
[2025-08-21T20:02:40.446Z] Host.Functions.fast-suggestions
[2025-08-21T20:02:40.446Z] Host.Functions.figmaOAuthCallback
[2025-08-21T20:02:40.446Z] Host.Functions.figmaOAuthStart
[2025-08-21T20:02:40.446Z] Host.Functions.generateSuggestions
[2025-08-21T20:02:40.446Z] Host.Functions.generateWireframe
[2025-08-21T20:02:40.446Z] Host.Functions.generateWireframeAlias
[2025-08-21T20:02:40.446Z] Host.Functions.generateWireframeEnhanced
[2025-08-21T20:02:40.446Z] Host.Functions.generateWireframeOptionB
[2025-08-21T20:02:40.446Z] Host.Functions.get-template
[2025-08-21T20:02:40.446Z] Host.Functions.githubAuthCallback
[2025-08-21T20:02:40.446Z] Host.Functions.githubAuthStart
[2025-08-21T20:02:40.446Z] Host.Functions.health
[2025-08-21T20:02:40.446Z] Host.Functions.healthCheck
[2025-08-21T20:02:40.446Z] Host.Functions.openai-health
[2025-08-21T20:02:40.446Z] Host.Functions.performance-stats
[2025-08-21T20:02:40.446Z] Host.Functions.testFunction
[2025-08-21T20:02:40.447Z] Host.Functions.testSimple
[2025-08-21T20:02:40.447Z] 
[2025-08-21T20:02:40.447Z] HttpOptions
[2025-08-21T20:02:40.447Z] {
[2025-08-21T20:02:40.447Z]   "DynamicThrottlesEnabled": false,
[2025-08-21T20:02:40.447Z]   "EnableChunkedRequestBinding": false,
[2025-08-21T20:02:40.447Z]   "MaxConcurrentRequests": -1,
[2025-08-21T20:02:40.447Z] Initializing function HTTP routes
[2025-08-21T20:02:40.447Z]   "MaxOutstandingRequests": -1,
[2025-08-21T20:02:40.447Z] Mapped function route 'api/ai-builder/health' [get] to 'aiBuilderHealth'
[2025-08-21T20:02:40.447Z]   "RoutePrefix": "api"
[2025-08-21T20:02:40.447Z] }
[2025-08-21T20:02:40.447Z] Mapped function route 'api/analytics' [get,options] to 'analytics'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/analyzeUIImage' [post,options] to 'analyzeUIImage'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/figma/atlas-hero/{nodeId:regex(^[0-9:-]+$)}' [get,options] to 'atlasComponents'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/fast-suggestions' [get,post,options] to 'fast-suggestions'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/figmaOAuthCallback' [get,options] to 'figmaOAuthCallback'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/figmaOAuthStart' [get,post,options] to 'figmaOAuthStart'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/generate-suggestions' [get,post,options] to 'generateSuggestions'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/generate-html-wireframe' [post,options] to 'generateWireframe'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/generate-wireframe' [post,options] to 'generateWireframeAlias'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/generate-wireframe-enhanced' [get,post,options] to 'generateWireframeEnhanced'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/generateWireframeOptionB' [get,post,options] to 'generateWireframeOptionB'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/get-template' [post,options] to 'get-template'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/github/auth/callback' [get] to 'githubAuthCallback'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/github/auth/start' [get] to 'githubAuthStart'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/health' [get] to 'health'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/healthCheck' [get] to 'healthCheck'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/openai-health' [get,options] to 'openai-health'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/performance-stats' [get] to 'performance-stats'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/test-wireframe' [get,post,options] to 'testFunction'
[2025-08-21T20:02:40.447Z] Mapped function route 'api/test-simple' [get,post] to 'testSimple'
[2025-08-21T20:02:40.447Z] 
[2025-08-21T20:02:40.447Z] Host initialized (242ms)
[2025-08-21T20:02:40.447Z] Host started (242ms)
[2025-08-21T20:02:40.447Z] Job host started
[2025-08-21T20:02:40.447Z] The 'frontend' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T20:02:40.447Z] The 'wireframeAnalyze' function is in error: Error reading JObject from JsonReader. Path '', line 0, position 0.
[2025-08-21T20:02:40.483Z] 🔧 Initializing OpenAI for image analysis...
[2025-08-21T20:02:40.484Z] ✅ OpenAI initialized for image analysis
[2025-08-21T20:02:40.484Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:40.484Z] 🎯 Using deployment: gpt-4o
[2025-08-21T20:02:40.520Z] 📁 AZURE_OPENAI_KEY already set, skipping local.settings.json
[2025-08-21T20:02:40.520Z] 🔍 Current env vars:
[2025-08-21T20:02:40.520Z]   AZURE_OPENAI_KEY: CnGZHVd6QV...
[2025-08-21T20:02:40.520Z]   AZURE_OPENAI_ENDPOINT: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/
[2025-08-21T20:02:40.520Z] 🔍 DEBUG OpenAI Config:
[2025-08-21T20:02:40.520Z]   Endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:40.520Z]   Deployment: gpt-4o
[2025-08-21T20:02:40.520Z]   API Version: 2024-08-01-preview
[2025-08-21T20:02:40.520Z]   API Key starts with: CnGZHVd6QV...
[2025-08-21T20:02:40.520Z]   Base URL: https://cog-designetica-vdlmicyosd4ua.openai.azure.com/openai/deployments/gpt-4o
[2025-08-21T20:02:40.520Z] ✅ OpenAI client initialized successfully
[2025-08-21T20:02:40.520Z] 🔑 Using endpoint: https://cog-designetica-vdlmicyosd4ua.openai.azure.com
[2025-08-21T20:02:40.521Z] 🎯 Using deployment: gpt-4o
[2025-08-21T20:02:40.522Z] ✅ OpenAI client initialized for generateWireframeEnhanced
[2025-08-21T20:02:40.527Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.527Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.527Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.527Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.527Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.528Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.528Z] Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:40.528Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest[2025-08-21T20:02:40.528Z] Worker failed to load function: 'figmaOAuthStart' with functionId: '3c17cfd7-9e68-4bba-a2af-8573e3f389b8'.
[2025-08-21T20:02:40.528Z] Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:40.528Z] Worker failed to load function: 'figmaOAuthCallback' with functionId: '639a82eb-2ba7-41b6-ae44-969195f7461c'.

[2025-08-21T20:02:40.528Z] Result: Failure
[2025-08-21T20:02:40.528Z] Exception: Worker was unable to load function figmaOAuthCallback: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:40.528Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.528Z] Result: Failure
[2025-08-21T20:02:40.528Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.528Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.528Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthCallback/index.js:2
[2025-08-21T20:02:40.528Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T20:02:40.528Z] Exception: Worker was unable to load function figmaOAuthStart: 'await is only valid in async functions and the top level bodies of modules'
[2025-08-21T20:02:40.528Z]                    ^^^^^
[2025-08-21T20:02:40.528Z] 
[2025-08-21T20:02:40.528Z] Stack: /Users/carlosmarinburgos/designetica/backend/figmaOAuthStart/index.js:2
[2025-08-21T20:02:40.528Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.528Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T20:02:40.528Z] const figmaSetup = await import("../../figma-oauth2-setup.js");
[2025-08-21T20:02:40.528Z]                    ^^^^^
[2025-08-21T20:02:40.528Z] 
[2025-08-21T20:02:40.528Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)[2025-08-21T20:02:40.528Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.528Z] SyntaxError: await is only valid in async functions and the top level bodies of modules
[2025-08-21T20:02:40.529Z]     at wrapSafe (node:internal/modules/cjs/loader:1378:20)

[2025-08-21T20:02:40.529Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T20:02:40.529Z]     at Module._compile (node:internal/modules/cjs/loader:1428:41)
[2025-08-21T20:02:40.529Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T20:02:40.529Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T20:02:40.529Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.529Z]     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
[2025-08-21T20:02:40.529Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T20:02:40.529Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.529Z]     at Module.load (node:internal/modules/cjs/loader:1288:32)
[2025-08-21T20:02:40.529Z]     at Module._load (node:internal/modules/cjs/loader:1104:12)
[2025-08-21T20:02:40.529Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T20:02:40.529Z]     at Module.require (node:internal/modules/cjs/loader:1311:19)
[2025-08-21T20:02:40.529Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.529Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)
[2025-08-21T20:02:40.529Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T20:02:40.529Z]     at Object.apply (/Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:52368)[2025-08-21T20:02:40.529Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest

[2025-08-21T20:02:40.529Z]     at require (node:internal/modules/helpers:179:18)
[2025-08-21T20:02:40.529Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T20:02:40.529Z]     at /Users/carlosmarinburgos/.nvm/versions/node/v20.17.0/lib/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js:2:49951
[2025-08-21T20:02:40.529Z]     at Generator.next (<anonymous>).
[2025-08-21T20:02:40.529Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.529Z]     at Generator.next (<anonymous>).
[2025-08-21T20:02:40.529Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.529Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.529Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.529Z] Worker d732201e-73eb-4b09-a844-d843527bfd15 received FunctionLoadRequest
[2025-08-21T20:02:40.552Z] Host restarted.
[2025-08-21T20:02:45.212Z] Host lock lease acquired by instance ID '00000000000000000000000049CADE8B'.
