<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct Button Test</title>

    <!-- Test the exact output from our API -->
    <link rel="stylesheet" href="https://unpkg.com/@fluentui/web-components/dist/fluent-design-system.css">
    <script type="module" src="https://unpkg.com/@fluentui/web-components/dist/web-components.min.js"></script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            padding: 20px;
            background-color: #FAFAFA;
        }

        /* Hide wireframe placeholders */
        .text-placeholder-heading,
        .text-placeholder-line,
        .text-placeholder-button {
            display: none !important;
        }

        /* Force Fluent buttons to be visible */
        fluent-button {
            display: inline-block !important;
            visibility: visible !important;
            opacity: 1 !important;
            padding: 8px 16px !important;
            margin: 4px !important;
            background: #0078d4 !important;
            color: white !important;
            border: none !important;
            border-radius: 4px !important;
            cursor: pointer !important;
            font-size: 14px !important;
            font-weight: 500 !important;
        }

        fluent-button:hover {
            background: #005a9e !important;
        }

        .button-group {
            display: flex !important;
            gap: 12px !important;
            margin: 20px 0 !important;
            justify-content: center !important;
            padding: 20px !important;
            background: #f5f5f5 !important;
            border-radius: 8px !important;
        }
    </style>
</head>

<body>
    <h1>Direct API Output Test</h1>

    <h2>Three Buttons from API:</h2>
    <div class="button-group">
        <fluent-button>Button 1</fluent-button>
        <fluent-button>Button 2</fluent-button>
        <fluent-button>Button 3</fluent-button>
    </div>

    <div id="api-test"></div>

    <script>
        // Test loading and displaying the exact API response
        async function testAPI() {
            try {
                const response = await fetch('http://localhost:7072/api/generate-html-wireframe', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        description: 'a webpage with three buttons',
                        theme: 'microsoftlearn',
                        colorScheme: 'primary',
                        fastMode: false
                    })
                });

                const data = await response.json();
                console.log('✅ API Response:', data);

                // Display the raw HTML in an iframe to see exact output
                const iframe = document.createElement('iframe');
                iframe.style.width = '100%';
                iframe.style.height = '400px';
                iframe.style.border = '1px solid #ccc';
                iframe.style.marginTop = '20px';

                document.getElementById('api-test').appendChild(iframe);

                const iframeDoc = iframe.contentDocument;
                iframeDoc.open();
                iframeDoc.write(data.html);
                iframeDoc.close();

                console.log('✅ API HTML loaded in iframe');

            } catch (error) {
                console.error('❌ API Test failed:', error);
                document.getElementById('api-test').innerHTML = `<p style="color: red;">API Test Failed: ${error.message}</p>`;
            }
        }

        // Run test after page loads
        window.addEventListener('DOMContentLoaded', testAPI);
    </script>
</body>

</html>